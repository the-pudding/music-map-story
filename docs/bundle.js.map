{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack:///./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack:///./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack:///./node_modules/@babel/runtime/regenerator/index.js","webpack:///./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack:///./node_modules/gl-matrix/esm/common.js","webpack:///./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///./node_modules/gl-matrix/esm/mat4.js","webpack:///./node_modules/@math.gl/core/dist/esm/lib/common.js","webpack:///./node_modules/probe.gl/env.js","webpack:///./node_modules/@math.gl/core/dist/esm/lib/validators.js","webpack:///./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/utils/webgl-checks.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/utils/assert.js","webpack:///./node_modules/gl-matrix/esm/vec2.js","webpack:///./node_modules/gl-matrix/esm/vec3.js","webpack:///./node_modules/probe.gl/dist/esm/env/globals.js","webpack:///./node_modules/@math.gl/core/dist/esm/lib/assert.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/state-tracker/webgl-parameter-tables.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/state-tracker/track-context-state.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/process/browser.js","webpack:///./node_modules/gl-matrix/esm/vec4.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/state-tracker/unified-parameter-api.js","webpack:///./node_modules/mjolnir.js/dist/esm/utils/globals.js","webpack:///./node_modules/@babel/runtime/helpers/typeof.js","webpack:///./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack:///./node_modules/@babel/runtime/helpers/esm/construct.js","webpack:///./node_modules/@math.gl/core/dist/esm/lib/gl-matrix-extras.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/polyfill/get-parameter-polyfill.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/polyfill/polyfill-table.js","webpack:///./node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack:///./node_modules/@probe.gl/stats/dist/esm/utils/hi-res-timestamp.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/utils/utils.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/utils/globals.js","webpack:///./node_modules/hammerjs/hammer.js","webpack:///./node_modules/@math.gl/core/dist/esm/index.js","webpack:///./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack:///./node_modules/probe.gl/dist/esm/env/is-browser.js","webpack:///./node_modules/probe.gl/dist/esm/env/is-electron.js","webpack:///./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack:///./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack:///./node_modules/@math.gl/core/dist/esm/classes/base/math-array.js","webpack:///./node_modules/probe.gl/dist/es5/env/is-electron.js","webpack:///./node_modules/probe.gl/dist/es5/env/globals.js","webpack:///./node_modules/probe.gl/dist/es5/env/is-browser.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/polyfill/polyfill-context.js","webpack:///./node_modules/@math.gl/core/dist/esm/classes/base/vector.js","webpack:///./node_modules/@math.gl/core/dist/esm/classes/vector3.js","webpack:///./node_modules/@math.gl/core/dist/esm/classes/base/matrix.js","webpack:///./node_modules/@math.gl/core/dist/esm/classes/matrix4.js","webpack:///./node_modules/lodash.debounce/index.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/polyfill/polyfill-vertex-array-object.js","webpack:///./node_modules/scrollama/build/scrollama.js","webpack:///./node_modules/probe.gl/dist/es5/env/index.js","webpack:///./node_modules/@babel/runtime/helpers/interopRequireWildcard.js","webpack:///./node_modules/probe.gl/dist/es5/env/get-browser.js","webpack:///./node_modules/regenerator-runtime/runtime.js","webpack:///./node_modules/intersection-observer/intersection-observer.js","webpack:///./src/js/utils/is-mobile.js","webpack:///./src/js/utils/link-fix.js","webpack:///./src/js/utils/dom.js","webpack:///./src/js/utils/modal-a11y.js","webpack:///./src/js/graphic.js","webpack:///./src/js/footer.js","webpack:///./src/js/utils/locate-test.js","webpack:///./src/js/utils/locate.js","webpack:///./src/js/utils/closest.js","webpack:///./src/js/load-data.js","webpack:///./node_modules/@babel/runtime/helpers/esm/get.js","webpack:///./node_modules/@babel/runtime/helpers/esm/superPropBase.js","webpack:///./node_modules/probe.gl/dist/esm/utils/globals.js","webpack:///./node_modules/probe.gl/dist/esm/utils/local-storage.js","webpack:///./node_modules/probe.gl/dist/esm/utils/formatters.js","webpack:///./node_modules/probe.gl/dist/esm/utils/color.js","webpack:///./node_modules/probe.gl/dist/esm/utils/autobind.js","webpack:///./node_modules/probe.gl/dist/esm/utils/assert.js","webpack:///./node_modules/probe.gl/dist/esm/utils/hi-res-timestamp.js","webpack:///./node_modules/probe.gl/dist/esm/lib/log.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/log.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/modules/fp32/fp32.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/constants.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project.glsl.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/memoize.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/assert.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/project/viewport-uniforms.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/project32/project32.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/modules/lights/lights.glsl.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/modules/lights/lights.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/modules/phong-lighting/phong-lighting.glsl.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/modules/phong-lighting/phong-lighting.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/modules/picking/picking.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/picking/picking.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/utils/log.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/utils/device-pixels.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/context/context.js","webpack:///./node_modules/@probe.gl/stats/dist/esm/lib/stat.js","webpack:///./node_modules/@probe.gl/stats/dist/esm/lib/stats.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/init.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/utils/assert.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/constants-to-keys.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/utils/utils.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/utils/stub-methods.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/resource.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/typed-array-utils.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/utils/check-props.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/accessor.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/buffer.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/texture-formats.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/texture.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/utils/load-file.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/texture-2d.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/renderbuffer-formats.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/renderbuffer.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/clear.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/format-utils.js","webpack:///./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/texture-cube.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/texture-3d.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/copy-and-blit.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/texture-utils.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/framebuffer.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/features/features.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/features/webgl-features-table.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/attribute/shader-attribute.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/typed-array-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/math-utils.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/attribute/data-column.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/attribute/gl-utils.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/iterable-utils.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/flatten.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/range.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/array-utils.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-transition-utils.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute.js","webpack:///./node_modules/@deck.gl/core/dist/esm/debug/index.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/utils/assert.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/utils/shader-utils.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/transform-feedback.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/transform/buffer-transform.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/glsl-utils/get-shader-version.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/modules/module-injectors.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/inject-shader.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/constants.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/modules/transform/transform.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/transform/texture-transform.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/transform/transform-shader-utils.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/filters/prop-types.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/shader-module.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/resolve-modules.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/utils/is-old-ie.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/utils/webgl-info.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/transpile-shader.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/assemble-shaders.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/uniforms.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/platform-defines.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/glsl-utils/get-shader-name.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/glsl-utils/format-glsl-error.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/glsl-utils/get-shader-type-name.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/shader.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/attribute-utils.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/program-configuration.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/program.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/lib/program-manager.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/utils/array-utils-flat.js","webpack:///./node_modules/probe.gl/dist/esm/env/get-browser.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/vertex-array-object.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/vertex-array.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/utils/format-value.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/debug/debug-vertex-array.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/debug/debug-uniforms.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/debug/debug-program-configuration.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/lib/model-utils.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/lib/model.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/transform/transform.js","webpack:///./node_modules/@deck.gl/core/dist/esm/transitions/transition.js","webpack:///./node_modules/@deck.gl/core/dist/esm/transitions/gpu-interpolation-transition.js","webpack:///./node_modules/@deck.gl/core/dist/esm/transitions/gpu-spring-transition.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-transition-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/transitions/cpu-interpolation-transition.js","webpack:///./node_modules/@deck.gl/core/dist/esm/transitions/cpu-spring-transition.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/uniform-transition-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lifecycle/constants.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lifecycle/props.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/count.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/shader.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/math-utils.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/assert.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/web-mercator-utils.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/fit-bounds.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/get-bounds.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/web-mercator-viewport.js","webpack:///./node_modules/@deck.gl/core/dist/esm/viewports/viewport.js","webpack:///./node_modules/@deck.gl/core/dist/esm/viewports/web-mercator-viewport.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/texture.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project-functions.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lifecycle/prop-types.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lifecycle/create-props.js","webpack:///./node_modules/@babel/runtime/helpers/esm/asyncIterator.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lifecycle/component-state.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lifecycle/component.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/layer-state.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/javascript-utils/is-type.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/assert.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/normalize-loader.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/path-utils/file-aliases.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/utils/mime-type-utils.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/utils/resource-utils.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/utils/response-utils.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/fetch/fetch-error-message.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/fetch/fetch-file.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/loggers.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/option-utils.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/worker-loader-utils/validate-loader-version.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/binary-utils/array-buffer-utils.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/iterator-utils/async-iteration.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/iterator-utils/make-iterator/string-iterator.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/iterator-utils/make-iterator/array-buffer-iterator.js","webpack:///./node_modules/@babel/runtime/helpers/esm/AwaitValue.js","webpack:///./node_modules/@babel/runtime/helpers/esm/awaitAsyncGenerator.js","webpack:///./node_modules/@babel/runtime/helpers/esm/AsyncGenerator.js","webpack:///./node_modules/@babel/runtime/helpers/esm/wrapAsyncGenerator.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/iterator-utils/make-iterator/blob-iterator.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/iterator-utils/make-iterator/stream-iterator.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/iterator-utils/make-iterator/make-iterator.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/get-data.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/context-utils.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/worker-utils/get-worker-url.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/worker-utils/get-transfer-list.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/worker-utils/worker-thread.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/worker-utils/worker-pool.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/worker-utils/worker-farm.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/parse-with-worker.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/api/register-loaders.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/api/select-loader.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/api/parse.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/api/load.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/layer.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/geometry/geometry.js","webpack:///./node_modules/@math.gl/polygon/dist/esm/polygon-utils.js","webpack:///./node_modules/@math.gl/polygon/dist/esm/polygon.js","webpack:///./node_modules/@deck.gl/layers/dist/esm/column-layer/column-geometry.js","webpack:///./node_modules/@deck.gl/layers/dist/esm/column-layer/column-layer.js","webpack:///./node_modules/@deck.gl/layers/dist/esm/column-layer/column-layer-vertex.glsl.js","webpack:///./node_modules/@deck.gl/layers/dist/esm/column-layer/column-layer-fragment.glsl.js","webpack:///./node_modules/d3-hexbin/src/hexbin.js","webpack:///./node_modules/@deck.gl/aggregation-layers/dist/esm/hexagon-layer/hexagon-aggregator.js","webpack:///./node_modules/@deck.gl/aggregation-layers/dist/esm/utils/scale-utils.js","webpack:///./node_modules/@deck.gl/aggregation-layers/dist/esm/utils/bin-sorter.js","webpack:///./node_modules/@deck.gl/aggregation-layers/dist/esm/utils/aggregation-operation-utils.js","webpack:///./node_modules/@deck.gl/aggregation-layers/dist/esm/utils/cpu-aggregator.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/composite-layer.js","webpack:///./node_modules/@deck.gl/aggregation-layers/dist/esm/utils/prop-utils.js","webpack:///./node_modules/@deck.gl/aggregation-layers/dist/esm/aggregation-layer.js","webpack:///./node_modules/@deck.gl/aggregation-layers/dist/esm/hexagon-layer/hexagon-layer.js","webpack:///./node_modules/@deck.gl/aggregation-layers/dist/esm/utils/color-utils.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/animation/timeline.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/resource/resource.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/resource/resource-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/index.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/misc/geometry.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/layer-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/deep-equal.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/view-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/positions.js","webpack:///./node_modules/@deck.gl/core/dist/esm/views/view.js","webpack:///./node_modules/@deck.gl/core/dist/esm/controllers/transition-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/controllers/controller.js","webpack:///./node_modules/@deck.gl/core/dist/esm/controllers/view-state.js","webpack:///./node_modules/@deck.gl/core/dist/esm/transitions/transition-interpolator.js","webpack:///./node_modules/@deck.gl/core/dist/esm/transitions/linear-interpolator.js","webpack:///./node_modules/@deck.gl/core/dist/esm/controllers/map-controller.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/normalize-viewport-props.js","webpack:///./node_modules/@deck.gl/core/dist/esm/views/map-view.js","webpack:///./node_modules/@deck.gl/core/dist/esm/effects/lighting/ambient-light.js","webpack:///./node_modules/@deck.gl/core/dist/esm/effects/lighting/directional-light.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/effect.js","webpack:///./node_modules/@deck.gl/core/dist/esm/passes/layers-pass.js","webpack:///./node_modules/@deck.gl/core/dist/esm/passes/pass.js","webpack:///./node_modules/@deck.gl/core/dist/esm/passes/shadow-pass.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/shadow/shadow.js","webpack:///./node_modules/@deck.gl/core/dist/esm/effects/lighting/lighting-effect.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/effect-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/passes/draw-layers-pass.js","webpack:///./node_modules/@deck.gl/core/dist/esm/passes/pick-layers-pass.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/deck-renderer.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/picking/query-object.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/picking/pick-info.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/deck-picker.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/tooltip.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/utils/assert.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/category-api/image-type.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/category-api/parsed-image-api.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/parsers/svg-utils.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image-bitmap.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/category-api/binary-image-api.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-node-image.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-image.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/image-loader.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/json-loader.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/init.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/query.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/request-animation-frame.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/lib/animation-loop.js","webpack:///./node_modules/mjolnir.js/dist/esm/utils/hammer-overrides.js","webpack:///./node_modules/mjolnir.js/dist/esm/utils/hammer.browser.js","webpack:///./node_modules/mjolnir.js/dist/esm/constants.js","webpack:///./node_modules/mjolnir.js/dist/esm/inputs/wheel-input.js","webpack:///./node_modules/mjolnir.js/dist/esm/inputs/move-input.js","webpack:///./node_modules/mjolnir.js/dist/esm/inputs/key-input.js","webpack:///./node_modules/mjolnir.js/dist/esm/inputs/contextmenu-input.js","webpack:///./node_modules/mjolnir.js/dist/esm/utils/event-utils.js","webpack:///./node_modules/mjolnir.js/dist/esm/utils/event-registrar.js","webpack:///./node_modules/mjolnir.js/dist/esm/event-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/deck.js","webpack:///./node_modules/@deck.gl/mapbox/dist/esm/deck-utils.js","webpack:///./node_modules/@deck.gl/mapbox/dist/esm/mapbox-layer.js","webpack:///./src/js/player.js","webpack:///./src/js/generateMap.js","webpack:///./src/js/choro.js","webpack:///./src/js/monoCulture.js","webpack:///./src/js/generateHex.js","webpack:///./src/js/main.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/globals.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_defineProperty","obj","configurable","writable","_defineProperties","target","props","length","descriptor","_createClass","Constructor","protoProps","staticProps","_classCallCheck","instance","TypeError","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","constructor","_slicedToArray","arr","Array","isArray","iterator","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","err","unsupportedIterableToArray","_possibleConstructorReturn","self","EPSILON","ARRAY_TYPE","Float32Array","RANDOM","Math","random","PI","hypot","y","arguments","sqrt","_typeof","_toConsumableArray","arrayLikeToArray","iter","from","transpose","out","a","a01","a02","a03","a12","a13","a23","invert","a00","a10","a11","a20","a21","a22","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","determinant","multiply","b","b0","b1","b2","b3","translate","v","x","z","scale","rotate","rad","axis","b12","b20","b21","b22","len","sin","cos","rotateX","rotateY","rotateZ","fromQuat","q","w","x2","y2","z2","xx","yx","yy","zx","zy","zz","wx","wy","wz","frustum","left","right","bottom","top","near","far","rl","tb","nf","perspective","fovy","aspect","f","tan","Infinity","ortho","lr","bt","lookAt","eye","center","up","x0","x1","y0","y1","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","abs","identity","equals","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","a14","a15","b4","b5","b6","b7","b8","b9","b13","b14","b15","max","config","round","formatValue","_ref","_ref$precision","precision","concat","parseFloat","toPrecision","ArrayBuffer","isView","DataView","map","func","result","array","clone","clamp","min","lerp","ai","epsilon","oldEpsilon","Number","isFinite","debug","printTypes","printDegrees","printRowMajor","validateVector","checkNumber","Error","checkVector","callerName","deprecated","method","version","console","warn","_assertThisInitialized","ReferenceError","isWebGL","gl","WebGLRenderingContext","WebGL2RenderingContext","Boolean","_version","isWebGL2","getWebGL2Context","assertWebGLContext","assertWebGL2Context","assert","condition","message","add","negate","ax","ay","transformMat4","vec","sub","cross","az","bx","by","bz","transformMat3","transformQuat","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","angle","mag","cosine","dot","acos","globals","window","global","document","process","window_","process_","_GL_PARAMETER_DEFAULT","_GL_PARAMETER_SETTERS","_GL_PARAMETER_GETTERS","GL_PARAMETER_DEFAULTS","Int32Array","enable","disable","hint","pixelStorei","GL_PARAMETER_SETTERS","blendColor","apply","clearColor","colorMask","cullFace","clearDepth","depthFunc","depthRange","depthMask","bindFramebuffer","frontFace","lineWidth","scissor","clearStencil","stencilMaskSeparate","viewport","_framebuffer","handle","args","blendEquationSeparate","blendFuncSeparate","polygonOffset","sampleCoverage","_value","_value2","mask","backMask","_args","_args2","ref","backFunc","backRef","stencilFuncSeparate","_args3","_args4","sfail","dpfail","dppass","backSfail","backDpfail","backDppass","stencilOpSeparate","getValue","glEnum","values","cache","GL_COMPOSITE_PARAMETER_SETTERS","blendEquation","blendFunc","stencilFuncFront","stencilFuncBack","stencilOpFront","stencilOpBack","GL_HOOKED_SETTERS","update","capability","pname","_hint","framebuffer","_update5","g","_update9","modeRGB","modeAlpha","_update10","src","dst","_update11","srcRGB","dstRGB","srcAlpha","dstAlpha","_update12","depth","zNear","zFar","face","width","factor","units","_update23","_update24","height","stencilMask","_update26","stencilFunc","_update28","_update29","stencilOp","fail","zfail","zpass","_update30","_update31","isEnabled","GL_PARAMETER_GETTERS","installGetterOverride","functionName","originalGetterFunc","state","installSetterSpy","setter","originalSetterFunc","_len","params","_key","_setter","_updateCache","valueChanged","oldValue","installProgramSpy","originalUseProgram","useProgram","program","GLState","_ref$copyState","copyState","_ref$log","log","this","stateStack","assign","seal","oldValues","pop","cached","trackContextState","options","_options$enable","global_","polyfillContext","pushContextState","popContextState","Function","e","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","setTimeout","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","marker","runClearTimeout","Item","noop","nextTick","title","browser","env","argv","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","_createForOfIteratorHelper","allowArrayLike","it","minLen","_arrayLikeToArray","toString","slice","test","_unsupportedIterableToArray","F","normalCompletion","didErr","step","_e2","arr2","setParameters","compositeSetters","glConstant","compositeSetter","getParameters","parameters","getParameter","_step","_iterator","keys","_key2","_getter","resetParameters","withParameters","_parameters$nocatch","nocatch","userAgent","navigator","toLowerCase","passiveSupported","addEventListener","removeEventListener","_setPrototypeOf","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","valueOf","Parent","Class","vec2_transformMat4AsVector","vec3_transformMat4AsVector","vec3_transformMat2","_WEBGL_PARAMETERS","_WEBGL2_CONTEXT_POLYF","WEBGL_PARAMETERS","ext","getExtension","GPU_DISJOINT_EXT","UNMASKED_VENDOR_WEBGL","UNMASKED_RENDERER_WEBGL","luma","extensions","MAX_TEXTURE_MAX_ANISOTROPY_EXT","MAX_COLOR_ATTACHMENTS_WEBGL","MAX_DRAW_BUFFERS_WEBGL","WEBGL2_CONTEXT_POLYFILLS","meta","suffix","createVertexArray","deleteVertexArray","bindVertexArray","isVertexArray","vertexAttribDivisor","location","divisor","drawElementsInstanced","drawArraysInstanced","drawBuffers","createQuery","deleteQuery","beginQuery","endQuery","getQuery","getQueryObject","getQueryParameter","WEBGL2_CONTEXT_OVERRIDES","readBuffer","originalFunc","attachment","getVertexAttrib","_getExtensionData","extension","webgl2","getExtensionData","getProgramParameter","getInternalformatParameter","format","getTexParameter","TEXTURE_MAX_ANISOTROPY_EXT","originalGetParameter","limit","getHiResTimestamp","timestamp","performance","now","hrtime","timeParts","Date","isObjectEmpty","deepArrayEqual","isArrayX","isArrayY","isBrowser","String","matches","match","exportName","VENDOR_PREFIXES","TEST_ELEMENT","createElement","setTimeoutContext","fn","context","bindFn","invokeArrayArg","arg","each","forEach","deprecate","deprecationMessage","stack","replace","output","index","source","nextKey","extend","dest","merge","inherit","child","base","properties","childP","baseP","_super","boolOrFn","val","ifUndefined","val1","val2","addEventListeners","types","handler","splitStr","type","removeEventListeners","hasParent","node","parent","parentNode","inStr","str","find","indexOf","trim","split","inArray","findByKey","toArray","uniqueArray","sort","results","prefixed","prefix","prop","camelProp","toUpperCase","_uniqueId","getWindowForElement","element","doc","ownerDocument","defaultView","parentWindow","SUPPORT_TOUCH","SUPPORT_POINTER_EVENTS","SUPPORT_ONLY_TOUCH","PROPS_XY","PROPS_CLIENT_XY","Input","manager","callback","inputTarget","domHandler","ev","init","inputHandler","eventType","input","pointersLen","pointers","changedPointersLen","changedPointers","isFirst","isFinal","session","pointersLength","firstInput","simpleCloneInputData","firstMultiple","offsetCenter","getCenter","timeStamp","deltaTime","getAngle","distance","getDistance","offset","offsetDelta","prevDelta","prevInput","deltaX","deltaY","computeDeltaXY","offsetDirection","getDirection","overallVelocity","getVelocity","overallVelocityX","overallVelocityY","start","end","rotation","getRotation","maxPointers","velocity","velocityX","velocityY","direction","last","lastInterval","computeIntervalInputData","srcEvent","computeInputData","recognize","clientX","clientY","p1","p2","atan2","evEl","evTarget","evWin","destroy","MOUSE_INPUT_MAP","mousedown","mousemove","mouseup","MouseInput","pressed","button","which","pointerType","POINTER_INPUT_MAP","pointerdown","pointermove","pointerup","pointercancel","pointerout","IE10_POINTER_TYPE_ENUM","2","3","4","5","POINTER_ELEMENT_EVENTS","POINTER_WINDOW_EVENTS","PointerEventInput","store","pointerEvents","MSPointerEvent","PointerEvent","removePointer","eventTypeNormalized","isTouch","storeIndex","pointerId","splice","SINGLE_TOUCH_INPUT_MAP","touchstart","touchmove","touchend","touchcancel","SingleTouchInput","started","normalizeSingleTouches","all","touches","changed","changedTouches","TOUCH_INPUT_MAP","TouchInput","targetIds","getTouches","allTouches","identifier","targetTouches","changedTargetTouches","filter","touch","TouchMouseInput","mouse","primaryTouch","lastTouches","recordTouches","eventData","setLastTouch","lastTouch","lts","isSyntheticEvent","dx","dy","inputEvent","inputData","isMouse","sourceCapabilities","firesTouchEvents","PREFIXED_TOUCH_ACTION","style","NATIVE_TOUCH_ACTION","TOUCH_ACTION_MAP","touchMap","cssSupports","CSS","supports","getTouchActionProps","TouchAction","set","compute","actions","touchAction","recognizers","recognizer","getTouchAction","hasPanX","hasPanY","cleanTouchActions","join","preventDefaults","prevented","preventDefault","hasNone","isTapPointer","isTapMovement","isTapTouchTime","DIRECTION_LEFT","DIRECTION_UP","preventSrc","Recognizer","defaults","id","simultaneous","requireFail","stateStr","directionStr","getRecognizerByNameIfManager","otherRecognizer","AttrRecognizer","PanRecognizer","pX","pY","PinchRecognizer","PressRecognizer","_timer","_input","RotateRecognizer","SwipeRecognizer","TapRecognizer","pTime","pCenter","count","Hammer","preset","Manager","recognizeWith","dropRecognizeWith","requireFailure","dropRequireFailure","hasRequireFailures","canRecognizeWith","event","additionalEvent","tryEmit","canEmit","inputDataClone","reset","attrTest","optionPointers","isRecognized","isValid","threshold","DIRECTION_HORIZONTAL","directionTest","hasMoved","inOut","time","validPointers","validMovement","validTime","taps","interval","posThreshold","validTouchTime","failTimeout","validInterval","validMultiTap","tapCount","VERSION","domEvents","inputClass","cssProps","userSelect","touchSelect","touchCallout","contentZooming","userDrag","tapHighlightColor","handlers","oldCssProps","toggleCssProps","item","stop","force","stopped","curRecognizer","existing","remove","events","data","gestureEvent","createEvent","initEvent","gesture","dispatchEvent","triggerDomEvent","INPUT_START","INPUT_MOVE","INPUT_END","INPUT_CANCEL","STATE_POSSIBLE","STATE_BEGAN","STATE_CHANGED","STATE_ENDED","STATE_RECOGNIZED","STATE_CANCELLED","STATE_FAILED","DIRECTION_NONE","DIRECTION_RIGHT","DIRECTION_DOWN","DIRECTION_VERTICAL","DIRECTION_ALL","Tap","Pan","Swipe","Pinch","Rotate","Press","mathgl","isElectron","mockUserAgent","electron","realUserAgent","_cache","Map","has","Wrapper","_createSuper","Derived","hasNativeReflectConstruct","Super","NewTarget","_Array","MathArray","copy","arrayOrObject","fromObject","ELEMENTS","check","toObject","to","formatString","opts","string","vector","minVector","maxVector","vectors","_vectors","_len2","_i2","_vectors2","_scale","subtract","addScalar","scalar","validate","valid","_interopRequireDefault","_typeof2","self_","document_","console_","isBrowserMainThread","_isElectron","polyfillExtension","_ref2","target2","_defaults$meta","_meta$suffix","_loop","_Object$keys","extKey","polyfill","polyfilled","getSupportedExtensions","initializeExtensions","polyfills","_step2","_iterator2","getOwnPropertyNames","installPolyfills","installOverrides","_MathArray","Vector","lengthSquared","mathArray","distanceSquared","dist","product","magnitude","multiplyScalar","ORIGIN","constants","_Vector","Vector3","_this","ZERO","freeze","vec3","radians","_ref$origin","origin","_ref2$origin","_ref3","_ref3$origin","matrix4","transformAsPoint","matrix3","matrix2","quaternion","Matrix","row","RANK","col","columnIndex","fill","firstIndex","columnVector","IDENTITY","INDICES","COL0ROW0","COL0ROW1","COL0ROW2","COL0ROW3","COL1ROW0","COL1ROW1","COL1ROW2","COL1ROW3","COL2ROW0","COL2ROW1","COL2ROW2","COL2ROW3","COL3ROW0","COL3ROW1","COL3ROW2","COL3ROW3","_Matrix","Matrix4","m00","m10","m20","m30","m01","m11","m21","m31","m02","m12","m22","m32","m03","m13","m23","m33","mat4","_computeInfinitePerspectiveOffCenter","_eye","_ref2$near","_ref2$far","_ref3$fovy","_ref3$aspect","_ref3$focalDistance","focalDistance","_ref3$near","_ref3$far","halfY","_ref4","_ref4$fovy","_ref4$fov","fov","_ref4$aspect","_ref4$near","_ref4$far","scaleResult","getScale","inverseScale0","inverseScale1","inverseScale2","_ref5","_ref6","rx","ry","rz","vec4","vec2","transformAsVector","column0Row0","column1Row1","column2Row0","column2Row1","column3Row2","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","freeGlobal","freeSelf","root","objectToString","nativeMax","nativeMin","isObject","toNumber","isObjectLike","isSymbol","other","isBinary","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","invokeFunc","thisArg","leadingEdge","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","remainingWait","debounced","isInvoking","cancel","flush","glErrorShadow","synthesizeGLError","opt_msg","msg","error","WebGLVertexArrayObjectOES","isAlive","hasBeenBound","elementArrayBuffer","attribs","maxVertexAttribs","attrib","VertexAttrib","maxAttrib","enabled","buffer","size","normalized","stride","recache","OESVertexArrayObject","getError","wrapGLError","original","enableVertexAttribArray","disableVertexAttribArray","bindBuffer","vertexAttribPointer","VERTEX_ARRAY_BINDING_OES","currentVertexArrayObject","defaultVertexArrayObject","vao","currentArrayBuffer","indx","instrumentExtension","canvas","reset_","polyfillVertexArrayObject","original_getSupportedExtensions","list","original_getExtension","__OESVertexArrayObject","vertexArrayObjects","ii","bindVertexArrayOES","createVertexArrayOES","arrayObject","deleteVertexArrayOES","isVertexArrayOES","oldVAO","newVAO","currentBinding","oldAttrib","bufferChanged","getOffsetId","setup","offsetVal","stepClass","el","className","position","borderTop","zIndex","innerHTML","fontSize","fontFamily","color","margin","padding","appendChild","body","setupOffset","stepEl","notifyStep","elA","getElementById","elB","display","OBSERVER_NAMES","cb","io","stepOffsetHeight","stepOffsetTop","stepStates","offsetMargin","viewH","pageH","previousYOffset","progressThreshold","isReady","isDebug","progressMode","preserveOrder","triggerOnce","exclude","stepEnter","stepExit","stepProgress","getOffsetTop","getBoundingClientRect","pageYOffset","clientTop","getIndex","getAttribute","updateDirection","disconnectObserver","disconnect","handleResize","html","innerHeight","documentElement","scrollHeight","offsetHeight","clientHeight","updateIO","post","idVal","querySelector","innerText","handleEnable","notifyStepProgress","progress","resp","notifyOthers","ss","notifyStepEnter","notifyStepExit","i$1","ss$1","intersectStepAbove","entry","isIntersecting","boundingClientRect","topAdjusted","bottomAdjusted","intersectStepBelow","intersectViewportAbove","intersectViewportBelow","intersectStepProgress","intersectionRatio","updateStepProgressIO","rootMargin","ceil","ratio","createThreshold","obs","IntersectionObserver","observe","viewportAbove","marginTop","marginBottom","viewportBelow","stepAbove","stepBelow","anyScrollableParent","nodeType","getComputedStyle","overflowY","isYScrollable","S","order","selector","floor","querySelectorAll","Element","NodeList","scrollableParent","reduce","foundScrollable","offsetTrigger","setAttribute","isNaN","factory","_interopRequireWildcard","_globals","_isBrowser","_getBrowser","isMobile","_getRequireWildcardCache","WeakMap","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","desc","orientation","navigator_","isMSIE","isTrident","chrome","safari","mozInnerScreenX","runtime","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","define","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","Context","_invoke","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","resolve","reject","invoke","__await","then","unwrapped","info","resultName","nextLoc","pushTryEntry","locs","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","iterable","iteratorMethod","displayName","isGeneratorFunction","genFun","ctor","mark","awrap","async","Promise","reverse","skipTempReset","prev","charAt","rootRecord","rval","exception","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","IntersectionObserverEntry","startDoc","frame","getFrameElement","registry","crossOriginUpdater","crossOriginRect","THROTTLE_TIMEOUT","POLL_INTERVAL","USE_MUTATION_OBSERVER","_setupCrossOriginUpdater","intersectionRect","convertFromParentRect","observer","_checkForIntersections","_resetCrossOriginUpdater","_observationTargets","some","_registerInstance","_monitorIntersections","unobserve","_unmonitorIntersections","_unregisterInstance","_unmonitorAllIntersections","takeRecords","records","_queuedEntries","_initThresholds","opt_threshold","_parseRootMargin","opt_rootMargin","margins","parts","exec","unit","win","_monitoringDocuments","monitoringInterval","domObserver","setInterval","addEvent","MutationObserver","attributes","childList","characterData","subtree","_monitoringUnsubscribes","clearInterval","removeEvent","rootDoc","itemDoc","unsubscribe","unsubscribes","rootIsInDom","_rootIsInDom","rootRect","_getRootRect","targetRect","rootContainsTarget","_rootContainsTarget","oldEntry","_computeTargetAndRootIntersection","rootBounds","newEntry","_hasCrossedThreshold","_callback","rect1","rect2","getParentNode","atRoot","parentRect","parentComputedStyle","frameRect","frameIntersect","overflow","isDoc","clientWidth","_expandRectByRootMargin","rect","_rootMarginValues","newRect","oldRatio","newRatio","thresholds","containsDeep","frameElement","ensureDOMRect","targetArea","intersectionArea","toFixed","opt_options","timer","opt_useCapture","attachEvent","detatchEvent","parentBoundingRect","parentIntersectionRect","assignedSlot","host","android","blackberry","ios","opera","windows","any","linkFix","selectAll","link","d3","select","resize","fallbackData","image","url","hed","storyData","createLink","request","XMLHttpRequest","open","onload","status","JSON","parse","responseText","onerror","send","loadStories","href","includes","recircHTML","testing","city","country","hostname","ip","org","postal","region","timezone","catch","Deg2Rad","deg","PythagorasEquirectangular","lat1","lon1","lat2","lon2","NearestCity","latitude","longitude","locations","closest","mindif","dif","withinDistance","getDistanceFromLatLonInKm","dLat","dLon","loadFile","file","csv","json","receiver","__VERSION__","getStorage","storage","setItem","removeItem","LocalStorage","defaultSettings","_loadConfiguration","configuration","updateConfiguration","serialized","stringify","serializedConfiguration","getItem","formatImage","maxWidth","imageUrl","COLOR","BLACK","RED","GREEN","YELLOW","BLUE","MAGENTA","CYAN","WHITE","BRIGHT_BLACK","BRIGHT_RED","BRIGHT_GREEN","BRIGHT_YELLOW","BRIGHT_BLUE","BRIGHT_MAGENTA","BRIGHT_CYAN","BRIGHT_WHITE","getColor","autobind","predefined","proto","propNames","originalConsole","DEFAULT_SETTINGS","level","ONCE","getTableHeader","table","Log","_startTs","_deltaTs","LOG_THROTTLE_TIMEOUT","_storage","userData","_getLogFunction","oldUsage","newUsage","logLevel","_table","columns","tag","priority","_image","_ref2$message","_ref2$scale","_shouldLog","_ref4$message","_ref4$scale","img","Image","_console","nodeName","_console2","_img","_console3","toDataURL","logImageInBrowser","_ref3$scale","asciify","fit","logImageInNode","setting","timeEnd","collapsed","_opts","normalizeArguments","groupCollapsed","group","groupEnd","trace","getLevel","normalizeLogLevel","_method","total","getTotal","delta","getDelta","decorateMessage","newLevel","setLevel","newPriority","resolvedLevel","shift","unshift","messageType","padLength","repeat","leftPad","ms","background","fp32","vs","fs","COORDINATE_SYSTEM","DEFAULT","LNGLAT","METER_OFFSETS","LNGLAT_OFFSETS","CARTESIAN","PROJECTION_MODE","WEB_MERCATOR","GLOBE","WEB_MERCATOR_AUTO_OFFSET","EVENTS","click","panstart","panmove","panend","COORDINATE_SYSTEM_GLSL_CONSTANTS","PROJECTION_MODE_GLSL_CONSTANTS","isEqual","memoize","cachedResult","cachedArgs","ZERO_VECTOR","VECTOR_TO_POINT_MATRIX","IDENTITY_MATRIX","DEFAULT_PIXELS_PER_UNIT2","DEFAULT_COORDINATE_ORIGIN","getMemoizedViewportUniforms","devicePixelRatio","coordinateSystem","coordinateOrigin","_calculateMatrixAndOf","viewMatrixUncentered","projectionMatrix","viewMatrix","viewProjectionMatrix","projectionCenter","cameraPosCommon","cameraPosition","_getOffsetOrigin","getOffsetOrigin","geospatialOrigin","shaderCoordinateOrigin","offsetMode","positionCommonSpace","projectPosition","calculateMatrixAndOffset","distanceScales","getDistanceScales","viewportSize","uniforms","project_uCoordinateSystem","project_uProjectionMode","projectionMode","project_uCoordinateOrigin","project_uCenter","project_uViewportSize","project_uDevicePixelRatio","project_uFocalDistance","project_uCommonUnitsPerMeter","unitsPerMeter","project_uCommonUnitsPerWorldUnit","project_uCommonUnitsPerWorldUnit2","project_uScale","project_uViewProjectionMatrix","project_uCameraPosition","distanceScalesAtOrigin","unitsPerMeter2","unitsPerDegree","unitsPerDegree2","isGeospatial","fround","unprojectPosition","getUniformsFromViewport","_ref$devicePixelRatio","_ref$modelMatrix","modelMatrix","_ref$coordinateSystem","_ref$autoWrapLongitud","autoWrapLongitude","positionOrigin","project_uWrapLongitude","project_uModelMatrix","INITIAL_MODULE_OPTIONS","dependencies","getUniforms","lightSources","convertColor","_ref$color","_ref$intensity","intensity","component","getLightSourceUniforms","ambientLight","_ref2$pointLights","pointLights","_ref2$directionalLigh","directionalLights","lightSourceUniforms","pointLight","attenuation","lighting_uPointLightCount","directionalLight","lighting_uDirectionalLightCount","lights","hasLights","lighting_uEnabled","light","defines","MAX_LIGHTS","getMaterialUniforms","material","_material$ambient","ambient","_material$diffuse","diffuse","_material$shininess","shininess","_material$specularCol","specularColor","lighting_uAmbient","lighting_uDiffuse","lighting_uShininess","lighting_uSpecularColor","gouraudLighting","LIGHTING_VERTEX","DEFAULT_MODULE_OPTIONS","pickingSelectedColor","pickingHighlightColor","Uint8Array","pickingActive","pickingAttribute","picking","selectedColor","picking_uSelectedColorValid","picking_uSelectedColor","picking_uHighlightColor","picking_uActive","picking_uAttribute","inject","injection","cssToDeviceRatio","canvasSizeInfo","drawingBufferWidth","cssToDevicePixels","cssPixel","yInvert","drawingBufferHeight","scalePixels","getDevicePixelRatio","useDevicePixels","windowRatio","pixel","yHigh","xHigh","isPage","CONTEXT_DEFAULTS","webgl1","throwOnError","manageState","createGLContext","_options","onError","_options2","targetCanvas","getCanvas","createBrowserContext","logInfo","instrumentGLContext","_instrumented","getVersion","_options3","makeDebugContext","errorMessage","onCreateError","statusMessage","_options$webgl","_options$webgl2","getContext","onContextLost","onContextRestored","_ref$width","_ref$height","readyState","insertBefore","firstChild","webGL","vendorMasked","rendererMasked","vendor","renderer","shadingLanguageVersion","getContextDebugInfo","driver","setDevicePixelRatio","cachedSize","clampedPixelRatio","canvasWidth","canvasHeight","Stat","sampleSize","samples","addCount","subtractCount","_count","_samples","_checkSampling","_time","lastTiming","_startTime","_timerPending","addTime","lastSampleCount","lastSampleTime","Stats","stats","_initializeStats","_getOrCreate","stat","average","getAverageTime","hz","getHz","lumaStats","StatsManager","nodeIO","getKeyValue","number","getKey","uidCounters","uid","isPowerOfTwo","isEmpty","methodNames","upgradeMessage","methodName","removed","ERR_RESOURCE_METHOD_UNDEFINED","Resource","_opts$userData","gl2","_bound","_handle","_createHandle","byteLength","_addStats","_ref$deleteChildren","deleteChildren","children","_deleteHandle","_removeStats","funcOrHandle","_bindHandle","PARAMETERS","parameter","isWebgl2","parameterAvailable","webgl1Default","webgl2Default","defaultValue","_getParameter","parameterKeys","_setParameter","setParameter","incrementCount","decrementCount","bytes","getGLTypeFromTypedArray","arrayOrType","Uint16Array","Uint32Array","Uint8ClampedArray","Int8Array","Int16Array","getTypedArrayFromGLType","glType","_ref$clamped","clamped","flipRows","_ref2$bytesPerPixel","bytesPerPixel","temp","bytesPerRow","topOffset","bottomOffset","subarray","copyWithin","newWidth","newHeight","newData","checkProps","propChecks","_propChecks$removedPr","removedProps","_propChecks$deprecate","deprecatedProps","_propChecks$replacedP","replacedProps","propName","replacement","_propName","_replacementProp","newProps","_propName2","_replacementProp2","DEFAULT_ACCESSOR_VALUES","integer","PROP_CHECKS","instanced","isInstanced","Accessor","accessors","accessor","_assign","BYTES_PER_ELEMENT","getBytesPerElement","getBytesPerVertex","_TEXTURE_FORMATS","_DATA_FORMAT_CHANNELS","_TYPE_SIZES","DEPRECATED_PROPS","PROP_CHECKS_INITIALIZE","PROP_CHECKS_SET_PROPS","_Resource","Buffer","stubRemovedMethods","initialize","usage","debugData","setAccessor","_setData","_setByteLength","bytesUsed","_props","_props$offset","_props$srcOffset","srcOffset","bufferSubData","_inferType","sourceBuffer","_ref$readOffset","readOffset","_ref$writeOffset","writeOffset","copyBufferSubData","_ref2$dstData","dstData","_ref2$srcByteOffset","srcByteOffset","_ref2$dstOffset","dstOffset","_ref2$length","dstAvailableElementCount","dstElementCount","ArrayType","sourceAvailableElementCount","_getAvailableElementCount","dstElementOffset","copyElementCount","getBufferSubData","_ref3$target","_ref3$index","_ref3$offset","bindBufferRange","bindBufferBase","_ref4$target","_ref4$index","isIndexedBuffer","getData","_trackDeallocatedMemory","_getTarget","bufferData","_trackAllocatedMemory","sourceElementOffset","getElementCount","createBuffer","deleteBuffer","getBufferParameter","reallocate","TEXTURE_FORMATS","dataFormat","DATA_FORMAT_CHANNELS","TYPE_SIZES","isFormatSupported","gl1","isLinearFilteringSupported","NPOT_MIN_FILTERS","WebGLBuffer","Texture","_props$id","textureUnit","loaded","border","mipmaps","linearFiltering","supported","_this2","resolvedImageData","pixels","isVideo","HTMLVideoElement","HAVE_METADATA","_video","_props$pixels","_props$format","_props$border","_props$recreate","recreate","_props$parameters","_props$pixelStore","pixelStore","_props$textureUnit","_props$compressed","compressed","_props$mipmaps","_props$depth","_this$_deduceParamete","_deduceParameters","activeTexture","bindTexture","_isNPOT","_updateForNPOT","setImageData","generateMipmap","video","lastTime","HAVE_CURRENT_DATA","currentTime","_this$_video","setSubImageData","_ref$mipmaps","_this3","_options$target","_options$pixels","_options$level","_options$format","_options$border","_options$offset","_options$parameters","_options$data","_options$type","_options$width","_options$height","_options$dataFormat","_options$compressed","_this$_deduceParamete2","dataType","_this$_getDataType","_getDataType","texImage2D","entries","_step$value","levelIndex","levelData","compressedTexImage2D","channels","channelSize","_this4","_ref2$target","_ref2$pixels","_ref2$data","_ref2$x","_ref2$y","_ref2$width","_ref2$height","_ref2$level","_ref2$format","_ref2$type","_ref2$dataFormat","_ref2$compressed","_ref2$offset","_ref2$border","_ref2$parameters","_this$_deduceParamete3","ndarray","shape","compressedTexSubImage2D","texSubImage2D","_ref3$compressed","textureFormat","_this$_deduceImageSiz","_deduceImageSize","ImageData","HTMLImageElement","naturalWidth","naturalHeight","HTMLCanvasElement","ImageBitmap","videoWidth","videoHeight","createTexture","deleteTexture","param","_getNPOTParam","texParameterf","texParameteri","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","pathPrefix","loadImage","crossOrigin","_$33190$36012$","_Texture","Texture2D","isSupported","EXT_FLOAT_WEBGL2","bpp","formats","Renderbuffer","_ref3$width","_ref3$height","_ref3$samples","bindRenderbuffer","renderbufferStorageMultisample","renderbufferStorage","createRenderbuffer","deleteRenderbuffer","getRenderbufferParameter","_ref$framebuffer","_ref$depth","_ref$stencil","stencil","clearFlags","clear","clearBuffer","_ref2$framebuffer","_ref2$buffer","_ref2$drawBuffer","drawBuffer","_ref2$value","clearBufferiv","clearBufferuiv","clearBufferfv","clearBufferfi","glFormatToComponents","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","FACES","TextureCube","_setCubeMapImageData","setCubeMapImageData","_ref$x","_ref$y","_ref$mipmapLevel","mipmapLevel","_subImage","_callee","imageDataMap","resolvedFaces","_context","facePixels","lodLevel","unbind","_x","imageData","setImageDataForFace","Texture3D","unpackFlipY","_ref$level","_ref$dataFormat","_ref$border","_ref$type","_ref$offset","_ref$parameters","texImage3D","readPixelsToArray","_options$sourceX","sourceX","_options$sourceY","sourceY","_options$sourceFormat","sourceFormat","_options$sourceAttach","sourceAttachment","sourceWidth","sourceHeight","sourceType","_getFramebuffer","getFramebuffer","deleteFramebuffer","attachments","getPixelArray","prevHandle","readPixels","_ref2$sourceAttachmen","_ref2$targetMaxHeight","targetMaxHeight","MAX_SAFE_INTEGER","_scalePixels","createImageData","putImageData","texture","pixelArray","Framebuffer","ownResources","MAX_COLOR_ATTACHMENTS","MAX_DRAW_BUFFERS","colorBufferFloat","colorBufferHalfFloat","defaultFramebuffer","_ref$attachments","_ref$check","_ref$readBuffer","_ref$drawBuffers","_createDefaultAttachments","clearAttachments","checkStatus","_ref2$attachments","_ref2$clearAttachment","_ref2$resizeAttachmen","resizeAttachments","attach","_setReadBuffer","_setDrawBuffers","attachmentPoint","_ref3$clearAttachment","_ref3$resizeAttachmen","newAttachments","_attachRenderbuffer","renderbuffer","_descriptor","_descriptor$","layer","_descriptor$2","_attachTexture","_unattach","getStatus","STATUS","_getFrameBufferStatus","checkFramebufferStatus","_options$drawBuffers","_ref4$attachments","_ref4$x","_ref4$y","invalidateFramebuffer","_getAttachmentParameterFallback","getFramebufferAttachmentParameter","ATTACHMENT_PARAMETERS","getAttachmentParameter","_attachments","attachmentName","getAttachmentParameters","_ref5$target","_ref6$target","_parameters","defaultAttachments","oldAttachment","framebufferRenderbuffer","framebufferTexture2D","_ref7","_ref7$attachment","_ref8","_ref8$attachment","framebufferTextureLayer","mapIndexToCubeMapFace","drawBuffersWEBGL","caps","cap","isFeatureSupported","getFeatures","WEBGL2","EXT_sRGB","createFramebuffer","_FEATURES$WEBGL2$FEAT","FEATURES","testTexture","testFb","hasFeatures","features","every","feature","featureDefinition","queryFeature","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","sym","_objectSpread","getOwnPropertyDescriptors","defineProperties","ShaderAttribute","dataColumn","getBuffer","getAccessor","constantValue","elementOffset","TypedArrayManager","_pool","overAlloc","poolSize","setProps","typedArray","maxSize","_ref$size","_ref$padding","_ref$copy","_ref$initialize","maxCount","Type","newSize","newArray","_allocate","_release","sizeToAllocate","pool","findIndex","scratchArray","scratchVector","getFrustumPlane","L","normal","toDoublePrecisionArray","_ref$startIndex","startIndex","endIndex","allocate","sourceIndex","targetIndex","j","getStride","bytesPerElement","resolveShaderAttribute","baseAccessor","shaderAttributeOptions","vertexOffset","DataColumn","logicalType","doublePrecision","bufferType","isIndexed","hasFeature","defaultType","Float64Array","glArrayFromType","shaderAttributes","fp64","settings","externalBuffer","bufferAccessor","allocatedValue","constant","_buffer","setData","release","isBuffer64Bit","doubleShaderAttributeDefs","high","resolvedOptions","low","shaderAttributeDef","_normalizeValue","_normalizeConstant","_areValuesEqual","_checkExternalBuffer","byteOffset","requiredBufferSize","subData","_opts$startOffset","startOffset","endOffset","numInstances","_ref3$copy","illegalArrayType","_this$settings","value1","value2","_this$settings2","EMPTY_ARRAY","placeholderArray","createIterable","startRow","endRow","objectInfo","isAsyncIterable","getAccessorFromBuffer","startIndices","nested","elementStride","vertexCount","_","_sourceIndex","_j","_sourceIndex2","_j2","flatten","flattenArray","fillArray","_ref$start","_ref$count","copied","EMPTY","FULL","rangeList","range","newRangeList","insertPosition","range0","padArrayChunk","sourceLength","targetLength","datum","DEFAULT_TRANSITION_SETTINGS","interpolation","duration","easing","spring","stiffness","damping","normalizeTransitionSettings","userSettings","layerSettings","getSourceBufferAttribute","attribute","getAttributeTypeFromSize","cycleBuffers","buffers","getAttributeBufferLength","multiplier","noAlloc","padBuffer","fromLength","fromStartIndices","_ref$getData","precisionMultiplier","toStartIndices","hasStartIndices","toLength","isConstant","toData","chunk","getMissingData","sourceStartIndices","targetStartIndices","getChunkData","nextSourceIndex","nextTargetIndex","padArray","_DataColumn","Attribute","_opts$transition","transition","_opts$noAlloc","_opts$update","_opts$accessor","_opts$transform","transform","_opts$startIndices","_autoUpdater","lastExternalBuffer","binaryValue","binaryAccessor","needsUpdate","needsRedraw","updateRanges","_validateAttributeUpdaters","_ref$clearChangedFlag","clearChangedFlags","supportsTransition","reason","dataRange","setNeedsRedraw","_dataRange$startRow","_dataRange$endRow","updated","_startRow","_endRow","_step2$value","getVertexOffset","_checkAttributeArray","clearNeedsUpdate","needsNormalize","shaderAttributeDefs","shaderAttributeName","accessorFunc","_step3","_createIterable","_iterator3","objectValue","numVertices","_step4","_iterator4","layout","loggers","_loggers$eventType","FS100","FS_GLES","FS300","getQualifierDetails","line","qualifiers","words","_words","qualifier","definition","getPassthroughFS","_options$version","inputType","outputValue","convertToVec4","typeToChannelCount","variable","TransformFeedback","unused","bindOnUse","_unbindBuffers","setBuffers","bufferName","setBuffer","locationOrName","bufferOrParams","_getVaryingIndex","_this$_getBufferParam","_getBufferParams","byteSize","_bindBuffer","primitiveMode","bindTransformFeedback","_bindBuffers","beginTransformFeedback","endTransformFeedback","getVaryingInfo","bufferIndex","_this$_getBufferParam2","createTransformFeedback","deleteTransformFeedback","BufferTransform","currentIndex","feedbackMap","varyings","bindings","resources","_initialize","_setupTransformFeedback","sourceBuffers","transformFeedback","_getNextIndex","_setupBuffers","varyingName","feedbackBuffers","_props$sourceBuffers","sourceName","feedbackName","bufferOrRef","_createNewBuffer","_props$sourceBuffers2","_getFeedbackBuffers","_updateBindings","model","_updateBinding","_this$_swapBuffers","_swapBuffers","nextIndex","srcName","dstName","getShaderVersion","_MODULE_INJECTORS","MODULE_INJECTORS","REGEX_START_OF_MAIN","REGEX_END_OF_MAIN","fragments","injectShader","injectStandardStubs","isVertex","fragmentData","fragmentString","combineInjects","injects","_SRC_TEX_PARAMETER_OV","updateForTextures","sourceTextureMap","targetTextureVarying","targetTexture","sourceCount","targetTextureType","samplerTextureMap","updatedVs","finalInject","vsLines","updateVsLines","lines","textureMap","attributeData","getAttributeDefinition","updatedLine","_getSamplerDecleratio","textureName","samplerName","sizeName","uniformDeclerations","getSamplerDeclerations","typeToChannelSuffix","sampleInstruction","processAttributeDefinition","varying","qualaiferDetails","getVaryingType","uniformDeclaration","posInstructions","getSizeUniforms","_sourceTextureMap$tex","SRC_TEX_PARAMETER_OVERRIDES","TextureTransform","_swapTexture","updatedModelProps","_processVertexShader","_this$bindings$this$c","sourceTextures","discard","hasSourceTextures","hasTargetTexture","sampler","transform_elementID","elementIDBuffer","_setSourceTextureParameters","sizeUniforms","_setupTextures","_ref$packed","packed","channelCount","packedPixels","packCount","ownTexture","_targetTextureVarying","textureOrReference","refTexture","_targetRefTexName","_createNewTexture","_props$_sourceTexture","_sourceTextures","_targetTexture","_createTargetTexture","_updateElementIDBuffer","elementCount","elementIds","_this$_swapTextures","_swapTextures","overrides","TextureType","cloneTextureFrom","_this$bindings$this$c2","_updateForTextures","combinedInject","_fs","TYPE_DEFINITIONS","propType","parsePropType","propDef","getTypeOf","ShaderModule","_ref$dependencies","_ref$deprecations","deprecations","_ref$defines","_ref$inject","vertexShader","fragmentShader","getModuleUniforms","_parseDeprecationDefinitions","injections","hook","stage","normalizeInjections","propDefs","propTypes","parsePropTypes","moduleSource","_defaultGetUniforms","shaderSource","def","regex","old","RegExp","resolveModules","getShaderDependencies","instantiateModules","seen","moduleMap","moduleDepth","getDependencyGraph","_module","isOldIE","WEBGL_FEATURES","GLSL_FRAG_DATA","GLSL_FRAG_DEPTH","GLSL_DERIVATIVES","GLSL_TEXTURE_LOD","compiledGlslExtensions","canCompileGLGSExtension","extensionName","behavior","shader","createShader","compileShader","canCompile","getShaderParameter","deleteShader","getFeature","_SHADER_TYPE","ES300_REPLACEMENTS","ES300_VERTEX_REPLACEMENTS","ES300_FRAGMENT_REPLACEMENTS","ES100_REPLACEMENTS","ES100_VERTEX_REPLACEMENTS","ES100_FRAGMENT_REPLACEMENTS","FS_OUTPUT_REGEX","transpileShader","targetGLSLVersion","convertShader","outputMatch","outputName","convertFragmentShaderTo100","replacements","pattern","_UNIFORM_SETTERS","INJECT_SHADER_DECLARATIONS","SHADER_TYPE","assembleShaders","assembleShader","assembleGetUniforms","_ref$hookFunctions","hookFunctions","_ref$transpileToGLSL","transpileToGLSL100","_ref$prologue","prologue","sourceLines","glslVersion","versionLine","coreSource","allDefines","getDefines","assembledSource","getShaderName","getShaderType","gpuVendor","identifyGPUVendor","getContextInfo","getPlatformShaderDefines","isFragment","versionDefines","getVersionDefines","sourceText","getApplicationDefines","hookFunctionMap","_hook$split","_hook$split2","signature","normalizeHookFunctions","hookInjections","declInjections","mainInjections","hash","checkDeprecations","getModuleSource","_match","injectionType","hookName","hookFunction","header","footer","getHookFunctions","moduleUniforms","UNIFORM_SETTERS","getArraySetter","toFloatArray","setVectorUniform","toIntArray","setMatrixUniform","getSamplerSetter","toUIntArray","FLOAT_ARRAY","INT_ARRAY","UINT_ARRAY","array1","toTypedArray","uniformLength","getUniformSetter","parseUniformName","checkUniformValues","uniformMap","uniformName","checkUniformValue","checkLength","checkUniformArray","copyUniform","uniform1i","uniformSetter","cacheLength","arrayValue","defaultName","SHADER_NAME_REGEXP","parseGLSLCompilerError","errLog","shaderType","shaderName","errorStrings","errors","warnings","shaderDescription","getShaderTypeName","errorString","segments","delim","maxDigits","lineNumber","digits","padLeft","addLineNumbers","formatErrors","column","substring","_COMPOSITE_GL_TYPES","Shader","getTypeName","_compile","getShaderSource","getTranslatedShaderSource","startsWith","compileStatus","infoLog","getShaderInfoLog","_parseGLSLCompilerErr","getSource","_Shader","VertexShader","_super2","_Shader2","FragmentShader","_super3","COMPOSITE_GL_TYPES","getPrimitiveDrawMode","drawMode","decomposeCompositeGLType","compositeGLType","typeAndSize","_typeAndSize","components","getCompositeGLType","_COMPOSITE_GL_TYPES$g","compType","compComponents","ProgramConfiguration","attributeInfos","attributeInfosByName","attributeInfosByLocation","varyingInfos","varyingInfosByName","_readAttributesFromProgram","_readVaryingsFromProgram","attributeInfo","getAttributeInfo","_gl$getActiveAttrib","getActiveAttrib","getAttribLocation","_addAttribute","_gl$getTransformFeedb","getTransformFeedbackVarying","_addVarying","compositeType","_decomposeCompositeGL","_inferProperties","_decomposeCompositeGL2","V6_DEPRECATED_METHODS","Program","_isCached","_setId","_props$bufferMode","bufferMode","_textureUniforms","transformFeedbackVaryings","_compileAndLink","_readUniformLocationsFromLinkedProgram","setUniforms","logPriority","_ref$drawMode","_ref$isIndexed","_ref$indexType","indexType","_ref$instanceCount","instanceCount","_ref$isInstanced","_ref$vertexArray","vertexArray","samplers","fb","_areTexturesRenderable","bindForDraw","begin","_bindTextures","drawRangeElements","drawElements","drawArrays","_uniformSetters","uniform","textureUpdate","textureIndex","_textureIndexCounter","texturesRenderable","createProgram","deleteProgram","getAttachedShaders","shaderHandle","programName","_getName","getName","attachShader","linkProgram","getProgramInfoLog","validateProgram","_uniformCount","getActiveUniform","getUniformLocation","uniformIndices","getActiveUniforms","blockName","getUniformBlockIndex","blockIndex","getActiveUniformBlockParameter","blockBinding","uniformBlockBinding","ProgramManager","_programCache","_getUniforms","_registeredModules","_hookFunctions","_defaultModules","_hashes","_hashCounter","stateHash","_useCounts","defaultProgramManager","moduleName","_props$vs","_props$fs","_props$defines","_props$inject","_props$varyings","_props$transpileToGLS","_getModuleList","vsHash","_getHash","fsHash","moduleHashes","varyingHashes","defineKeys","injectKeys","defineHashes","injectHashes","assembled","appModules","_name","getScratchArray","getBrowser","ERR_ELEMENTS","VertexArrayObject","bufferValue","isDefaultArray","constantAttributeZero","defaultVertexArray","MAX_ATTRIBUTES","_setConstantFloatArray","_setConstantIntArray","_setConstantUintArray","elementBuffer","setElementBuffer","vertexAttribIPointer","_enable","disablingAttributeZero","_normalizeConstantArrayValue","updateNeeded","_compareConstantArrayValues","v1","v2","elements","getVertexAttribOffset","getMaxAttributes","vertexAttrib1fv","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttribI1iv","vertexAttribI2iv","vertexAttribI3iv","vertexAttribI4iv","vertexAttribI1uiv","vertexAttribI2uiv","vertexAttribI3uiv","vertexAttribI4uiv","MULTI_LOCATION_ATTRIBUTE_REGEXP","DEPRECATIONS_V6","VertexArray","elementsAccessor","drawParams","vertexArrayObject","setAttributes","_updateDrawParams","_setAttribute","clearDrawParams","appAccessor","_this$_resolveLocatio","_resolveLocationAndAccessor","_this$_resolveLocatio2","_setConstantAttributes","valueAccessor","_this5","INVALID_RESULT","_this$_getAttributeIn","_getAttributeIndex","accessInfo","_getAttributeInfo","currentAccessor","attributeName","multiLocation","locationOffset","getAttributeLocation","setConstant","_accessor","_setConstantAttributeZero","_setConstantAttribute","getConstantBuffer","indexCount","_updateDrawParamsForLocation","indexOffset","getVertexCount","_opts$maxElts","maxElts","_opts$size","terminator","_opts$isInteger","isInteger","decimal","getDebugTableRow","verts","_buffer$getDebugData","getDebugData","getGLSLDeclaration","typeAndName","getDebugTableForUniforms","_ref$header","_ref$undefinedOnly","undefinedOnly","uniformLocations","uniformNames","_uniformName","addUniformToTable","_uniformName2","_uniformName3","unusedCount","unusedTable","_table$uniformName","isDefined","isUniformDefined","_attributeInfo$access","GLTF_TO_LUMA_ATTRIBUTE_MAP","POSITION","NORMAL","COLOR_0","TEXCOORD_0","TEXCOORD_1","TEXCOORD_2","mapAttributeName","_ref$attributeMap","attributeMap","inferAttributeAccessor","category","NOOP","DRAW_PARAMS","Model","lastLogTime","animated","programManager","getDefaultProgramManager","_programManagerState","_managedProgram","_props$program","programProps","_programDirty","_attributes","pickable","_checkProgram","moduleSettings","geometryBuffers","_setModelProps","geometry","_deleteGeometryBuffers","indices","remappedName","getBuffersFromGeometry","normalizedAttributes","_opts$moduleSettings","_opts$uniforms","_opts$attributes","_opts$transformFeedba","_opts$parameters","_opts$vertexArray","updateModuleSettings","_logDrawCallStart","getDrawParams","_this$props","_this$props$isIndexed","_this$props$indexType","_this$props$indexOffs","_this$props$vertexArr","vertexArrayInstanced","_this$props2","_this$props2$onBefore","onBeforeRender","_this$props2$onAfterR","onAfterRender","didDraw","draw","getDrawMode","_logDrawCallEnd","_opts$discard","_opts$unbindModels","unbindModels","_setFeedbackBuffers","unbindBuffers","bindBuffers","setGeometry","_feedbackBuffers","_this$programProps","animationProps","logDrawTimeout","attributeTable","ELEMENT_ARRAY_BUFFER","attributeLocation","rowHeader","getDebugTableForVertexArray","_getDebugTableForUnif","uniformTable","_getDebugTableForUnif2","missingTable","configTable","glslDeclaration","varyingInfo","_glslDeclaration","getDebugTableForProgramConfiguration","Transform","bufferTransform","textureTransform","_opts$clearRenderTarg","clearRenderTarget","updatedOpts","_updateDrawOptions","swapped","resourceTransform","swap","resourceTransforms","setVertexCount","_buildResourceTransforms","_updateModelProps","setupResources","updatedProps","updateModelProps","canCreateBufferTransform","canCreateTextureTransform","_step5","_iterator5","getDrawOptions","onStart","onUpdate","onInterrupt","onEnd","Transition","timeline","_inProgress","removeChannel","addChannel","delay","getTime","_onUpdate","isFinished","GPUInterpolationTransition","attributeInTransition","currentStartIndices","currentLength","attributeType","ATTRIBUTE_TYPE","getTransform","bufferOpts","transitionSettings","padBufferOpts","enter","aFrom","aTo","vCurrent","_this$transition","_this$transition$sett","inProgress","TRANSITION_TYPES","GPUSpringTransition","getTexture","aPrev","aCur","vNext","depthTest","blend","AttributeTransitionManager","transitions","_removeTransition","getTransitionSetting","_updateAttribute","_attributeName","_attribute","animatedAttributes","isNew","TransitionType","AttributeManager","_ref$id","updateTriggers","attributeTransitionManager","finalize","clearRedrawFlags","redraw","updaters","_add","attributeNameArray","triggerName","_invalidateTrigger","setNeedsUpdate","_ref2$startIndices","_ref2$props","_ref2$buffers","_ref2$context","timeStart","accessorName","setExternalBuffer","setBinaryValue","setConstantValue","transitionUpdated","changedAttributes","getAttributes","hasAttribute","excludeAttributes","getShaderAttributes","extraProps","newAttributes","newAttribute","_createAttribute","_mapUpdateTriggersToAttributes","triggers","getUpdateTriggers","invalidatedAttributes","updateBuffer","_Transition","CPUInterpolationTransition","fromValue","toValue","updateSpringElement","cur","distanceSquare","CPUSpringTransition","_this$_prevValue","_prevValue","_this$_currValue","_currValue","nextValue","updateSpring","UniformTransitionManager","_transition","_transition$value","propsInTransition","LIFECYCLE","PROP_SYMBOLS","COMPONENT","ASYNC_DEFAULTS","ASYNC_ORIGINAL","ASYNC_RESOLVED","oldProps","propsChangedReason","compareProps","getPropTypes","ignoreProps","dataChangedReason","dataChanged","dataComparator","_dataDiff","diffDataProps","updateTriggersChangedReason","diffUpdateTrigger","triggerChanged","diffUpdateTriggers","propsChanged","updateTriggersChanged","extensionsChanged","diffExtensions","transitionsChanged","diffTransitions","comparePropValues","_ref$ignoreProps","_ref$propTypes","_ref$triggerName","_Object$keys2","_changed","newProp","oldProp","equal","oldExtensions","newTriggers","oldTriggers","LayerType","_propTypes","container","isPlainObject","mergeShaders","mergedInjection","transformVector","matrix","modulus","PI_4","DEGREES_TO_RADIANS","RADIANS_TO_DEGREES","zoomToScale","zoom","pow","scaleToZoom","log2","lngLatToWorld","lng","lat","phi2","worldToLngLat","lambda2","atan","exp","_ref6$highPrecision","highPrecision","latCosine","unitsPerDegreeY","altUnitsPerMeter","metersPerUnit","degreesPerUnit","latCosine2","unitsPerDegreeY2","altUnitsPerDegree2","altUnitsPerMeter2","lngLatZ","xyz","_lngLatZ","_xyz","_getDistanceScales","worldspace","newLngLat","newZ","getViewMatrix","pitch","bearing","altitude","_ref7$center","vm","getProjectionParameters","_ref8$altitude","_ref8$pitch","_ref8$nearZMultiplier","nearZMultiplier","_ref8$farZMultiplier","farZMultiplier","pitchRadians","halfFov","topHalfSurfaceDistance","getProjectionMatrix","_ref9","_getProjectionParamet","worldToPixels","pixelProjectionMatrix","_xyz2","_xyz2$","pixelsToWorld","pixelUnprojectionMatrix","targetZ","_xyz3","coord","coord0","coord1","bounds","_ref$minExtent","minExtent","_ref$maxZoom","maxZoom","_bounds","_bounds$","west","south","_bounds$2","east","north","nw","project","se","targetSize","scaleX","scaleY","offsetX","offsetY","centerLngLat","unproject","topLeft","topRight","unprojectOps","bottomLeft","bottomRight","angleToGround","unprojectOnFarPlane","WebMercatorViewport","_ref$latitude","_ref$longitude","_ref$zoom","_ref$pitch","_ref$bearing","_ref$altitude","_ref$nearZMultiplier","_ref$farZMultiplier","_initMatrices","vpm","mInverse","_ref2$topLeft","worldPosition","_coord","_ref3$topLeft","_ref3$targetZ","targetZWorld","_this$unprojectPositi","_this$unprojectPositi2","X","Y","Z","_lngLatToWorld","_lngLatToWorld2","_worldToLngLat","_worldToLngLat2","lngLat","xy","fromLocation","pos","toLocation","getMapCenterByLngLatPosition","_fitBounds2","corners","getBoundingRegion","DEFAULT_DISTANCE_SCALES","Viewport","_opts$id","_opts$x","_opts$y","_opts$width","_opts$height","_frustumPlanes","_initViewMatrix","_initProjectionMatrix","_initPixelMatrices","projectFlat","unprojectFlat","_ref$topLeft","_this$projectFlat","_this$projectFlat2","_this$unprojectFlat","_this$unprojectFlat2","unprojectOption","planes","cameraDirection","cameraUp","orthographic","fovyRadians","_opts$viewMatrix","_opts$longitude","_opts$latitude","_opts$zoom","_opts$position","_opts$modelMatrix","_opts$focalDistance","_opts$distanceScales","getMeterZoom","meterOffset","_getCenterInWorld","multiplyRight","commonPosition","_opts$projectionMatri","_opts$orthographic","_opts$fovy","_opts$near","_opts$far","_opts$focalDistance2","_createProjectionMatrix","viewMatrixInverse","viewportMatrix","_DEFAULT_TEXTURE_PARA","_Viewport","_opts$pitch","_opts$bearing","_opts$nearZMultiplier","_opts$farZMultiplier","_opts$repeat","_opts$worldOffset","worldOffset","_opts$altitude","viewOffset","multiplyLeft","viewportOpts","_subViewports","newCenter","getBounds","minOffset","maxOffset","offsetViewport","lngLatZToWorldPosition","_lngLatZ$","getWorldPosition","_position","_position$","_vec4$transformMat","_vec4$transformMat2","_normalizeParameters","normalizedParams","fromCoordinateSystem","fromCoordinateOrigin","normalizeParameters","DEFAULT_TEXTURE_PARAMETERS","internalTextures","optional","arrayEqual","valueType","compare","dataTransform","specialTextureParameters","textureParameters","array2","normalizePropDefinition","createProps","propsPrototype","getPropsPrototype","propsInstance","componentClass","defaultProps","getOwnProperty","parentClass","parentDefaultProps","componentPropDefs","_Object$entries","_Object$entries$_i","deprecatedFor","parentProps","componentName","getComponentName","createPropsPrototype","defaultValues","descriptors","getDescriptorForAsyncProp","addAsyncPropsToPropPrototype","_deprecatedProps","newValue","nameStr","newPropName","addDeprecatedPropsToPropPrototype","_mergedDefaultProps","createPropsPrototypeAndTypes","internalState","hasAsyncProp","getAsyncProp","_asyncIterator","EMPTY_PROPS","ComponentState","asyncProps","onAsyncPropUpdated","oldAsyncProps","_resolveAsyncIterable2","asyncProp","resolvedValue","pendingLoadCount","resolvedLoadCount","isAsyncPropLoading","_watchPromise","resolvedValues","originalValues","_createAsyncPropData","_updateAsyncProp","_didAsyncInputValueChange","fetch","_resolveAsyncIterable","_setPropValue","lastValue","_postProcessValue","loadCount","freezeAsyncOldProps","promise","_setAsyncPropValue","onDataLoad","_iteratorNormalCompletion","_didIteratorError","_iteratorError","t0","_x2","counter","Component","lifecycle","_ComponentState","LayerState","attributeManager","subLayers","usesPickingColorCache","isBoolean","isFunction","isPureObject","isIterable","isResponse","Response","arrayBuffer","text","isBlob","Blob","isReadableStream","ReadableStream","tee","getReader","isReadableDOMStream","read","pipe","readable","isReadableNodeStream","isLoaderObject","loader","hasParser","parseTextSync","parseSync","parseStream","parseInBatches","loaderOptions","workerUrl","normalizeLoader","parseText","binary","fileAliases","resolvePath","filename","alias","DATA_URL_PATTERN","MIME_TYPE_PATTERN","parseMIMETypeFromURL","dataUrl","QUERY_STRING_PATTERN","getResourceUrlAndType","resource","contentType","mimeString","parseMIMEType","headers","urlType","stripQueryString","getResourceContentLength","makeResponse","_makeResponse","contentLength","_getResourceUrlAndTyp","initialDataUrl","response","getInitialDataUrl","TextEncoder","encode","checkResponse","_checkResponse","_callee2","_context2","ok","getResponseError","_x3","_getResponseError","_callee3","_context3","statusText","t1","t2","t3","_x4","_getInitialDataUrl","_callee4","INITIAL_DATA_LENGTH","blobSlice","base64","_context4","reader","FileReader","readAsDataURL","arrayBufferToBase64","fromCharCode","btoa","getErrorMessageFromResponse","_getErrorMessageFromResponse","fetchFile","_fetchFile","NullLog","DEFAULT_LOADER_OPTIONS","baseUri","CDN","worker","ConsoleLog","_this$console$log","_this$console$info","_this$console$warn","_len3","_key3","_this$console$error","_len4","_key4","metadata","transforms","reuseWorkers","DEPRECATED_LOADER_OPTIONS","credentials","redirect","referrer","referrerPolicy","integrity","keepalive","signal","loaders","_state","getGlobalLoaderOptions","globalOptions","normalizeOptions","validateOptionsObject","idOptions","deprecatedOptions","defaultOptions","validateOptions","normalizeOptionsInternal","getFetchFunction","loaderName","isSubOptions","suggestion","findSimilarOption","optionKey","lowerCaseOptionKey","bestSuggestion","lowerCaseKey","mergedOptions","mergeNestedFields","addUrlOptions","validateLoaderVersion","coreVersion","loaderVersion","parseVersion","major","minor","toArrayBuffer","_toArrayBuffer","concatenateArrayBuffers","sources","sourceArrays","source2","sourceArray","concatenateChunksAsync","_concatenateChunksAsync","arrayBuffers","strings","_marked","makeStringIterator","_options$chunkSize","chunkSize","textEncoder","chunkLength","makeArrayBufferIterator","chunkByteLength","_AwaitValue","wrapped","_awaitAsyncGenerator","AsyncGenerator","front","back","resume","wrappedAwait","settle","_wrapAsyncGenerator","makeBlobIterator","_makeBlobIterator","readFileSlice","_readFileSlice","fileReader","readAsArrayBuffer","makeStreamIterator","stream","_makeToArrayBufferIterator","makeToArrayBufferIterator","getIterator","_makeBrowserStreamIterator","makeBrowserStreamIterator","_makeNodeStreamIterator","makeNodeStreamIterator","_yield$_awaitAsyncGen","releaseLock","_readableState","ended","onceReadable","_onceReadable","makeIterator","ERR_DATA","getArrayBufferOrStringFromDataSync","TextDecoder","decode","isBuffer","_arrayBuffer","getArrayBufferOrStringFromData","_getArrayBufferOrStringFromData","isArrayBuffer","getLoaderContext","previousContext","getLoaders","candidateLoaders","contextLoaders","workerURLCache","buildScript","getTransferList","recursive","transfers","transfersSet","Set","isTransferable","MessagePort","OffscreenCanvas","defaultOnMessage","WorkerThread","_ref2$name","onMessage","workerSource","endsWith","workerURL","blob","URL","createObjectURL","getWorkerURL","Worker","_process","onmessage","lineno","colno","betterError","transferList","postMessage","terminate","WorkerPool","_ref$name","_ref$maxConcurrency","maxConcurrency","_ref$onDebug","onDebug","_ref$reuseWorkers","jobQueue","idleQueue","isDestroyed","_startQueuedJob2","jobName","_startQueuedJob","job","_getAvailableWorker","backlog","_onWorkerDone","WorkerFarm","_ref$onMessage","workerPools","workerPool","workerName","_getWorkerPool","onWorkerMessage","canParseWithWorker","localWorkerUrl","useWorker","parseWithWorker","workerFarm","_workerFarm","getWorkerFarm","warning","arraybuffer","_onWorkerMessage","loaderRegistry","getRegisteredLoaders","EXT_PATTERN","selectLoader","_selectLoader","selectLoaderSync","nothrow","getNoValidLoaderMessage","normalizeLoaders","findLoaderByUrl","findLoaderByContentType","findLoaderByExamingInitialData","_getResourceUrlAndTyp2","getMagicString","getFirstCharacters","findLoaderByExtension","mimeType","mimeTypes","testDataAgainstText","testDataAgainstBinary","testText","tests","arrayBuffer1","arrayBuffer2","compareArrayBuffers","magic","testBinary","dataView","getUint8","_parse","parseWithLoader","_x5","_x6","_x7","_x8","_parseWithLoader","load","_load","MAX_PICKING_COLOR_CACHE_SIZE","areViewportsEqual","oldViewport","pickingColorCache","__diff","resourceManager","loadOptions","getLoadOptions","inResourceManager","contains","resourceId","persistent","subscribe","onChange","reloadAsyncProp","consumerId","requestId","visible","opacity","onHover","onClick","onDragStart","onDrag","onDragEnd","wrapLongitude","positionFormat","colorFormat","getPolygonOffset","layerIndex","highlightedObjectIndex","autoHighlight","highlightColor","_Component","Layer","layerName","updateObject","setChangeFlags","stateChanged","layerManager","_getNeedsRedraw","hasUniformTransition","shouldUpdateState","_getUpdateParams","uniformTransitions","active","models","_worldToPixels","_worldToPixels2","pickingEvent","_color","shaders","getShaders","changeFlags","propsOrDataChanged","getAttributeManager","invalidateAll","neededPickingBuffer","needPickingBuffer","_attributeManager$att","pickingColors","instancePickingColors","pickingColorsAttribute","invalidate","getModels","viewportChanged","isComposite","_update","_setModelAttributes","getNumInstances","getStartIndices","ignoreUnknownAttributes","getChangedAttributes","updateAttributes","updateTransition","cacheSize","newCacheSize","pickingColor","encodePickingColor","objectIndex","_disablePickingIndex","_this$getAttributeMan","colors","_this$getAttributeMan2","updateSubBuffer","_initState","initializeState","_step6","_iterator6","_updateState","stateNeedsUpdate","currentProps","currentViewport","_updateUniformTransition","updateParams","oldModels","updateState","_step7","_iterator7","modelChanged","_updateModules","_renderLayers","_updateAttributes","setInstanceCount","clearChangeFlags","resetOldProps","finalizeState","_step8","_iterator8","_ref8$moduleParameter","moduleParameters","_ref8$uniforms","_ref8$parameters","_updateAttributeTransition","setModuleParameters","offsets","_step9","_iterator9","flags","flagChanged","somethingChanged","invalidateAttribute","_step10","_iterator10","forceUpdate","getOldProps","attributeManagerNeedsRedraw","getNeedsRedraw","_getAttributeManager","addInstanced","calculateInstancePickingColors","_onAsyncPropUpdated","setAsyncProps","oldLayer","diffProps","DRAW_MODE","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","Geometry","_props$drawMode","_props$attributes","_props$indices","_props$vertexCount","_setAttributes","_calculateVertexCount","_print","WINDING","modifyPolygonWindingDirection","points","windingDirection","getPolygonWindingDirection","reversePolygon","sign","getPolygonSignedArea","area","forEachSegmentInPolygon","p1x","p1y","p2x","p2y","areaCalcCallback","visitor","_options$start","_options$end","_options$size","isClosed","numPoints","endPointIndex","isClosedEx","_options$start2","_options$end2","_options$size2","numSwaps","tmp","getPolygonWindingDirectionPoints","getPolygonSignedAreaPoints","forEachSegmentInPolygonPoints","_params$start","_params$end","Polygon","isFlatArray","getSignedArea","i1","i2","currentDirection","modifyPolygonWindingDirectionPoints","_Geometry","ColumnGeometry","_tesselateColumn","tesselateColumn","radius","_props$height","_props$nradial","nradial","vertices","flatMap","isExtruded","vertsAroundEdge","stepAngle","positions","normals","vertexIndex","k","_a","_vertexIndex","_sin","_cos","DEFAULT_COLOR","diskResolution","coverage","elevationScale","lineWidthUnits","lineWidthScale","lineWidthMinPixels","lineWidthMaxPixels","extruded","wireframe","filled","stroked","getPosition","getFillColor","getLineColor","getLineWidth","getElevation","_Layer","ColumnLayer","project32","instancePositions","use64bitPositions","instanceElevations","instanceFillColors","instanceLineColors","instanceStrokeWidths","regenerateModels","setState","_getModel","_updateGeometry","hasThinkness","meanVertexDistance","edgeDistance","getGeometry","fillVertexCount","wireframeVertexCount","_this$state","widthMultiplier","metersPerPixel","widthScale","widthMinPixels","widthMaxPixels","setDrawMode","isStroke","thirdPi","angles","pointX","pointY","domain","scaleFunction","getQuantizeScale","domainRange","idx","clampIdx","quantizeScale","getLinearScale","linearScale","getQuantileScale","sortedDomain","ascending","lo","hi","mid","bisectRight","thresholdsScale","fraction","domainLength","domainFraction","lowIndex","getOrdinalScale","domainMap","uniqueDomain","ordinalScale","notNullOrUndefined","getTruthyValues","getQuantileDomain","getOrdinalDomain","defaultGetValue","defaultGetPoints","bin","defaultGetIndex","NaN","getPoints","filterData","BinSorter","bins","aggregatedBins","getAggregatedBins","_updateMinMaxValues","binMap","getBinMap","_props$getValue","_props$getPoints","_props$getIndex","hasFilter","binCount","binIndex","filteredPoints","counts","percentileRange","sortedBins","_percentileRange$map","_percentileRange$map2","lower","upper","maxValue","minValue","totalCount","lowerIdx","upperIdx","idxRange","_percentileToIndex","_ref2$","_ref2$2","indexEdge","_getScaleDomain","scaleType","AGGREGATION_OPERATION","SUM","MEAN","MIN","MAX","sumReducer","accu","maxReducer","minReducer","getValueFunc","aggregation","op","pt","wrapAccessor","pts","filtered","getMin","getSum","getMean","getMax","wrapGetValueFunc","nop","dimensionSteps","_defaultDimensions","pickingInfo","getBins","updateTrigger","weight","getDomain","lowerPercentile","upperPercentile","getScaleFunc","onSet","nullValue","defaultGetCellSize","cellSize","CPUAggregator","layerData","dimensions","dimensionUpdaters","_getCellSize","getCellSize","_getAggregator","getAggregator","_addDimension","aggregationParams","updateGetValueFuncs","reprojectNeeded","needsReProjectPoints","aggregationDirty","getAggregatedData","getDimensionChanges","hexagons","aggregator","normalizeResult","getSortedBins","_this$dimensionUpdate","needUpdateDimensionStep","setDimensionState","dimension","getDimensionUpdaters","scaleFunc","updater","getDimensionSortedBins","getDimensionValueDomain","getDimensionScale","attributeAccessor","getSubLayerDimensionAttribute","dimensionStep","needUpdate","_updateTriggers","_loop2","fromProp","dimensionUpdater","_filterData","_getDomain$triggers","valueDomain","getValueDomainByScale","_getScaleFunc$trigger","dimensionRange","dimensionDomain","getScaleFunctionByScaleType","getScaleFunction","cell","_this4$state$dimensio","cv","picked","binInfo","dimensionKey","CompositeLayer","__source","overridingProps","_subLayerProps","DefaultLayerClass","sourceObject","sourceObjectIndex","sublayerProps","overridingSublayerProps","overridingSublayerTriggers","sublayerId","getSubLayerAccessor","passThroughProps","getSubLayerProps","shouldUpdate","renderLayers","getSubLayers","isLoaded","filterProps","filterKeys","filteredProps","_CompositeLayer","AggregationLayer","NON_INSTANCED_MODEL","updateShaders","_this$context","mousePosition","updateOpts","_params$compareAll","compareAll","dataProps","_dimension$accessors","colorDomain","colorRange","getColorValue","getColorWeight","colorAggregation","colorScaleType","onSetColorDomain","elevationDomain","elevationRange","getElevationValue","getElevationWeight","elevationAggregation","elevationLowerPercentile","elevationUpperPercentile","elevationScaleType","onSetElevationDomain","hexagonAggregator","minX","minY","maxX","maxY","getPointsCenter","radiusCommon","getRadiusInCommon","screenPoints","posIndex","screenCoord","hexbin","binsById","px","point","py","pj","pi","py1","px1","pi2","pj2","px2","py2","hexagon","centers","mesh","fragment","extent","newHexbin","hex","_AggregationLayer","HexagonLayer","cpuAggregator","aggregatorState","hexagonVertices","oldVertices","convertLatLngToMeterOffset","updateRadiusAngle","vertex0","vertex3","centroid","centroidFlat","vt","vtFlat","getPickingInfo","_this$state2","SubLayerClass","getSubLayerClass","_getSublayerUpdateTriggers","_onGetSublayerColor","_onGetSublayerElevation","channelHandles","animationHandles","Timeline","animations","playing","lastEngineTime","_props$delay","_props$duration","POSITIVE_INFINITY","_props$rate","rate","_props$repeat","channel","_setChannelTime","animationHandle","detachAnimation","animationData","animation","_channel","setTime","channelHandle","engineTime","offsetTime","_loadCount","_subscribers","consumer","_error","_content","_loader","_data","ResourceManager","protocol","_resources","_consumers","_pruneRequest","_ref2$forceUpdate","_ref2$persistent","res","prune","_ref4$requestId","_track","_prune","consumers","inUse","DEFAULT_MODULES","SHADER_HOOKS","createProgramManager","shaderModule","addDefaultModule","shaderHook","addShaderHook","INITIAL_CONTEXT","deck","shaderCache","pickingFBO","LayerManager","lastRenderedLayers","layers","_needsRedraw","_needsUpdate","_debug","_onError","activateViewport","_finalizeLayer","layerNeedsRedraw","_ref2$layerIds","layerIds","layerId","setLayers","newLayers","_updateLayers","oldLayers","oldLayerMap","generatedLayers","_updateSublayersRecursively","_finalizeOldLayers","_generatedLayers","newLayer","sublayers","validateProps","_transferLayerState","_updateLayer","_initializeLayer","_handleError","_transferState","_finalize","deepEqual","aValue","bValue","ViewManager","views","viewState","controllers","_viewports","_viewportMap","_isUpdating","_eventManager","eventManager","_eventCallbacks","onViewStateChange","onInteractionStateChange","viewId","controller","containsPixel","viewMap","view","viewOrViewId","getView","getViewStateId","filterViewState","viewports","getViewports","_setViews","_setViewState","_setSize","_rebuildViewports","_diffViews","Controller","_onViewStateChange","onStateChange","makeViewport","_getViewport","controllerProps","_createController","oldControllers","getViewState","_updateController","_buildViewportMap","newViews","oldViews","PERCENT_OR_PIXELS_REGEX","parsePosition","relative","View","_props$x","_props$y","_props$width","_props$projectionMatr","_props$fovy","_props$near","_props$far","_props$modelMatrix","_props$viewportInstan","viewportInstance","_props$type","_parseDimensions","viewportDimensions","getDimensions","newViewState","_y","_width","_height","defaultOpts","ViewportType","TRANSITION_EVENTS","DEFAULT_PROPS","transitionEasing","transitionInterruption","onTransitionStart","onTransitionInterrupt","onTransitionEnd","TransitionManager","ControllerState","_onTransitionUpdate","nextProps","transitionTriggered","_shouldIgnoreViewportChange","_isTransitionEnabled","interruption","endProps","startProps","_triggerTransition","transitionDuration","transitionInterpolator","interpolator","arePropsEqual","_isUpdateDueToCurrentTransition","startViewstate","endViewStateProps","shortestPathFrom","getDuration","initialProps","initializeProps","_onTransitionEnd","inTransition","isZooming","isPanning","isRotating","_transition$settings","interpolateProps","getViewportProps","oldViewState","NO_TRANSITION_PROPS","INERTIA_EASING","EVENT_TYPES","controllerState","controllerStateProps","transitionManager","_onTransition","_setInteractionState","_events","_interactionState","isDragging","_customEvents","handleEvent","eventName","eventStartBlocked","_eventStartBlocked","_onPanStart","_onPan","_onPanEnd","_onPinchStart","_onPinch","_onPinchEnd","_onTriplePanStart","_onTriplePan","_onTriplePanEnd","_onDoubleTap","_onWheel","_onKeyDown","_this$controllerState","_this$controllerState2","handled","inside","stopPropagation","metaKey","altKey","ctrlKey","shiftKey","dragMode","toggleEvents","_getTransitionProps","processViewStateChange","inertia","_props$scrollZoom","scrollZoom","_props$dragPan","dragPan","_props$dragRotate","dragRotate","_props$doubleClickZoo","doubleClickZoom","_props$touchZoom","touchZoom","_props$touchRotate","touchRotate","_props$keyboard","keyboard","isInteractive","eventNames","newControllerState","interactionState","getState","newStates","isPointInBounds","alternateMode","isFunctionKeyPressed","rightButton","invertPan","_panMove","updateViewport","_onPanMove","_onPanRotate","_onPanMoveEnd","_onPanRotateEnd","pan","endPos","panEnd","_newControllerState","rotateEnd","_newControllerState2","_this$scrollZoom","_this$scrollZoom$spee","speed","_this$scrollZoom$smoo","smooth","around","rotateStart","blockEvents","_newControllerState3","zoomStart","_startPinchRotation","_lastPinchEvent","deltaAngleX","velocityZ","endScale","zoomEnd","_newControllerState4","isZoomOut","funcKey","_this$keyboard","zoomSpeed","moveSpeed","rotateSpeedX","rotateSpeedY","code","zoomOut","zoomIn","rotateLeft","moveLeft","rotateRight","moveRight","rotateUp","moveUp","rotateDown","moveDown","customEvents","ViewState","_viewportProps","_applyConstraints","TransitionInterpolator","extract","required","_propsToCompare","_propsToExtract","_requiredProps","startViewStateProps","_checkRequiredProps","DEFAULT_REQUIRED_PROPS","_TransitionInterpolat","LinearInterpolator","transitionProps","_this$opts","startViewport","endViewport","aroundLngLat","_viewport$getMapCente","_viewport$getMapCente2","LINEAR_TRANSITION_PROPS","DEFAULT_STATE","_ViewState","MapState","_ref$minZoom","minZoom","_ref$maxPitch","maxPitch","_ref$minPitch","minPitch","startPanLngLat","startZoomLngLat","startRotatePos","startBearing","startPitch","startZoom","_getUpdatedState","_unproject","startPos","_this$_calculateNewLn","_calculateNewLngLat","_this$_calculateNewLn2","newRotation","_ref5$deltaAngleX","_ref5$deltaAngleY","deltaAngleY","_this$_state","_calculateNewPitchAndBearing","_getRotationParams","_this$_state2","_calculateNewZoom","_zoomedViewport$getMa","_zoomedViewport$getMa2","_zoomFromCenter","_panFromCenter","fromProps","_this$_viewportProps","_this$_viewportProps2","flatViewport","topY","bottomY","shiftY","normalizeViewportProps","_this$_viewportProps3","_ref10","deltaScaleX","deltaScaleY","_this$_viewportProps4","centerY","startY","_this$_viewportProps5","_Controller","MapController","_View","MapView","_getControllerProps","DEFAULT_LIGHT_COLOR","idCount","AmbientLight","_props$color","_props$intensity","DEFAULT_LIGHT_DIRECTION","DirectionalLight","_props$direction","_props$_shadow","_shadow","normalize","shadow","Effect","_Pass","LayersPass","_drawLayers","onViewportActive","_props$clearCanvas","clearCanvas","clearGLCanvas","renderStats","viewportOrDescriptor","drawLayerParams","_getDrawLayerParams","subViewports","subViewport","_drawLayersInViewport","_ref$pass","pass","layerFilter","effects","indexResolver","layerIndexResolver","layerIndices","resolvers","resolveLayerIndex","isDrawn","indexOverride","_offset","parentId","resolver","shouldDrawLayer","_shouldDrawLayer","layerParam","layerRenderIndex","_getModuleParameters","layerParameters","getLayerParameters","glViewport","pixelRatio","getGLViewport","clearOpts","scissorTest","renderStatus","visibleCount","compositeCount","pickableCount","_drawLayerParams$laye","drawLayer","isPicking","renderPass","effect","getModuleParameters","Pass","_LayersPass","ShadowPass","shadowMap","depthBuffer","fbo","shadowEnabled","drawToShadowMap","getMemoizedViewportCenterPosition","getMemoizedViewProjectionMatrices","shadowMatrices","projectionMatrices","farZ","screenToCommonSpace","shadowMatrix","corner","DEFAULT_SHADOW_COLOR","createShadowUniforms","shadow_uDrawShadowMap","shadow_uUseShadowMap","shadowMaps","shadow_uColor","shadowColor","shadow_uLightId","shadowLightId","shadow_uLightCount","projectCenters","viewProjectionMatrices","viewProjectionMatrixCentered","dummyShadowMap","shadowUniforms","_opts$shadowEnabled","DEFAULT_AMBIENT_LIGHT_PROPS","DEFAULT_DIRECTIONAL_LIGHT_PROPS","_Effect","LightingEffect","shadowPasses","lightSource","_applyDefaultLights","_createLightMatrix","_createShadowPasses","render","getProjectedLight","removeDefaultModule","lightMatrices","shadowPass","DEFAULT_LIGHTING_EFFECT","EffectManager","_internalEffects","setEffects","cleanup","_createInternalEffects","DrawLayersPass","PICKING_PARAMETERS","PickLayersPass","useAlpha","_drawPickingBuffer","_ref$deviceRect","deviceRect","redrawReason","pickZ","pickParameters","DeckRenderer","drawPickingColors","drawLayersPass","pickLayersPass","renderCount","renderBuffers","lastPostProcessEffect","layerPass","getDefaultFramebuffer","_preRender","outputBuffer","_postRender","preRender","postRender","_resizeRenderBuffers","inputBuffer","swapBuffer","NO_PICKED_OBJECT","pickedColor","pickedLayer","pickedObjectIndex","getClosestObject","pickedColors","deviceX","deviceY","deviceRadius","minSquareDistanceToCenter","closestPixelIndex","dy2","d2","_pickedLayerIndex","decodePickingColor","_dy","pickedX","pickedY","getEmptyPickingInfo","pickInfo","getViewportFromCoordinates","coordinate","devicePixel","processPickInfo","lastPickedInfo","affectedLayers","lastPickedObjectIndex","lastPickedLayerId","pickedLayerId","lastPickedLayer","baseInfo","infos","getLayerPickingInfo","pickingModuleParameters","sourceLayer","DeckPicker","_pickable","depthFBO","_pickClosestObject","_pickVisibleObjects","lastPickedViewportId","pickableLayers","isPickable","_ref2$radius","_ref2$depth","_ref2$mode","unproject3D","_getPickable","emptyInfo","_resizeBuffer","devicePixelRange","_this$pickingFBO","_getPickingRect","deviceWidth","deviceHeight","_drawAndSample","disablePickingIndex","_layerId","restorePickingColors","_ref3$mode","_ref3$maxObjects","maxObjects","leftTop","deviceLeft","deviceTop","rightBottom","deviceRight","deviceBottom","pickInfos","uniqueColors","pickedLayerIndex","colorKey","getUniqueObjects","uniqueInfos","isMaxObjects","defaultStyle","backgroundColor","Tooltip","canvasParent","parentElement","displayInfo","_parseImageNode","IMAGE_SUPPORTED","IMAGE_BITMAP_SUPPORTED","NODE_IMAGE_SUPPORTED","DATA_SUPPORTED","getImageType","getImageTypeOrNull","getImageData","drawImage","SVG_DATA_URL_PATTERN","SVG_URL_PATTERN","isSVG","getBlobOrSVGDataUrl","xmlText","getBlob","parseToImage","_parseToImage","blobOrDataUrl","objectUrl","webkitURL","loadToImage","revokeObjectURL","_loadToImage","EMPTY_OBJECT","imagebitmapOptionsSupported","parseToImageBitmap","_parseToImageBitmap","imagebitmapOptions","imagebitmap","safeCreateImageBitmap","_safeCreateImageBitmap","isEmptyObject","createImageBitmap","getBinaryImageMetadata","binaryData","toDataView","getUint32","getPngMetadata","getUint16","_getJpegMarkers","tableMarkers","sofMarkers","getJpegMarkers","getJpegMetadata","getGifMetadata","getBmpMetadata","parseToNodeImage","_parseImage","imageOptions","imageType","loadType","getLoadableImageType","getDefaultImageType","isImageTypeSupported","firstChar","lastChar","existingVersion","_registerLoggers","normalizedLoader","registeredLoader","registerLoaders","premultiplyAlpha","Query","_queryPending","_pollingPromise","hasTimerQuery","_ref$conservative","conservative","resultAvailable","getResult","requestAnimationFrame","poll","isResultAvailable","cancelAnimationFrame","oldHandler","statIdCounter","AnimationLoop","_props$onCreateContex","onCreateContext","_props$onAddHTML","onAddHTML","_props$onInitialize","onInitialize","_props$onRender","onRender","_props$onFinalize","onFinalize","_props$gl","_props$glOptions","glOptions","_props$debug","_props$createFramebuf","_props$autoResizeView","autoResizeViewport","_props$autoResizeDraw","autoResizeDrawingBuffer","_props$stats","_props$useDevicePixel","useDevicePixelRatio","cpuTime","gpuTime","frameRate","_initialized","_running","_animationFrameId","_nextFramePromise","_resolveNextFrame","_cpuStartTime","_pageLoadPromise","_onMousemove","_onMouseleave","_toDataURL","_setDisplay","startPromise","_getPageLoadPromise","_createWebGLContext","_createFramebuffer","_startEventHandling","_initializeCallbackData","_updateCallbackData","_resizeCanvasDrawingBuffer","_resizeViewport","_gpuTimeQuery","appContext","_addCallbackData","_startLoop","isContextLost","_beginTimers","_setupFrame","_renderFrame","_clearNeedsRedraw","offScreen","commit","_endTimers","_finalizeCallbackData","waitForRender","_this$props3","_this$props4","_requestAnimationFrame","renderFrame","animationLoop","renderFrameCallback","_this$display","_resizeFramebuffer","startTime","tick","tock","_timeline","_animationLoop","_mousePosition","_this$_getSizeAndAspe","_getSizeAndAspect","_offScreen","_createInfoDiv","wrapperDiv","div","resizeGLContext","isTimerDisjoint","getTimerMilliseconds","beginTimeElapsedQuery","predict","RECOGNIZERS","RECOGNIZER_COMPATIBLE_MAP","tripan","pinch","doubletap","anytap","RECOGNIZER_FALLBACK_MAP","BASIC_EVENT_ALIASES","INPUT_EVENT_TYPES","EVENT_RECOGNIZER_MAP","tap","press","pinchin","pinchout","pinchstart","pinchmove","pinchend","pinchcancel","rotatestart","rotatemove","rotateend","rotatecancel","tripanstart","tripanmove","tripanup","tripandown","tripanleft","tripanright","tripanend","tripancancel","panup","pandown","panleft","panright","pancancel","swipe","swipeleft","swiperight","swipeup","swipedown","GESTURE_EVENT_ALIASES","anyclick","dblclick","mouseover","mouseout","mouseleave","firefox","WHEEL_EVENTS","WheelInput","passive","WheelEvent","deltaMode","DOM_DELTA_PIXEL","DOM_DELTA_LINE","wheelPosition","MOUSE_EVENTS","MoveInput","enableMoveEvent","enableLeaveEvent","enableOutEvent","enableOverEvent","handleOverEvent","handleOutEvent","handleLeaveEvent","handleMoveEvent","KEY_EVENTS","KeyInput","enableDownEvent","enableUpEvent","tabIndex","outline","targetElement","srcElement","tagName","ContextmenuInput","DEFAULT_OPTIONS","EventRegistrar","handlersByElement","_active","mjolnirEvent","_normalizeEvent","rootElement","_emit","immediatePropagationStopped","stopImmediatePropagation","entriesToRemove","_entries$i","_entriesToRemove$_i","_type","_handler","_event$srcEvent","buttons","leftButton","middleButton","whichButtons","offsetWidth","clientLeft","getOffsetPosition","recognizerOptions","EventManager","_onBasicInput","_onOtherEvent","setElement","ManagerClass","recognizerName","otherName","recognizerOption","wheelInput","moveInput","keyInput","contextmenuInput","eventAlias","eventRegistrar","_toggleRecognizer","_addEventHandler","_removeEventHandler","fallbackRecognizers","enableEventType","isRecognizerUsed","eh","pickingRadius","eventRecognizerOptions","_animate","_typedArrayManagerProps","onWebGLInitialized","onResize","onLoad","_onMetrics","getCursor","Deck","viewManager","effectManager","deckRenderer","deckPicker","_pickRequest","_lastPointerDownInfo","interactiveState","isHovering","_onEvent","_onPointerDown","_onPointerMove","_pickAndCallback","_onRendererInitialized","_onRenderFrame","_onInteractionStateChange","initialViewState","_createCanvas","_createAnimationLoop","metrics","fps","setPropsTime","updateAttributesTime","framesRedrawn","pickTime","pickCount","gpuTimePerFrame","cpuTimePerFrame","bufferMemory","textureMemory","renderbufferMemory","gpuMemory","_metricsCounter","tooltip","removeChild","_setCanvasSize","resolvedProps","_getViews","_getViewState","viewManagerNeedsRedraw","layerManagerNeedsRedraw","effectManagerNeedsRedraw","deckRendererNeedsRedraw","_customRender","_pick","resourceIds","statKey","getLayers","getViews","_checkForCanvasSizeChange","_this$_pick","pickedInfo","getTooltip","setTooltip","cursor","polygonOffsetFill","play","attachTimeline","pointerleave","_updateCanvasSize","renderOptions","getEffects","_setGLContext","_getFrameStats","_getMetrics","_updateCursor","updateLayers","updateViewStates","eventOptions","getLastPickedObject","layerHandler","rootHandler","pickObject","animationLoopStats","memoryStats","getDeckInstance","__deck","customRender","deckProps","triggerRepaint","isExternal","mapboxLayers","onMapMove","mapboxVersion","_map$version$split$sl","_map$version$split$sl2","getMapboxVersion","_deck$props$userData","mapboxLayerIds","deckLayer","getViewport","afterRender","_map$getCenter","getZoom","getBearing","getPitch","useMapboxProjection","layerInstance","PropTypes","oneOfType","arrayOf","instanceOf","bool","MapboxLayer","renderingMode","$player","$iframe","onClose","classed","attr","append","makeFullScreen","boxZoom","touchZoomRotate","touchPitch","filteredTrack","mapboxgl","attributionControl","setFilter","setPaintProperty","setLayoutProperty","colorPallete","filters","zoomLevel","deckGlColors","topSong","rollups","sum","track_link","greatest","topSongs","addControl","NavigationControl","addSource","addLayer","countryStopsFill","countryStopsLine","queryRenderedFeatures","playSong","trackData","trackLink","track_name","artist_name","player","playVideo","circleColor","labelColor","textLayers","labelLayers","circleColors","labelColors","coors","flyTo","curve","essential","jumpTo","easeTo","setLayerZoomRange","country_data","colorsManual","label","descending","mapboxColors","hsl","darker","circleColorsMap","labelColorsMap","colorSliceAmount","scaleLinear","topSongIndex","iso","cities","groups","generateHex","countryCode","songsToRemove","COLOR_RANGE","deckgl","hexValues","hexagonLayer","inCountry","country_code","outCountry","bubbleExCountry","song","mean","returnAvgCoors","scroller","previousWidth","hexLayerAdded","formatComma","graphic","accessToken","setRTLTextPlugin","chartTitle","locate","geocodedResult","geocoder","MapboxGeocoder","addTo","geoCode","files","loads","loadData","countryCodeToString","countryCodeToBounding","bounding","max_views","uniqueSongs","uniqueSongsMap","uniqueSongsCityOnlyMap","dedupedData","dedupedCountryData","countryRollups","rollup","closestLocation","closestDifferent","geo_name","svg","closestFifty","monoText","monoCulture","choroOutput","choro","countryCities","countryHitsUnfiltered","countryHits","countryBoundingBox","imageDiv","closestCountry","mapCreated","generateMap","fullMap","filterForSpecific","nonMono","nonMonoInCountry","nonMonoOutCountry","bubbleDiffHex","nonMonoSelected","nonMonoCenter","bubbleDiffHexCenter","sisterGeo","sisterCountries","sisterCities","sisterDist","bubbleHit","bubbleCountry","bubbleHitTrackInfo","bubbleHitName","bubbleDiffCountry","bubbleDiffCountrySelected","bubbleDiffCountryBbox","labelCrosswalk","zoom_level","adjust","offsetValue","onStepProgress","onStepEnter","geo","removeFilters","showLayer","fitBounds","addHexLayer","unfilterHex","bbox","filteredData","hexColor","filterHex","hideLayer","onStepExit","nodeVersion"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 81);\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","module.exports = require(\"regenerator-runtime\");\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import _typeof from \"@babel/runtime/helpers/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to translate\r\n * @param {ReadonlyVec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {ReadonlyQuat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyQuat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {ReadonlyMat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _construct from \"@babel/runtime/helpers/esm/construct\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport assert from './assert';\nvar RADIANS_TO_DEGREES = 1 / Math.PI * 180;\nvar DEGREES_TO_RADIANS = 1 / 180 * Math.PI;\nvar config = {};\nconfig.EPSILON = 1e-12;\nconfig.debug = false;\nconfig.precision = 4;\nconfig.printTypes = false;\nconfig.printDegrees = false;\nconfig.printRowMajor = true;\nexport { config };\nexport function configure() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  for (var key in options) {\n    assert(key in config);\n    config[key] = options[key];\n  }\n\n  return config;\n}\n\nfunction round(value) {\n  return Math.round(value / config.EPSILON) * config.EPSILON;\n}\n\nexport function formatValue(value) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$precision = _ref.precision,\n      precision = _ref$precision === void 0 ? config.precision || 4 : _ref$precision;\n\n  value = round(value);\n  return \"\".concat(parseFloat(value.toPrecision(precision)));\n}\nexport function isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value) && !(value instanceof DataView);\n}\n\nfunction duplicateArray(array) {\n  return array.clone ? array.clone() : new Array(array.length);\n}\n\nexport function clone(array) {\n  return array.clone ? array.clone() : _construct(Array, _toConsumableArray(array));\n}\n\nfunction map(value, func, result) {\n  if (isArray(value)) {\n    result = result || duplicateArray(value);\n\n    for (var i = 0; i < result.length && i < value.length; ++i) {\n      result[i] = func(value[i], i, result);\n    }\n\n    return result;\n  }\n\n  return func(value);\n}\n\nexport function toRadians(degrees) {\n  return radians(degrees);\n}\nexport function toDegrees(radians) {\n  return degrees(radians);\n}\nexport function radians(degrees, result) {\n  return map(degrees, function (degrees) {\n    return degrees * DEGREES_TO_RADIANS;\n  }, result);\n}\nexport function degrees(radians, result) {\n  return map(radians, function (radians) {\n    return radians * RADIANS_TO_DEGREES;\n  }, result);\n}\nexport function sin(radians) {\n  return map(radians, function (angle) {\n    return Math.sin(angle);\n  });\n}\nexport function cos(radians) {\n  return map(radians, function (angle) {\n    return Math.cos(angle);\n  });\n}\nexport function tan(radians) {\n  return map(radians, function (angle) {\n    return Math.tan(angle);\n  });\n}\nexport function asin(radians) {\n  return map(radians, function (angle) {\n    return Math.asin(angle);\n  });\n}\nexport function acos(radians) {\n  return map(radians, function (angle) {\n    return Math.acos(angle);\n  });\n}\nexport function atan(radians) {\n  return map(radians, function (angle) {\n    return Math.atan(angle);\n  });\n}\nexport function clamp(value, min, max) {\n  return map(value, function (value) {\n    return Math.max(min, Math.min(max, value));\n  });\n}\nexport function lerp(a, b, t) {\n  if (isArray(a)) {\n    return a.map(function (ai, i) {\n      return lerp(ai, b[i], t);\n    });\n  }\n\n  return t * b + (1 - t) * a;\n}\nexport function equals(a, b, epsilon) {\n  var oldEpsilon = config.EPSILON;\n\n  if (epsilon) {\n    config.EPSILON = epsilon;\n  }\n\n  try {\n    if (a === b) {\n      return true;\n    }\n\n    if (isArray(a) && isArray(b)) {\n      if (a.length !== b.length) {\n        return false;\n      }\n\n      for (var i = 0; i < a.length; ++i) {\n        if (!equals(a[i], b[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    if (a && a.equals) {\n      return a.equals(b);\n    }\n\n    if (b && b.equals) {\n      return b.equals(a);\n    }\n\n    if (Number.isFinite(a) && Number.isFinite(b)) {\n      return Math.abs(a - b) <= config.EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n    }\n\n    return false;\n  } finally {\n    config.EPSILON = oldEpsilon;\n  }\n}\nexport function exactEquals(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a && _typeof(a) === 'object' && b && _typeof(b) === 'object') {\n    if (a.constructor !== b.constructor) {\n      return false;\n    }\n\n    if (a.exactEquals) {\n      return a.exactEquals(b);\n    }\n  }\n\n  if (isArray(a) && isArray(b)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    for (var i = 0; i < a.length; ++i) {\n      if (!exactEquals(a[i], b[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\nexport function withEpsilon(EPSILON, func) {\n  var oldPrecision = config.EPSILON;\n  config.EPSILON = EPSILON;\n  var value;\n\n  try {\n    value = func();\n  } finally {\n    config.EPSILON = oldPrecision;\n  }\n\n  return value;\n}\n//# sourceMappingURL=common.js.map","// This file enables: import 'probe.gl/bench'.\n// Note: Must be published using package.json \"files\" field\nmodule.exports = require('./dist/es5/env');\n","import { config } from './common';\nexport function validateVector(v, length) {\n  if (v.length !== length) {\n    return false;\n  }\n\n  for (var i = 0; i < v.length; ++i) {\n    if (!Number.isFinite(v[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\nexport function checkNumber(value) {\n  if (!Number.isFinite(value)) {\n    throw new Error(\"Invalid number \".concat(value));\n  }\n\n  return value;\n}\nexport function checkVector(v, length) {\n  var callerName = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n\n  if (config.debug && !validateVector(v, length)) {\n    throw new Error(\"math.gl: \".concat(callerName, \" some fields set to invalid numbers'\"));\n  }\n\n  return v;\n}\nvar map = {};\nexport function deprecated(method, version) {\n  if (!map[method]) {\n    map[method] = true;\n    console.warn(\"\".concat(method, \" has been removed in version \").concat(version, \", see upgrade guide for more information\"));\n  }\n}\n//# sourceMappingURL=validators.js.map","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import { assert } from './assert';\nvar ERR_CONTEXT = 'Invalid WebGLRenderingContext';\nexport var ERR_WEBGL = ERR_CONTEXT;\nexport var ERR_WEBGL2 = 'Requires WebGL2';\nexport function isWebGL(gl) {\n  if (typeof WebGLRenderingContext !== 'undefined' && gl instanceof WebGLRenderingContext) {\n    return true;\n  }\n\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return true;\n  }\n\n  return Boolean(gl && Number.isFinite(gl._version));\n}\nexport function isWebGL2(gl) {\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return true;\n  }\n\n  return Boolean(gl && gl._version === 2);\n}\nexport function getWebGL2Context(gl) {\n  return isWebGL2(gl) ? gl : null;\n}\nexport function assertWebGLContext(gl) {\n  assert(isWebGL(gl), ERR_CONTEXT);\n  return gl;\n}\nexport function assertWebGL2Context(gl) {\n  assert(isWebGL2(gl), ERR_WEBGL2);\n  return gl;\n}\n//# sourceMappingURL=webgl-checks.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'luma.gl: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import * as glMatrix from \"./common.js\";\n/**\r\n * 2 Dimensional Vector\r\n * @module vec2\r\n */\n\n/**\r\n * Creates a new, empty vec2\r\n *\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec2} a vector to clone\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Copy the values from one vec2 to another\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the source vector\r\n * @returns {vec2} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Set the components of a vec2 to the given values\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} out\r\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Adds two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\r\n * Multiplies two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\r\n * Divides two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to ceil\r\n * @returns {vec2} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to floor\r\n * @returns {vec2} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to round\r\n * @returns {vec2} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\r\n * Scales a vec2 by a scalar number\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec2} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\r\n * Adds two vec2's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec2} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\r\n * Calculates the length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\r\n * Negates the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to negate\r\n * @returns {vec2} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to invert\r\n * @returns {vec2} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\r\n * Normalize a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to normalize\r\n * @returns {vec2} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\r\n * Computes the cross product of two vec2's\r\n * Note that the cross product must by definition produce a 3D vector\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec2} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec2} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2d\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2d} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat3\r\n * 3rd vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat3} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat4\r\n * 3rd vector component is implicitly '0'\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\r\n * Rotate a 2D vector\r\n * @param {vec2} out The receiving vec2\r\n * @param {ReadonlyVec2} a The vec2 point to rotate\r\n * @param {ReadonlyVec2} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec2} out\r\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\r\n * Get the angle between two 2D vectors\r\n * @param {ReadonlyVec2} a The first operand\r\n * @param {ReadonlyVec2} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec2 to zero\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @returns {vec2} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec2} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\r\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\r\n * Alias for {@link vec2.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec2.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec2.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec2.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec2.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec2.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec2s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\n\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the source vector\r\n * @returns {vec3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to floor\r\n * @returns {vec3} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to round\r\n * @returns {vec3} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to negate\r\n * @returns {vec3} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to invert\r\n * @returns {vec3} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {ReadonlyVec3} a The first operand\r\n * @param {ReadonlyVec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec3 to zero\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @returns {vec3} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document,\n  process: (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) === 'object' && process\n};\nvar self_ = globals.self || globals.window || globals.global;\nvar window_ = globals.window || globals.self || globals.global;\nvar global_ = globals.global || globals.self || globals.window;\nvar document_ = globals.document || {};\nvar process_ = globals.process || {};\nvar console_ = console;\nexport { self_ as self, window_ as window, global_ as global, document_ as document, process_ as process, console_ as console };\n//# sourceMappingURL=globals.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(\"math.gl assertion \".concat(message));\n  }\n}\n//# sourceMappingURL=assert.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _GL_PARAMETER_DEFAULT, _GL_PARAMETER_SETTERS, _GL_PARAMETER_GETTERS;\n\nimport { isWebGL2 } from '../utils/webgl-checks';\nexport var GL_PARAMETER_DEFAULTS = (_GL_PARAMETER_DEFAULT = {}, _defineProperty(_GL_PARAMETER_DEFAULT, 3042, false), _defineProperty(_GL_PARAMETER_DEFAULT, 32773, new Float32Array([0, 0, 0, 0])), _defineProperty(_GL_PARAMETER_DEFAULT, 32777, 32774), _defineProperty(_GL_PARAMETER_DEFAULT, 34877, 32774), _defineProperty(_GL_PARAMETER_DEFAULT, 32969, 1), _defineProperty(_GL_PARAMETER_DEFAULT, 32968, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 32971, 1), _defineProperty(_GL_PARAMETER_DEFAULT, 32970, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 3106, new Float32Array([0, 0, 0, 0])), _defineProperty(_GL_PARAMETER_DEFAULT, 3107, [true, true, true, true]), _defineProperty(_GL_PARAMETER_DEFAULT, 2884, false), _defineProperty(_GL_PARAMETER_DEFAULT, 2885, 1029), _defineProperty(_GL_PARAMETER_DEFAULT, 2929, false), _defineProperty(_GL_PARAMETER_DEFAULT, 2931, 1), _defineProperty(_GL_PARAMETER_DEFAULT, 2932, 513), _defineProperty(_GL_PARAMETER_DEFAULT, 2928, new Float32Array([0, 1])), _defineProperty(_GL_PARAMETER_DEFAULT, 2930, true), _defineProperty(_GL_PARAMETER_DEFAULT, 3024, true), _defineProperty(_GL_PARAMETER_DEFAULT, 36006, null), _defineProperty(_GL_PARAMETER_DEFAULT, 2886, 2305), _defineProperty(_GL_PARAMETER_DEFAULT, 33170, 4352), _defineProperty(_GL_PARAMETER_DEFAULT, 2849, 1), _defineProperty(_GL_PARAMETER_DEFAULT, 32823, false), _defineProperty(_GL_PARAMETER_DEFAULT, 32824, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 10752, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 32938, 1.0), _defineProperty(_GL_PARAMETER_DEFAULT, 32939, false), _defineProperty(_GL_PARAMETER_DEFAULT, 3089, false), _defineProperty(_GL_PARAMETER_DEFAULT, 3088, new Int32Array([0, 0, 1024, 1024])), _defineProperty(_GL_PARAMETER_DEFAULT, 2960, false), _defineProperty(_GL_PARAMETER_DEFAULT, 2961, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 2968, 0xffffffff), _defineProperty(_GL_PARAMETER_DEFAULT, 36005, 0xffffffff), _defineProperty(_GL_PARAMETER_DEFAULT, 2962, 519), _defineProperty(_GL_PARAMETER_DEFAULT, 2967, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 2963, 0xffffffff), _defineProperty(_GL_PARAMETER_DEFAULT, 34816, 519), _defineProperty(_GL_PARAMETER_DEFAULT, 36003, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 36004, 0xffffffff), _defineProperty(_GL_PARAMETER_DEFAULT, 2964, 7680), _defineProperty(_GL_PARAMETER_DEFAULT, 2965, 7680), _defineProperty(_GL_PARAMETER_DEFAULT, 2966, 7680), _defineProperty(_GL_PARAMETER_DEFAULT, 34817, 7680), _defineProperty(_GL_PARAMETER_DEFAULT, 34818, 7680), _defineProperty(_GL_PARAMETER_DEFAULT, 34819, 7680), _defineProperty(_GL_PARAMETER_DEFAULT, 2978, [0, 0, 1024, 1024]), _defineProperty(_GL_PARAMETER_DEFAULT, 3333, 4), _defineProperty(_GL_PARAMETER_DEFAULT, 3317, 4), _defineProperty(_GL_PARAMETER_DEFAULT, 37440, false), _defineProperty(_GL_PARAMETER_DEFAULT, 37441, false), _defineProperty(_GL_PARAMETER_DEFAULT, 37443, 37444), _defineProperty(_GL_PARAMETER_DEFAULT, 35723, 4352), _defineProperty(_GL_PARAMETER_DEFAULT, 36010, null), _defineProperty(_GL_PARAMETER_DEFAULT, 35977, false), _defineProperty(_GL_PARAMETER_DEFAULT, 3330, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 3332, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 3331, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 3314, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 32878, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 3316, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 3315, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 32877, 0), _GL_PARAMETER_DEFAULT);\n\nvar enable = function enable(gl, value, key) {\n  return value ? gl.enable(key) : gl.disable(key);\n};\n\nvar hint = function hint(gl, value, key) {\n  return gl.hint(key, value);\n};\n\nvar pixelStorei = function pixelStorei(gl, value, key) {\n  return gl.pixelStorei(key, value);\n};\n\nvar drawFramebuffer = function drawFramebuffer(gl, value) {\n  var target = isWebGL2(gl) ? 36009 : 36160;\n  return gl.bindFramebuffer(target, value);\n};\n\nvar readFramebuffer = function readFramebuffer(gl, value) {\n  return gl.bindFramebuffer(36008, value);\n};\n\nfunction isArray(array) {\n  return Array.isArray(array) || ArrayBuffer.isView(array);\n}\n\nexport var GL_PARAMETER_SETTERS = (_GL_PARAMETER_SETTERS = {}, _defineProperty(_GL_PARAMETER_SETTERS, 3042, enable), _defineProperty(_GL_PARAMETER_SETTERS, 32773, function (gl, value) {\n  return gl.blendColor.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, 32777, 'blendEquation'), _defineProperty(_GL_PARAMETER_SETTERS, 34877, 'blendEquation'), _defineProperty(_GL_PARAMETER_SETTERS, 32969, 'blendFunc'), _defineProperty(_GL_PARAMETER_SETTERS, 32968, 'blendFunc'), _defineProperty(_GL_PARAMETER_SETTERS, 32971, 'blendFunc'), _defineProperty(_GL_PARAMETER_SETTERS, 32970, 'blendFunc'), _defineProperty(_GL_PARAMETER_SETTERS, 3106, function (gl, value) {\n  return gl.clearColor.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, 3107, function (gl, value) {\n  return gl.colorMask.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2884, enable), _defineProperty(_GL_PARAMETER_SETTERS, 2885, function (gl, value) {\n  return gl.cullFace(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2929, enable), _defineProperty(_GL_PARAMETER_SETTERS, 2931, function (gl, value) {\n  return gl.clearDepth(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2932, function (gl, value) {\n  return gl.depthFunc(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2928, function (gl, value) {\n  return gl.depthRange.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2930, function (gl, value) {\n  return gl.depthMask(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 3024, enable), _defineProperty(_GL_PARAMETER_SETTERS, 35723, hint), _defineProperty(_GL_PARAMETER_SETTERS, 36006, drawFramebuffer), _defineProperty(_GL_PARAMETER_SETTERS, 2886, function (gl, value) {\n  return gl.frontFace(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 33170, hint), _defineProperty(_GL_PARAMETER_SETTERS, 2849, function (gl, value) {\n  return gl.lineWidth(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 32823, enable), _defineProperty(_GL_PARAMETER_SETTERS, 32824, 'polygonOffset'), _defineProperty(_GL_PARAMETER_SETTERS, 10752, 'polygonOffset'), _defineProperty(_GL_PARAMETER_SETTERS, 35977, enable), _defineProperty(_GL_PARAMETER_SETTERS, 32938, 'sampleCoverage'), _defineProperty(_GL_PARAMETER_SETTERS, 32939, 'sampleCoverage'), _defineProperty(_GL_PARAMETER_SETTERS, 3089, enable), _defineProperty(_GL_PARAMETER_SETTERS, 3088, function (gl, value) {\n  return gl.scissor.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2960, enable), _defineProperty(_GL_PARAMETER_SETTERS, 2961, function (gl, value) {\n  return gl.clearStencil(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2968, function (gl, value) {\n  return gl.stencilMaskSeparate(1028, value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 36005, function (gl, value) {\n  return gl.stencilMaskSeparate(1029, value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2962, 'stencilFuncFront'), _defineProperty(_GL_PARAMETER_SETTERS, 2967, 'stencilFuncFront'), _defineProperty(_GL_PARAMETER_SETTERS, 2963, 'stencilFuncFront'), _defineProperty(_GL_PARAMETER_SETTERS, 34816, 'stencilFuncBack'), _defineProperty(_GL_PARAMETER_SETTERS, 36003, 'stencilFuncBack'), _defineProperty(_GL_PARAMETER_SETTERS, 36004, 'stencilFuncBack'), _defineProperty(_GL_PARAMETER_SETTERS, 2964, 'stencilOpFront'), _defineProperty(_GL_PARAMETER_SETTERS, 2965, 'stencilOpFront'), _defineProperty(_GL_PARAMETER_SETTERS, 2966, 'stencilOpFront'), _defineProperty(_GL_PARAMETER_SETTERS, 34817, 'stencilOpBack'), _defineProperty(_GL_PARAMETER_SETTERS, 34818, 'stencilOpBack'), _defineProperty(_GL_PARAMETER_SETTERS, 34819, 'stencilOpBack'), _defineProperty(_GL_PARAMETER_SETTERS, 2978, function (gl, value) {\n  return gl.viewport.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, 3333, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 3317, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 37440, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 37441, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 37443, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 3330, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 3332, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 3331, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 36010, readFramebuffer), _defineProperty(_GL_PARAMETER_SETTERS, 3314, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 32878, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 3316, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 3315, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 32877, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, \"framebuffer\", function framebuffer(gl, _framebuffer) {\n  var handle = _framebuffer && 'handle' in _framebuffer ? _framebuffer.handle : _framebuffer;\n  return gl.bindFramebuffer(36160, handle);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"blend\", function blend(gl, value) {\n  return value ? gl.enable(3042) : gl.disable(3042);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"blendColor\", function blendColor(gl, value) {\n  return gl.blendColor.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"blendEquation\", function blendEquation(gl, args) {\n  args = isArray(args) ? args : [args, args];\n  gl.blendEquationSeparate.apply(gl, _toConsumableArray(args));\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"blendFunc\", function blendFunc(gl, args) {\n  args = isArray(args) && args.length === 2 ? [].concat(_toConsumableArray(args), _toConsumableArray(args)) : args;\n  gl.blendFuncSeparate.apply(gl, _toConsumableArray(args));\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"clearColor\", function clearColor(gl, value) {\n  return gl.clearColor.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"clearDepth\", function clearDepth(gl, value) {\n  return gl.clearDepth(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"clearStencil\", function clearStencil(gl, value) {\n  return gl.clearStencil(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"colorMask\", function colorMask(gl, value) {\n  return gl.colorMask.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"cull\", function cull(gl, value) {\n  return value ? gl.enable(2884) : gl.disable(2884);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"cullFace\", function cullFace(gl, value) {\n  return gl.cullFace(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"depthTest\", function depthTest(gl, value) {\n  return value ? gl.enable(2929) : gl.disable(2929);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"depthFunc\", function depthFunc(gl, value) {\n  return gl.depthFunc(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"depthMask\", function depthMask(gl, value) {\n  return gl.depthMask(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"depthRange\", function depthRange(gl, value) {\n  return gl.depthRange.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"dither\", function dither(gl, value) {\n  return value ? gl.enable(3024) : gl.disable(3024);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"derivativeHint\", function derivativeHint(gl, value) {\n  gl.hint(35723, value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"frontFace\", function frontFace(gl, value) {\n  return gl.frontFace(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"mipmapHint\", function mipmapHint(gl, value) {\n  return gl.hint(33170, value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"lineWidth\", function lineWidth(gl, value) {\n  return gl.lineWidth(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"polygonOffsetFill\", function polygonOffsetFill(gl, value) {\n  return value ? gl.enable(32823) : gl.disable(32823);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"polygonOffset\", function polygonOffset(gl, value) {\n  return gl.polygonOffset.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"sampleCoverage\", function sampleCoverage(gl, value) {\n  return gl.sampleCoverage.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"scissorTest\", function scissorTest(gl, value) {\n  return value ? gl.enable(3089) : gl.disable(3089);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"scissor\", function scissor(gl, value) {\n  return gl.scissor.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"stencilTest\", function stencilTest(gl, value) {\n  return value ? gl.enable(2960) : gl.disable(2960);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"stencilMask\", function stencilMask(gl, value) {\n  value = isArray(value) ? value : [value, value];\n\n  var _value = value,\n      _value2 = _slicedToArray(_value, 2),\n      mask = _value2[0],\n      backMask = _value2[1];\n\n  gl.stencilMaskSeparate(1028, mask);\n  gl.stencilMaskSeparate(1029, backMask);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"stencilFunc\", function stencilFunc(gl, args) {\n  args = isArray(args) && args.length === 3 ? [].concat(_toConsumableArray(args), _toConsumableArray(args)) : args;\n\n  var _args = args,\n      _args2 = _slicedToArray(_args, 6),\n      func = _args2[0],\n      ref = _args2[1],\n      mask = _args2[2],\n      backFunc = _args2[3],\n      backRef = _args2[4],\n      backMask = _args2[5];\n\n  gl.stencilFuncSeparate(1028, func, ref, mask);\n  gl.stencilFuncSeparate(1029, backFunc, backRef, backMask);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"stencilOp\", function stencilOp(gl, args) {\n  args = isArray(args) && args.length === 3 ? [].concat(_toConsumableArray(args), _toConsumableArray(args)) : args;\n\n  var _args3 = args,\n      _args4 = _slicedToArray(_args3, 6),\n      sfail = _args4[0],\n      dpfail = _args4[1],\n      dppass = _args4[2],\n      backSfail = _args4[3],\n      backDpfail = _args4[4],\n      backDppass = _args4[5];\n\n  gl.stencilOpSeparate(1028, sfail, dpfail, dppass);\n  gl.stencilOpSeparate(1029, backSfail, backDpfail, backDppass);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"viewport\", function viewport(gl, value) {\n  return gl.viewport.apply(gl, _toConsumableArray(value));\n}), _GL_PARAMETER_SETTERS);\n\nfunction getValue(glEnum, values, cache) {\n  return values[glEnum] !== undefined ? values[glEnum] : cache[glEnum];\n}\n\nexport var GL_COMPOSITE_PARAMETER_SETTERS = {\n  blendEquation: function blendEquation(gl, values, cache) {\n    return gl.blendEquationSeparate(getValue(32777, values, cache), getValue(34877, values, cache));\n  },\n  blendFunc: function blendFunc(gl, values, cache) {\n    return gl.blendFuncSeparate(getValue(32969, values, cache), getValue(32968, values, cache), getValue(32971, values, cache), getValue(32970, values, cache));\n  },\n  polygonOffset: function polygonOffset(gl, values, cache) {\n    return gl.polygonOffset(getValue(32824, values, cache), getValue(10752, values, cache));\n  },\n  sampleCoverage: function sampleCoverage(gl, values, cache) {\n    return gl.sampleCoverage(getValue(32938, values, cache), getValue(32939, values, cache));\n  },\n  stencilFuncFront: function stencilFuncFront(gl, values, cache) {\n    return gl.stencilFuncSeparate(1028, getValue(2962, values, cache), getValue(2967, values, cache), getValue(2963, values, cache));\n  },\n  stencilFuncBack: function stencilFuncBack(gl, values, cache) {\n    return gl.stencilFuncSeparate(1029, getValue(34816, values, cache), getValue(36003, values, cache), getValue(36004, values, cache));\n  },\n  stencilOpFront: function stencilOpFront(gl, values, cache) {\n    return gl.stencilOpSeparate(1028, getValue(2964, values, cache), getValue(2965, values, cache), getValue(2966, values, cache));\n  },\n  stencilOpBack: function stencilOpBack(gl, values, cache) {\n    return gl.stencilOpSeparate(1029, getValue(34817, values, cache), getValue(34818, values, cache), getValue(34819, values, cache));\n  }\n};\nexport var GL_HOOKED_SETTERS = {\n  enable: function enable(update, capability) {\n    return update(_defineProperty({}, capability, true));\n  },\n  disable: function disable(update, capability) {\n    return update(_defineProperty({}, capability, false));\n  },\n  pixelStorei: function pixelStorei(update, pname, value) {\n    return update(_defineProperty({}, pname, value));\n  },\n  hint: function hint(update, pname, _hint) {\n    return update(_defineProperty({}, pname, _hint));\n  },\n  bindFramebuffer: function bindFramebuffer(update, target, framebuffer) {\n    var _update5;\n\n    switch (target) {\n      case 36160:\n        return update((_update5 = {}, _defineProperty(_update5, 36006, framebuffer), _defineProperty(_update5, 36010, framebuffer), _update5));\n\n      case 36009:\n        return update(_defineProperty({}, 36006, framebuffer));\n\n      case 36008:\n        return update(_defineProperty({}, 36010, framebuffer));\n\n      default:\n        return null;\n    }\n  },\n  blendColor: function blendColor(update, r, g, b, a) {\n    return update(_defineProperty({}, 32773, new Float32Array([r, g, b, a])));\n  },\n  blendEquation: function blendEquation(update, mode) {\n    var _update9;\n\n    return update((_update9 = {}, _defineProperty(_update9, 32777, mode), _defineProperty(_update9, 34877, mode), _update9));\n  },\n  blendEquationSeparate: function blendEquationSeparate(update, modeRGB, modeAlpha) {\n    var _update10;\n\n    return update((_update10 = {}, _defineProperty(_update10, 32777, modeRGB), _defineProperty(_update10, 34877, modeAlpha), _update10));\n  },\n  blendFunc: function blendFunc(update, src, dst) {\n    var _update11;\n\n    return update((_update11 = {}, _defineProperty(_update11, 32969, src), _defineProperty(_update11, 32968, dst), _defineProperty(_update11, 32971, src), _defineProperty(_update11, 32970, dst), _update11));\n  },\n  blendFuncSeparate: function blendFuncSeparate(update, srcRGB, dstRGB, srcAlpha, dstAlpha) {\n    var _update12;\n\n    return update((_update12 = {}, _defineProperty(_update12, 32969, srcRGB), _defineProperty(_update12, 32968, dstRGB), _defineProperty(_update12, 32971, srcAlpha), _defineProperty(_update12, 32970, dstAlpha), _update12));\n  },\n  clearColor: function clearColor(update, r, g, b, a) {\n    return update(_defineProperty({}, 3106, new Float32Array([r, g, b, a])));\n  },\n  clearDepth: function clearDepth(update, depth) {\n    return update(_defineProperty({}, 2931, depth));\n  },\n  clearStencil: function clearStencil(update, s) {\n    return update(_defineProperty({}, 2961, s));\n  },\n  colorMask: function colorMask(update, r, g, b, a) {\n    return update(_defineProperty({}, 3107, [r, g, b, a]));\n  },\n  cullFace: function cullFace(update, mode) {\n    return update(_defineProperty({}, 2885, mode));\n  },\n  depthFunc: function depthFunc(update, func) {\n    return update(_defineProperty({}, 2932, func));\n  },\n  depthRange: function depthRange(update, zNear, zFar) {\n    return update(_defineProperty({}, 2928, new Float32Array([zNear, zFar])));\n  },\n  depthMask: function depthMask(update, mask) {\n    return update(_defineProperty({}, 2930, mask));\n  },\n  frontFace: function frontFace(update, face) {\n    return update(_defineProperty({}, 2886, face));\n  },\n  lineWidth: function lineWidth(update, width) {\n    return update(_defineProperty({}, 2849, width));\n  },\n  polygonOffset: function polygonOffset(update, factor, units) {\n    var _update23;\n\n    return update((_update23 = {}, _defineProperty(_update23, 32824, factor), _defineProperty(_update23, 10752, units), _update23));\n  },\n  sampleCoverage: function sampleCoverage(update, value, invert) {\n    var _update24;\n\n    return update((_update24 = {}, _defineProperty(_update24, 32938, value), _defineProperty(_update24, 32939, invert), _update24));\n  },\n  scissor: function scissor(update, x, y, width, height) {\n    return update(_defineProperty({}, 3088, new Int32Array([x, y, width, height])));\n  },\n  stencilMask: function stencilMask(update, mask) {\n    var _update26;\n\n    return update((_update26 = {}, _defineProperty(_update26, 2968, mask), _defineProperty(_update26, 36005, mask), _update26));\n  },\n  stencilMaskSeparate: function stencilMaskSeparate(update, face, mask) {\n    return update(_defineProperty({}, face === 1028 ? 2968 : 36005, mask));\n  },\n  stencilFunc: function stencilFunc(update, func, ref, mask) {\n    var _update28;\n\n    return update((_update28 = {}, _defineProperty(_update28, 2962, func), _defineProperty(_update28, 2967, ref), _defineProperty(_update28, 2963, mask), _defineProperty(_update28, 34816, func), _defineProperty(_update28, 36003, ref), _defineProperty(_update28, 36004, mask), _update28));\n  },\n  stencilFuncSeparate: function stencilFuncSeparate(update, face, func, ref, mask) {\n    var _update29;\n\n    return update((_update29 = {}, _defineProperty(_update29, face === 1028 ? 2962 : 34816, func), _defineProperty(_update29, face === 1028 ? 2967 : 36003, ref), _defineProperty(_update29, face === 1028 ? 2963 : 36004, mask), _update29));\n  },\n  stencilOp: function stencilOp(update, fail, zfail, zpass) {\n    var _update30;\n\n    return update((_update30 = {}, _defineProperty(_update30, 2964, fail), _defineProperty(_update30, 2965, zfail), _defineProperty(_update30, 2966, zpass), _defineProperty(_update30, 34817, fail), _defineProperty(_update30, 34818, zfail), _defineProperty(_update30, 34819, zpass), _update30));\n  },\n  stencilOpSeparate: function stencilOpSeparate(update, face, fail, zfail, zpass) {\n    var _update31;\n\n    return update((_update31 = {}, _defineProperty(_update31, face === 1028 ? 2964 : 34817, fail), _defineProperty(_update31, face === 1028 ? 2965 : 34818, zfail), _defineProperty(_update31, face === 1028 ? 2966 : 34819, zpass), _update31));\n  },\n  viewport: function viewport(update, x, y, width, height) {\n    return update(_defineProperty({}, 2978, [x, y, width, height]));\n  }\n};\n\nvar isEnabled = function isEnabled(gl, key) {\n  return gl.isEnabled(key);\n};\n\nexport var GL_PARAMETER_GETTERS = (_GL_PARAMETER_GETTERS = {}, _defineProperty(_GL_PARAMETER_GETTERS, 3042, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 2884, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 2929, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 3024, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 32823, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 32926, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 32928, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 3089, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 2960, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 35977, isEnabled), _GL_PARAMETER_GETTERS);\n//# sourceMappingURL=webgl-parameter-tables.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { GL_PARAMETER_DEFAULTS, GL_HOOKED_SETTERS } from './webgl-parameter-tables';\nimport { setParameters, getParameters } from './unified-parameter-api';\nimport { assert } from '../utils/assert';\nimport { deepArrayEqual } from '../utils/utils';\n\nfunction installGetterOverride(gl, functionName) {\n  var originalGetterFunc = gl[functionName].bind(gl);\n\n  gl[functionName] = function get() {\n    var pname = arguments.length <= 0 ? undefined : arguments[0];\n\n    if (!(pname in gl.state.cache)) {\n      gl.state.cache[pname] = originalGetterFunc.apply(void 0, arguments);\n    }\n\n    return gl.state.enable ? gl.state.cache[pname] : originalGetterFunc.apply(void 0, arguments);\n  };\n\n  Object.defineProperty(gl[functionName], 'name', {\n    value: \"\".concat(functionName, \"-from-cache\"),\n    configurable: false\n  });\n}\n\nfunction installSetterSpy(gl, functionName, setter) {\n  var originalSetterFunc = gl[functionName].bind(gl);\n\n  gl[functionName] = function set() {\n    for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {\n      params[_key] = arguments[_key];\n    }\n\n    var _setter = setter.apply(void 0, [gl.state._updateCache].concat(params)),\n        valueChanged = _setter.valueChanged,\n        oldValue = _setter.oldValue;\n\n    if (valueChanged) {\n      originalSetterFunc.apply(void 0, params);\n    }\n\n    return oldValue;\n  };\n\n  Object.defineProperty(gl[functionName], 'name', {\n    value: \"\".concat(functionName, \"-to-cache\"),\n    configurable: false\n  });\n}\n\nfunction installProgramSpy(gl) {\n  var originalUseProgram = gl.useProgram.bind(gl);\n\n  gl.useProgram = function useProgramLuma(handle) {\n    if (gl.state.program !== handle) {\n      originalUseProgram(handle);\n      gl.state.program = handle;\n    }\n  };\n}\n\nvar GLState = function () {\n  function GLState(gl) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref$copyState = _ref.copyState,\n        copyState = _ref$copyState === void 0 ? false : _ref$copyState,\n        _ref$log = _ref.log,\n        log = _ref$log === void 0 ? function () {} : _ref$log;\n\n    _classCallCheck(this, GLState);\n\n    this.gl = gl;\n    this.program = null;\n    this.stateStack = [];\n    this.enable = true;\n    this.cache = copyState ? getParameters(gl) : Object.assign({}, GL_PARAMETER_DEFAULTS);\n    this.log = log;\n    this._updateCache = this._updateCache.bind(this);\n    Object.seal(this);\n  }\n\n  _createClass(GLState, [{\n    key: \"push\",\n    value: function push() {\n      var values = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.stateStack.push({});\n    }\n  }, {\n    key: \"pop\",\n    value: function pop() {\n      assert(this.stateStack.length > 0);\n      var oldValues = this.stateStack[this.stateStack.length - 1];\n      setParameters(this.gl, oldValues);\n      this.stateStack.pop();\n    }\n  }, {\n    key: \"_updateCache\",\n    value: function _updateCache(values) {\n      var valueChanged = false;\n      var oldValue;\n      var oldValues = this.stateStack.length > 0 && this.stateStack[this.stateStack.length - 1];\n\n      for (var key in values) {\n        assert(key !== undefined);\n        var value = values[key];\n        var cached = this.cache[key];\n\n        if (!deepArrayEqual(value, cached)) {\n          valueChanged = true;\n          oldValue = cached;\n\n          if (oldValues && !(key in oldValues)) {\n            oldValues[key] = cached;\n          }\n\n          this.cache[key] = value;\n        }\n      }\n\n      return {\n        valueChanged: valueChanged,\n        oldValue: oldValue\n      };\n    }\n  }]);\n\n  return GLState;\n}();\n\nexport function trackContextState(gl) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _options$enable = options.enable,\n      enable = _options$enable === void 0 ? true : _options$enable,\n      copyState = options.copyState;\n  assert(copyState !== undefined);\n\n  if (!gl.state) {\n    var global_ = typeof global !== 'undefined' ? global : window;\n    var polyfillContext = global_.polyfillContext;\n\n    if (polyfillContext) {\n      polyfillContext(gl);\n    }\n\n    gl.state = new GLState(gl, {\n      copyState: copyState\n    });\n    installProgramSpy(gl);\n\n    for (var key in GL_HOOKED_SETTERS) {\n      var setter = GL_HOOKED_SETTERS[key];\n      installSetterSpy(gl, key, setter);\n    }\n\n    installGetterOverride(gl, 'getParameter');\n    installGetterOverride(gl, 'isEnabled');\n  }\n\n  gl.state.enable = enable;\n  return gl;\n}\nexport function pushContextState(gl) {\n  if (!gl.state) {\n    trackContextState(gl, {\n      copyState: false\n    });\n  }\n\n  gl.state.push();\n}\nexport function popContextState(gl) {\n  assert(gl.state);\n  gl.state.pop();\n}\n//# sourceMappingURL=track-context-state.js.map","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","import * as glMatrix from \"./common.js\";\n/**\r\n * 4 Dimensional Vector\r\n * @module vec4\r\n */\n\n/**\r\n * Creates a new, empty vec4\r\n *\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec4} a vector to clone\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Copy the values from one vec4 to another\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the source vector\r\n * @returns {vec4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to the given values\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} out\r\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Adds two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\r\n * Multiplies two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\r\n * Divides two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to ceil\r\n * @returns {vec4} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to floor\r\n * @returns {vec4} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to round\r\n * @returns {vec4} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\r\n * Scales a vec4 by a scalar number\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec4} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\r\n * Adds two vec4's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec4} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Calculates the length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Negates the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to negate\r\n * @returns {vec4} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to invert\r\n * @returns {vec4} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\r\n * Normalize a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to normalize\r\n * @returns {vec4} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\r\n * Returns the cross-product of three vectors in a 4-dimensional space\r\n *\r\n * @param {ReadonlyVec4} result the receiving vector\r\n * @param {ReadonlyVec4} U the first vector\r\n * @param {ReadonlyVec4} V the second vector\r\n * @param {ReadonlyVec4} W the third vector\r\n * @returns {vec4} result\r\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec4} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec4} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a mat4.\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a quat\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to zero\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @returns {vec4} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec4} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\r\n * Alias for {@link vec4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec4.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec4.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec4.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec4.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec4.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec4s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { GL_PARAMETER_DEFAULTS, GL_PARAMETER_SETTERS, GL_COMPOSITE_PARAMETER_SETTERS, GL_PARAMETER_GETTERS } from './webgl-parameter-tables';\nimport { pushContextState, popContextState } from './track-context-state';\nimport { assert } from '../utils/assert';\nimport { isWebGL } from '../utils/webgl-checks';\nimport { isObjectEmpty } from '../utils/utils';\nexport function setParameters(gl, values) {\n  assert(isWebGL(gl), 'setParameters requires a WebGL context');\n\n  if (isObjectEmpty(values)) {\n    return;\n  }\n\n  var compositeSetters = {};\n\n  for (var key in values) {\n    var glConstant = Number(key);\n    var setter = GL_PARAMETER_SETTERS[key];\n\n    if (setter) {\n      if (typeof setter === 'string') {\n        compositeSetters[setter] = true;\n      } else {\n        setter(gl, values[key], glConstant);\n      }\n    }\n  }\n\n  var cache = gl.state && gl.state.cache;\n\n  if (cache) {\n    for (var _key in compositeSetters) {\n      var compositeSetter = GL_COMPOSITE_PARAMETER_SETTERS[_key];\n      compositeSetter(gl, values, cache);\n    }\n  }\n}\nexport function getParameters(gl, parameters) {\n  parameters = parameters || GL_PARAMETER_DEFAULTS;\n\n  if (typeof parameters === 'number') {\n    var key = parameters;\n    var getter = GL_PARAMETER_GETTERS[key];\n    return getter ? getter(gl, key) : gl.getParameter(key);\n  }\n\n  var parameterKeys = Array.isArray(parameters) ? parameters : Object.keys(parameters);\n  var state = {};\n\n  var _iterator = _createForOfIteratorHelper(parameterKeys),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _key2 = _step.value;\n      var _getter = GL_PARAMETER_GETTERS[_key2];\n      state[_key2] = _getter ? _getter(gl, Number(_key2)) : gl.getParameter(Number(_key2));\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return state;\n}\nexport function resetParameters(gl) {\n  setParameters(gl, GL_PARAMETER_DEFAULTS);\n}\nexport function withParameters(gl, parameters, func) {\n  if (isObjectEmpty(parameters)) {\n    return func(gl);\n  }\n\n  var _parameters$nocatch = parameters.nocatch,\n      nocatch = _parameters$nocatch === void 0 ? true : _parameters$nocatch;\n  pushContextState(gl);\n  setParameters(gl, parameters);\n  var value;\n\n  if (nocatch) {\n    value = func(gl);\n    popContextState(gl);\n  } else {\n    try {\n      value = func(gl);\n    } finally {\n      popContextState(gl);\n    }\n  }\n\n  return value;\n}\n//# sourceMappingURL=unified-parameter-api.js.map","export var userAgent = typeof navigator !== 'undefined' && navigator.userAgent ? navigator.userAgent.toLowerCase() : '';\nvar window_ = typeof window !== 'undefined' ? window : global;\nvar global_ = typeof global !== 'undefined' ? global : window;\nvar document_ = typeof document !== 'undefined' ? document : {};\nexport { window_ as window, global_ as global, document_ as document };\nvar passiveSupported = false;\n\ntry {\n  var options = {\n    get passive() {\n      passiveSupported = true;\n      return true;\n    }\n\n  };\n  window_.addEventListener('test', options, options);\n  window_.removeEventListener('test', options, options);\n} catch (err) {}\n\nexport { passiveSupported };\n//# sourceMappingURL=globals.js.map","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","export function vec2_transformMat4AsVector(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  var w = m[3] * x + m[7] * y || 1.0;\n  out[0] = (m[0] * x + m[4] * y) / w;\n  out[1] = (m[1] * x + m[5] * y) / w;\n  return out;\n}\nexport function vec3_transformMat4AsVector(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z) / w;\n  return out;\n}\nexport function vec3_transformMat2(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  return out;\n}\nexport function vec4_transformMat2(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\nexport function vec4_transformMat3(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  out[0] = m[0] * x + m[3] * y + m[6] * z;\n  out[1] = m[1] * x + m[4] * y + m[7] * z;\n  out[2] = m[2] * x + m[5] * y + m[8] * z;\n  out[3] = a[3];\n  return out;\n}\n//# sourceMappingURL=gl-matrix-extras.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _WEBGL_PARAMETERS;\n\nimport { isWebGL2 } from '../utils/webgl-checks';\nvar OES_element_index = 'OES_element_index';\nvar WEBGL_draw_buffers = 'WEBGL_draw_buffers';\nvar EXT_disjoint_timer_query = 'EXT_disjoint_timer_query';\nvar EXT_disjoint_timer_query_webgl2 = 'EXT_disjoint_timer_query_webgl2';\nvar EXT_texture_filter_anisotropic = 'EXT_texture_filter_anisotropic';\nvar WEBGL_debug_renderer_info = 'WEBGL_debug_renderer_info';\nvar GL_FRAGMENT_SHADER_DERIVATIVE_HINT = 0x8b8b;\nvar GL_DONT_CARE = 0x1100;\nvar GL_GPU_DISJOINT_EXT = 0x8fbb;\nvar GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT = 0x84ff;\nvar GL_UNMASKED_VENDOR_WEBGL = 0x9245;\nvar GL_UNMASKED_RENDERER_WEBGL = 0x9246;\n\nvar getWebGL2ValueOrZero = function getWebGL2ValueOrZero(gl) {\n  return !isWebGL2(gl) ? 0 : undefined;\n};\n\nvar WEBGL_PARAMETERS = (_WEBGL_PARAMETERS = {}, _defineProperty(_WEBGL_PARAMETERS, 3074, function (gl) {\n  return !isWebGL2(gl) ? 36064 : undefined;\n}), _defineProperty(_WEBGL_PARAMETERS, GL_FRAGMENT_SHADER_DERIVATIVE_HINT, function (gl) {\n  return !isWebGL2(gl) ? GL_DONT_CARE : undefined;\n}), _defineProperty(_WEBGL_PARAMETERS, 35977, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 32937, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL_GPU_DISJOINT_EXT, function (gl, getParameter) {\n  var ext = isWebGL2(gl) ? gl.getExtension(EXT_disjoint_timer_query_webgl2) : gl.getExtension(EXT_disjoint_timer_query);\n  return ext && ext.GPU_DISJOINT_EXT ? getParameter(ext.GPU_DISJOINT_EXT) : 0;\n}), _defineProperty(_WEBGL_PARAMETERS, GL_UNMASKED_VENDOR_WEBGL, function (gl, getParameter) {\n  var ext = gl.getExtension(WEBGL_debug_renderer_info);\n  return getParameter(ext && ext.UNMASKED_VENDOR_WEBGL || 7936);\n}), _defineProperty(_WEBGL_PARAMETERS, GL_UNMASKED_RENDERER_WEBGL, function (gl, getParameter) {\n  var ext = gl.getExtension(WEBGL_debug_renderer_info);\n  return getParameter(ext && ext.UNMASKED_RENDERER_WEBGL || 7937);\n}), _defineProperty(_WEBGL_PARAMETERS, GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT, function (gl, getParameter) {\n  var ext = gl.luma.extensions[EXT_texture_filter_anisotropic];\n  return ext ? getParameter(ext.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 1.0;\n}), _defineProperty(_WEBGL_PARAMETERS, 32883, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35071, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 37447, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 36063, function (gl, getParameter) {\n  if (!isWebGL2(gl)) {\n    var ext = gl.getExtension(WEBGL_draw_buffers);\n    return ext ? getParameter(ext.MAX_COLOR_ATTACHMENTS_WEBGL) : 0;\n  }\n\n  return undefined;\n}), _defineProperty(_WEBGL_PARAMETERS, 35379, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35374, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35377, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 34852, function (gl) {\n  if (!isWebGL2(gl)) {\n    var ext = gl.getExtension(WEBGL_draw_buffers);\n    return ext ? ext.MAX_DRAW_BUFFERS_WEBGL : 0;\n  }\n\n  return undefined;\n}), _defineProperty(_WEBGL_PARAMETERS, 36203, function (gl) {\n  return gl.getExtension(OES_element_index) ? 2147483647 : 65535;\n}), _defineProperty(_WEBGL_PARAMETERS, 33001, function (gl) {\n  return gl.getExtension(OES_element_index) ? 16777216 : 65535;\n}), _defineProperty(_WEBGL_PARAMETERS, 33000, function (gl) {\n  return 16777216;\n}), _defineProperty(_WEBGL_PARAMETERS, 37157, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35373, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35657, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 36183, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 37137, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 34045, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35978, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35979, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35968, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35376, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35375, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35659, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 37154, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35371, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35658, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35076, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35077, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35380, getWebGL2ValueOrZero), _WEBGL_PARAMETERS);\nexport function getParameterPolyfill(gl, originalGetParameter, pname) {\n  var limit = WEBGL_PARAMETERS[pname];\n  var value = typeof limit === 'function' ? limit(gl, originalGetParameter, pname) : limit;\n  var result = value !== undefined ? value : originalGetParameter(pname);\n  return result;\n}\n//# sourceMappingURL=get-parameter-polyfill.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _WEBGL2_CONTEXT_POLYF;\n\nimport { assert } from '../utils/assert';\nimport { isWebGL2 } from '../utils/webgl-checks';\nimport { getParameterPolyfill } from './get-parameter-polyfill';\nvar OES_vertex_array_object = 'OES_vertex_array_object';\nvar ANGLE_instanced_arrays = 'ANGLE_instanced_arrays';\nvar WEBGL_draw_buffers = 'WEBGL_draw_buffers';\nvar EXT_disjoint_timer_query = 'EXT_disjoint_timer_query';\nvar EXT_texture_filter_anisotropic = 'EXT_texture_filter_anisotropic';\nvar ERR_VAO_NOT_SUPPORTED = 'VertexArray requires WebGL2 or OES_vertex_array_object extension';\n\nfunction getExtensionData(gl, extension) {\n  return {\n    webgl2: isWebGL2(gl),\n    ext: gl.getExtension(extension)\n  };\n}\n\nexport var WEBGL2_CONTEXT_POLYFILLS = (_WEBGL2_CONTEXT_POLYF = {}, _defineProperty(_WEBGL2_CONTEXT_POLYF, OES_vertex_array_object, {\n  meta: {\n    suffix: 'OES'\n  },\n  createVertexArray: function createVertexArray() {\n    assert(false, ERR_VAO_NOT_SUPPORTED);\n  },\n  deleteVertexArray: function deleteVertexArray() {},\n  bindVertexArray: function bindVertexArray() {},\n  isVertexArray: function isVertexArray() {\n    return false;\n  }\n}), _defineProperty(_WEBGL2_CONTEXT_POLYF, ANGLE_instanced_arrays, {\n  meta: {\n    suffix: 'ANGLE'\n  },\n  vertexAttribDivisor: function vertexAttribDivisor(location, divisor) {\n    assert(divisor === 0, 'WebGL instanced rendering not supported');\n  },\n  drawElementsInstanced: function drawElementsInstanced() {},\n  drawArraysInstanced: function drawArraysInstanced() {}\n}), _defineProperty(_WEBGL2_CONTEXT_POLYF, WEBGL_draw_buffers, {\n  meta: {\n    suffix: 'WEBGL'\n  },\n  drawBuffers: function drawBuffers() {\n    assert(false);\n  }\n}), _defineProperty(_WEBGL2_CONTEXT_POLYF, EXT_disjoint_timer_query, {\n  meta: {\n    suffix: 'EXT'\n  },\n  createQuery: function createQuery() {\n    assert(false);\n  },\n  deleteQuery: function deleteQuery() {\n    assert(false);\n  },\n  beginQuery: function beginQuery() {\n    assert(false);\n  },\n  endQuery: function endQuery() {},\n  getQuery: function getQuery(handle, pname) {\n    return this.getQueryObject(handle, pname);\n  },\n  getQueryParameter: function getQueryParameter(handle, pname) {\n    return this.getQueryObject(handle, pname);\n  },\n  getQueryObject: function getQueryObject() {}\n}), _WEBGL2_CONTEXT_POLYF);\nexport var WEBGL2_CONTEXT_OVERRIDES = {\n  readBuffer: function readBuffer(gl, originalFunc, attachment) {\n    if (isWebGL2(gl)) {\n      originalFunc(attachment);\n    } else {}\n  },\n  getVertexAttrib: function getVertexAttrib(gl, originalFunc, location, pname) {\n    var _getExtensionData = getExtensionData(gl, ANGLE_instanced_arrays),\n        webgl2 = _getExtensionData.webgl2,\n        ext = _getExtensionData.ext;\n\n    var result;\n\n    switch (pname) {\n      case 35069:\n        result = !webgl2 ? false : undefined;\n        break;\n\n      case 35070:\n        result = !webgl2 && !ext ? 0 : undefined;\n        break;\n\n      default:\n    }\n\n    return result !== undefined ? result : originalFunc(location, pname);\n  },\n  getProgramParameter: function getProgramParameter(gl, originalFunc, program, pname) {\n    if (!isWebGL2(gl)) {\n      switch (pname) {\n        case 35967:\n          return 35981;\n\n        case 35971:\n          return 0;\n\n        case 35382:\n          return 0;\n\n        default:\n      }\n    }\n\n    return originalFunc(program, pname);\n  },\n  getInternalformatParameter: function getInternalformatParameter(gl, originalFunc, target, format, pname) {\n    if (!isWebGL2(gl)) {\n      switch (pname) {\n        case 32937:\n          return new Int32Array([0]);\n\n        default:\n      }\n    }\n\n    return gl.getInternalformatParameter(target, format, pname);\n  },\n  getTexParameter: function getTexParameter(gl, originalFunc, target, pname) {\n    switch (pname) {\n      case 34046:\n        var extensions = gl.luma.extensions;\n        var ext = extensions[EXT_texture_filter_anisotropic];\n        pname = ext && ext.TEXTURE_MAX_ANISOTROPY_EXT || 34046;\n        break;\n\n      default:\n    }\n\n    return originalFunc(target, pname);\n  },\n  getParameter: getParameterPolyfill,\n  hint: function hint(gl, originalFunc, pname, value) {\n    return originalFunc(pname, value);\n  }\n};\n//# sourceMappingURL=polyfill-table.js.map","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","export default function getHiResTimestamp() {\n  var timestamp;\n\n  if (typeof window !== 'undefined' && window.performance) {\n    timestamp = window.performance.now();\n  } else if (typeof process !== 'undefined' && process.hrtime) {\n    var timeParts = process.hrtime();\n    timestamp = timeParts[0] * 1000 + timeParts[1] / 1e6;\n  } else {\n    timestamp = Date.now();\n  }\n\n  return timestamp;\n}\n//# sourceMappingURL=hi-res-timestamp.js.map","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","export function isObjectEmpty(object) {\n  for (var key in object) {\n    return false;\n  }\n\n  return true;\n}\nexport function deepArrayEqual(x, y) {\n  if (x === y) {\n    return true;\n  }\n\n  var isArrayX = Array.isArray(x) || ArrayBuffer.isView(x);\n  var isArrayY = Array.isArray(y) || ArrayBuffer.isView(y);\n\n  if (isArrayX && isArrayY && x.length === y.length) {\n    for (var i = 0; i < x.length; ++i) {\n      if (x[i] !== y[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=utils.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nvar self_ = globals.self || globals.window || globals.global;\nvar window_ = globals.window || globals.self || globals.global;\nvar global_ = globals.global || globals.self || globals.window;\nvar document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport var isBrowser = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) !== 'object' || String(process) !== '[object process]' || process.browser;\nexport var isWorker = typeof importScripts === 'function';\nvar matches = typeof process !== 'undefined' && process.version && process.version.match(/v([0-9]*)/);\nexport var nodeVersion = matches && parseFloat(matches[1]) || 0;\n//# sourceMappingURL=globals.js.map","/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n(function(window, document, exportName, undefined) {\n  'use strict';\n\nvar VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\nvar TEST_ELEMENT = document.createElement('div');\n\nvar TYPE_FUNCTION = 'function';\n\nvar round = Math.round;\nvar abs = Math.abs;\nvar now = Date.now;\n\n/**\n * set a timeout with a given scope\n * @param {Function} fn\n * @param {Number} timeout\n * @param {Object} context\n * @returns {number}\n */\nfunction setTimeoutContext(fn, timeout, context) {\n    return setTimeout(bindFn(fn, context), timeout);\n}\n\n/**\n * if the argument is an array, we want to execute the fn on each entry\n * if it aint an array we don't want to do a thing.\n * this is used by all the methods that accept a single and array argument.\n * @param {*|Array} arg\n * @param {String} fn\n * @param {Object} [context]\n * @returns {Boolean}\n */\nfunction invokeArrayArg(arg, fn, context) {\n    if (Array.isArray(arg)) {\n        each(arg, context[fn], context);\n        return true;\n    }\n    return false;\n}\n\n/**\n * walk objects and arrays\n * @param {Object} obj\n * @param {Function} iterator\n * @param {Object} context\n */\nfunction each(obj, iterator, context) {\n    var i;\n\n    if (!obj) {\n        return;\n    }\n\n    if (obj.forEach) {\n        obj.forEach(iterator, context);\n    } else if (obj.length !== undefined) {\n        i = 0;\n        while (i < obj.length) {\n            iterator.call(context, obj[i], i, obj);\n            i++;\n        }\n    } else {\n        for (i in obj) {\n            obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);\n        }\n    }\n}\n\n/**\n * wrap a method with a deprecation warning and stack trace\n * @param {Function} method\n * @param {String} name\n * @param {String} message\n * @returns {Function} A new function wrapping the supplied method.\n */\nfunction deprecate(method, name, message) {\n    var deprecationMessage = 'DEPRECATED METHOD: ' + name + '\\n' + message + ' AT \\n';\n    return function() {\n        var e = new Error('get-stack-trace');\n        var stack = e && e.stack ? e.stack.replace(/^[^\\(]+?[\\n$]/gm, '')\n            .replace(/^\\s+at\\s+/gm, '')\n            .replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@') : 'Unknown Stack Trace';\n\n        var log = window.console && (window.console.warn || window.console.log);\n        if (log) {\n            log.call(window.console, deprecationMessage, stack);\n        }\n        return method.apply(this, arguments);\n    };\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} target\n * @param {...Object} objects_to_assign\n * @returns {Object} target\n */\nvar assign;\nif (typeof Object.assign !== 'function') {\n    assign = function assign(target) {\n        if (target === undefined || target === null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var output = Object(target);\n        for (var index = 1; index < arguments.length; index++) {\n            var source = arguments[index];\n            if (source !== undefined && source !== null) {\n                for (var nextKey in source) {\n                    if (source.hasOwnProperty(nextKey)) {\n                        output[nextKey] = source[nextKey];\n                    }\n                }\n            }\n        }\n        return output;\n    };\n} else {\n    assign = Object.assign;\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} dest\n * @param {Object} src\n * @param {Boolean} [merge=false]\n * @returns {Object} dest\n */\nvar extend = deprecate(function extend(dest, src, merge) {\n    var keys = Object.keys(src);\n    var i = 0;\n    while (i < keys.length) {\n        if (!merge || (merge && dest[keys[i]] === undefined)) {\n            dest[keys[i]] = src[keys[i]];\n        }\n        i++;\n    }\n    return dest;\n}, 'extend', 'Use `assign`.');\n\n/**\n * merge the values from src in the dest.\n * means that properties that exist in dest will not be overwritten by src\n * @param {Object} dest\n * @param {Object} src\n * @returns {Object} dest\n */\nvar merge = deprecate(function merge(dest, src) {\n    return extend(dest, src, true);\n}, 'merge', 'Use `assign`.');\n\n/**\n * simple class inheritance\n * @param {Function} child\n * @param {Function} base\n * @param {Object} [properties]\n */\nfunction inherit(child, base, properties) {\n    var baseP = base.prototype,\n        childP;\n\n    childP = child.prototype = Object.create(baseP);\n    childP.constructor = child;\n    childP._super = baseP;\n\n    if (properties) {\n        assign(childP, properties);\n    }\n}\n\n/**\n * simple function bind\n * @param {Function} fn\n * @param {Object} context\n * @returns {Function}\n */\nfunction bindFn(fn, context) {\n    return function boundFn() {\n        return fn.apply(context, arguments);\n    };\n}\n\n/**\n * let a boolean value also be a function that must return a boolean\n * this first item in args will be used as the context\n * @param {Boolean|Function} val\n * @param {Array} [args]\n * @returns {Boolean}\n */\nfunction boolOrFn(val, args) {\n    if (typeof val == TYPE_FUNCTION) {\n        return val.apply(args ? args[0] || undefined : undefined, args);\n    }\n    return val;\n}\n\n/**\n * use the val2 when val1 is undefined\n * @param {*} val1\n * @param {*} val2\n * @returns {*}\n */\nfunction ifUndefined(val1, val2) {\n    return (val1 === undefined) ? val2 : val1;\n}\n\n/**\n * addEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction addEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.addEventListener(type, handler, false);\n    });\n}\n\n/**\n * removeEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction removeEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.removeEventListener(type, handler, false);\n    });\n}\n\n/**\n * find if a node is in the given parent\n * @method hasParent\n * @param {HTMLElement} node\n * @param {HTMLElement} parent\n * @return {Boolean} found\n */\nfunction hasParent(node, parent) {\n    while (node) {\n        if (node == parent) {\n            return true;\n        }\n        node = node.parentNode;\n    }\n    return false;\n}\n\n/**\n * small indexOf wrapper\n * @param {String} str\n * @param {String} find\n * @returns {Boolean} found\n */\nfunction inStr(str, find) {\n    return str.indexOf(find) > -1;\n}\n\n/**\n * split string on whitespace\n * @param {String} str\n * @returns {Array} words\n */\nfunction splitStr(str) {\n    return str.trim().split(/\\s+/g);\n}\n\n/**\n * find if a array contains the object using indexOf or a simple polyFill\n * @param {Array} src\n * @param {String} find\n * @param {String} [findByKey]\n * @return {Boolean|Number} false when not found, or the index\n */\nfunction inArray(src, find, findByKey) {\n    if (src.indexOf && !findByKey) {\n        return src.indexOf(find);\n    } else {\n        var i = 0;\n        while (i < src.length) {\n            if ((findByKey && src[i][findByKey] == find) || (!findByKey && src[i] === find)) {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n}\n\n/**\n * convert array-like objects to real arrays\n * @param {Object} obj\n * @returns {Array}\n */\nfunction toArray(obj) {\n    return Array.prototype.slice.call(obj, 0);\n}\n\n/**\n * unique array with objects based on a key (like 'id') or just by the array's value\n * @param {Array} src [{id:1},{id:2},{id:1}]\n * @param {String} [key]\n * @param {Boolean} [sort=False]\n * @returns {Array} [{id:1},{id:2}]\n */\nfunction uniqueArray(src, key, sort) {\n    var results = [];\n    var values = [];\n    var i = 0;\n\n    while (i < src.length) {\n        var val = key ? src[i][key] : src[i];\n        if (inArray(values, val) < 0) {\n            results.push(src[i]);\n        }\n        values[i] = val;\n        i++;\n    }\n\n    if (sort) {\n        if (!key) {\n            results = results.sort();\n        } else {\n            results = results.sort(function sortUniqueArray(a, b) {\n                return a[key] > b[key];\n            });\n        }\n    }\n\n    return results;\n}\n\n/**\n * get the prefixed property\n * @param {Object} obj\n * @param {String} property\n * @returns {String|Undefined} prefixed\n */\nfunction prefixed(obj, property) {\n    var prefix, prop;\n    var camelProp = property[0].toUpperCase() + property.slice(1);\n\n    var i = 0;\n    while (i < VENDOR_PREFIXES.length) {\n        prefix = VENDOR_PREFIXES[i];\n        prop = (prefix) ? prefix + camelProp : property;\n\n        if (prop in obj) {\n            return prop;\n        }\n        i++;\n    }\n    return undefined;\n}\n\n/**\n * get a unique id\n * @returns {number} uniqueId\n */\nvar _uniqueId = 1;\nfunction uniqueId() {\n    return _uniqueId++;\n}\n\n/**\n * get the window object of an element\n * @param {HTMLElement} element\n * @returns {DocumentView|Window}\n */\nfunction getWindowForElement(element) {\n    var doc = element.ownerDocument || element;\n    return (doc.defaultView || doc.parentWindow || window);\n}\n\nvar MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);\n\nvar INPUT_TYPE_TOUCH = 'touch';\nvar INPUT_TYPE_PEN = 'pen';\nvar INPUT_TYPE_MOUSE = 'mouse';\nvar INPUT_TYPE_KINECT = 'kinect';\n\nvar COMPUTE_INTERVAL = 25;\n\nvar INPUT_START = 1;\nvar INPUT_MOVE = 2;\nvar INPUT_END = 4;\nvar INPUT_CANCEL = 8;\n\nvar DIRECTION_NONE = 1;\nvar DIRECTION_LEFT = 2;\nvar DIRECTION_RIGHT = 4;\nvar DIRECTION_UP = 8;\nvar DIRECTION_DOWN = 16;\n\nvar DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\nvar DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\nvar DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\n\nvar PROPS_XY = ['x', 'y'];\nvar PROPS_CLIENT_XY = ['clientX', 'clientY'];\n\n/**\n * create new input type manager\n * @param {Manager} manager\n * @param {Function} callback\n * @returns {Input}\n * @constructor\n */\nfunction Input(manager, callback) {\n    var self = this;\n    this.manager = manager;\n    this.callback = callback;\n    this.element = manager.element;\n    this.target = manager.options.inputTarget;\n\n    // smaller wrapper around the handler, for the scope and the enabled state of the manager,\n    // so when disabled the input events are completely bypassed.\n    this.domHandler = function(ev) {\n        if (boolOrFn(manager.options.enable, [manager])) {\n            self.handler(ev);\n        }\n    };\n\n    this.init();\n\n}\n\nInput.prototype = {\n    /**\n     * should handle the inputEvent data and trigger the callback\n     * @virtual\n     */\n    handler: function() { },\n\n    /**\n     * bind the events\n     */\n    init: function() {\n        this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    },\n\n    /**\n     * unbind the events\n     */\n    destroy: function() {\n        this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    }\n};\n\n/**\n * create new input type manager\n * called by the Manager constructor\n * @param {Hammer} manager\n * @returns {Input}\n */\nfunction createInputInstance(manager) {\n    var Type;\n    var inputClass = manager.options.inputClass;\n\n    if (inputClass) {\n        Type = inputClass;\n    } else if (SUPPORT_POINTER_EVENTS) {\n        Type = PointerEventInput;\n    } else if (SUPPORT_ONLY_TOUCH) {\n        Type = TouchInput;\n    } else if (!SUPPORT_TOUCH) {\n        Type = MouseInput;\n    } else {\n        Type = TouchMouseInput;\n    }\n    return new (Type)(manager, inputHandler);\n}\n\n/**\n * handle input events\n * @param {Manager} manager\n * @param {String} eventType\n * @param {Object} input\n */\nfunction inputHandler(manager, eventType, input) {\n    var pointersLen = input.pointers.length;\n    var changedPointersLen = input.changedPointers.length;\n    var isFirst = (eventType & INPUT_START && (pointersLen - changedPointersLen === 0));\n    var isFinal = (eventType & (INPUT_END | INPUT_CANCEL) && (pointersLen - changedPointersLen === 0));\n\n    input.isFirst = !!isFirst;\n    input.isFinal = !!isFinal;\n\n    if (isFirst) {\n        manager.session = {};\n    }\n\n    // source event is the normalized value of the domEvents\n    // like 'touchstart, mouseup, pointerdown'\n    input.eventType = eventType;\n\n    // compute scale, rotation etc\n    computeInputData(manager, input);\n\n    // emit secret event\n    manager.emit('hammer.input', input);\n\n    manager.recognize(input);\n    manager.session.prevInput = input;\n}\n\n/**\n * extend the data with some usable properties like scale, rotate, velocity etc\n * @param {Object} manager\n * @param {Object} input\n */\nfunction computeInputData(manager, input) {\n    var session = manager.session;\n    var pointers = input.pointers;\n    var pointersLength = pointers.length;\n\n    // store the first input to calculate the distance and direction\n    if (!session.firstInput) {\n        session.firstInput = simpleCloneInputData(input);\n    }\n\n    // to compute scale and rotation we need to store the multiple touches\n    if (pointersLength > 1 && !session.firstMultiple) {\n        session.firstMultiple = simpleCloneInputData(input);\n    } else if (pointersLength === 1) {\n        session.firstMultiple = false;\n    }\n\n    var firstInput = session.firstInput;\n    var firstMultiple = session.firstMultiple;\n    var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\n\n    var center = input.center = getCenter(pointers);\n    input.timeStamp = now();\n    input.deltaTime = input.timeStamp - firstInput.timeStamp;\n\n    input.angle = getAngle(offsetCenter, center);\n    input.distance = getDistance(offsetCenter, center);\n\n    computeDeltaXY(session, input);\n    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\n\n    var overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);\n    input.overallVelocityX = overallVelocity.x;\n    input.overallVelocityY = overallVelocity.y;\n    input.overallVelocity = (abs(overallVelocity.x) > abs(overallVelocity.y)) ? overallVelocity.x : overallVelocity.y;\n\n    input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\n    input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\n\n    input.maxPointers = !session.prevInput ? input.pointers.length : ((input.pointers.length >\n        session.prevInput.maxPointers) ? input.pointers.length : session.prevInput.maxPointers);\n\n    computeIntervalInputData(session, input);\n\n    // find the correct target\n    var target = manager.element;\n    if (hasParent(input.srcEvent.target, target)) {\n        target = input.srcEvent.target;\n    }\n    input.target = target;\n}\n\nfunction computeDeltaXY(session, input) {\n    var center = input.center;\n    var offset = session.offsetDelta || {};\n    var prevDelta = session.prevDelta || {};\n    var prevInput = session.prevInput || {};\n\n    if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\n        prevDelta = session.prevDelta = {\n            x: prevInput.deltaX || 0,\n            y: prevInput.deltaY || 0\n        };\n\n        offset = session.offsetDelta = {\n            x: center.x,\n            y: center.y\n        };\n    }\n\n    input.deltaX = prevDelta.x + (center.x - offset.x);\n    input.deltaY = prevDelta.y + (center.y - offset.y);\n}\n\n/**\n * velocity is calculated every x ms\n * @param {Object} session\n * @param {Object} input\n */\nfunction computeIntervalInputData(session, input) {\n    var last = session.lastInterval || input,\n        deltaTime = input.timeStamp - last.timeStamp,\n        velocity, velocityX, velocityY, direction;\n\n    if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\n        var deltaX = input.deltaX - last.deltaX;\n        var deltaY = input.deltaY - last.deltaY;\n\n        var v = getVelocity(deltaTime, deltaX, deltaY);\n        velocityX = v.x;\n        velocityY = v.y;\n        velocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\n        direction = getDirection(deltaX, deltaY);\n\n        session.lastInterval = input;\n    } else {\n        // use latest velocity info if it doesn't overtake a minimum period\n        velocity = last.velocity;\n        velocityX = last.velocityX;\n        velocityY = last.velocityY;\n        direction = last.direction;\n    }\n\n    input.velocity = velocity;\n    input.velocityX = velocityX;\n    input.velocityY = velocityY;\n    input.direction = direction;\n}\n\n/**\n * create a simple clone from the input used for storage of firstInput and firstMultiple\n * @param {Object} input\n * @returns {Object} clonedInputData\n */\nfunction simpleCloneInputData(input) {\n    // make a simple copy of the pointers because we will get a reference if we don't\n    // we only need clientXY for the calculations\n    var pointers = [];\n    var i = 0;\n    while (i < input.pointers.length) {\n        pointers[i] = {\n            clientX: round(input.pointers[i].clientX),\n            clientY: round(input.pointers[i].clientY)\n        };\n        i++;\n    }\n\n    return {\n        timeStamp: now(),\n        pointers: pointers,\n        center: getCenter(pointers),\n        deltaX: input.deltaX,\n        deltaY: input.deltaY\n    };\n}\n\n/**\n * get the center of all the pointers\n * @param {Array} pointers\n * @return {Object} center contains `x` and `y` properties\n */\nfunction getCenter(pointers) {\n    var pointersLength = pointers.length;\n\n    // no need to loop when only one touch\n    if (pointersLength === 1) {\n        return {\n            x: round(pointers[0].clientX),\n            y: round(pointers[0].clientY)\n        };\n    }\n\n    var x = 0, y = 0, i = 0;\n    while (i < pointersLength) {\n        x += pointers[i].clientX;\n        y += pointers[i].clientY;\n        i++;\n    }\n\n    return {\n        x: round(x / pointersLength),\n        y: round(y / pointersLength)\n    };\n}\n\n/**\n * calculate the velocity between two points. unit is in px per ms.\n * @param {Number} deltaTime\n * @param {Number} x\n * @param {Number} y\n * @return {Object} velocity `x` and `y`\n */\nfunction getVelocity(deltaTime, x, y) {\n    return {\n        x: x / deltaTime || 0,\n        y: y / deltaTime || 0\n    };\n}\n\n/**\n * get the direction between two points\n * @param {Number} x\n * @param {Number} y\n * @return {Number} direction\n */\nfunction getDirection(x, y) {\n    if (x === y) {\n        return DIRECTION_NONE;\n    }\n\n    if (abs(x) >= abs(y)) {\n        return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n    }\n    return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n}\n\n/**\n * calculate the absolute distance between two points\n * @param {Object} p1 {x, y}\n * @param {Object} p2 {x, y}\n * @param {Array} [props] containing x and y keys\n * @return {Number} distance\n */\nfunction getDistance(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n\n    return Math.sqrt((x * x) + (y * y));\n}\n\n/**\n * calculate the angle between two coordinates\n * @param {Object} p1\n * @param {Object} p2\n * @param {Array} [props] containing x and y keys\n * @return {Number} angle\n */\nfunction getAngle(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n    return Math.atan2(y, x) * 180 / Math.PI;\n}\n\n/**\n * calculate the rotation degrees between two pointersets\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} rotation\n */\nfunction getRotation(start, end) {\n    return getAngle(end[1], end[0], PROPS_CLIENT_XY) + getAngle(start[1], start[0], PROPS_CLIENT_XY);\n}\n\n/**\n * calculate the scale factor between two pointersets\n * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} scale\n */\nfunction getScale(start, end) {\n    return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);\n}\n\nvar MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n};\n\nvar MOUSE_ELEMENT_EVENTS = 'mousedown';\nvar MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\n\n/**\n * Mouse events input\n * @constructor\n * @extends Input\n */\nfunction MouseInput() {\n    this.evEl = MOUSE_ELEMENT_EVENTS;\n    this.evWin = MOUSE_WINDOW_EVENTS;\n\n    this.pressed = false; // mousedown state\n\n    Input.apply(this, arguments);\n}\n\ninherit(MouseInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function MEhandler(ev) {\n        var eventType = MOUSE_INPUT_MAP[ev.type];\n\n        // on start we want to have the left mouse button down\n        if (eventType & INPUT_START && ev.button === 0) {\n            this.pressed = true;\n        }\n\n        if (eventType & INPUT_MOVE && ev.which !== 1) {\n            eventType = INPUT_END;\n        }\n\n        // mouse must be down\n        if (!this.pressed) {\n            return;\n        }\n\n        if (eventType & INPUT_END) {\n            this.pressed = false;\n        }\n\n        this.callback(this.manager, eventType, {\n            pointers: [ev],\n            changedPointers: [ev],\n            pointerType: INPUT_TYPE_MOUSE,\n            srcEvent: ev\n        });\n    }\n});\n\nvar POINTER_INPUT_MAP = {\n    pointerdown: INPUT_START,\n    pointermove: INPUT_MOVE,\n    pointerup: INPUT_END,\n    pointercancel: INPUT_CANCEL,\n    pointerout: INPUT_CANCEL\n};\n\n// in IE10 the pointer types is defined as an enum\nvar IE10_POINTER_TYPE_ENUM = {\n    2: INPUT_TYPE_TOUCH,\n    3: INPUT_TYPE_PEN,\n    4: INPUT_TYPE_MOUSE,\n    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\n};\n\nvar POINTER_ELEMENT_EVENTS = 'pointerdown';\nvar POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\n\n// IE10 has prefixed support, and case-sensitive\nif (window.MSPointerEvent && !window.PointerEvent) {\n    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\n    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\n}\n\n/**\n * Pointer events input\n * @constructor\n * @extends Input\n */\nfunction PointerEventInput() {\n    this.evEl = POINTER_ELEMENT_EVENTS;\n    this.evWin = POINTER_WINDOW_EVENTS;\n\n    Input.apply(this, arguments);\n\n    this.store = (this.manager.session.pointerEvents = []);\n}\n\ninherit(PointerEventInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function PEhandler(ev) {\n        var store = this.store;\n        var removePointer = false;\n\n        var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\n        var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\n        var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\n\n        var isTouch = (pointerType == INPUT_TYPE_TOUCH);\n\n        // get index of the event in the store\n        var storeIndex = inArray(store, ev.pointerId, 'pointerId');\n\n        // start and mouse must be down\n        if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\n            if (storeIndex < 0) {\n                store.push(ev);\n                storeIndex = store.length - 1;\n            }\n        } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n            removePointer = true;\n        }\n\n        // it not found, so the pointer hasn't been down (so it's probably a hover)\n        if (storeIndex < 0) {\n            return;\n        }\n\n        // update the event in the store\n        store[storeIndex] = ev;\n\n        this.callback(this.manager, eventType, {\n            pointers: store,\n            changedPointers: [ev],\n            pointerType: pointerType,\n            srcEvent: ev\n        });\n\n        if (removePointer) {\n            // remove from the store\n            store.splice(storeIndex, 1);\n        }\n    }\n});\n\nvar SINGLE_TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\nvar SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Touch events input\n * @constructor\n * @extends Input\n */\nfunction SingleTouchInput() {\n    this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\n    this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\n    this.started = false;\n\n    Input.apply(this, arguments);\n}\n\ninherit(SingleTouchInput, Input, {\n    handler: function TEhandler(ev) {\n        var type = SINGLE_TOUCH_INPUT_MAP[ev.type];\n\n        // should we handle the touch events?\n        if (type === INPUT_START) {\n            this.started = true;\n        }\n\n        if (!this.started) {\n            return;\n        }\n\n        var touches = normalizeSingleTouches.call(this, ev, type);\n\n        // when done, reset the started state\n        if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {\n            this.started = false;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction normalizeSingleTouches(ev, type) {\n    var all = toArray(ev.touches);\n    var changed = toArray(ev.changedTouches);\n\n    if (type & (INPUT_END | INPUT_CANCEL)) {\n        all = uniqueArray(all.concat(changed), 'identifier', true);\n    }\n\n    return [all, changed];\n}\n\nvar TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Multi-user touch events input\n * @constructor\n * @extends Input\n */\nfunction TouchInput() {\n    this.evTarget = TOUCH_TARGET_EVENTS;\n    this.targetIds = {};\n\n    Input.apply(this, arguments);\n}\n\ninherit(TouchInput, Input, {\n    handler: function MTEhandler(ev) {\n        var type = TOUCH_INPUT_MAP[ev.type];\n        var touches = getTouches.call(this, ev, type);\n        if (!touches) {\n            return;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction getTouches(ev, type) {\n    var allTouches = toArray(ev.touches);\n    var targetIds = this.targetIds;\n\n    // when there is only one touch, the process can be simplified\n    if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\n        targetIds[allTouches[0].identifier] = true;\n        return [allTouches, allTouches];\n    }\n\n    var i,\n        targetTouches,\n        changedTouches = toArray(ev.changedTouches),\n        changedTargetTouches = [],\n        target = this.target;\n\n    // get target touches from touches\n    targetTouches = allTouches.filter(function(touch) {\n        return hasParent(touch.target, target);\n    });\n\n    // collect touches\n    if (type === INPUT_START) {\n        i = 0;\n        while (i < targetTouches.length) {\n            targetIds[targetTouches[i].identifier] = true;\n            i++;\n        }\n    }\n\n    // filter changed touches to only contain touches that exist in the collected target ids\n    i = 0;\n    while (i < changedTouches.length) {\n        if (targetIds[changedTouches[i].identifier]) {\n            changedTargetTouches.push(changedTouches[i]);\n        }\n\n        // cleanup removed touches\n        if (type & (INPUT_END | INPUT_CANCEL)) {\n            delete targetIds[changedTouches[i].identifier];\n        }\n        i++;\n    }\n\n    if (!changedTargetTouches.length) {\n        return;\n    }\n\n    return [\n        // merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\n        uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true),\n        changedTargetTouches\n    ];\n}\n\n/**\n * Combined touch and mouse input\n *\n * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n * This because touch devices also emit mouse events while doing a touch.\n *\n * @constructor\n * @extends Input\n */\n\nvar DEDUP_TIMEOUT = 2500;\nvar DEDUP_DISTANCE = 25;\n\nfunction TouchMouseInput() {\n    Input.apply(this, arguments);\n\n    var handler = bindFn(this.handler, this);\n    this.touch = new TouchInput(this.manager, handler);\n    this.mouse = new MouseInput(this.manager, handler);\n\n    this.primaryTouch = null;\n    this.lastTouches = [];\n}\n\ninherit(TouchMouseInput, Input, {\n    /**\n     * handle mouse and touch events\n     * @param {Hammer} manager\n     * @param {String} inputEvent\n     * @param {Object} inputData\n     */\n    handler: function TMEhandler(manager, inputEvent, inputData) {\n        var isTouch = (inputData.pointerType == INPUT_TYPE_TOUCH),\n            isMouse = (inputData.pointerType == INPUT_TYPE_MOUSE);\n\n        if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {\n            return;\n        }\n\n        // when we're in a touch event, record touches to  de-dupe synthetic mouse event\n        if (isTouch) {\n            recordTouches.call(this, inputEvent, inputData);\n        } else if (isMouse && isSyntheticEvent.call(this, inputData)) {\n            return;\n        }\n\n        this.callback(manager, inputEvent, inputData);\n    },\n\n    /**\n     * remove the event listeners\n     */\n    destroy: function destroy() {\n        this.touch.destroy();\n        this.mouse.destroy();\n    }\n});\n\nfunction recordTouches(eventType, eventData) {\n    if (eventType & INPUT_START) {\n        this.primaryTouch = eventData.changedPointers[0].identifier;\n        setLastTouch.call(this, eventData);\n    } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n        setLastTouch.call(this, eventData);\n    }\n}\n\nfunction setLastTouch(eventData) {\n    var touch = eventData.changedPointers[0];\n\n    if (touch.identifier === this.primaryTouch) {\n        var lastTouch = {x: touch.clientX, y: touch.clientY};\n        this.lastTouches.push(lastTouch);\n        var lts = this.lastTouches;\n        var removeLastTouch = function() {\n            var i = lts.indexOf(lastTouch);\n            if (i > -1) {\n                lts.splice(i, 1);\n            }\n        };\n        setTimeout(removeLastTouch, DEDUP_TIMEOUT);\n    }\n}\n\nfunction isSyntheticEvent(eventData) {\n    var x = eventData.srcEvent.clientX, y = eventData.srcEvent.clientY;\n    for (var i = 0; i < this.lastTouches.length; i++) {\n        var t = this.lastTouches[i];\n        var dx = Math.abs(x - t.x), dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {\n            return true;\n        }\n    }\n    return false;\n}\n\nvar PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');\nvar NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined;\n\n// magical touchAction value\nvar TOUCH_ACTION_COMPUTE = 'compute';\nvar TOUCH_ACTION_AUTO = 'auto';\nvar TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\nvar TOUCH_ACTION_NONE = 'none';\nvar TOUCH_ACTION_PAN_X = 'pan-x';\nvar TOUCH_ACTION_PAN_Y = 'pan-y';\nvar TOUCH_ACTION_MAP = getTouchActionProps();\n\n/**\n * Touch Action\n * sets the touchAction property or uses the js alternative\n * @param {Manager} manager\n * @param {String} value\n * @constructor\n */\nfunction TouchAction(manager, value) {\n    this.manager = manager;\n    this.set(value);\n}\n\nTouchAction.prototype = {\n    /**\n     * set the touchAction value on the element or enable the polyfill\n     * @param {String} value\n     */\n    set: function(value) {\n        // find out the touch-action by the event handlers\n        if (value == TOUCH_ACTION_COMPUTE) {\n            value = this.compute();\n        }\n\n        if (NATIVE_TOUCH_ACTION && this.manager.element.style && TOUCH_ACTION_MAP[value]) {\n            this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;\n        }\n        this.actions = value.toLowerCase().trim();\n    },\n\n    /**\n     * just re-set the touchAction value\n     */\n    update: function() {\n        this.set(this.manager.options.touchAction);\n    },\n\n    /**\n     * compute the value for the touchAction property based on the recognizer's settings\n     * @returns {String} value\n     */\n    compute: function() {\n        var actions = [];\n        each(this.manager.recognizers, function(recognizer) {\n            if (boolOrFn(recognizer.options.enable, [recognizer])) {\n                actions = actions.concat(recognizer.getTouchAction());\n            }\n        });\n        return cleanTouchActions(actions.join(' '));\n    },\n\n    /**\n     * this method is called on each input cycle and provides the preventing of the browser behavior\n     * @param {Object} input\n     */\n    preventDefaults: function(input) {\n        var srcEvent = input.srcEvent;\n        var direction = input.offsetDirection;\n\n        // if the touch action did prevented once this session\n        if (this.manager.session.prevented) {\n            srcEvent.preventDefault();\n            return;\n        }\n\n        var actions = this.actions;\n        var hasNone = inStr(actions, TOUCH_ACTION_NONE) && !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];\n        var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];\n        var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];\n\n        if (hasNone) {\n            //do not prevent defaults if this is a tap gesture\n\n            var isTapPointer = input.pointers.length === 1;\n            var isTapMovement = input.distance < 2;\n            var isTapTouchTime = input.deltaTime < 250;\n\n            if (isTapPointer && isTapMovement && isTapTouchTime) {\n                return;\n            }\n        }\n\n        if (hasPanX && hasPanY) {\n            // `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\n            return;\n        }\n\n        if (hasNone ||\n            (hasPanY && direction & DIRECTION_HORIZONTAL) ||\n            (hasPanX && direction & DIRECTION_VERTICAL)) {\n            return this.preventSrc(srcEvent);\n        }\n    },\n\n    /**\n     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\n     * @param {Object} srcEvent\n     */\n    preventSrc: function(srcEvent) {\n        this.manager.session.prevented = true;\n        srcEvent.preventDefault();\n    }\n};\n\n/**\n * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n * @param {String} actions\n * @returns {*}\n */\nfunction cleanTouchActions(actions) {\n    // none\n    if (inStr(actions, TOUCH_ACTION_NONE)) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\n    var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);\n\n    // if both pan-x and pan-y are set (different recognizers\n    // for different directions, e.g. horizontal pan but vertical swipe?)\n    // we need none (as otherwise with pan-x pan-y combined none of these\n    // recognizers will work, since the browser would handle all panning\n    if (hasPanX && hasPanY) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    // pan-x OR pan-y\n    if (hasPanX || hasPanY) {\n        return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\n    }\n\n    // manipulation\n    if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {\n        return TOUCH_ACTION_MANIPULATION;\n    }\n\n    return TOUCH_ACTION_AUTO;\n}\n\nfunction getTouchActionProps() {\n    if (!NATIVE_TOUCH_ACTION) {\n        return false;\n    }\n    var touchMap = {};\n    var cssSupports = window.CSS && window.CSS.supports;\n    ['auto', 'manipulation', 'pan-y', 'pan-x', 'pan-x pan-y', 'none'].forEach(function(val) {\n\n        // If css.supports is not supported but there is native touch-action assume it supports\n        // all values. This is the case for IE 10 and 11.\n        touchMap[val] = cssSupports ? window.CSS.supports('touch-action', val) : true;\n    });\n    return touchMap;\n}\n\n/**\n * Recognizer flow explained; *\n * All recognizers have the initial state of POSSIBLE when a input session starts.\n * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n * Example session for mouse-input: mousedown -> mousemove -> mouseup\n *\n * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n * which determines with state it should be.\n *\n * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n * POSSIBLE to give it another change on the next cycle.\n *\n *               Possible\n *                  |\n *            +-----+---------------+\n *            |                     |\n *      +-----+-----+               |\n *      |           |               |\n *   Failed      Cancelled          |\n *                          +-------+------+\n *                          |              |\n *                      Recognized       Began\n *                                         |\n *                                      Changed\n *                                         |\n *                                  Ended/Recognized\n */\nvar STATE_POSSIBLE = 1;\nvar STATE_BEGAN = 2;\nvar STATE_CHANGED = 4;\nvar STATE_ENDED = 8;\nvar STATE_RECOGNIZED = STATE_ENDED;\nvar STATE_CANCELLED = 16;\nvar STATE_FAILED = 32;\n\n/**\n * Recognizer\n * Every recognizer needs to extend from this class.\n * @constructor\n * @param {Object} options\n */\nfunction Recognizer(options) {\n    this.options = assign({}, this.defaults, options || {});\n\n    this.id = uniqueId();\n\n    this.manager = null;\n\n    // default is enable true\n    this.options.enable = ifUndefined(this.options.enable, true);\n\n    this.state = STATE_POSSIBLE;\n\n    this.simultaneous = {};\n    this.requireFail = [];\n}\n\nRecognizer.prototype = {\n    /**\n     * @virtual\n     * @type {Object}\n     */\n    defaults: {},\n\n    /**\n     * set options\n     * @param {Object} options\n     * @return {Recognizer}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // also update the touchAction, in case something changed about the directions/enabled state\n        this.manager && this.manager.touchAction.update();\n        return this;\n    },\n\n    /**\n     * recognize simultaneous with an other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    recognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {\n            return this;\n        }\n\n        var simultaneous = this.simultaneous;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (!simultaneous[otherRecognizer.id]) {\n            simultaneous[otherRecognizer.id] = otherRecognizer;\n            otherRecognizer.recognizeWith(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRecognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        delete this.simultaneous[otherRecognizer.id];\n        return this;\n    },\n\n    /**\n     * recognizer can only run when an other is failing\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    requireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {\n            return this;\n        }\n\n        var requireFail = this.requireFail;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (inArray(requireFail, otherRecognizer) === -1) {\n            requireFail.push(otherRecognizer);\n            otherRecognizer.requireFailure(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRequireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        var index = inArray(this.requireFail, otherRecognizer);\n        if (index > -1) {\n            this.requireFail.splice(index, 1);\n        }\n        return this;\n    },\n\n    /**\n     * has require failures boolean\n     * @returns {boolean}\n     */\n    hasRequireFailures: function() {\n        return this.requireFail.length > 0;\n    },\n\n    /**\n     * if the recognizer can recognize simultaneous with an other recognizer\n     * @param {Recognizer} otherRecognizer\n     * @returns {Boolean}\n     */\n    canRecognizeWith: function(otherRecognizer) {\n        return !!this.simultaneous[otherRecognizer.id];\n    },\n\n    /**\n     * You should use `tryEmit` instead of `emit` directly to check\n     * that all the needed recognizers has failed before emitting.\n     * @param {Object} input\n     */\n    emit: function(input) {\n        var self = this;\n        var state = this.state;\n\n        function emit(event) {\n            self.manager.emit(event, input);\n        }\n\n        // 'panstart' and 'panmove'\n        if (state < STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n\n        emit(self.options.event); // simple 'eventName' events\n\n        if (input.additionalEvent) { // additional event(panleft, panright, pinchin, pinchout...)\n            emit(input.additionalEvent);\n        }\n\n        // panend and pancancel\n        if (state >= STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n    },\n\n    /**\n     * Check that all the require failure recognizers has failed,\n     * if true, it emits a gesture event,\n     * otherwise, setup the state to FAILED.\n     * @param {Object} input\n     */\n    tryEmit: function(input) {\n        if (this.canEmit()) {\n            return this.emit(input);\n        }\n        // it's failing anyway\n        this.state = STATE_FAILED;\n    },\n\n    /**\n     * can we emit?\n     * @returns {boolean}\n     */\n    canEmit: function() {\n        var i = 0;\n        while (i < this.requireFail.length) {\n            if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {\n                return false;\n            }\n            i++;\n        }\n        return true;\n    },\n\n    /**\n     * update the recognizer\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        // make a new copy of the inputData\n        // so we can change the inputData without messing up the other recognizers\n        var inputDataClone = assign({}, inputData);\n\n        // is is enabled and allow recognizing?\n        if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\n            this.reset();\n            this.state = STATE_FAILED;\n            return;\n        }\n\n        // reset when we've reached the end\n        if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\n            this.state = STATE_POSSIBLE;\n        }\n\n        this.state = this.process(inputDataClone);\n\n        // the recognizer has recognized a gesture\n        // so trigger an event\n        if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {\n            this.tryEmit(inputDataClone);\n        }\n    },\n\n    /**\n     * return the state of the recognizer\n     * the actual recognizing happens in this method\n     * @virtual\n     * @param {Object} inputData\n     * @returns {Const} STATE\n     */\n    process: function(inputData) { }, // jshint ignore:line\n\n    /**\n     * return the preferred touch-action\n     * @virtual\n     * @returns {Array}\n     */\n    getTouchAction: function() { },\n\n    /**\n     * called when the gesture isn't allowed to recognize\n     * like when another is being recognized or it is disabled\n     * @virtual\n     */\n    reset: function() { }\n};\n\n/**\n * get a usable string, used as event postfix\n * @param {Const} state\n * @returns {String} state\n */\nfunction stateStr(state) {\n    if (state & STATE_CANCELLED) {\n        return 'cancel';\n    } else if (state & STATE_ENDED) {\n        return 'end';\n    } else if (state & STATE_CHANGED) {\n        return 'move';\n    } else if (state & STATE_BEGAN) {\n        return 'start';\n    }\n    return '';\n}\n\n/**\n * direction cons to string\n * @param {Const} direction\n * @returns {String}\n */\nfunction directionStr(direction) {\n    if (direction == DIRECTION_DOWN) {\n        return 'down';\n    } else if (direction == DIRECTION_UP) {\n        return 'up';\n    } else if (direction == DIRECTION_LEFT) {\n        return 'left';\n    } else if (direction == DIRECTION_RIGHT) {\n        return 'right';\n    }\n    return '';\n}\n\n/**\n * get a recognizer by name if it is bound to a manager\n * @param {Recognizer|String} otherRecognizer\n * @param {Recognizer} recognizer\n * @returns {Recognizer}\n */\nfunction getRecognizerByNameIfManager(otherRecognizer, recognizer) {\n    var manager = recognizer.manager;\n    if (manager) {\n        return manager.get(otherRecognizer);\n    }\n    return otherRecognizer;\n}\n\n/**\n * This recognizer is just used as a base for the simple attribute recognizers.\n * @constructor\n * @extends Recognizer\n */\nfunction AttrRecognizer() {\n    Recognizer.apply(this, arguments);\n}\n\ninherit(AttrRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof AttrRecognizer\n     */\n    defaults: {\n        /**\n         * @type {Number}\n         * @default 1\n         */\n        pointers: 1\n    },\n\n    /**\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {Boolean} recognized\n     */\n    attrTest: function(input) {\n        var optionPointers = this.options.pointers;\n        return optionPointers === 0 || input.pointers.length === optionPointers;\n    },\n\n    /**\n     * Process the input and return the state for the recognizer\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {*} State\n     */\n    process: function(input) {\n        var state = this.state;\n        var eventType = input.eventType;\n\n        var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\n        var isValid = this.attrTest(input);\n\n        // on cancel input and we've recognized before, return STATE_CANCELLED\n        if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\n            return state | STATE_CANCELLED;\n        } else if (isRecognized || isValid) {\n            if (eventType & INPUT_END) {\n                return state | STATE_ENDED;\n            } else if (!(state & STATE_BEGAN)) {\n                return STATE_BEGAN;\n            }\n            return state | STATE_CHANGED;\n        }\n        return STATE_FAILED;\n    }\n});\n\n/**\n * Pan\n * Recognized when the pointer is down and moved in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PanRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n\n    this.pX = null;\n    this.pY = null;\n}\n\ninherit(PanRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PanRecognizer\n     */\n    defaults: {\n        event: 'pan',\n        threshold: 10,\n        pointers: 1,\n        direction: DIRECTION_ALL\n    },\n\n    getTouchAction: function() {\n        var direction = this.options.direction;\n        var actions = [];\n        if (direction & DIRECTION_HORIZONTAL) {\n            actions.push(TOUCH_ACTION_PAN_Y);\n        }\n        if (direction & DIRECTION_VERTICAL) {\n            actions.push(TOUCH_ACTION_PAN_X);\n        }\n        return actions;\n    },\n\n    directionTest: function(input) {\n        var options = this.options;\n        var hasMoved = true;\n        var distance = input.distance;\n        var direction = input.direction;\n        var x = input.deltaX;\n        var y = input.deltaY;\n\n        // lock to axis?\n        if (!(direction & options.direction)) {\n            if (options.direction & DIRECTION_HORIZONTAL) {\n                direction = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\n                hasMoved = x != this.pX;\n                distance = Math.abs(input.deltaX);\n            } else {\n                direction = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;\n                hasMoved = y != this.pY;\n                distance = Math.abs(input.deltaY);\n            }\n        }\n        input.direction = direction;\n        return hasMoved && distance > options.threshold && direction & options.direction;\n    },\n\n    attrTest: function(input) {\n        return AttrRecognizer.prototype.attrTest.call(this, input) &&\n            (this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));\n    },\n\n    emit: function(input) {\n\n        this.pX = input.deltaX;\n        this.pY = input.deltaY;\n\n        var direction = directionStr(input.direction);\n\n        if (direction) {\n            input.additionalEvent = this.options.event + direction;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Pinch\n * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PinchRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(PinchRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'pinch',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);\n    },\n\n    emit: function(input) {\n        if (input.scale !== 1) {\n            var inOut = input.scale < 1 ? 'in' : 'out';\n            input.additionalEvent = this.options.event + inOut;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Press\n * Recognized when the pointer is down for x ms without any movement.\n * @constructor\n * @extends Recognizer\n */\nfunction PressRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    this._timer = null;\n    this._input = null;\n}\n\ninherit(PressRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PressRecognizer\n     */\n    defaults: {\n        event: 'press',\n        pointers: 1,\n        time: 251, // minimal time of the pointer to be pressed\n        threshold: 9 // a minimal movement is ok, but keep it low\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_AUTO];\n    },\n\n    process: function(input) {\n        var options = this.options;\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTime = input.deltaTime > options.time;\n\n        this._input = input;\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (!validMovement || !validPointers || (input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime)) {\n            this.reset();\n        } else if (input.eventType & INPUT_START) {\n            this.reset();\n            this._timer = setTimeoutContext(function() {\n                this.state = STATE_RECOGNIZED;\n                this.tryEmit();\n            }, options.time, this);\n        } else if (input.eventType & INPUT_END) {\n            return STATE_RECOGNIZED;\n        }\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function(input) {\n        if (this.state !== STATE_RECOGNIZED) {\n            return;\n        }\n\n        if (input && (input.eventType & INPUT_END)) {\n            this.manager.emit(this.options.event + 'up', input);\n        } else {\n            this._input.timeStamp = now();\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Rotate\n * Recognized when two or more pointer are moving in a circular motion.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction RotateRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(RotateRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof RotateRecognizer\n     */\n    defaults: {\n        event: 'rotate',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);\n    }\n});\n\n/**\n * Swipe\n * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction SwipeRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(SwipeRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof SwipeRecognizer\n     */\n    defaults: {\n        event: 'swipe',\n        threshold: 10,\n        velocity: 0.3,\n        direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\n        pointers: 1\n    },\n\n    getTouchAction: function() {\n        return PanRecognizer.prototype.getTouchAction.call(this);\n    },\n\n    attrTest: function(input) {\n        var direction = this.options.direction;\n        var velocity;\n\n        if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\n            velocity = input.overallVelocity;\n        } else if (direction & DIRECTION_HORIZONTAL) {\n            velocity = input.overallVelocityX;\n        } else if (direction & DIRECTION_VERTICAL) {\n            velocity = input.overallVelocityY;\n        }\n\n        return this._super.attrTest.call(this, input) &&\n            direction & input.offsetDirection &&\n            input.distance > this.options.threshold &&\n            input.maxPointers == this.options.pointers &&\n            abs(velocity) > this.options.velocity && input.eventType & INPUT_END;\n    },\n\n    emit: function(input) {\n        var direction = directionStr(input.offsetDirection);\n        if (direction) {\n            this.manager.emit(this.options.event + direction, input);\n        }\n\n        this.manager.emit(this.options.event, input);\n    }\n});\n\n/**\n * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n * a single tap.\n *\n * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n * multi-taps being recognized.\n * @constructor\n * @extends Recognizer\n */\nfunction TapRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    // previous time and center,\n    // used for tap counting\n    this.pTime = false;\n    this.pCenter = false;\n\n    this._timer = null;\n    this._input = null;\n    this.count = 0;\n}\n\ninherit(TapRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'tap',\n        pointers: 1,\n        taps: 1,\n        interval: 300, // max time between the multi-tap taps\n        time: 250, // max time of the pointer to be down (like finger on the screen)\n        threshold: 9, // a minimal movement is ok, but keep it low\n        posThreshold: 10 // a multi-tap can be a bit off the initial position\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_MANIPULATION];\n    },\n\n    process: function(input) {\n        var options = this.options;\n\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTouchTime = input.deltaTime < options.time;\n\n        this.reset();\n\n        if ((input.eventType & INPUT_START) && (this.count === 0)) {\n            return this.failTimeout();\n        }\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (validMovement && validTouchTime && validPointers) {\n            if (input.eventType != INPUT_END) {\n                return this.failTimeout();\n            }\n\n            var validInterval = this.pTime ? (input.timeStamp - this.pTime < options.interval) : true;\n            var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;\n\n            this.pTime = input.timeStamp;\n            this.pCenter = input.center;\n\n            if (!validMultiTap || !validInterval) {\n                this.count = 1;\n            } else {\n                this.count += 1;\n            }\n\n            this._input = input;\n\n            // if tap count matches we have recognized it,\n            // else it has began recognizing...\n            var tapCount = this.count % options.taps;\n            if (tapCount === 0) {\n                // no failing requirements, immediately trigger the tap event\n                // or wait as long as the multitap interval to trigger\n                if (!this.hasRequireFailures()) {\n                    return STATE_RECOGNIZED;\n                } else {\n                    this._timer = setTimeoutContext(function() {\n                        this.state = STATE_RECOGNIZED;\n                        this.tryEmit();\n                    }, options.interval, this);\n                    return STATE_BEGAN;\n                }\n            }\n        }\n        return STATE_FAILED;\n    },\n\n    failTimeout: function() {\n        this._timer = setTimeoutContext(function() {\n            this.state = STATE_FAILED;\n        }, this.options.interval, this);\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function() {\n        if (this.state == STATE_RECOGNIZED) {\n            this._input.tapCount = this.count;\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Simple way to create a manager with a default set of recognizers.\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Hammer(element, options) {\n    options = options || {};\n    options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);\n    return new Manager(element, options);\n}\n\n/**\n * @const {string}\n */\nHammer.VERSION = '2.0.7';\n\n/**\n * default settings\n * @namespace\n */\nHammer.defaults = {\n    /**\n     * set if DOM events are being triggered.\n     * But this is slower and unused by simple implementations, so disabled by default.\n     * @type {Boolean}\n     * @default false\n     */\n    domEvents: false,\n\n    /**\n     * The value for the touchAction property/fallback.\n     * When set to `compute` it will magically set the correct value based on the added recognizers.\n     * @type {String}\n     * @default compute\n     */\n    touchAction: TOUCH_ACTION_COMPUTE,\n\n    /**\n     * @type {Boolean}\n     * @default true\n     */\n    enable: true,\n\n    /**\n     * EXPERIMENTAL FEATURE -- can be removed/changed\n     * Change the parent input target element.\n     * If Null, then it is being set the to main element.\n     * @type {Null|EventTarget}\n     * @default null\n     */\n    inputTarget: null,\n\n    /**\n     * force an input class\n     * @type {Null|Function}\n     * @default null\n     */\n    inputClass: null,\n\n    /**\n     * Default recognizer setup when calling `Hammer()`\n     * When creating a new Manager these will be skipped.\n     * @type {Array}\n     */\n    preset: [\n        // RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\n        [RotateRecognizer, {enable: false}],\n        [PinchRecognizer, {enable: false}, ['rotate']],\n        [SwipeRecognizer, {direction: DIRECTION_HORIZONTAL}],\n        [PanRecognizer, {direction: DIRECTION_HORIZONTAL}, ['swipe']],\n        [TapRecognizer],\n        [TapRecognizer, {event: 'doubletap', taps: 2}, ['tap']],\n        [PressRecognizer]\n    ],\n\n    /**\n     * Some CSS properties can be used to improve the working of Hammer.\n     * Add them to this method and they will be set when creating a new Manager.\n     * @namespace\n     */\n    cssProps: {\n        /**\n         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userSelect: 'none',\n\n        /**\n         * Disable the Windows Phone grippers when pressing an element.\n         * @type {String}\n         * @default 'none'\n         */\n        touchSelect: 'none',\n\n        /**\n         * Disables the default callout shown when you touch and hold a touch target.\n         * On iOS, when you touch and hold a touch target such as a link, Safari displays\n         * a callout containing information about the link. This property allows you to disable that callout.\n         * @type {String}\n         * @default 'none'\n         */\n        touchCallout: 'none',\n\n        /**\n         * Specifies whether zooming is enabled. Used by IE10>\n         * @type {String}\n         * @default 'none'\n         */\n        contentZooming: 'none',\n\n        /**\n         * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userDrag: 'none',\n\n        /**\n         * Overrides the highlight color shown when the user taps a link or a JavaScript\n         * clickable element in iOS. This property obeys the alpha value, if specified.\n         * @type {String}\n         * @default 'rgba(0,0,0,0)'\n         */\n        tapHighlightColor: 'rgba(0,0,0,0)'\n    }\n};\n\nvar STOP = 1;\nvar FORCED_STOP = 2;\n\n/**\n * Manager\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Manager(element, options) {\n    this.options = assign({}, Hammer.defaults, options || {});\n\n    this.options.inputTarget = this.options.inputTarget || element;\n\n    this.handlers = {};\n    this.session = {};\n    this.recognizers = [];\n    this.oldCssProps = {};\n\n    this.element = element;\n    this.input = createInputInstance(this);\n    this.touchAction = new TouchAction(this, this.options.touchAction);\n\n    toggleCssProps(this, true);\n\n    each(this.options.recognizers, function(item) {\n        var recognizer = this.add(new (item[0])(item[1]));\n        item[2] && recognizer.recognizeWith(item[2]);\n        item[3] && recognizer.requireFailure(item[3]);\n    }, this);\n}\n\nManager.prototype = {\n    /**\n     * set options\n     * @param {Object} options\n     * @returns {Manager}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // Options that need a little more setup\n        if (options.touchAction) {\n            this.touchAction.update();\n        }\n        if (options.inputTarget) {\n            // Clean up existing event listeners and reinitialize\n            this.input.destroy();\n            this.input.target = options.inputTarget;\n            this.input.init();\n        }\n        return this;\n    },\n\n    /**\n     * stop recognizing for this session.\n     * This session will be discarded, when a new [input]start event is fired.\n     * When forced, the recognizer cycle is stopped immediately.\n     * @param {Boolean} [force]\n     */\n    stop: function(force) {\n        this.session.stopped = force ? FORCED_STOP : STOP;\n    },\n\n    /**\n     * run the recognizers!\n     * called by the inputHandler function on every movement of the pointers (touches)\n     * it walks through all the recognizers and tries to detect the gesture that is being made\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        var session = this.session;\n        if (session.stopped) {\n            return;\n        }\n\n        // run the touch-action polyfill\n        this.touchAction.preventDefaults(inputData);\n\n        var recognizer;\n        var recognizers = this.recognizers;\n\n        // this holds the recognizer that is being recognized.\n        // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n        // if no recognizer is detecting a thing, it is set to `null`\n        var curRecognizer = session.curRecognizer;\n\n        // reset when the last recognizer is recognized\n        // or when we're in a new session\n        if (!curRecognizer || (curRecognizer && curRecognizer.state & STATE_RECOGNIZED)) {\n            curRecognizer = session.curRecognizer = null;\n        }\n\n        var i = 0;\n        while (i < recognizers.length) {\n            recognizer = recognizers[i];\n\n            // find out if we are allowed try to recognize the input for this one.\n            // 1.   allow if the session is NOT forced stopped (see the .stop() method)\n            // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n            //      that is being recognized.\n            // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n            //      this can be setup with the `recognizeWith()` method on the recognizer.\n            if (session.stopped !== FORCED_STOP && ( // 1\n                    !curRecognizer || recognizer == curRecognizer || // 2\n                    recognizer.canRecognizeWith(curRecognizer))) { // 3\n                recognizer.recognize(inputData);\n            } else {\n                recognizer.reset();\n            }\n\n            // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n            // current active recognizer. but only if we don't already have an active recognizer\n            if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {\n                curRecognizer = session.curRecognizer = recognizer;\n            }\n            i++;\n        }\n    },\n\n    /**\n     * get a recognizer by its event name.\n     * @param {Recognizer|String} recognizer\n     * @returns {Recognizer|Null}\n     */\n    get: function(recognizer) {\n        if (recognizer instanceof Recognizer) {\n            return recognizer;\n        }\n\n        var recognizers = this.recognizers;\n        for (var i = 0; i < recognizers.length; i++) {\n            if (recognizers[i].options.event == recognizer) {\n                return recognizers[i];\n            }\n        }\n        return null;\n    },\n\n    /**\n     * add a recognizer to the manager\n     * existing recognizers with the same event name will be removed\n     * @param {Recognizer} recognizer\n     * @returns {Recognizer|Manager}\n     */\n    add: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'add', this)) {\n            return this;\n        }\n\n        // remove existing\n        var existing = this.get(recognizer.options.event);\n        if (existing) {\n            this.remove(existing);\n        }\n\n        this.recognizers.push(recognizer);\n        recognizer.manager = this;\n\n        this.touchAction.update();\n        return recognizer;\n    },\n\n    /**\n     * remove a recognizer by name or instance\n     * @param {Recognizer|String} recognizer\n     * @returns {Manager}\n     */\n    remove: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'remove', this)) {\n            return this;\n        }\n\n        recognizer = this.get(recognizer);\n\n        // let's make sure this recognizer exists\n        if (recognizer) {\n            var recognizers = this.recognizers;\n            var index = inArray(recognizers, recognizer);\n\n            if (index !== -1) {\n                recognizers.splice(index, 1);\n                this.touchAction.update();\n            }\n        }\n\n        return this;\n    },\n\n    /**\n     * bind event\n     * @param {String} events\n     * @param {Function} handler\n     * @returns {EventEmitter} this\n     */\n    on: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n        if (handler === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            handlers[event] = handlers[event] || [];\n            handlers[event].push(handler);\n        });\n        return this;\n    },\n\n    /**\n     * unbind event, leave emit blank to remove all handlers\n     * @param {String} events\n     * @param {Function} [handler]\n     * @returns {EventEmitter} this\n     */\n    off: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            if (!handler) {\n                delete handlers[event];\n            } else {\n                handlers[event] && handlers[event].splice(inArray(handlers[event], handler), 1);\n            }\n        });\n        return this;\n    },\n\n    /**\n     * emit event to the listeners\n     * @param {String} event\n     * @param {Object} data\n     */\n    emit: function(event, data) {\n        // we also want to trigger dom events\n        if (this.options.domEvents) {\n            triggerDomEvent(event, data);\n        }\n\n        // no handlers, so skip it all\n        var handlers = this.handlers[event] && this.handlers[event].slice();\n        if (!handlers || !handlers.length) {\n            return;\n        }\n\n        data.type = event;\n        data.preventDefault = function() {\n            data.srcEvent.preventDefault();\n        };\n\n        var i = 0;\n        while (i < handlers.length) {\n            handlers[i](data);\n            i++;\n        }\n    },\n\n    /**\n     * destroy the manager and unbinds all events\n     * it doesn't unbind dom events, that is the user own responsibility\n     */\n    destroy: function() {\n        this.element && toggleCssProps(this, false);\n\n        this.handlers = {};\n        this.session = {};\n        this.input.destroy();\n        this.element = null;\n    }\n};\n\n/**\n * add/remove the css properties as defined in manager.options.cssProps\n * @param {Manager} manager\n * @param {Boolean} add\n */\nfunction toggleCssProps(manager, add) {\n    var element = manager.element;\n    if (!element.style) {\n        return;\n    }\n    var prop;\n    each(manager.options.cssProps, function(value, name) {\n        prop = prefixed(element.style, name);\n        if (add) {\n            manager.oldCssProps[prop] = element.style[prop];\n            element.style[prop] = value;\n        } else {\n            element.style[prop] = manager.oldCssProps[prop] || '';\n        }\n    });\n    if (!add) {\n        manager.oldCssProps = {};\n    }\n}\n\n/**\n * trigger dom event\n * @param {String} event\n * @param {Object} data\n */\nfunction triggerDomEvent(event, data) {\n    var gestureEvent = document.createEvent('Event');\n    gestureEvent.initEvent(event, true, true);\n    gestureEvent.gesture = data;\n    data.target.dispatchEvent(gestureEvent);\n}\n\nassign(Hammer, {\n    INPUT_START: INPUT_START,\n    INPUT_MOVE: INPUT_MOVE,\n    INPUT_END: INPUT_END,\n    INPUT_CANCEL: INPUT_CANCEL,\n\n    STATE_POSSIBLE: STATE_POSSIBLE,\n    STATE_BEGAN: STATE_BEGAN,\n    STATE_CHANGED: STATE_CHANGED,\n    STATE_ENDED: STATE_ENDED,\n    STATE_RECOGNIZED: STATE_RECOGNIZED,\n    STATE_CANCELLED: STATE_CANCELLED,\n    STATE_FAILED: STATE_FAILED,\n\n    DIRECTION_NONE: DIRECTION_NONE,\n    DIRECTION_LEFT: DIRECTION_LEFT,\n    DIRECTION_RIGHT: DIRECTION_RIGHT,\n    DIRECTION_UP: DIRECTION_UP,\n    DIRECTION_DOWN: DIRECTION_DOWN,\n    DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,\n    DIRECTION_VERTICAL: DIRECTION_VERTICAL,\n    DIRECTION_ALL: DIRECTION_ALL,\n\n    Manager: Manager,\n    Input: Input,\n    TouchAction: TouchAction,\n\n    TouchInput: TouchInput,\n    MouseInput: MouseInput,\n    PointerEventInput: PointerEventInput,\n    TouchMouseInput: TouchMouseInput,\n    SingleTouchInput: SingleTouchInput,\n\n    Recognizer: Recognizer,\n    AttrRecognizer: AttrRecognizer,\n    Tap: TapRecognizer,\n    Pan: PanRecognizer,\n    Swipe: SwipeRecognizer,\n    Pinch: PinchRecognizer,\n    Rotate: RotateRecognizer,\n    Press: PressRecognizer,\n\n    on: addEventListeners,\n    off: removeEventListeners,\n    each: each,\n    merge: merge,\n    extend: extend,\n    assign: assign,\n    inherit: inherit,\n    bindFn: bindFn,\n    prefixed: prefixed\n});\n\n// this prevents errors when Hammer is loaded in the presence of an AMD\n//  style loader but by script tag, not by the loader.\nvar freeGlobal = (typeof window !== 'undefined' ? window : (typeof self !== 'undefined' ? self : {})); // jshint ignore:line\nfreeGlobal.Hammer = Hammer;\n\nif (typeof define === 'function' && define.amd) {\n    define(function() {\n        return Hammer;\n    });\n} else if (typeof module != 'undefined' && module.exports) {\n    module.exports = Hammer;\n} else {\n    window[exportName] = Hammer;\n}\n\n})(window, document, 'Hammer');\n","import { config } from './lib/common';\nexport { default as Vector2 } from './classes/vector2';\nexport { default as Vector3 } from './classes/vector3';\nexport { default as Vector4 } from './classes/vector4';\nexport { default as Matrix3 } from './classes/matrix3';\nexport { default as Matrix4 } from './classes/matrix4';\nexport { default as Quaternion } from './classes/quaternion';\nexport { config, configure, formatValue, isArray, clone, equals, exactEquals, toRadians, toDegrees, radians, degrees, sin, cos, tan, asin, acos, atan, clamp, lerp, withEpsilon } from './lib/common';\nexport { checkNumber } from './lib/validators';\nexport { default as _MathUtils } from './lib/math-utils';\nexport { default as SphericalCoordinates } from './classes/spherical-coordinates';\nexport { default as Pose } from './classes/pose';\nexport { default as Euler } from './classes/euler';\nexport { default as assert } from './lib/assert';\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global\n};\nvar global_ = globals.global || globals.self || globals.window;\nglobal_.mathgl = {\n  config: config\n};\nexport { default as _SphericalCoordinates } from './classes/spherical-coordinates';\nexport { default as _Pose } from './classes/pose';\nexport { default as _Euler } from './classes/euler';\n//# sourceMappingURL=index.js.map","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport isElectron from './is-electron';\nexport default function isBrowser() {\n  var isNode = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) === 'object' && String(process) === '[object process]' && !process.browser;\n  return !isNode || isElectron();\n}\nexport function isBrowserMainThread() {\n  return isBrowser() && typeof document !== 'undefined';\n}\n//# sourceMappingURL=is-browser.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nexport default function isElectron(mockUserAgent) {\n  if (typeof window !== 'undefined' && _typeof(window.process) === 'object' && window.process.type === 'renderer') {\n    return true;\n  }\n\n  if (typeof process !== 'undefined' && _typeof(process.versions) === 'object' && Boolean(process.versions.electron)) {\n    return true;\n  }\n\n  var realUserAgent = (typeof navigator === \"undefined\" ? \"undefined\" : _typeof(navigator)) === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent;\n  var userAgent = mockUserAgent || realUserAgent;\n\n  if (userAgent && userAgent.indexOf('Electron') >= 0) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=is-electron.js.map","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _wrapNativeSuper from \"@babel/runtime/helpers/esm/wrapNativeSuper\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { config, formatValue, equals as _equals, isArray } from '../../lib/common';\nimport assert from '../../lib/assert';\n\nvar MathArray = function (_Array) {\n  _inherits(MathArray, _Array);\n\n  var _super = _createSuper(MathArray);\n\n  function MathArray() {\n    _classCallCheck(this, MathArray);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(MathArray, [{\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor().copy(this);\n    }\n  }, {\n    key: \"from\",\n    value: function from(arrayOrObject) {\n      return Array.isArray(arrayOrObject) ? this.copy(arrayOrObject) : this.fromObject(arrayOrObject);\n    }\n  }, {\n    key: \"fromArray\",\n    value: function fromArray(array) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = array[i + offset];\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"to\",\n    value: function to(arrayOrObject) {\n      if (arrayOrObject === this) {\n        return this;\n      }\n\n      return isArray(arrayOrObject) ? this.toArray(arrayOrObject) : this.toObject(arrayOrObject);\n    }\n  }, {\n    key: \"toTarget\",\n    value: function toTarget(target) {\n      return target ? this.to(target) : this;\n    }\n  }, {\n    key: \"toArray\",\n    value: function toArray() {\n      var array = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        array[offset + i] = this[i];\n      }\n\n      return array;\n    }\n  }, {\n    key: \"toFloat32Array\",\n    value: function toFloat32Array() {\n      return new Float32Array(this);\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return this.formatString(config);\n    }\n  }, {\n    key: \"formatString\",\n    value: function formatString(opts) {\n      var string = '';\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        string += (i > 0 ? ', ' : '') + formatValue(this[i], opts);\n      }\n\n      return \"\".concat(opts.printTypes ? this.constructor.name : '', \"[\").concat(string, \"]\");\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(array) {\n      if (!array || this.length !== array.length) {\n        return false;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        if (!_equals(this[i], array[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"exactEquals\",\n    value: function exactEquals(array) {\n      if (!array || this.length !== array.length) {\n        return false;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        if (this[i] !== array[i]) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"negate\",\n    value: function negate() {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = -this[i];\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lerp\",\n    value: function lerp(a, b, t) {\n      if (t === undefined) {\n        t = b;\n        b = a;\n        a = this;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        var ai = a[i];\n        this[i] = ai + t * (b[i] - ai);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"min\",\n    value: function min(vector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(vector[i], this[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"max\",\n    value: function max(vector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.max(vector[i], this[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"clamp\",\n    value: function clamp(minVector, maxVector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(Math.max(this[i], minVector[i]), maxVector[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"add\",\n    value: function add() {\n      for (var _len = arguments.length, vectors = new Array(_len), _key = 0; _key < _len; _key++) {\n        vectors[_key] = arguments[_key];\n      }\n\n      for (var _i = 0, _vectors = vectors; _i < _vectors.length; _i++) {\n        var vector = _vectors[_i];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] += vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"subtract\",\n    value: function subtract() {\n      for (var _len2 = arguments.length, vectors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        vectors[_key2] = arguments[_key2];\n      }\n\n      for (var _i2 = 0, _vectors2 = vectors; _i2 < _vectors2.length; _i2++) {\n        var vector = _vectors2[_i2];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] -= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(_scale) {\n      if (Array.isArray(_scale)) {\n        return this.multiply(_scale);\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= _scale;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"sub\",\n    value: function sub(a) {\n      return this.subtract(a);\n    }\n  }, {\n    key: \"setScalar\",\n    value: function setScalar(a) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = a;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"addScalar\",\n    value: function addScalar(a) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] += a;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"subScalar\",\n    value: function subScalar(a) {\n      return this.addScalar(-a);\n    }\n  }, {\n    key: \"multiplyScalar\",\n    value: function multiplyScalar(scalar) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= scalar;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"divideScalar\",\n    value: function divideScalar(a) {\n      return this.scale(1 / a);\n    }\n  }, {\n    key: \"clampScalar\",\n    value: function clampScalar(min, max) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(Math.max(this[i], min), max);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"multiplyByScalar\",\n    value: function multiplyByScalar(scalar) {\n      return this.scale(scalar);\n    }\n  }, {\n    key: \"check\",\n    value: function check() {\n      if (config.debug && !this.validate()) {\n        throw new Error(\"math.gl: \".concat(this.constructor.name, \" some fields set to invalid numbers'\"));\n      }\n\n      return this;\n    }\n  }, {\n    key: \"validate\",\n    value: function validate() {\n      var valid = this.length === this.ELEMENTS;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        valid = valid && Number.isFinite(this[i]);\n      }\n\n      return valid;\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      assert(false);\n      return 0;\n    }\n  }, {\n    key: \"RANK\",\n    get: function get() {\n      assert(false);\n      return 0;\n    }\n  }, {\n    key: \"elements\",\n    get: function get() {\n      return this;\n    }\n  }]);\n\n  return MathArray;\n}(_wrapNativeSuper(Array));\n\nexport { MathArray as default };\n//# sourceMappingURL=math-array.js.map","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = isElectron;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nfunction isElectron(mockUserAgent) {\n  if (typeof window !== 'undefined' && (0, _typeof2[\"default\"])(window.process) === 'object' && window.process.type === 'renderer') {\n    return true;\n  }\n\n  if (typeof process !== 'undefined' && (0, _typeof2[\"default\"])(process.versions) === 'object' && Boolean(process.versions.electron)) {\n    return true;\n  }\n\n  var realUserAgent = (typeof navigator === \"undefined\" ? \"undefined\" : (0, _typeof2[\"default\"])(navigator)) === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent;\n  var userAgent = mockUserAgent || realUserAgent;\n\n  if (userAgent && userAgent.indexOf('Electron') >= 0) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=is-electron.js.map","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.console = exports.process = exports.document = exports.global = exports.window = exports.self = void 0;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document,\n  process: (typeof process === \"undefined\" ? \"undefined\" : (0, _typeof2[\"default\"])(process)) === 'object' && process\n};\nvar self_ = globals.self || globals.window || globals.global;\nexports.self = self_;\nvar window_ = globals.window || globals.self || globals.global;\nexports.window = window_;\nvar global_ = globals.global || globals.self || globals.window;\nexports.global = global_;\nvar document_ = globals.document || {};\nexports.document = document_;\nvar process_ = globals.process || {};\nexports.process = process_;\nvar console_ = console;\nexports.console = console_;\n//# sourceMappingURL=globals.js.map","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = isBrowser;\nexports.isBrowserMainThread = isBrowserMainThread;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _isElectron = _interopRequireDefault(require(\"./is-electron\"));\n\nfunction isBrowser() {\n  var isNode = (typeof process === \"undefined\" ? \"undefined\" : (0, _typeof2[\"default\"])(process)) === 'object' && String(process) === '[object process]' && !process.browser;\n  return !isNode || (0, _isElectron[\"default\"])();\n}\n\nfunction isBrowserMainThread() {\n  return isBrowser() && typeof document !== 'undefined';\n}\n//# sourceMappingURL=is-browser.js.map","function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { polyfillVertexArrayObject } from './polyfill-vertex-array-object';\nimport { assert } from '../utils/assert';\nimport { WEBGL2_CONTEXT_POLYFILLS, WEBGL2_CONTEXT_OVERRIDES } from './polyfill-table';\nexport function polyfillContext(gl) {\n  gl.luma = gl.luma || {};\n  var luma = gl.luma;\n\n  if (!luma.polyfilled) {\n    polyfillVertexArrayObject(gl);\n    initializeExtensions(gl);\n    installPolyfills(gl, WEBGL2_CONTEXT_POLYFILLS);\n    installOverrides(gl, {\n      target: luma,\n      target2: gl\n    });\n    luma.polyfilled = true;\n  }\n\n  return gl;\n}\nvar global_ = typeof global !== 'undefined' ? global : window;\nglobal_.polyfillContext = polyfillContext;\n\nfunction initializeExtensions(gl) {\n  gl.luma.extensions = {};\n  var EXTENSIONS = gl.getSupportedExtensions() || [];\n\n  var _iterator = _createForOfIteratorHelper(EXTENSIONS),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var extension = _step.value;\n      gl.luma[extension] = gl.getExtension(extension);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\n\nfunction installOverrides(gl, _ref) {\n  var target = _ref.target,\n      target2 = _ref.target2;\n  Object.keys(WEBGL2_CONTEXT_OVERRIDES).forEach(function (key) {\n    if (typeof WEBGL2_CONTEXT_OVERRIDES[key] === 'function') {\n      var originalFunc = gl[key] ? gl[key].bind(gl) : function () {};\n      var polyfill = WEBGL2_CONTEXT_OVERRIDES[key].bind(null, gl, originalFunc);\n      target[key] = polyfill;\n      target2[key] = polyfill;\n    }\n  });\n}\n\nfunction installPolyfills(gl, polyfills) {\n  var _iterator2 = _createForOfIteratorHelper(Object.getOwnPropertyNames(polyfills)),\n      _step2;\n\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var extension = _step2.value;\n\n      if (extension !== 'overrides') {\n        polyfillExtension(gl, {\n          extension: extension,\n          target: gl.luma,\n          target2: gl\n        });\n      }\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n}\n\nfunction polyfillExtension(gl, _ref2) {\n  var extension = _ref2.extension,\n      target = _ref2.target,\n      target2 = _ref2.target2;\n  var defaults = WEBGL2_CONTEXT_POLYFILLS[extension];\n  assert(defaults);\n  var _defaults$meta = defaults.meta,\n      meta = _defaults$meta === void 0 ? {} : _defaults$meta;\n  var _meta$suffix = meta.suffix,\n      suffix = _meta$suffix === void 0 ? '' : _meta$suffix;\n  var ext = gl.getExtension(extension);\n\n  var _loop = function _loop() {\n    var key = _Object$keys[_i];\n    var extKey = \"\".concat(key).concat(suffix);\n    var polyfill = null;\n\n    if (key === 'meta') {} else if (typeof gl[key] === 'function') {} else if (ext && typeof ext[extKey] === 'function') {\n      polyfill = function polyfill() {\n        return ext[extKey].apply(ext, arguments);\n      };\n    } else if (typeof defaults[key] === 'function') {\n      polyfill = defaults[key].bind(target);\n    }\n\n    if (polyfill) {\n      target[key] = polyfill;\n      target2[key] = polyfill;\n    }\n  };\n\n  for (var _i = 0, _Object$keys = Object.keys(defaults); _i < _Object$keys.length; _i++) {\n    _loop();\n  }\n}\n//# sourceMappingURL=polyfill-context.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport assert from '../../lib/assert';\n\nvar Vector = function (_MathArray) {\n  _inherits(Vector, _MathArray);\n\n  var _super = _createSuper(Vector);\n\n  function Vector() {\n    _classCallCheck(this, Vector);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Vector, [{\n    key: \"copy\",\n    value: function copy(vector) {\n      assert(false);\n      return this;\n    }\n  }, {\n    key: \"len\",\n    value: function len() {\n      return Math.sqrt(this.lengthSquared());\n    }\n  }, {\n    key: \"magnitude\",\n    value: function magnitude() {\n      return this.len();\n    }\n  }, {\n    key: \"lengthSquared\",\n    value: function lengthSquared() {\n      var length = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        length += this[i] * this[i];\n      }\n\n      return length;\n    }\n  }, {\n    key: \"magnitudeSquared\",\n    value: function magnitudeSquared() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"distance\",\n    value: function distance(mathArray) {\n      return Math.sqrt(this.distanceSquared(mathArray));\n    }\n  }, {\n    key: \"distanceSquared\",\n    value: function distanceSquared(mathArray) {\n      var length = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        var dist = this[i] - mathArray[i];\n        length += dist * dist;\n      }\n\n      return checkNumber(length);\n    }\n  }, {\n    key: \"dot\",\n    value: function dot(mathArray) {\n      var product = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        product += this[i] * mathArray[i];\n      }\n\n      return checkNumber(product);\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      var length = this.magnitude();\n\n      if (length !== 0) {\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] /= length;\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply() {\n      for (var _len = arguments.length, vectors = new Array(_len), _key = 0; _key < _len; _key++) {\n        vectors[_key] = arguments[_key];\n      }\n\n      for (var _i = 0, _vectors = vectors; _i < _vectors.length; _i++) {\n        var vector = _vectors[_i];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] *= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"divide\",\n    value: function divide() {\n      for (var _len2 = arguments.length, vectors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        vectors[_key2] = arguments[_key2];\n      }\n\n      for (var _i2 = 0, _vectors2 = vectors; _i2 < _vectors2.length; _i2++) {\n        var vector = _vectors2[_i2];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] /= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lengthSq\",\n    value: function lengthSq() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"distanceTo\",\n    value: function distanceTo(vector) {\n      return this.distance(vector);\n    }\n  }, {\n    key: \"distanceToSquared\",\n    value: function distanceToSquared(vector) {\n      return this.distanceSquared(vector);\n    }\n  }, {\n    key: \"getComponent\",\n    value: function getComponent(i) {\n      assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n      return checkNumber(this[i]);\n    }\n  }, {\n    key: \"setComponent\",\n    value: function setComponent(i, value) {\n      assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n      this[i] = value;\n      return this.check();\n    }\n  }, {\n    key: \"addVectors\",\n    value: function addVectors(a, b) {\n      return this.copy(a).add(b);\n    }\n  }, {\n    key: \"subVectors\",\n    value: function subVectors(a, b) {\n      return this.copy(a).subtract(b);\n    }\n  }, {\n    key: \"multiplyVectors\",\n    value: function multiplyVectors(a, b) {\n      return this.copy(a).multiply(b);\n    }\n  }, {\n    key: \"addScaledVector\",\n    value: function addScaledVector(a, b) {\n      return this.add(new this.constructor(a).multiplyScalar(b));\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this[0];\n    },\n    set: function set(value) {\n      this[0] = checkNumber(value);\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this[1];\n    },\n    set: function set(value) {\n      this[1] = checkNumber(value);\n    }\n  }]);\n\n  return Vector;\n}(MathArray);\n\nexport { Vector as default };\n//# sourceMappingURL=vector.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport Vector from './base/vector';\nimport { config, isArray } from '../lib/common';\nimport { checkNumber } from '../lib/validators';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { vec3_transformMat2, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nvar ORIGIN = [0, 0, 0];\nvar constants = {};\n\nvar Vector3 = function (_Vector) {\n  _inherits(Vector3, _Vector);\n\n  var _super = _createSuper(Vector3);\n\n  _createClass(Vector3, null, [{\n    key: \"ZERO\",\n    get: function get() {\n      return constants.ZERO = constants.ZERO || Object.freeze(new Vector3(0, 0, 0, 0));\n    }\n  }]);\n\n  function Vector3() {\n    var _this;\n\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n    _classCallCheck(this, Vector3);\n\n    _this = _super.call(this, -0, -0, -0);\n\n    if (arguments.length === 1 && isArray(x)) {\n      _this.copy(x);\n    } else {\n      if (config.debug) {\n        checkNumber(x);\n        checkNumber(y);\n        checkNumber(z);\n      }\n\n      _this[0] = x;\n      _this[1] = y;\n      _this[2] = z;\n    }\n\n    return _this;\n  }\n\n  _createClass(Vector3, [{\n    key: \"set\",\n    value: function set(x, y, z) {\n      this[0] = x;\n      this[1] = y;\n      this[2] = z;\n      return this.check();\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      return this.check();\n    }\n  }, {\n    key: \"fromObject\",\n    value: function fromObject(object) {\n      if (config.debug) {\n        checkNumber(object.x);\n        checkNumber(object.y);\n        checkNumber(object.z);\n      }\n\n      this[0] = object.x;\n      this[1] = object.y;\n      this[2] = object.z;\n      return this.check();\n    }\n  }, {\n    key: \"toObject\",\n    value: function toObject(object) {\n      object.x = this[0];\n      object.y = this[1];\n      object.z = this[2];\n      return object;\n    }\n  }, {\n    key: \"angle\",\n    value: function angle(vector) {\n      return vec3.angle(this, vector);\n    }\n  }, {\n    key: \"cross\",\n    value: function cross(vector) {\n      vec3.cross(this, this, vector);\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(_ref) {\n      var radians = _ref.radians,\n          _ref$origin = _ref.origin,\n          origin = _ref$origin === void 0 ? ORIGIN : _ref$origin;\n      vec3.rotateX(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(_ref2) {\n      var radians = _ref2.radians,\n          _ref2$origin = _ref2.origin,\n          origin = _ref2$origin === void 0 ? ORIGIN : _ref2$origin;\n      vec3.rotateY(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(_ref3) {\n      var radians = _ref3.radians,\n          _ref3$origin = _ref3.origin,\n          origin = _ref3$origin === void 0 ? ORIGIN : _ref3$origin;\n      vec3.rotateZ(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(matrix4) {\n      return this.transformAsPoint(matrix4);\n    }\n  }, {\n    key: \"transformAsPoint\",\n    value: function transformAsPoint(matrix4) {\n      vec3.transformMat4(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformAsVector\",\n    value: function transformAsVector(matrix4) {\n      vec3_transformMat4AsVector(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix3\",\n    value: function transformByMatrix3(matrix3) {\n      vec3.transformMat3(this, this, matrix3);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix2\",\n    value: function transformByMatrix2(matrix2) {\n      vec3_transformMat2(this, this, matrix2);\n      return this.check();\n    }\n  }, {\n    key: \"transformByQuaternion\",\n    value: function transformByQuaternion(quaternion) {\n      vec3.transformQuat(this, this, quaternion);\n      return this.check();\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 3;\n    }\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this[2];\n    },\n    set: function set(value) {\n      this[2] = checkNumber(value);\n    }\n  }]);\n\n  return Vector3;\n}(Vector);\n\nexport { Vector3 as default };\n//# sourceMappingURL=vector3.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport { config } from '../../lib/common';\n\nvar Matrix = function (_MathArray) {\n  _inherits(Matrix, _MathArray);\n\n  var _super = _createSuper(Matrix);\n\n  function Matrix() {\n    _classCallCheck(this, Matrix);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Matrix, [{\n    key: \"toString\",\n    value: function toString() {\n      var string = '[';\n\n      if (config.printRowMajor) {\n        string += 'row-major:';\n\n        for (var row = 0; row < this.RANK; ++row) {\n          for (var col = 0; col < this.RANK; ++col) {\n            string += \" \".concat(this[col * this.RANK + row]);\n          }\n        }\n      } else {\n        string += 'column-major:';\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          string += \" \".concat(this[i]);\n        }\n      }\n\n      string += ']';\n      return string;\n    }\n  }, {\n    key: \"getElementIndex\",\n    value: function getElementIndex(row, col) {\n      return col * this.RANK + row;\n    }\n  }, {\n    key: \"getElement\",\n    value: function getElement(row, col) {\n      return this[col * this.RANK + row];\n    }\n  }, {\n    key: \"setElement\",\n    value: function setElement(row, col, value) {\n      this[col * this.RANK + row] = checkNumber(value);\n      return this;\n    }\n  }, {\n    key: \"getColumn\",\n    value: function getColumn(columnIndex) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Array(this.RANK).fill(-0);\n      var firstIndex = columnIndex * this.RANK;\n\n      for (var i = 0; i < this.RANK; ++i) {\n        result[i] = this[firstIndex + i];\n      }\n\n      return result;\n    }\n  }, {\n    key: \"setColumn\",\n    value: function setColumn(columnIndex, columnVector) {\n      var firstIndex = columnIndex * this.RANK;\n\n      for (var i = 0; i < this.RANK; ++i) {\n        this[firstIndex + i] = columnVector[i];\n      }\n\n      return this;\n    }\n  }]);\n\n  return Matrix;\n}(MathArray);\n\nexport { Matrix as default };\n//# sourceMappingURL=matrix.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { checkVector, deprecated } from '../lib/validators';\nimport Matrix from './base/matrix';\nimport { vec2_transformMat4AsVector, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nimport * as vec4 from 'gl-matrix/vec4';\nvar IDENTITY = Object.freeze([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\nvar ZERO = Object.freeze([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\nvar INDICES = Object.freeze({\n  COL0ROW0: 0,\n  COL0ROW1: 1,\n  COL0ROW2: 2,\n  COL0ROW3: 3,\n  COL1ROW0: 4,\n  COL1ROW1: 5,\n  COL1ROW2: 6,\n  COL1ROW3: 7,\n  COL2ROW0: 8,\n  COL2ROW1: 9,\n  COL2ROW2: 10,\n  COL2ROW3: 11,\n  COL3ROW0: 12,\n  COL3ROW1: 13,\n  COL3ROW2: 14,\n  COL3ROW3: 15\n});\nvar constants = {};\n\nvar Matrix4 = function (_Matrix) {\n  _inherits(Matrix4, _Matrix);\n\n  var _super = _createSuper(Matrix4);\n\n  _createClass(Matrix4, [{\n    key: \"INDICES\",\n    get: function get() {\n      return INDICES;\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 16;\n    }\n  }, {\n    key: \"RANK\",\n    get: function get() {\n      return 4;\n    }\n  }], [{\n    key: \"IDENTITY\",\n    get: function get() {\n      constants.IDENTITY = constants.IDENTITY || Object.freeze(new Matrix4(IDENTITY));\n      return constants.IDENTITY;\n    }\n  }, {\n    key: \"ZERO\",\n    get: function get() {\n      constants.ZERO = constants.ZERO || Object.freeze(new Matrix4(ZERO));\n      return constants.ZERO;\n    }\n  }]);\n\n  function Matrix4(array) {\n    var _this;\n\n    _classCallCheck(this, Matrix4);\n\n    _this = _super.call(this, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0);\n\n    if (arguments.length === 1 && Array.isArray(array)) {\n      _this.copy(array);\n    } else {\n      _this.identity();\n    }\n\n    return _this;\n  }\n\n  _createClass(Matrix4, [{\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      this[3] = array[3];\n      this[4] = array[4];\n      this[5] = array[5];\n      this[6] = array[6];\n      this[7] = array[7];\n      this[8] = array[8];\n      this[9] = array[9];\n      this[10] = array[10];\n      this[11] = array[11];\n      this[12] = array[12];\n      this[13] = array[13];\n      this[14] = array[14];\n      this[15] = array[15];\n      return this.check();\n    }\n  }, {\n    key: \"set\",\n    value: function set(m00, m10, m20, m30, m01, m11, m21, m31, m02, m12, m22, m32, m03, m13, m23, m33) {\n      this[0] = m00;\n      this[1] = m10;\n      this[2] = m20;\n      this[3] = m30;\n      this[4] = m01;\n      this[5] = m11;\n      this[6] = m21;\n      this[7] = m31;\n      this[8] = m02;\n      this[9] = m12;\n      this[10] = m22;\n      this[11] = m32;\n      this[12] = m03;\n      this[13] = m13;\n      this[14] = m23;\n      this[15] = m33;\n      return this.check();\n    }\n  }, {\n    key: \"setRowMajor\",\n    value: function setRowMajor(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n      this[0] = m00;\n      this[1] = m10;\n      this[2] = m20;\n      this[3] = m30;\n      this[4] = m01;\n      this[5] = m11;\n      this[6] = m21;\n      this[7] = m31;\n      this[8] = m02;\n      this[9] = m12;\n      this[10] = m22;\n      this[11] = m32;\n      this[12] = m03;\n      this[13] = m13;\n      this[14] = m23;\n      this[15] = m33;\n      return this.check();\n    }\n  }, {\n    key: \"toRowMajor\",\n    value: function toRowMajor(result) {\n      result[0] = this[0];\n      result[1] = this[4];\n      result[2] = this[8];\n      result[3] = this[12];\n      result[4] = this[1];\n      result[5] = this[5];\n      result[6] = this[9];\n      result[7] = this[13];\n      result[8] = this[2];\n      result[9] = this[6];\n      result[10] = this[10];\n      result[11] = this[14];\n      result[12] = this[3];\n      result[13] = this[7];\n      result[14] = this[11];\n      result[15] = this[15];\n      return result;\n    }\n  }, {\n    key: \"identity\",\n    value: function identity() {\n      return this.copy(IDENTITY);\n    }\n  }, {\n    key: \"fromQuaternion\",\n    value: function fromQuaternion(q) {\n      mat4.fromQuat(this, q);\n      return this.check();\n    }\n  }, {\n    key: \"frustum\",\n    value: function frustum(_ref) {\n      var left = _ref.left,\n          right = _ref.right,\n          bottom = _ref.bottom,\n          top = _ref.top,\n          near = _ref.near,\n          far = _ref.far;\n\n      if (far === Infinity) {\n        Matrix4._computeInfinitePerspectiveOffCenter(this, left, right, bottom, top, near);\n      } else {\n        mat4.frustum(this, left, right, bottom, top, near, far);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lookAt\",\n    value: function lookAt(eye, center, up) {\n      if (arguments.length === 1) {\n        var _eye = eye;\n        eye = _eye.eye;\n        center = _eye.center;\n        up = _eye.up;\n      }\n\n      center = center || [0, 0, 0];\n      up = up || [0, 1, 0];\n      mat4.lookAt(this, eye, center, up);\n      return this.check();\n    }\n  }, {\n    key: \"ortho\",\n    value: function ortho(_ref2) {\n      var left = _ref2.left,\n          right = _ref2.right,\n          bottom = _ref2.bottom,\n          top = _ref2.top,\n          _ref2$near = _ref2.near,\n          near = _ref2$near === void 0 ? 0.1 : _ref2$near,\n          _ref2$far = _ref2.far,\n          far = _ref2$far === void 0 ? 500 : _ref2$far;\n      mat4.ortho(this, left, right, bottom, top, near, far);\n      return this.check();\n    }\n  }, {\n    key: \"orthographic\",\n    value: function orthographic(_ref3) {\n      var _ref3$fovy = _ref3.fovy,\n          fovy = _ref3$fovy === void 0 ? 45 * Math.PI / 180 : _ref3$fovy,\n          _ref3$aspect = _ref3.aspect,\n          aspect = _ref3$aspect === void 0 ? 1 : _ref3$aspect,\n          _ref3$focalDistance = _ref3.focalDistance,\n          focalDistance = _ref3$focalDistance === void 0 ? 1 : _ref3$focalDistance,\n          _ref3$near = _ref3.near,\n          near = _ref3$near === void 0 ? 0.1 : _ref3$near,\n          _ref3$far = _ref3.far,\n          far = _ref3$far === void 0 ? 500 : _ref3$far;\n\n      if (fovy > Math.PI * 2) {\n        throw Error('radians');\n      }\n\n      var halfY = fovy / 2;\n      var top = focalDistance * Math.tan(halfY);\n      var right = top * aspect;\n      return new Matrix4().ortho({\n        left: -right,\n        right: right,\n        bottom: -top,\n        top: top,\n        near: near,\n        far: far\n      });\n    }\n  }, {\n    key: \"perspective\",\n    value: function perspective() {\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref4$fovy = _ref4.fovy,\n          fovy = _ref4$fovy === void 0 ? undefined : _ref4$fovy,\n          _ref4$fov = _ref4.fov,\n          fov = _ref4$fov === void 0 ? 45 * Math.PI / 180 : _ref4$fov,\n          _ref4$aspect = _ref4.aspect,\n          aspect = _ref4$aspect === void 0 ? 1 : _ref4$aspect,\n          _ref4$near = _ref4.near,\n          near = _ref4$near === void 0 ? 0.1 : _ref4$near,\n          _ref4$far = _ref4.far,\n          far = _ref4$far === void 0 ? 500 : _ref4$far;\n\n      fovy = fovy || fov;\n\n      if (fovy > Math.PI * 2) {\n        throw Error('radians');\n      }\n\n      mat4.perspective(this, fovy, aspect, near, far);\n      return this.check();\n    }\n  }, {\n    key: \"determinant\",\n    value: function determinant() {\n      return mat4.determinant(this);\n    }\n  }, {\n    key: \"getScale\",\n    value: function getScale() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0];\n      result[0] = Math.sqrt(this[0] * this[0] + this[1] * this[1] + this[2] * this[2]);\n      result[1] = Math.sqrt(this[4] * this[4] + this[5] * this[5] + this[6] * this[6]);\n      result[2] = Math.sqrt(this[8] * this[8] + this[9] * this[9] + this[10] * this[10]);\n      return result;\n    }\n  }, {\n    key: \"getTranslation\",\n    value: function getTranslation() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0];\n      result[0] = this[12];\n      result[1] = this[13];\n      result[2] = this[14];\n      return result;\n    }\n  }, {\n    key: \"getRotation\",\n    value: function getRotation() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0];\n      var scaleResult = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var scale = this.getScale(scaleResult || [-0, -0, -0]);\n      var inverseScale0 = 1 / scale[0];\n      var inverseScale1 = 1 / scale[1];\n      var inverseScale2 = 1 / scale[2];\n      result[0] = this[0] * inverseScale0;\n      result[1] = this[1] * inverseScale1;\n      result[2] = this[2] * inverseScale2;\n      result[3] = 0;\n      result[4] = this[4] * inverseScale0;\n      result[5] = this[5] * inverseScale1;\n      result[6] = this[6] * inverseScale2;\n      result[7] = 0;\n      result[8] = this[8] * inverseScale0;\n      result[9] = this[9] * inverseScale1;\n      result[10] = this[10] * inverseScale2;\n      result[11] = 0;\n      result[12] = 0;\n      result[13] = 0;\n      result[14] = 0;\n      result[15] = 1;\n      return result;\n    }\n  }, {\n    key: \"getRotationMatrix3\",\n    value: function getRotationMatrix3() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0, -0, -0, -0, -0, -0, -0];\n      var scaleResult = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var scale = this.getScale(scaleResult || [-0, -0, -0]);\n      var inverseScale0 = 1 / scale[0];\n      var inverseScale1 = 1 / scale[1];\n      var inverseScale2 = 1 / scale[2];\n      result[0] = this[0] * inverseScale0;\n      result[1] = this[1] * inverseScale1;\n      result[2] = this[2] * inverseScale2;\n      result[3] = this[4] * inverseScale0;\n      result[4] = this[5] * inverseScale1;\n      result[5] = this[6] * inverseScale2;\n      result[6] = this[8] * inverseScale0;\n      result[7] = this[9] * inverseScale1;\n      result[8] = this[10] * inverseScale2;\n      return result;\n    }\n  }, {\n    key: \"transpose\",\n    value: function transpose() {\n      mat4.transpose(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"invert\",\n    value: function invert() {\n      mat4.invert(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyLeft\",\n    value: function multiplyLeft(a) {\n      mat4.multiply(this, a, this);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyRight\",\n    value: function multiplyRight(a) {\n      mat4.multiply(this, this, a);\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(radians) {\n      mat4.rotateX(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(radians) {\n      mat4.rotateY(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(radians) {\n      mat4.rotateZ(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateXYZ\",\n    value: function rotateXYZ(_ref5) {\n      var _ref6 = _slicedToArray(_ref5, 3),\n          rx = _ref6[0],\n          ry = _ref6[1],\n          rz = _ref6[2];\n\n      return this.rotateX(rx).rotateY(ry).rotateZ(rz);\n    }\n  }, {\n    key: \"rotateAxis\",\n    value: function rotateAxis(radians, axis) {\n      mat4.rotate(this, this, radians, axis);\n      return this.check();\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(factor) {\n      if (Array.isArray(factor)) {\n        mat4.scale(this, this, factor);\n      } else {\n        mat4.scale(this, this, [factor, factor, factor]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(vec) {\n      mat4.translate(this, this, vec);\n      return this.check();\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(vector, result) {\n      if (vector.length === 4) {\n        result = vec4.transformMat4(result || [-0, -0, -0, -0], vector, this);\n        checkVector(result, 4);\n        return result;\n      }\n\n      return this.transformAsPoint(vector, result);\n    }\n  }, {\n    key: \"transformAsPoint\",\n    value: function transformAsPoint(vector, result) {\n      var length = vector.length;\n\n      switch (length) {\n        case 2:\n          result = vec2.transformMat4(result || [-0, -0], vector, this);\n          break;\n\n        case 3:\n          result = vec3.transformMat4(result || [-0, -0, -0], vector, this);\n          break;\n\n        default:\n          throw new Error('Illegal vector');\n      }\n\n      checkVector(result, vector.length);\n      return result;\n    }\n  }, {\n    key: \"transformAsVector\",\n    value: function transformAsVector(vector, result) {\n      switch (vector.length) {\n        case 2:\n          result = vec2_transformMat4AsVector(result || [-0, -0], vector, this);\n          break;\n\n        case 3:\n          result = vec3_transformMat4AsVector(result || [-0, -0, -0], vector, this);\n          break;\n\n        default:\n          throw new Error('Illegal vector');\n      }\n\n      checkVector(result, vector.length);\n      return result;\n    }\n  }, {\n    key: \"makeRotationX\",\n    value: function makeRotationX(radians) {\n      return this.identity().rotateX(radians);\n    }\n  }, {\n    key: \"makeTranslation\",\n    value: function makeTranslation(x, y, z) {\n      return this.identity().translate([x, y, z]);\n    }\n  }, {\n    key: \"transformPoint\",\n    value: function transformPoint(vector, result) {\n      deprecated('Matrix4.transformPoint', '3.0');\n      return this.transformAsPoint(vector, result);\n    }\n  }, {\n    key: \"transformVector\",\n    value: function transformVector(vector, result) {\n      deprecated('Matrix4.transformVector', '3.0');\n      return this.transformAsPoint(vector, result);\n    }\n  }, {\n    key: \"transformDirection\",\n    value: function transformDirection(vector, result) {\n      deprecated('Matrix4.transformDirection', '3.0');\n      return this.transformAsVector(vector, result);\n    }\n  }], [{\n    key: \"_computeInfinitePerspectiveOffCenter\",\n    value: function _computeInfinitePerspectiveOffCenter(result, left, right, bottom, top, near) {\n      var column0Row0 = 2.0 * near / (right - left);\n      var column1Row1 = 2.0 * near / (top - bottom);\n      var column2Row0 = (right + left) / (right - left);\n      var column2Row1 = (top + bottom) / (top - bottom);\n      var column2Row2 = -1.0;\n      var column2Row3 = -1.0;\n      var column3Row2 = -2.0 * near;\n      result[0] = column0Row0;\n      result[1] = 0.0;\n      result[2] = 0.0;\n      result[3] = 0.0;\n      result[4] = 0.0;\n      result[5] = column1Row1;\n      result[6] = 0.0;\n      result[7] = 0.0;\n      result[8] = column2Row0;\n      result[9] = column2Row1;\n      result[10] = column2Row2;\n      result[11] = column2Row3;\n      result[12] = 0.0;\n      result[13] = 0.0;\n      result[14] = column3Row2;\n      result[15] = 0.0;\n      return result;\n    }\n  }]);\n\n  return Matrix4;\n}(Matrix);\n\nexport { Matrix4 as default };\n//# sourceMappingURL=matrix4.js.map","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n","import { global } from 'probe.gl/env';\nvar glErrorShadow = {};\n\nfunction error(msg) {\n  if (global.console && global.console.error) {\n    global.console.error(msg);\n  }\n}\n\nfunction log(msg) {\n  if (global.console && global.console.log) {\n    global.console.log(msg);\n  }\n}\n\nfunction synthesizeGLError(err, opt_msg) {\n  glErrorShadow[err] = true;\n\n  if (opt_msg !== undefined) {\n    error(opt_msg);\n  }\n}\n\nfunction wrapGLError(gl) {\n  var f = gl.getError;\n\n  gl.getError = function getError() {\n    var err;\n\n    do {\n      err = f.apply(gl);\n\n      if (err !== 0) {\n        glErrorShadow[err] = true;\n      }\n    } while (err !== 0);\n\n    for (err in glErrorShadow) {\n      if (glErrorShadow[err]) {\n        delete glErrorShadow[err];\n        return parseInt(err, 10);\n      }\n    }\n\n    return 0;\n  };\n}\n\nvar WebGLVertexArrayObjectOES = function WebGLVertexArrayObjectOES(ext) {\n  var gl = ext.gl;\n  this.ext = ext;\n  this.isAlive = true;\n  this.hasBeenBound = false;\n  this.elementArrayBuffer = null;\n  this.attribs = new Array(ext.maxVertexAttribs);\n\n  for (var n = 0; n < this.attribs.length; n++) {\n    var attrib = new WebGLVertexArrayObjectOES.VertexAttrib(gl);\n    this.attribs[n] = attrib;\n  }\n\n  this.maxAttrib = 0;\n};\n\nWebGLVertexArrayObjectOES.VertexAttrib = function VertexAttrib(gl) {\n  this.enabled = false;\n  this.buffer = null;\n  this.size = 4;\n  this.type = 5126;\n  this.normalized = false;\n  this.stride = 16;\n  this.offset = 0;\n  this.cached = '';\n  this.recache();\n};\n\nWebGLVertexArrayObjectOES.VertexAttrib.prototype.recache = function recache() {\n  this.cached = [this.size, this.type, this.normalized, this.stride, this.offset].join(':');\n};\n\nvar OESVertexArrayObject = function OESVertexArrayObject(gl) {\n  var self = this;\n  this.gl = gl;\n  wrapGLError(gl);\n  var original = this.original = {\n    getParameter: gl.getParameter,\n    enableVertexAttribArray: gl.enableVertexAttribArray,\n    disableVertexAttribArray: gl.disableVertexAttribArray,\n    bindBuffer: gl.bindBuffer,\n    getVertexAttrib: gl.getVertexAttrib,\n    vertexAttribPointer: gl.vertexAttribPointer\n  };\n\n  gl.getParameter = function getParameter(pname) {\n    if (pname === self.VERTEX_ARRAY_BINDING_OES) {\n      if (self.currentVertexArrayObject === self.defaultVertexArrayObject) {\n        return null;\n      }\n\n      return self.currentVertexArrayObject;\n    }\n\n    return original.getParameter.apply(this, arguments);\n  };\n\n  gl.enableVertexAttribArray = function enableVertexAttribArray(index) {\n    var vao = self.currentVertexArrayObject;\n    vao.maxAttrib = Math.max(vao.maxAttrib, index);\n    var attrib = vao.attribs[index];\n    attrib.enabled = true;\n    return original.enableVertexAttribArray.apply(this, arguments);\n  };\n\n  gl.disableVertexAttribArray = function disableVertexAttribArray(index) {\n    var vao = self.currentVertexArrayObject;\n    vao.maxAttrib = Math.max(vao.maxAttrib, index);\n    var attrib = vao.attribs[index];\n    attrib.enabled = false;\n    return original.disableVertexAttribArray.apply(this, arguments);\n  };\n\n  gl.bindBuffer = function bindBuffer(target, buffer) {\n    switch (target) {\n      case 34962:\n        self.currentArrayBuffer = buffer;\n        break;\n\n      case 34963:\n        self.currentVertexArrayObject.elementArrayBuffer = buffer;\n        break;\n\n      default:\n    }\n\n    return original.bindBuffer.apply(this, arguments);\n  };\n\n  gl.getVertexAttrib = function getVertexAttrib(index, pname) {\n    var vao = self.currentVertexArrayObject;\n    var attrib = vao.attribs[index];\n\n    switch (pname) {\n      case 34975:\n        return attrib.buffer;\n\n      case 34338:\n        return attrib.enabled;\n\n      case 34339:\n        return attrib.size;\n\n      case 34340:\n        return attrib.stride;\n\n      case 34341:\n        return attrib.type;\n\n      case 34922:\n        return attrib.normalized;\n\n      default:\n        return original.getVertexAttrib.apply(this, arguments);\n    }\n  };\n\n  gl.vertexAttribPointer = function vertexAttribPointer(indx, size, type, normalized, stride, offset) {\n    var vao = self.currentVertexArrayObject;\n    vao.maxAttrib = Math.max(vao.maxAttrib, indx);\n    var attrib = vao.attribs[indx];\n    attrib.buffer = self.currentArrayBuffer;\n    attrib.size = size;\n    attrib.type = type;\n    attrib.normalized = normalized;\n    attrib.stride = stride;\n    attrib.offset = offset;\n    attrib.recache();\n    return original.vertexAttribPointer.apply(this, arguments);\n  };\n\n  if (gl.instrumentExtension) {\n    gl.instrumentExtension(this, 'OES_vertex_array_object');\n  }\n\n  if (gl.canvas) {\n    gl.canvas.addEventListener('webglcontextrestored', function () {\n      log('OESVertexArrayObject emulation library context restored');\n      self.reset_();\n    }, true);\n  }\n\n  this.reset_();\n};\n\nOESVertexArrayObject.prototype.VERTEX_ARRAY_BINDING_OES = 0x85b5;\n\nOESVertexArrayObject.prototype.reset_ = function reset_() {\n  var contextWasLost = this.vertexArrayObjects !== undefined;\n\n  if (contextWasLost) {\n    for (var ii = 0; ii < this.vertexArrayObjects.length; ++ii) {\n      this.vertexArrayObjects.isAlive = false;\n    }\n  }\n\n  var gl = this.gl;\n  this.maxVertexAttribs = gl.getParameter(34921);\n  this.defaultVertexArrayObject = new WebGLVertexArrayObjectOES(this);\n  this.currentVertexArrayObject = null;\n  this.currentArrayBuffer = null;\n  this.vertexArrayObjects = [this.defaultVertexArrayObject];\n  this.bindVertexArrayOES(null);\n};\n\nOESVertexArrayObject.prototype.createVertexArrayOES = function createVertexArrayOES() {\n  var arrayObject = new WebGLVertexArrayObjectOES(this);\n  this.vertexArrayObjects.push(arrayObject);\n  return arrayObject;\n};\n\nOESVertexArrayObject.prototype.deleteVertexArrayOES = function deleteVertexArrayOES(arrayObject) {\n  arrayObject.isAlive = false;\n  this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(arrayObject), 1);\n\n  if (this.currentVertexArrayObject === arrayObject) {\n    this.bindVertexArrayOES(null);\n  }\n};\n\nOESVertexArrayObject.prototype.isVertexArrayOES = function isVertexArrayOES(arrayObject) {\n  if (arrayObject && arrayObject instanceof WebGLVertexArrayObjectOES) {\n    if (arrayObject.hasBeenBound && arrayObject.ext === this) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nOESVertexArrayObject.prototype.bindVertexArrayOES = function bindVertexArrayOES(arrayObject) {\n  var gl = this.gl;\n\n  if (arrayObject && !arrayObject.isAlive) {\n    synthesizeGLError(1282, 'bindVertexArrayOES: attempt to bind deleted arrayObject');\n    return;\n  }\n\n  var original = this.original;\n  var oldVAO = this.currentVertexArrayObject;\n  this.currentVertexArrayObject = arrayObject || this.defaultVertexArrayObject;\n  this.currentVertexArrayObject.hasBeenBound = true;\n  var newVAO = this.currentVertexArrayObject;\n\n  if (oldVAO === newVAO) {\n    return;\n  }\n\n  if (!oldVAO || newVAO.elementArrayBuffer !== oldVAO.elementArrayBuffer) {\n    original.bindBuffer.call(gl, 34963, newVAO.elementArrayBuffer);\n  }\n\n  var currentBinding = this.currentArrayBuffer;\n  var maxAttrib = Math.max(oldVAO ? oldVAO.maxAttrib : 0, newVAO.maxAttrib);\n\n  for (var n = 0; n <= maxAttrib; n++) {\n    var attrib = newVAO.attribs[n];\n    var oldAttrib = oldVAO ? oldVAO.attribs[n] : null;\n\n    if (!oldVAO || attrib.enabled !== oldAttrib.enabled) {\n      if (attrib.enabled) {\n        original.enableVertexAttribArray.call(gl, n);\n      } else {\n        original.disableVertexAttribArray.call(gl, n);\n      }\n    }\n\n    if (attrib.enabled) {\n      var bufferChanged = false;\n\n      if (!oldVAO || attrib.buffer !== oldAttrib.buffer) {\n        if (currentBinding !== attrib.buffer) {\n          original.bindBuffer.call(gl, 34962, attrib.buffer);\n          currentBinding = attrib.buffer;\n        }\n\n        bufferChanged = true;\n      }\n\n      if (bufferChanged || attrib.cached !== oldAttrib.cached) {\n        original.vertexAttribPointer.call(gl, n, attrib.size, attrib.type, attrib.normalized, attrib.stride, attrib.offset);\n      }\n    }\n  }\n\n  if (this.currentArrayBuffer !== currentBinding) {\n    original.bindBuffer.call(gl, 34962, this.currentArrayBuffer);\n  }\n};\n\nexport function polyfillVertexArrayObject(gl) {\n  if (typeof gl.createVertexArray === 'function') {\n    return;\n  }\n\n  var original_getSupportedExtensions = gl.getSupportedExtensions;\n\n  gl.getSupportedExtensions = function getSupportedExtensions() {\n    var list = original_getSupportedExtensions.call(this) || [];\n\n    if (list.indexOf('OES_vertex_array_object') < 0) {\n      list.push('OES_vertex_array_object');\n    }\n\n    return list;\n  };\n\n  var original_getExtension = gl.getExtension;\n\n  gl.getExtension = function getExtension(name) {\n    var ext = original_getExtension.call(this, name);\n\n    if (ext) {\n      return ext;\n    }\n\n    if (name !== 'OES_vertex_array_object') {\n      return null;\n    }\n\n    if (!gl.__OESVertexArrayObject) {\n      this.__OESVertexArrayObject = new OESVertexArrayObject(this);\n    }\n\n    return this.__OESVertexArrayObject;\n  };\n}\n//# sourceMappingURL=polyfill-vertex-array-object.js.map","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.scrollama = factory());\n}(this, (function () { 'use strict';\n\n// DOM helper functions\n\n// public\nfunction selectAll(selector, parent) {\n  if ( parent === void 0 ) parent = document;\n\n  if (typeof selector === 'string') {\n    return Array.from(parent.querySelectorAll(selector));\n  } else if (selector instanceof Element) {\n    return [selector];\n  } else if (selector instanceof NodeList) {\n    return Array.from(selector);\n  } else if (selector instanceof Array) {\n    return selector;\n  }\n  return [];\n}\n\nfunction getOffsetId(id) {\n  return (\"scrollama__debug-offset--\" + id);\n}\n\n// SETUP\nfunction setupOffset(ref) {\n  var id = ref.id;\n  var offsetVal = ref.offsetVal;\n  var stepClass = ref.stepClass;\n\n  var el = document.createElement(\"div\");\n  el.id = getOffsetId(id);\n  el.className = \"scrollama__debug-offset\";\n  el.style.position = \"fixed\";\n  el.style.left = \"0\";\n  el.style.width = \"100%\";\n  el.style.height = \"0\";\n  el.style.borderTop = \"2px dashed black\";\n  el.style.zIndex = \"9999\";\n\n  var p = document.createElement(\"p\");\n  p.innerHTML = \"\\\".\" + stepClass + \"\\\" trigger: <span>\" + offsetVal + \"</span>\";\n  p.style.fontSize = \"12px\";\n  p.style.fontFamily = \"monospace\";\n  p.style.color = \"black\";\n  p.style.margin = \"0\";\n  p.style.padding = \"6px\";\n  el.appendChild(p);\n  document.body.appendChild(el);\n}\n\nfunction setup(ref) {\n  var id = ref.id;\n  var offsetVal = ref.offsetVal;\n  var stepEl = ref.stepEl;\n\n  var stepClass = stepEl[0].className;\n  setupOffset({ id: id, offsetVal: offsetVal, stepClass: stepClass });\n}\n\n// UPDATE\nfunction update(ref) {\n  var id = ref.id;\n  var offsetMargin = ref.offsetMargin;\n  var offsetVal = ref.offsetVal;\n  var format = ref.format;\n\n  var post = format === \"pixels\" ? \"px\" : \"\";\n  var idVal = getOffsetId(id);\n  var el = document.getElementById(idVal);\n  el.style.top = offsetMargin + \"px\";\n  el.querySelector(\"span\").innerText = \"\" + offsetVal + post;\n}\n\nfunction notifyStep(ref) {\n  var id = ref.id;\n  var index = ref.index;\n  var state = ref.state;\n\n  var prefix = \"scrollama__debug-step--\" + id + \"-\" + index;\n  var elA = document.getElementById((prefix + \"_above\"));\n  var elB = document.getElementById((prefix + \"_below\"));\n  var display = state === \"enter\" ? \"block\" : \"none\";\n\n  if (elA) { elA.style.display = display; }\n  if (elB) { elB.style.display = display; }\n}\n\nfunction scrollama() {\n  var OBSERVER_NAMES = [\n    \"stepAbove\",\n    \"stepBelow\",\n    \"stepProgress\",\n    \"viewportAbove\",\n    \"viewportBelow\"\n  ];\n\n  var cb = {};\n  var io = {};\n\n  var id = null;\n  var stepEl = [];\n  var stepOffsetHeight = [];\n  var stepOffsetTop = [];\n  var stepStates = [];\n\n  var offsetVal = 0;\n  var offsetMargin = 0;\n  var viewH = 0;\n  var pageH = 0;\n  var previousYOffset = 0;\n  var progressThreshold = 0;\n\n  var isReady = false;\n  var isEnabled = false;\n  var isDebug = false;\n\n  var progressMode = false;\n  var preserveOrder = false;\n  var triggerOnce = false;\n\n  var direction = \"down\";\n  var format = \"percent\";\n\n  var exclude = [];\n\n  /* HELPERS */\n  function err(msg) {\n    console.error((\"scrollama error: \" + msg));\n  }\n\n  function reset() {\n    cb = {\n      stepEnter: function () {},\n      stepExit: function () {},\n      stepProgress: function () {}\n    };\n    io = {};\n  }\n\n  function generateInstanceID() {\n    var a = \"abcdefghijklmnopqrstuv\";\n    var l = a.length;\n    var t = Date.now();\n    var r = [0, 0, 0].map(function (d) { return a[Math.floor(Math.random() * l)]; }).join(\"\");\n    return (\"\" + r + t);\n  }\n\n  function getOffsetTop(el) {\n    var ref = el.getBoundingClientRect();\n    var top = ref.top;\n    var scrollTop = window.pageYOffset;\n    var clientTop = document.body.clientTop || 0;\n    return top + scrollTop - clientTop;\n  }\n\n  function getPageHeight() {\n    var body = document.body;\n    var html = document.documentElement;\n\n    return Math.max(\n      body.scrollHeight,\n      body.offsetHeight,\n      html.clientHeight,\n      html.scrollHeight,\n      html.offsetHeight\n    );\n  }\n\n  function getIndex(element) {\n    return +element.getAttribute(\"data-scrollama-index\");\n  }\n\n  function updateDirection() {\n    if (window.pageYOffset > previousYOffset) { direction = \"down\"; }\n    else if (window.pageYOffset < previousYOffset) { direction = \"up\"; }\n    previousYOffset = window.pageYOffset;\n  }\n\n  function disconnectObserver(name) {\n    if (io[name]) { io[name].forEach(function (d) { return d.disconnect(); }); }\n  }\n\n  function handleResize() {\n    viewH = window.innerHeight;\n    pageH = getPageHeight();\n\n    var mult = format === \"pixels\" ? 1 : viewH;\n    offsetMargin = offsetVal * mult;\n\n    if (isReady) {\n      stepOffsetHeight = stepEl.map(function (el) { return el.getBoundingClientRect().height; });\n      stepOffsetTop = stepEl.map(getOffsetTop);\n      if (isEnabled) { updateIO(); }\n    }\n\n    if (isDebug) { update({ id: id, offsetMargin: offsetMargin, offsetVal: offsetVal, format: format }); }\n  }\n\n  function handleEnable(enable) {\n    if (enable && !isEnabled) {\n      // enable a disabled scroller\n      if (isReady) {\n        // enable a ready scroller\n        updateIO();\n      } else {\n        // can't enable an unready scroller\n        err(\"scrollama error: enable() called before scroller was ready\");\n        isEnabled = false;\n        return; // all is not well, don't set the requested state\n      }\n    }\n    if (!enable && isEnabled) {\n      // disable an enabled scroller\n      OBSERVER_NAMES.forEach(disconnectObserver);\n    }\n    isEnabled = enable; // all is well, set requested state\n  }\n\n  function createThreshold(height) {\n    var count = Math.ceil(height / progressThreshold);\n    var t = [];\n    var ratio = 1 / count;\n    for (var i = 0; i < count; i += 1) {\n      t.push(i * ratio);\n    }\n    return t;\n  }\n\n  /* NOTIFY CALLBACKS */\n  function notifyStepProgress(element, progress) {\n    var index = getIndex(element);\n    if (progress !== undefined) { stepStates[index].progress = progress; }\n    var resp = { element: element, index: index, progress: stepStates[index].progress };\n\n    if (stepStates[index].state === \"enter\") { cb.stepProgress(resp); }\n  }\n\n  function notifyOthers(index, location) {\n    if (location === \"above\") {\n      // check if steps above/below were skipped and should be notified first\n      for (var i = 0; i < index; i += 1) {\n        var ss = stepStates[i];\n        if (ss.state !== \"enter\" && ss.direction !== \"down\") {\n          notifyStepEnter(stepEl[i], \"down\", false);\n          notifyStepExit(stepEl[i], \"down\");\n        } else if (ss.state === \"enter\") { notifyStepExit(stepEl[i], \"down\"); }\n        // else if (ss.direction === 'up') {\n        //   notifyStepEnter(stepEl[i], 'down', false);\n        //   notifyStepExit(stepEl[i], 'down');\n        // }\n      }\n    } else if (location === \"below\") {\n      for (var i$1 = stepStates.length - 1; i$1 > index; i$1 -= 1) {\n        var ss$1 = stepStates[i$1];\n        if (ss$1.state === \"enter\") {\n          notifyStepExit(stepEl[i$1], \"up\");\n        }\n        if (ss$1.direction === \"down\") {\n          notifyStepEnter(stepEl[i$1], \"up\", false);\n          notifyStepExit(stepEl[i$1], \"up\");\n        }\n      }\n    }\n  }\n\n  function notifyStepEnter(element, dir, check) {\n    if ( check === void 0 ) check = true;\n\n    var index = getIndex(element);\n    var resp = { element: element, index: index, direction: dir };\n\n    // store most recent trigger\n    stepStates[index].direction = dir;\n    stepStates[index].state = \"enter\";\n    if (preserveOrder && check && dir === \"down\") { notifyOthers(index, \"above\"); }\n\n    if (preserveOrder && check && dir === \"up\") { notifyOthers(index, \"below\"); }\n\n    if (cb.stepEnter && !exclude[index]) {\n      cb.stepEnter(resp, stepStates);\n      if (isDebug) { notifyStep({ id: id, index: index, state: \"enter\" }); }\n      if (triggerOnce) { exclude[index] = true; }\n    }\n\n    if (progressMode) { notifyStepProgress(element); }\n  }\n\n  function notifyStepExit(element, dir) {\n    var index = getIndex(element);\n    var resp = { element: element, index: index, direction: dir };\n\n    if (progressMode) {\n      if (dir === \"down\" && stepStates[index].progress < 1)\n        { notifyStepProgress(element, 1); }\n      else if (dir === \"up\" && stepStates[index].progress > 0)\n        { notifyStepProgress(element, 0); }\n    }\n\n    // store most recent trigger\n    stepStates[index].direction = dir;\n    stepStates[index].state = \"exit\";\n\n    cb.stepExit(resp, stepStates);\n    if (isDebug) { notifyStep({ id: id, index: index, state: \"exit\" }); }\n  }\n\n  /* OBSERVER - INTERSECT HANDLING */\n  // this is good for entering while scrolling down + leaving while scrolling up\n  function intersectStepAbove(ref) {\n    var entry = ref[0];\n\n    updateDirection();\n    var isIntersecting = entry.isIntersecting;\n    var boundingClientRect = entry.boundingClientRect;\n    var target = entry.target;\n\n    // bottom = bottom edge of element from top of viewport\n    // bottomAdjusted = bottom edge of element from trigger\n    var top = boundingClientRect.top;\n    var bottom = boundingClientRect.bottom;\n    var topAdjusted = top - offsetMargin;\n    var bottomAdjusted = bottom - offsetMargin;\n    var index = getIndex(target);\n    var ss = stepStates[index];\n\n    // entering above is only when topAdjusted is negative\n    // and bottomAdjusted is positive\n    if (\n      isIntersecting &&\n      topAdjusted <= 0 &&\n      bottomAdjusted >= 0 &&\n      direction === \"down\" &&\n      ss.state !== \"enter\"\n    )\n      { notifyStepEnter(target, direction); }\n\n    // exiting from above is when topAdjusted is positive and not intersecting\n    if (\n      !isIntersecting &&\n      topAdjusted > 0 &&\n      direction === \"up\" &&\n      ss.state === \"enter\"\n    )\n      { notifyStepExit(target, direction); }\n  }\n\n  // this is good for entering while scrolling up + leaving while scrolling down\n  function intersectStepBelow(ref) {\n    var entry = ref[0];\n\n    updateDirection();\n    var isIntersecting = entry.isIntersecting;\n    var boundingClientRect = entry.boundingClientRect;\n    var target = entry.target;\n\n    // bottom = bottom edge of element from top of viewport\n    // bottomAdjusted = bottom edge of element from trigger\n    var top = boundingClientRect.top;\n    var bottom = boundingClientRect.bottom;\n    var topAdjusted = top - offsetMargin;\n    var bottomAdjusted = bottom - offsetMargin;\n    var index = getIndex(target);\n    var ss = stepStates[index];\n\n    // entering below is only when bottomAdjusted is positive\n    // and topAdjusted is negative\n    if (\n      isIntersecting &&\n      topAdjusted <= 0 &&\n      bottomAdjusted >= 0 &&\n      direction === \"up\" &&\n      ss.state !== \"enter\"\n    )\n      { notifyStepEnter(target, direction); }\n\n    // exiting from above is when bottomAdjusted is negative and not intersecting\n    if (\n      !isIntersecting &&\n      bottomAdjusted < 0 &&\n      direction === \"down\" &&\n      ss.state === \"enter\"\n    )\n      { notifyStepExit(target, direction); }\n  }\n\n  /*\n\tif there is a scroll event where a step never intersects (therefore\n\tskipping an enter/exit trigger), use this fallback to detect if it is\n\tin view\n\t*/\n  function intersectViewportAbove(ref) {\n    var entry = ref[0];\n\n    updateDirection();\n    var isIntersecting = entry.isIntersecting;\n    var target = entry.target;\n    var index = getIndex(target);\n    var ss = stepStates[index];\n\n    if (\n      isIntersecting &&\n      direction === \"down\" &&\n      ss.direction !== \"down\" &&\n      ss.state !== \"enter\"\n    ) {\n      notifyStepEnter(target, \"down\");\n      notifyStepExit(target, \"down\");\n    }\n  }\n\n  function intersectViewportBelow(ref) {\n    var entry = ref[0];\n\n    updateDirection();\n    var isIntersecting = entry.isIntersecting;\n    var target = entry.target;\n    var index = getIndex(target);\n    var ss = stepStates[index];\n    if (\n      isIntersecting &&\n      direction === \"up\" &&\n      ss.direction === \"down\" &&\n      ss.state !== \"enter\"\n    ) {\n      notifyStepEnter(target, \"up\");\n      notifyStepExit(target, \"up\");\n    }\n  }\n\n  function intersectStepProgress(ref) {\n    var entry = ref[0];\n\n    updateDirection();\n    var isIntersecting = entry.isIntersecting;\n    var intersectionRatio = entry.intersectionRatio;\n    var boundingClientRect = entry.boundingClientRect;\n    var target = entry.target;\n    var bottom = boundingClientRect.bottom;\n    var bottomAdjusted = bottom - offsetMargin;\n    if (isIntersecting && bottomAdjusted >= 0) {\n      notifyStepProgress(target, +intersectionRatio);\n    }\n  }\n\n  /*  OBSERVER - CREATION */\n  // jump into viewport\n  function updateViewportAboveIO() {\n    io.viewportAbove = stepEl.map(function (el, i) {\n      var marginTop = pageH - stepOffsetTop[i];\n      var marginBottom = offsetMargin - viewH - stepOffsetHeight[i];\n      var rootMargin = marginTop + \"px 0px \" + marginBottom + \"px 0px\";\n      var options = { rootMargin: rootMargin };\n      // console.log(options);\n      var obs = new IntersectionObserver(intersectViewportAbove, options);\n      obs.observe(el);\n      return obs;\n    });\n  }\n\n  function updateViewportBelowIO() {\n    io.viewportBelow = stepEl.map(function (el, i) {\n      var marginTop = -offsetMargin - stepOffsetHeight[i];\n      var marginBottom = offsetMargin - viewH + stepOffsetHeight[i] + pageH;\n      var rootMargin = marginTop + \"px 0px \" + marginBottom + \"px 0px\";\n      var options = { rootMargin: rootMargin };\n      // console.log(options);\n      var obs = new IntersectionObserver(intersectViewportBelow, options);\n      obs.observe(el);\n      return obs;\n    });\n  }\n\n  // look above for intersection\n  function updateStepAboveIO() {\n    io.stepAbove = stepEl.map(function (el, i) {\n      var marginTop = -offsetMargin + stepOffsetHeight[i];\n      var marginBottom = offsetMargin - viewH;\n      var rootMargin = marginTop + \"px 0px \" + marginBottom + \"px 0px\";\n      var options = { rootMargin: rootMargin };\n      // console.log(options);\n      var obs = new IntersectionObserver(intersectStepAbove, options);\n      obs.observe(el);\n      return obs;\n    });\n  }\n\n  // look below for intersection\n  function updateStepBelowIO() {\n    io.stepBelow = stepEl.map(function (el, i) {\n      var marginTop = -offsetMargin;\n      var marginBottom = offsetMargin - viewH + stepOffsetHeight[i];\n      var rootMargin = marginTop + \"px 0px \" + marginBottom + \"px 0px\";\n      var options = { rootMargin: rootMargin };\n      // console.log(options);\n      var obs = new IntersectionObserver(intersectStepBelow, options);\n      obs.observe(el);\n      return obs;\n    });\n  }\n\n  // progress progress tracker\n  function updateStepProgressIO() {\n    io.stepProgress = stepEl.map(function (el, i) {\n      var marginTop = stepOffsetHeight[i] - offsetMargin;\n      var marginBottom = -viewH + offsetMargin;\n      var rootMargin = marginTop + \"px 0px \" + marginBottom + \"px 0px\";\n      var threshold = createThreshold(stepOffsetHeight[i]);\n      var options = { rootMargin: rootMargin, threshold: threshold };\n      // console.log(options);\n      var obs = new IntersectionObserver(intersectStepProgress, options);\n      obs.observe(el);\n      return obs;\n    });\n  }\n\n  function updateIO() {\n    OBSERVER_NAMES.forEach(disconnectObserver);\n\n    updateViewportAboveIO();\n    updateViewportBelowIO();\n    updateStepAboveIO();\n    updateStepBelowIO();\n\n    if (progressMode) { updateStepProgressIO(); }\n  }\n\n  /* SETUP FUNCTIONS */\n\n  function indexSteps() {\n    stepEl.forEach(function (el, i) { return el.setAttribute(\"data-scrollama-index\", i); });\n  }\n\n  function setupStates() {\n    stepStates = stepEl.map(function () { return ({\n      direction: null,\n      state: null,\n      progress: 0\n    }); });\n  }\n\n  function addDebug() {\n    if (isDebug) { setup({ id: id, stepEl: stepEl, offsetVal: offsetVal }); }\n  }\n\n  function isYScrollable(element) {\n    var style = window.getComputedStyle(element);\n    return (\n      (style.overflowY === \"scroll\" || style.overflowY === \"auto\") &&\n      element.scrollHeight > element.clientHeight\n    );\n  }\n\n  // recursively search the DOM for a parent container with overflowY: scroll and fixed height\n  // ends at document\n  function anyScrollableParent(element) {\n    if (element && element.nodeType === 1) {\n      // check dom elements only, stop at document\n      // if a scrollable element is found return the element\n      // if not continue to next parent\n      return isYScrollable(element)\n        ? element\n        : anyScrollableParent(element.parentNode);\n    }\n    return false; // didn't find a scrollable parent\n  }\n\n  var S = {};\n\n  S.setup = function (ref) {\n    var step = ref.step;\n    var offset = ref.offset; if ( offset === void 0 ) offset = 0.5;\n    var progress = ref.progress; if ( progress === void 0 ) progress = false;\n    var threshold = ref.threshold; if ( threshold === void 0 ) threshold = 4;\n    var debug = ref.debug; if ( debug === void 0 ) debug = false;\n    var order = ref.order; if ( order === void 0 ) order = true;\n    var once = ref.once; if ( once === void 0 ) once = false;\n\n    reset();\n    // create id unique to this scrollama instance\n    id = generateInstanceID();\n\n    stepEl = selectAll(step);\n\n    if (!stepEl.length) {\n      err(\"no step elements\");\n      return S;\n    }\n\n    // ensure that no step has a scrollable parent element in the dom tree\n    // check current step for scrollable parent\n    // assume no scrollable parents to start\n    var scrollableParent = stepEl.reduce(\n      function (foundScrollable, s) { return foundScrollable || anyScrollableParent(s.parentNode); },\n      false\n    );\n    if (scrollableParent) {\n      console.error(\n        \"scrollama error: step elements cannot be children of a scrollable element. Remove any css on the parent element with overflow: scroll; or overflow: auto; on elements with fixed height.\",\n        scrollableParent\n      );\n    }\n\n    // options\n    isDebug = debug;\n    progressMode = progress;\n    preserveOrder = order;\n    triggerOnce = once;\n\n    S.offsetTrigger(offset);\n    progressThreshold = Math.max(1, +threshold);\n\n    isReady = true;\n\n    // customize\n    addDebug();\n    indexSteps();\n    setupStates();\n    handleResize();\n    S.enable();\n    return S;\n  };\n\n  S.resize = function () {\n    handleResize();\n    return S;\n  };\n\n  S.enable = function () {\n    handleEnable(true);\n    return S;\n  };\n\n  S.disable = function () {\n    handleEnable(false);\n    return S;\n  };\n\n  S.destroy = function () {\n    handleEnable(false);\n    reset();\n  };\n\n  S.offsetTrigger = function (x) {\n    if (x === null) { return offsetVal; }\n\n    if (typeof x === \"number\") {\n      format = \"percent\";\n      if (x > 1) { err(\"offset value is greater than 1. Fallback to 1.\"); }\n      if (x < 0) { err(\"offset value is lower than 0. Fallback to 0.\"); }\n      offsetVal = Math.min(Math.max(0, x), 1);\n    } else if (typeof x === \"string\" && x.indexOf(\"px\") > 0) {\n      var v = +x.replace(\"px\", \"\");\n      if (!isNaN(v)) {\n        format = \"pixels\";\n        offsetVal = v;\n      } else {\n        err(\"offset value must be in 'px' format. Fallback to 0.5.\");\n        offsetVal = 0.5;\n      }\n    } else {\n      err(\"offset value does not include 'px'. Fallback to 0.5.\");\n      offsetVal = 0.5;\n    }\n    return S;\n  };\n\n  S.onStepEnter = function (f) {\n    if (typeof f === \"function\") { cb.stepEnter = f; }\n    else { err(\"onStepEnter requires a function\"); }\n    return S;\n  };\n\n  S.onStepExit = function (f) {\n    if (typeof f === \"function\") { cb.stepExit = f; }\n    else { err(\"onStepExit requires a function\"); }\n    return S;\n  };\n\n  S.onStepProgress = function (f) {\n    if (typeof f === \"function\") { cb.stepProgress = f; }\n    else { err(\"onStepProgress requires a function\"); }\n    return S;\n  };\n\n  return S;\n}\n\nreturn scrollama;\n\n})));\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"self\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.self;\n  }\n});\nObject.defineProperty(exports, \"window\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.window;\n  }\n});\nObject.defineProperty(exports, \"global\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.global;\n  }\n});\nObject.defineProperty(exports, \"document\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.document;\n  }\n});\nObject.defineProperty(exports, \"process\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.process;\n  }\n});\nObject.defineProperty(exports, \"console\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.console;\n  }\n});\nObject.defineProperty(exports, \"isBrowser\", {\n  enumerable: true,\n  get: function get() {\n    return _isBrowser[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"isBrowserMainThread\", {\n  enumerable: true,\n  get: function get() {\n    return _isBrowser.isBrowserMainThread;\n  }\n});\nObject.defineProperty(exports, \"getBrowser\", {\n  enumerable: true,\n  get: function get() {\n    return _getBrowser[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"isMobile\", {\n  enumerable: true,\n  get: function get() {\n    return _getBrowser.isMobile;\n  }\n});\nObject.defineProperty(exports, \"isElectron\", {\n  enumerable: true,\n  get: function get() {\n    return _isElectron[\"default\"];\n  }\n});\n\nvar _globals = require(\"./globals\");\n\nvar _isBrowser = _interopRequireWildcard(require(\"./is-browser\"));\n\nvar _getBrowser = _interopRequireWildcard(require(\"./get-browser\"));\n\nvar _isElectron = _interopRequireDefault(require(\"./is-electron\"));\n//# sourceMappingURL=index.js.map","var _typeof = require(\"@babel/runtime/helpers/typeof\")[\"default\"];\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nmodule.exports = _interopRequireWildcard;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isMobile = isMobile;\nexports[\"default\"] = getBrowser;\n\nvar _globals = require(\"./globals\");\n\nvar _isBrowser = _interopRequireDefault(require(\"./is-browser\"));\n\nvar _isElectron = _interopRequireDefault(require(\"./is-electron\"));\n\nfunction isMobile() {\n  return typeof _globals.window.orientation !== 'undefined';\n}\n\nfunction getBrowser(mockUserAgent) {\n  if (!mockUserAgent && !(0, _isBrowser[\"default\"])()) {\n    return 'Node';\n  }\n\n  if ((0, _isElectron[\"default\"])(mockUserAgent)) {\n    return 'Electron';\n  }\n\n  var navigator_ = typeof navigator !== 'undefined' ? navigator : {};\n  var userAgent = mockUserAgent || navigator_.userAgent || '';\n\n  if (userAgent.indexOf('Edge') > -1) {\n    return 'Edge';\n  }\n\n  var isMSIE = userAgent.indexOf('MSIE ') !== -1;\n  var isTrident = userAgent.indexOf('Trident/') !== -1;\n\n  if (isMSIE || isTrident) {\n    return 'IE';\n  }\n\n  if (_globals.window.chrome) {\n    return 'Chrome';\n  }\n\n  if (_globals.window.safari) {\n    return 'Safari';\n  }\n\n  if (_globals.window.mozInnerScreenX) {\n    return 'Firefox';\n  }\n\n  return 'Unknown';\n}\n//# sourceMappingURL=get-browser.js.map","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the W3C SOFTWARE AND DOCUMENT NOTICE AND LICENSE.\n *\n *  https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n *\n */\n(function() {\n'use strict';\n\n// Exit early if we're not running in a browser.\nif (typeof window !== 'object') {\n  return;\n}\n\n// Exit early if all IntersectionObserver and IntersectionObserverEntry\n// features are natively supported.\nif ('IntersectionObserver' in window &&\n    'IntersectionObserverEntry' in window &&\n    'intersectionRatio' in window.IntersectionObserverEntry.prototype) {\n\n  // Minimal polyfill for Edge 15's lack of `isIntersecting`\n  // See: https://github.com/w3c/IntersectionObserver/issues/211\n  if (!('isIntersecting' in window.IntersectionObserverEntry.prototype)) {\n    Object.defineProperty(window.IntersectionObserverEntry.prototype,\n      'isIntersecting', {\n      get: function () {\n        return this.intersectionRatio > 0;\n      }\n    });\n  }\n  return;\n}\n\n/**\n * Returns the embedding frame element, if any.\n * @param {!Document} doc\n * @return {!Element}\n */\nfunction getFrameElement(doc) {\n  try {\n    return doc.defaultView && doc.defaultView.frameElement || null;\n  } catch (e) {\n    // Ignore the error.\n    return null;\n  }\n}\n\n/**\n * A local reference to the root document.\n */\nvar document = (function(startDoc) {\n  var doc = startDoc;\n  var frame = getFrameElement(doc);\n  while (frame) {\n    doc = frame.ownerDocument;\n    frame = getFrameElement(doc);\n  }\n  return doc;\n})(window.document);\n\n/**\n * An IntersectionObserver registry. This registry exists to hold a strong\n * reference to IntersectionObserver instances currently observing a target\n * element. Without this registry, instances without another reference may be\n * garbage collected.\n */\nvar registry = [];\n\n/**\n * The signal updater for cross-origin intersection. When not null, it means\n * that the polyfill is configured to work in a cross-origin mode.\n * @type {function(DOMRect|ClientRect, DOMRect|ClientRect)}\n */\nvar crossOriginUpdater = null;\n\n/**\n * The current cross-origin intersection. Only used in the cross-origin mode.\n * @type {DOMRect|ClientRect}\n */\nvar crossOriginRect = null;\n\n\n/**\n * Creates the global IntersectionObserverEntry constructor.\n * https://w3c.github.io/IntersectionObserver/#intersection-observer-entry\n * @param {Object} entry A dictionary of instance properties.\n * @constructor\n */\nfunction IntersectionObserverEntry(entry) {\n  this.time = entry.time;\n  this.target = entry.target;\n  this.rootBounds = ensureDOMRect(entry.rootBounds);\n  this.boundingClientRect = ensureDOMRect(entry.boundingClientRect);\n  this.intersectionRect = ensureDOMRect(entry.intersectionRect || getEmptyRect());\n  this.isIntersecting = !!entry.intersectionRect;\n\n  // Calculates the intersection ratio.\n  var targetRect = this.boundingClientRect;\n  var targetArea = targetRect.width * targetRect.height;\n  var intersectionRect = this.intersectionRect;\n  var intersectionArea = intersectionRect.width * intersectionRect.height;\n\n  // Sets intersection ratio.\n  if (targetArea) {\n    // Round the intersection ratio to avoid floating point math issues:\n    // https://github.com/w3c/IntersectionObserver/issues/324\n    this.intersectionRatio = Number((intersectionArea / targetArea).toFixed(4));\n  } else {\n    // If area is zero and is intersecting, sets to 1, otherwise to 0\n    this.intersectionRatio = this.isIntersecting ? 1 : 0;\n  }\n}\n\n\n/**\n * Creates the global IntersectionObserver constructor.\n * https://w3c.github.io/IntersectionObserver/#intersection-observer-interface\n * @param {Function} callback The function to be invoked after intersection\n *     changes have queued. The function is not invoked if the queue has\n *     been emptied by calling the `takeRecords` method.\n * @param {Object=} opt_options Optional configuration options.\n * @constructor\n */\nfunction IntersectionObserver(callback, opt_options) {\n\n  var options = opt_options || {};\n\n  if (typeof callback != 'function') {\n    throw new Error('callback must be a function');\n  }\n\n  if (\n    options.root &&\n    options.root.nodeType != 1 &&\n    options.root.nodeType != 9\n  ) {\n    throw new Error('root must be a Document or Element');\n  }\n\n  // Binds and throttles `this._checkForIntersections`.\n  this._checkForIntersections = throttle(\n      this._checkForIntersections.bind(this), this.THROTTLE_TIMEOUT);\n\n  // Private properties.\n  this._callback = callback;\n  this._observationTargets = [];\n  this._queuedEntries = [];\n  this._rootMarginValues = this._parseRootMargin(options.rootMargin);\n\n  // Public properties.\n  this.thresholds = this._initThresholds(options.threshold);\n  this.root = options.root || null;\n  this.rootMargin = this._rootMarginValues.map(function(margin) {\n    return margin.value + margin.unit;\n  }).join(' ');\n\n  /** @private @const {!Array<!Document>} */\n  this._monitoringDocuments = [];\n  /** @private @const {!Array<function()>} */\n  this._monitoringUnsubscribes = [];\n}\n\n\n/**\n * The minimum interval within which the document will be checked for\n * intersection changes.\n */\nIntersectionObserver.prototype.THROTTLE_TIMEOUT = 100;\n\n\n/**\n * The frequency in which the polyfill polls for intersection changes.\n * this can be updated on a per instance basis and must be set prior to\n * calling `observe` on the first target.\n */\nIntersectionObserver.prototype.POLL_INTERVAL = null;\n\n/**\n * Use a mutation observer on the root element\n * to detect intersection changes.\n */\nIntersectionObserver.prototype.USE_MUTATION_OBSERVER = true;\n\n\n/**\n * Sets up the polyfill in the cross-origin mode. The result is the\n * updater function that accepts two arguments: `boundingClientRect` and\n * `intersectionRect` - just as these fields would be available to the\n * parent via `IntersectionObserverEntry`. This function should be called\n * each time the iframe receives intersection information from the parent\n * window, e.g. via messaging.\n * @return {function(DOMRect|ClientRect, DOMRect|ClientRect)}\n */\nIntersectionObserver._setupCrossOriginUpdater = function() {\n  if (!crossOriginUpdater) {\n    /**\n     * @param {DOMRect|ClientRect} boundingClientRect\n     * @param {DOMRect|ClientRect} intersectionRect\n     */\n    crossOriginUpdater = function(boundingClientRect, intersectionRect) {\n      if (!boundingClientRect || !intersectionRect) {\n        crossOriginRect = getEmptyRect();\n      } else {\n        crossOriginRect = convertFromParentRect(boundingClientRect, intersectionRect);\n      }\n      registry.forEach(function(observer) {\n        observer._checkForIntersections();\n      });\n    };\n  }\n  return crossOriginUpdater;\n};\n\n\n/**\n * Resets the cross-origin mode.\n */\nIntersectionObserver._resetCrossOriginUpdater = function() {\n  crossOriginUpdater = null;\n  crossOriginRect = null;\n};\n\n\n/**\n * Starts observing a target element for intersection changes based on\n * the thresholds values.\n * @param {Element} target The DOM element to observe.\n */\nIntersectionObserver.prototype.observe = function(target) {\n  var isTargetAlreadyObserved = this._observationTargets.some(function(item) {\n    return item.element == target;\n  });\n\n  if (isTargetAlreadyObserved) {\n    return;\n  }\n\n  if (!(target && target.nodeType == 1)) {\n    throw new Error('target must be an Element');\n  }\n\n  this._registerInstance();\n  this._observationTargets.push({element: target, entry: null});\n  this._monitorIntersections(target.ownerDocument);\n  this._checkForIntersections();\n};\n\n\n/**\n * Stops observing a target element for intersection changes.\n * @param {Element} target The DOM element to observe.\n */\nIntersectionObserver.prototype.unobserve = function(target) {\n  this._observationTargets =\n      this._observationTargets.filter(function(item) {\n        return item.element != target;\n      });\n  this._unmonitorIntersections(target.ownerDocument);\n  if (this._observationTargets.length == 0) {\n    this._unregisterInstance();\n  }\n};\n\n\n/**\n * Stops observing all target elements for intersection changes.\n */\nIntersectionObserver.prototype.disconnect = function() {\n  this._observationTargets = [];\n  this._unmonitorAllIntersections();\n  this._unregisterInstance();\n};\n\n\n/**\n * Returns any queue entries that have not yet been reported to the\n * callback and clears the queue. This can be used in conjunction with the\n * callback to obtain the absolute most up-to-date intersection information.\n * @return {Array} The currently queued entries.\n */\nIntersectionObserver.prototype.takeRecords = function() {\n  var records = this._queuedEntries.slice();\n  this._queuedEntries = [];\n  return records;\n};\n\n\n/**\n * Accepts the threshold value from the user configuration object and\n * returns a sorted array of unique threshold values. If a value is not\n * between 0 and 1 and error is thrown.\n * @private\n * @param {Array|number=} opt_threshold An optional threshold value or\n *     a list of threshold values, defaulting to [0].\n * @return {Array} A sorted list of unique and valid threshold values.\n */\nIntersectionObserver.prototype._initThresholds = function(opt_threshold) {\n  var threshold = opt_threshold || [0];\n  if (!Array.isArray(threshold)) threshold = [threshold];\n\n  return threshold.sort().filter(function(t, i, a) {\n    if (typeof t != 'number' || isNaN(t) || t < 0 || t > 1) {\n      throw new Error('threshold must be a number between 0 and 1 inclusively');\n    }\n    return t !== a[i - 1];\n  });\n};\n\n\n/**\n * Accepts the rootMargin value from the user configuration object\n * and returns an array of the four margin values as an object containing\n * the value and unit properties. If any of the values are not properly\n * formatted or use a unit other than px or %, and error is thrown.\n * @private\n * @param {string=} opt_rootMargin An optional rootMargin value,\n *     defaulting to '0px'.\n * @return {Array<Object>} An array of margin objects with the keys\n *     value and unit.\n */\nIntersectionObserver.prototype._parseRootMargin = function(opt_rootMargin) {\n  var marginString = opt_rootMargin || '0px';\n  var margins = marginString.split(/\\s+/).map(function(margin) {\n    var parts = /^(-?\\d*\\.?\\d+)(px|%)$/.exec(margin);\n    if (!parts) {\n      throw new Error('rootMargin must be specified in pixels or percent');\n    }\n    return {value: parseFloat(parts[1]), unit: parts[2]};\n  });\n\n  // Handles shorthand.\n  margins[1] = margins[1] || margins[0];\n  margins[2] = margins[2] || margins[0];\n  margins[3] = margins[3] || margins[1];\n\n  return margins;\n};\n\n\n/**\n * Starts polling for intersection changes if the polling is not already\n * happening, and if the page's visibility state is visible.\n * @param {!Document} doc\n * @private\n */\nIntersectionObserver.prototype._monitorIntersections = function(doc) {\n  var win = doc.defaultView;\n  if (!win) {\n    // Already destroyed.\n    return;\n  }\n  if (this._monitoringDocuments.indexOf(doc) != -1) {\n    // Already monitoring.\n    return;\n  }\n\n  // Private state for monitoring.\n  var callback = this._checkForIntersections;\n  var monitoringInterval = null;\n  var domObserver = null;\n\n  // If a poll interval is set, use polling instead of listening to\n  // resize and scroll events or DOM mutations.\n  if (this.POLL_INTERVAL) {\n    monitoringInterval = win.setInterval(callback, this.POLL_INTERVAL);\n  } else {\n    addEvent(win, 'resize', callback, true);\n    addEvent(doc, 'scroll', callback, true);\n    if (this.USE_MUTATION_OBSERVER && 'MutationObserver' in win) {\n      domObserver = new win.MutationObserver(callback);\n      domObserver.observe(doc, {\n        attributes: true,\n        childList: true,\n        characterData: true,\n        subtree: true\n      });\n    }\n  }\n\n  this._monitoringDocuments.push(doc);\n  this._monitoringUnsubscribes.push(function() {\n    // Get the window object again. When a friendly iframe is destroyed, it\n    // will be null.\n    var win = doc.defaultView;\n\n    if (win) {\n      if (monitoringInterval) {\n        win.clearInterval(monitoringInterval);\n      }\n      removeEvent(win, 'resize', callback, true);\n    }\n\n    removeEvent(doc, 'scroll', callback, true);\n    if (domObserver) {\n      domObserver.disconnect();\n    }\n  });\n\n  // Also monitor the parent.\n  var rootDoc =\n    (this.root && (this.root.ownerDocument || this.root)) || document;\n  if (doc != rootDoc) {\n    var frame = getFrameElement(doc);\n    if (frame) {\n      this._monitorIntersections(frame.ownerDocument);\n    }\n  }\n};\n\n\n/**\n * Stops polling for intersection changes.\n * @param {!Document} doc\n * @private\n */\nIntersectionObserver.prototype._unmonitorIntersections = function(doc) {\n  var index = this._monitoringDocuments.indexOf(doc);\n  if (index == -1) {\n    return;\n  }\n\n  var rootDoc =\n    (this.root && (this.root.ownerDocument || this.root)) || document;\n\n  // Check if any dependent targets are still remaining.\n  var hasDependentTargets =\n      this._observationTargets.some(function(item) {\n        var itemDoc = item.element.ownerDocument;\n        // Target is in this context.\n        if (itemDoc == doc) {\n          return true;\n        }\n        // Target is nested in this context.\n        while (itemDoc && itemDoc != rootDoc) {\n          var frame = getFrameElement(itemDoc);\n          itemDoc = frame && frame.ownerDocument;\n          if (itemDoc == doc) {\n            return true;\n          }\n        }\n        return false;\n      });\n  if (hasDependentTargets) {\n    return;\n  }\n\n  // Unsubscribe.\n  var unsubscribe = this._monitoringUnsubscribes[index];\n  this._monitoringDocuments.splice(index, 1);\n  this._monitoringUnsubscribes.splice(index, 1);\n  unsubscribe();\n\n  // Also unmonitor the parent.\n  if (doc != rootDoc) {\n    var frame = getFrameElement(doc);\n    if (frame) {\n      this._unmonitorIntersections(frame.ownerDocument);\n    }\n  }\n};\n\n\n/**\n * Stops polling for intersection changes.\n * @param {!Document} doc\n * @private\n */\nIntersectionObserver.prototype._unmonitorAllIntersections = function() {\n  var unsubscribes = this._monitoringUnsubscribes.slice(0);\n  this._monitoringDocuments.length = 0;\n  this._monitoringUnsubscribes.length = 0;\n  for (var i = 0; i < unsubscribes.length; i++) {\n    unsubscribes[i]();\n  }\n};\n\n\n/**\n * Scans each observation target for intersection changes and adds them\n * to the internal entries queue. If new entries are found, it\n * schedules the callback to be invoked.\n * @private\n */\nIntersectionObserver.prototype._checkForIntersections = function() {\n  if (!this.root && crossOriginUpdater && !crossOriginRect) {\n    // Cross origin monitoring, but no initial data available yet.\n    return;\n  }\n\n  var rootIsInDom = this._rootIsInDom();\n  var rootRect = rootIsInDom ? this._getRootRect() : getEmptyRect();\n\n  this._observationTargets.forEach(function(item) {\n    var target = item.element;\n    var targetRect = getBoundingClientRect(target);\n    var rootContainsTarget = this._rootContainsTarget(target);\n    var oldEntry = item.entry;\n    var intersectionRect = rootIsInDom && rootContainsTarget &&\n        this._computeTargetAndRootIntersection(target, targetRect, rootRect);\n\n    var rootBounds = null;\n    if (!this._rootContainsTarget(target)) {\n      rootBounds = getEmptyRect();\n    } else if (!crossOriginUpdater || this.root) {\n      rootBounds = rootRect;\n    }\n\n    var newEntry = item.entry = new IntersectionObserverEntry({\n      time: now(),\n      target: target,\n      boundingClientRect: targetRect,\n      rootBounds: rootBounds,\n      intersectionRect: intersectionRect\n    });\n\n    if (!oldEntry) {\n      this._queuedEntries.push(newEntry);\n    } else if (rootIsInDom && rootContainsTarget) {\n      // If the new entry intersection ratio has crossed any of the\n      // thresholds, add a new entry.\n      if (this._hasCrossedThreshold(oldEntry, newEntry)) {\n        this._queuedEntries.push(newEntry);\n      }\n    } else {\n      // If the root is not in the DOM or target is not contained within\n      // root but the previous entry for this target had an intersection,\n      // add a new record indicating removal.\n      if (oldEntry && oldEntry.isIntersecting) {\n        this._queuedEntries.push(newEntry);\n      }\n    }\n  }, this);\n\n  if (this._queuedEntries.length) {\n    this._callback(this.takeRecords(), this);\n  }\n};\n\n\n/**\n * Accepts a target and root rect computes the intersection between then\n * following the algorithm in the spec.\n * TODO(philipwalton): at this time clip-path is not considered.\n * https://w3c.github.io/IntersectionObserver/#calculate-intersection-rect-algo\n * @param {Element} target The target DOM element\n * @param {Object} targetRect The bounding rect of the target.\n * @param {Object} rootRect The bounding rect of the root after being\n *     expanded by the rootMargin value.\n * @return {?Object} The final intersection rect object or undefined if no\n *     intersection is found.\n * @private\n */\nIntersectionObserver.prototype._computeTargetAndRootIntersection =\n    function(target, targetRect, rootRect) {\n  // If the element isn't displayed, an intersection can't happen.\n  if (window.getComputedStyle(target).display == 'none') return;\n\n  var intersectionRect = targetRect;\n  var parent = getParentNode(target);\n  var atRoot = false;\n\n  while (!atRoot && parent) {\n    var parentRect = null;\n    var parentComputedStyle = parent.nodeType == 1 ?\n        window.getComputedStyle(parent) : {};\n\n    // If the parent isn't displayed, an intersection can't happen.\n    if (parentComputedStyle.display == 'none') return null;\n\n    if (parent == this.root || parent.nodeType == /* DOCUMENT */ 9) {\n      atRoot = true;\n      if (parent == this.root || parent == document) {\n        if (crossOriginUpdater && !this.root) {\n          if (!crossOriginRect ||\n              crossOriginRect.width == 0 && crossOriginRect.height == 0) {\n            // A 0-size cross-origin intersection means no-intersection.\n            parent = null;\n            parentRect = null;\n            intersectionRect = null;\n          } else {\n            parentRect = crossOriginRect;\n          }\n        } else {\n          parentRect = rootRect;\n        }\n      } else {\n        // Check if there's a frame that can be navigated to.\n        var frame = getParentNode(parent);\n        var frameRect = frame && getBoundingClientRect(frame);\n        var frameIntersect =\n            frame &&\n            this._computeTargetAndRootIntersection(frame, frameRect, rootRect);\n        if (frameRect && frameIntersect) {\n          parent = frame;\n          parentRect = convertFromParentRect(frameRect, frameIntersect);\n        } else {\n          parent = null;\n          intersectionRect = null;\n        }\n      }\n    } else {\n      // If the element has a non-visible overflow, and it's not the <body>\n      // or <html> element, update the intersection rect.\n      // Note: <body> and <html> cannot be clipped to a rect that's not also\n      // the document rect, so no need to compute a new intersection.\n      var doc = parent.ownerDocument;\n      if (parent != doc.body &&\n          parent != doc.documentElement &&\n          parentComputedStyle.overflow != 'visible') {\n        parentRect = getBoundingClientRect(parent);\n      }\n    }\n\n    // If either of the above conditionals set a new parentRect,\n    // calculate new intersection data.\n    if (parentRect) {\n      intersectionRect = computeRectIntersection(parentRect, intersectionRect);\n    }\n    if (!intersectionRect) break;\n    parent = parent && getParentNode(parent);\n  }\n  return intersectionRect;\n};\n\n\n/**\n * Returns the root rect after being expanded by the rootMargin value.\n * @return {ClientRect} The expanded root rect.\n * @private\n */\nIntersectionObserver.prototype._getRootRect = function() {\n  var rootRect;\n  if (this.root && !isDoc(this.root)) {\n    rootRect = getBoundingClientRect(this.root);\n  } else {\n    // Use <html>/<body> instead of window since scroll bars affect size.\n    var doc = isDoc(this.root) ? this.root : document;\n    var html = doc.documentElement;\n    var body = doc.body;\n    rootRect = {\n      top: 0,\n      left: 0,\n      right: html.clientWidth || body.clientWidth,\n      width: html.clientWidth || body.clientWidth,\n      bottom: html.clientHeight || body.clientHeight,\n      height: html.clientHeight || body.clientHeight\n    };\n  }\n  return this._expandRectByRootMargin(rootRect);\n};\n\n\n/**\n * Accepts a rect and expands it by the rootMargin value.\n * @param {DOMRect|ClientRect} rect The rect object to expand.\n * @return {ClientRect} The expanded rect.\n * @private\n */\nIntersectionObserver.prototype._expandRectByRootMargin = function(rect) {\n  var margins = this._rootMarginValues.map(function(margin, i) {\n    return margin.unit == 'px' ? margin.value :\n        margin.value * (i % 2 ? rect.width : rect.height) / 100;\n  });\n  var newRect = {\n    top: rect.top - margins[0],\n    right: rect.right + margins[1],\n    bottom: rect.bottom + margins[2],\n    left: rect.left - margins[3]\n  };\n  newRect.width = newRect.right - newRect.left;\n  newRect.height = newRect.bottom - newRect.top;\n\n  return newRect;\n};\n\n\n/**\n * Accepts an old and new entry and returns true if at least one of the\n * threshold values has been crossed.\n * @param {?IntersectionObserverEntry} oldEntry The previous entry for a\n *    particular target element or null if no previous entry exists.\n * @param {IntersectionObserverEntry} newEntry The current entry for a\n *    particular target element.\n * @return {boolean} Returns true if a any threshold has been crossed.\n * @private\n */\nIntersectionObserver.prototype._hasCrossedThreshold =\n    function(oldEntry, newEntry) {\n\n  // To make comparing easier, an entry that has a ratio of 0\n  // but does not actually intersect is given a value of -1\n  var oldRatio = oldEntry && oldEntry.isIntersecting ?\n      oldEntry.intersectionRatio || 0 : -1;\n  var newRatio = newEntry.isIntersecting ?\n      newEntry.intersectionRatio || 0 : -1;\n\n  // Ignore unchanged ratios\n  if (oldRatio === newRatio) return;\n\n  for (var i = 0; i < this.thresholds.length; i++) {\n    var threshold = this.thresholds[i];\n\n    // Return true if an entry matches a threshold or if the new ratio\n    // and the old ratio are on the opposite sides of a threshold.\n    if (threshold == oldRatio || threshold == newRatio ||\n        threshold < oldRatio !== threshold < newRatio) {\n      return true;\n    }\n  }\n};\n\n\n/**\n * Returns whether or not the root element is an element and is in the DOM.\n * @return {boolean} True if the root element is an element and is in the DOM.\n * @private\n */\nIntersectionObserver.prototype._rootIsInDom = function() {\n  return !this.root || containsDeep(document, this.root);\n};\n\n\n/**\n * Returns whether or not the target element is a child of root.\n * @param {Element} target The target element to check.\n * @return {boolean} True if the target element is a child of root.\n * @private\n */\nIntersectionObserver.prototype._rootContainsTarget = function(target) {\n  var rootDoc =\n    (this.root && (this.root.ownerDocument || this.root)) || document;\n  return (\n    containsDeep(rootDoc, target) &&\n    (!this.root || rootDoc == target.ownerDocument)\n  );\n};\n\n\n/**\n * Adds the instance to the global IntersectionObserver registry if it isn't\n * already present.\n * @private\n */\nIntersectionObserver.prototype._registerInstance = function() {\n  if (registry.indexOf(this) < 0) {\n    registry.push(this);\n  }\n};\n\n\n/**\n * Removes the instance from the global IntersectionObserver registry.\n * @private\n */\nIntersectionObserver.prototype._unregisterInstance = function() {\n  var index = registry.indexOf(this);\n  if (index != -1) registry.splice(index, 1);\n};\n\n\n/**\n * Returns the result of the performance.now() method or null in browsers\n * that don't support the API.\n * @return {number} The elapsed time since the page was requested.\n */\nfunction now() {\n  return window.performance && performance.now && performance.now();\n}\n\n\n/**\n * Throttles a function and delays its execution, so it's only called at most\n * once within a given time period.\n * @param {Function} fn The function to throttle.\n * @param {number} timeout The amount of time that must pass before the\n *     function can be called again.\n * @return {Function} The throttled function.\n */\nfunction throttle(fn, timeout) {\n  var timer = null;\n  return function () {\n    if (!timer) {\n      timer = setTimeout(function() {\n        fn();\n        timer = null;\n      }, timeout);\n    }\n  };\n}\n\n\n/**\n * Adds an event handler to a DOM node ensuring cross-browser compatibility.\n * @param {Node} node The DOM node to add the event handler to.\n * @param {string} event The event name.\n * @param {Function} fn The event handler to add.\n * @param {boolean} opt_useCapture Optionally adds the even to the capture\n *     phase. Note: this only works in modern browsers.\n */\nfunction addEvent(node, event, fn, opt_useCapture) {\n  if (typeof node.addEventListener == 'function') {\n    node.addEventListener(event, fn, opt_useCapture || false);\n  }\n  else if (typeof node.attachEvent == 'function') {\n    node.attachEvent('on' + event, fn);\n  }\n}\n\n\n/**\n * Removes a previously added event handler from a DOM node.\n * @param {Node} node The DOM node to remove the event handler from.\n * @param {string} event The event name.\n * @param {Function} fn The event handler to remove.\n * @param {boolean} opt_useCapture If the event handler was added with this\n *     flag set to true, it should be set to true here in order to remove it.\n */\nfunction removeEvent(node, event, fn, opt_useCapture) {\n  if (typeof node.removeEventListener == 'function') {\n    node.removeEventListener(event, fn, opt_useCapture || false);\n  }\n  else if (typeof node.detatchEvent == 'function') {\n    node.detatchEvent('on' + event, fn);\n  }\n}\n\n\n/**\n * Returns the intersection between two rect objects.\n * @param {Object} rect1 The first rect.\n * @param {Object} rect2 The second rect.\n * @return {?Object|?ClientRect} The intersection rect or undefined if no\n *     intersection is found.\n */\nfunction computeRectIntersection(rect1, rect2) {\n  var top = Math.max(rect1.top, rect2.top);\n  var bottom = Math.min(rect1.bottom, rect2.bottom);\n  var left = Math.max(rect1.left, rect2.left);\n  var right = Math.min(rect1.right, rect2.right);\n  var width = right - left;\n  var height = bottom - top;\n\n  return (width >= 0 && height >= 0) && {\n    top: top,\n    bottom: bottom,\n    left: left,\n    right: right,\n    width: width,\n    height: height\n  } || null;\n}\n\n\n/**\n * Shims the native getBoundingClientRect for compatibility with older IE.\n * @param {Element} el The element whose bounding rect to get.\n * @return {DOMRect|ClientRect} The (possibly shimmed) rect of the element.\n */\nfunction getBoundingClientRect(el) {\n  var rect;\n\n  try {\n    rect = el.getBoundingClientRect();\n  } catch (err) {\n    // Ignore Windows 7 IE11 \"Unspecified error\"\n    // https://github.com/w3c/IntersectionObserver/pull/205\n  }\n\n  if (!rect) return getEmptyRect();\n\n  // Older IE\n  if (!(rect.width && rect.height)) {\n    rect = {\n      top: rect.top,\n      right: rect.right,\n      bottom: rect.bottom,\n      left: rect.left,\n      width: rect.right - rect.left,\n      height: rect.bottom - rect.top\n    };\n  }\n  return rect;\n}\n\n\n/**\n * Returns an empty rect object. An empty rect is returned when an element\n * is not in the DOM.\n * @return {ClientRect} The empty rect.\n */\nfunction getEmptyRect() {\n  return {\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    width: 0,\n    height: 0\n  };\n}\n\n\n/**\n * Ensure that the result has all of the necessary fields of the DOMRect.\n * Specifically this ensures that `x` and `y` fields are set.\n *\n * @param {?DOMRect|?ClientRect} rect\n * @return {?DOMRect}\n */\nfunction ensureDOMRect(rect) {\n  // A `DOMRect` object has `x` and `y` fields.\n  if (!rect || 'x' in rect) {\n    return rect;\n  }\n  // A IE's `ClientRect` type does not have `x` and `y`. The same is the case\n  // for internally calculated Rect objects. For the purposes of\n  // `IntersectionObserver`, it's sufficient to simply mirror `left` and `top`\n  // for these fields.\n  return {\n    top: rect.top,\n    y: rect.top,\n    bottom: rect.bottom,\n    left: rect.left,\n    x: rect.left,\n    right: rect.right,\n    width: rect.width,\n    height: rect.height\n  };\n}\n\n\n/**\n * Inverts the intersection and bounding rect from the parent (frame) BCR to\n * the local BCR space.\n * @param {DOMRect|ClientRect} parentBoundingRect The parent's bound client rect.\n * @param {DOMRect|ClientRect} parentIntersectionRect The parent's own intersection rect.\n * @return {ClientRect} The local root bounding rect for the parent's children.\n */\nfunction convertFromParentRect(parentBoundingRect, parentIntersectionRect) {\n  var top = parentIntersectionRect.top - parentBoundingRect.top;\n  var left = parentIntersectionRect.left - parentBoundingRect.left;\n  return {\n    top: top,\n    left: left,\n    height: parentIntersectionRect.height,\n    width: parentIntersectionRect.width,\n    bottom: top + parentIntersectionRect.height,\n    right: left + parentIntersectionRect.width\n  };\n}\n\n\n/**\n * Checks to see if a parent element contains a child element (including inside\n * shadow DOM).\n * @param {Node} parent The parent element.\n * @param {Node} child The child element.\n * @return {boolean} True if the parent node contains the child node.\n */\nfunction containsDeep(parent, child) {\n  var node = child;\n  while (node) {\n    if (node == parent) return true;\n\n    node = getParentNode(node);\n  }\n  return false;\n}\n\n\n/**\n * Gets the parent node of an element or its host element if the parent node\n * is a shadow root.\n * @param {Node} node The node whose parent to get.\n * @return {Node|null} The parent node or null if no parent exists.\n */\nfunction getParentNode(node) {\n  var parent = node.parentNode;\n\n  if (node.nodeType == /* DOCUMENT */ 9 && node != document) {\n    // If this node is a document node, look for the embedding frame.\n    return getFrameElement(node);\n  }\n\n  // If the parent has element that is assigned through shadow root slot\n  if (parent && parent.assignedSlot) {\n    parent = parent.assignedSlot.parentNode\n  }\n\n  if (parent && parent.nodeType == 11 && parent.host) {\n    // If the parent is a shadow root, return the host element.\n    return parent.host;\n  }\n\n  return parent;\n}\n\n/**\n * Returns true if `node` is a Document.\n * @param {!Node} node\n * @returns {boolean}\n */\nfunction isDoc(node) {\n  return node && node.nodeType === 9;\n}\n\n\n// Exposes the constructors globally.\nwindow.IntersectionObserver = IntersectionObserver;\nwindow.IntersectionObserverEntry = IntersectionObserverEntry;\n\n}());\n","// device sniffing for mobile\n\nconst isMobile = {\n\tandroid: () => navigator.userAgent.match(/Android/i),\n\n\tblackberry: () => navigator.userAgent.match(/BlackBerry/i),\n\n\tios: () => navigator.userAgent.match(/iPhone|iPad|iPod/i),\n\n\topera: () => navigator.userAgent.match(/Opera Mini/i),\n\n\twindows: () => navigator.userAgent.match(/IEMobile/i),\n\n\tany: () => (\n\t\tisMobile.android() ||\n\t\tisMobile.blackberry() ||\n\t\tisMobile.ios() ||\n\t\tisMobile.opera() ||\n\t\tisMobile.windows()\n\t),\n}\n\nexport default isMobile\n","import { selectAll } from \"./dom\";\n/**\n * Fixes target blanks links\n */\n\nexport default function linkFix() {\n  const links = selectAll(\"[target='_blank']\");\n  links.forEach(link => link.setAttribute(\"rel\", \"noopener\"));\n}\n","// DOM helper functions\n\n// public\nfunction select(selector) {\n  return document.querySelector(selector);\n}\n\nfunction selectAll(selector, parent = document) {\n  return [...parent.querySelectorAll(selector)];\n}\n\nfunction find(el, selector) {\n  return [...el.querySelectorAll(selector)];\n}\n\nfunction removeClass(el, className) {\n  if (el.classList) el.classList.remove(className);\n  else\n    el.className = el.className.replace(\n      new RegExp(`(^|\\\\b)${className.split(' ').join('|')}(\\\\b|$)`, 'gi'),\n      ' '\n    );\n}\n\nfunction addClass(el, className) {\n  if (el.classList) el.classList.add(className);\n  else el.className = `${el.className} ${className}`;\n}\n\nfunction hasClass(el, className) {\n  if (el.classList) return el.classList.contains(className);\n  return new RegExp(`(^| )${className}( |$)`, 'gi').test(el.className);\n}\n\nfunction jumpTo(el, offset) {\n  offset = offset || 0;\n  const top = el.getBoundingClientRect().top + offset;\n  const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n  const destY = scrollTop + top;\n  window.scrollTo(0, destY);\n}\n\nexport { select, selectAll, find, removeClass, addClass, hasClass, jumpTo };\n","/**\n * Improves keyboard accessibility of modal windows\n * Modal windows are now completely keyboard accessible, but only when visible\n * Prevents tab accessing hidden modal content\n * Prevents tabbing out of modal window if open (but escape key can be used to close modal window at any time)\n * @param {selection} $openEl - selection of element that when clicked opens the modal\n * @param {selection} $closeEl - selection of element that when clicked closes the modal\n * @param {selection} $containerEl - selection of element that contains the modal and any other elements you may want to receive tab focus\n * @param {selection} $modalEl - selection of the modal itself\n * @param {string} focusable - comma separated list of classes, ids, or DOM elements that should receive focus in a modal\n * @param {boolean} hamburger - whether or not the toggle switch represents a hamburger menu (will swap icons if true)\n * @returns {array} array of unique values\n *\n * @example\n * import modalSetup from './utils/modal-a11y';\n * const $openEl = d3.select('.open')\n * const $closeEl = d3.select('.close')\n * const $containerEl = d3.select('.container')\n * const $modalEl = d3.select('.modal')\n * const focusable = 'a, .logo'\n * modalSetup($openEl, $closeEl, $containerEl, $modalEl, focusable, false)\n */\n\nconst hamburgerSVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-menu\"><line x1=\"3\" y1=\"12\" x2=\"21\" y2=\"12\"></line><line x1=\"3\" y1=\"6\" x2=\"21\" y2=\"6\"></line><line x1=\"3\" y1=\"18\" x2=\"21\" y2=\"18\"></line></svg>`;\nconst xSVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-x\"><line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line><line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line></svg>`;\nconst $body = d3.select('body')\n\nfunction handleOpenClose($modalEl, $toggleEl, hamburger) {\n  // see if menu is already opened\n  const opened = $modalEl.classed('is-visible');\n\n  // update the aria attribute and the actual class of the nav\n  $toggleEl.attr('aria-expanded', !opened);\n  $modalEl.classed('is-active', !opened);\n  $modalEl.classed('is-visible', !opened);\n\n  // set an open class on the body to prevent scrolling \n  $body.classed('modal-open', !opened)\n\n  // if the hamburger argument is set to true, switch between hamburger & x icon\n  if (hamburger === true) {\n    if (opened) {\n      $toggleEl.html(() => hamburgerSVG);\n    } else $toggleEl.html(() => xSVG);\n  }\n}\n\nexport default function setup(\n  $openEl,\n  $closeEl,\n  $containerEl,\n  $modalEl,\n  focusable,\n  hamburger\n) {\n\n  // find first and last focusable elements in the modal\n  const $focusableInModal = $containerEl.selectAll(focusable).nodes();\n  const $firstFocus = $focusableInModal[0];\n  const $lastFocus = $focusableInModal[$focusableInModal.length - 1];\n\n  // if you click on the element that triggers the modal to open\n  // open (or close) the modal\n  $openEl.on('click', () => handleOpenClose($modalEl, $openEl, hamburger));\n  $closeEl.on('click', () => handleOpenClose($modalEl, $closeEl, hamburger));\n\n  // listen for escape key press on the modal element\n  $containerEl.on('keydown', event => {\n    const pressed = event.code;\n    const opened = $modalEl.classed('is-visible');\n    if (pressed === 'Escape' && opened === true) {\n      // close menu\n      $openEl.attr('aria-expanded', false);\n      // switch focus back to element that opened the modal\n      $openEl.node().focus();\n      $modalEl.classed('is-active', false);\n      $modalEl.classed('is-visible', false);\n\n      if (hamburger === true) {\n        $openEl.html(() => hamburgerSVG);\n      }\n    }\n  });\n\n  // if focused on first focusable element when menu is open\n  // and moving up, go to last focusable element\n  // if on last focusable element and tab is pressed, go back to first\n  d3.select($firstFocus).on('keydown', event => {\n    const opened = $modalEl.classed('is-visible');\n    if (opened) {\n      const pressed = event.code;\n      const shift = event.shiftKey;\n\n      if (pressed === 'Tab' && shift === true) {\n        // prevent default behavior\n        event.preventDefault();\n\n        // focus on the last element\n        $lastFocus.focus();\n      }\n    }\n  });\n\n  d3.select($lastFocus).on('keydown', event => {\n    const opened = $modalEl.classed('is-visible');\n    if (opened) {\n      const pressed = event.code;\n      const shift = event.shiftKey;\n\n      // if tab is pressed on last element, go back to first\n      if (pressed === 'Tab' && shift === false) {\n        // prevent default behavior\n        event.preventDefault();\n\n        // focus on the first element\n        $firstFocus.focus();\n      }\n    }\n  });\n}\n","/* global d3 */\nfunction resize() {}\n\nfunction init() {\n  console.log('Make something awesome!');\n}\n\nexport default { init, resize };\n","const fallbackData = [\n  {\n    image: \"2018_02_stand-up\",\n    url: \"2018/02/stand-up\",\n    hed: \"The Structure of Stand-Up Comedy\"\n  },\n  {\n    image: \"2018_04_birthday-paradox\",\n    url: \"2018/04/birthday-paradox\",\n    hed: \"The Birthday Paradox Experiment\"\n  },\n  {\n    image: \"2018_11_boy-bands\",\n    url: \"2018/11/boy-bands\",\n    hed: \"Internet Boy Band Database\"\n  },\n  {\n    image: \"2018_08_pockets\",\n    url: \"2018/08/pockets\",\n    hed: \"Women’s Pockets are Inferior\"\n  }\n];\n\nlet storyData = null;\n\nfunction loadJS(src, cb) {\n  const ref = document.getElementsByTagName(\"script\")[0];\n  const script = document.createElement(\"script\");\n  script.src = src;\n  script.async = true;\n  ref.parentNode.insertBefore(script, ref);\n\n  if (cb && typeof cb === \"function\") {\n    script.onload = cb;\n  }\n\n  return script;\n}\n\nfunction loadStories(cb) {\n  const request = new XMLHttpRequest();\n  const v = Date.now();\n  const url = `https://pudding.cool/assets/data/stories.json?v=${v}`;\n  request.open(\"GET\", url, true);\n\n  request.onload = () => {\n    if (request.status >= 200 && request.status < 400) {\n      const data = JSON.parse(request.responseText);\n      cb(data);\n    } else cb(fallbackData);\n  };\n\n  request.onerror = () => cb(fallbackData);\n\n  request.send();\n}\n\nfunction createLink(d) {\n  return `\n\t<a class='footer-recirc__article' href='https://pudding.cool/${d.url}' target='_blank' rel='noopener'>\n\t\t<img class='article__img' src='https://pudding.cool/common/assets/thumbnails/640/${d.image}.jpg' alt='${d.hed}'>\n\t\t<p class='article__headline'>${d.hed}</p>\n\t</a>\n\t`;\n}\n\nfunction recircHTML() {\n  const url = window.location.href;\n  const html = storyData\n    .filter(d => !url.includes(d.url))\n    .slice(0, 4)\n    .map(createLink)\n    .join(\"\");\n\n  d3.select(\".pudding-footer .footer-recirc__articles\").html(html);\n}\n\nfunction init() {\n  loadStories(data => {\n    storyData = data;\n\n    recircHTML();\n  });\n}\n\nexport default { init };\n","export default {\n\ttesting: 'This is localhost testing data',\n  city: 'Lee',\n  country: 'US',\n  hostname: 'cpe-74-76-154-164.nycap.res.rr.com',\n  ip: '74.76.154.164',\n  // loc: '37.532600, 127.024612',\n  loc: '40.71427,-74.00597',\n  // loc: '42.3043,-73.2482',\n  org: 'AS11351 Charter Communications Inc',\n  postal: '01238',\n  // region: 'Massachusetts',\n  region: 'New York',\n  timezone: 'America/New_York'\n};\n","/* USAGE:\nlocate().then(data => {\n\n}).catch(err => {\n\n});\n*/\n\nimport testData from './locate-test';\n\nconst MAX_TIME = 4000;\n\nfunction lookup() {\n\treturn Promise.resolve(testData);\n\t// const local = window.location.href.includes('localhost');\n\t// if (local) return Promise.resolve(testData);\n\n  // const github = window.location.href.includes('github');\n\t// if (github) return Promise.resolve(testData);\n\n  const url = `https://ipinfo.io?token=6f0f9c88db028a`;\n  return new Promise((resolve, reject) => {\n    fetch(url).then((response) => {\n      if (response.ok) response.json().then(resolve).catch(reject);\n      else reject(new Error(response.status));\n    });\n  });\n}\n\nasync function init() {\n  return new Promise((resolve, reject) => {\n    const timeout = setTimeout(() => reject(new Error('timeout')), MAX_TIME);\n\n    lookup()\n      .then((data) => {\n        clearTimeout(timeout);\n        resolve(data);\n      })\n      .catch(reject);\n  });\n}\n\n//export default init;\nexport default { init };\n","function Deg2Rad( deg ) {\n  return deg * Math.PI / 180;\n}\n\nfunction getDistanceFromLatLonInKm(lat1, lon1, lat2, lon2) {\n  var R = 6371; // Radius of the earth in km\n  var dLat = Deg2Rad(lat2-lat1);  // deg2rad below\n  var dLon = Deg2Rad(lon2-lon1); \n  var a = \n    Math.sin(dLat/2) * Math.sin(dLat/2) +\n    Math.cos(Deg2Rad(lat1)) * Math.cos(Deg2Rad(lat2)) * \n    Math.sin(dLon/2) * Math.sin(dLon/2)\n    ; \n  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); \n  var d = R * c; // Distance in km\n  return d;\n}\n\nfunction PythagorasEquirectangular( lat1, lon1, lat2, lon2 ) {\n  lat1 = Deg2Rad(lat1);\n  lat2 = Deg2Rad(lat2);\n  lon1 = Deg2Rad(lon1);\n  lon2 = Deg2Rad(lon2);\n  var R = 6371; // km\n  var x = (lon2-lon1) * Math.cos((lat1+lat2)/2);\n  var y = (lat2-lat1);\n  var d = Math.sqrt(x*x + y*y) * R;\n  return d;\n}\n\nfunction NearestCity(latitude, longitude, locations) {\n  var mindif=99999;\n  var closest;\n\n  for (let index = 0; index < locations.length; ++index) {\n    var dif =  PythagorasEquirectangular(latitude, longitude, locations[ index ][ 1 ], locations[ index ][ 2 ]);\n    if ( dif < mindif ) {\n      closest=index;\n      mindif = dif;\n    }\n  }\n  // return the nearest location\n  var closestLocation = (locations[ closest ]);\n  return closestLocation[0];\n}\n\nfunction withinDistance(latitude, longitude, locations) {\n  var mindif=99999;\n\n\n  let matches = [];\n\n  for (let index = 0; index < locations.length; ++index) {\n    var dif =  PythagorasEquirectangular(latitude, longitude, locations[ index ][ 1 ], locations[ index ][ 2 ]);\n\n    if(dif < 60){\n      matches.push([locations[index][0],dif]);\n    }\n  }\n  return matches;\n}\n\n\n\n\nexport default { NearestCity, withinDistance, PythagorasEquirectangular, getDistanceFromLatLonInKm };\n","/* global d3 */\n/* usage\n\timport loadData from './load-data'\n\t\n\tloadData('file.csv').then(result => {\n\t\tconsole.log(result);\n\t}).catch(console.error);\n\n\tloadData(['file1.csv', 'file2.json]).then(result => {\n\t\tconsole.log(result);\n\t}).catch(console.error);\n*/\n\nfunction loadFile(file) {\n  return new Promise((resolve, reject) => {\n    const ext = file.split('.').pop();\n    if (ext === 'csv')\n      d3.csv(`assets/data/${file}`)\n        .then(resolve)\n        .catch(reject);\n    else if (ext === 'json')\n      d3.json(`assets/data/${file}`)\n        .then(resolve)\n        .catch(reject);\n    else reject(new Error(`unsupported file type for: ${file}`));\n  });\n}\n\nexport default function loadData(files) {\n  if (typeof files === 'string') return loadFile(files);\n  const loads = files.map(loadFile);\n  return Promise.all(loads);\n}\n","import superPropBase from \"./superPropBase.js\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","import checkIfBrowser from '../env/is-browser';\nexport { self, window, global, document, process, console } from '../env/globals';\nexport var VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : 'untranspiled source';\nexport var isBrowser = checkIfBrowser();\n//# sourceMappingURL=globals.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction getStorage(type) {\n  try {\n    var storage = window[type];\n    var x = '__storage_test__';\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return storage;\n  } catch (e) {\n    return null;\n  }\n}\n\nvar LocalStorage = function () {\n  function LocalStorage(id, defaultSettings) {\n    var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'sessionStorage';\n\n    _classCallCheck(this, LocalStorage);\n\n    this.storage = getStorage(type);\n    this.id = id;\n    this.config = {};\n    Object.assign(this.config, defaultSettings);\n\n    this._loadConfiguration();\n  }\n\n  _createClass(LocalStorage, [{\n    key: \"getConfiguration\",\n    value: function getConfiguration() {\n      return this.config;\n    }\n  }, {\n    key: \"setConfiguration\",\n    value: function setConfiguration(configuration) {\n      this.config = {};\n      return this.updateConfiguration(configuration);\n    }\n  }, {\n    key: \"updateConfiguration\",\n    value: function updateConfiguration(configuration) {\n      Object.assign(this.config, configuration);\n\n      if (this.storage) {\n        var serialized = JSON.stringify(this.config);\n        this.storage.setItem(this.id, serialized);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"_loadConfiguration\",\n    value: function _loadConfiguration() {\n      var configuration = {};\n\n      if (this.storage) {\n        var serializedConfiguration = this.storage.getItem(this.id);\n        configuration = serializedConfiguration ? JSON.parse(serializedConfiguration) : {};\n      }\n\n      Object.assign(this.config, configuration);\n      return this;\n    }\n  }]);\n\n  return LocalStorage;\n}();\n\nexport { LocalStorage as default };\n//# sourceMappingURL=local-storage.js.map","export function formatTime(ms) {\n  var formatted;\n\n  if (ms < 10) {\n    formatted = \"\".concat(ms.toFixed(2), \"ms\");\n  } else if (ms < 100) {\n    formatted = \"\".concat(ms.toFixed(1), \"ms\");\n  } else if (ms < 1000) {\n    formatted = \"\".concat(ms.toFixed(0), \"ms\");\n  } else {\n    formatted = \"\".concat((ms / 1000).toFixed(2), \"s\");\n  }\n\n  return formatted;\n}\nexport function leftPad(string) {\n  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 8;\n  var padLength = Math.max(length - string.length, 0);\n  return \"\".concat(' '.repeat(padLength)).concat(string);\n}\nexport function rightPad(string) {\n  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 8;\n  var padLength = Math.max(length - string.length, 0);\n  return \"\".concat(string).concat(' '.repeat(padLength));\n}\nexport function formatValue(v) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var EPSILON = 1e-16;\n  var _opts$isInteger = opts.isInteger,\n      isInteger = _opts$isInteger === void 0 ? false : _opts$isInteger;\n\n  if (Array.isArray(v) || ArrayBuffer.isView(v)) {\n    return formatArrayValue(v, opts);\n  }\n\n  if (!Number.isFinite(v)) {\n    return String(v);\n  }\n\n  if (Math.abs(v) < EPSILON) {\n    return isInteger ? '0' : '0.';\n  }\n\n  if (isInteger) {\n    return v.toFixed(0);\n  }\n\n  if (Math.abs(v) > 100 && Math.abs(v) < 10000) {\n    return v.toFixed(0);\n  }\n\n  var string = v.toPrecision(2);\n  var decimal = string.indexOf('.0');\n  return decimal === string.length - 2 ? string.slice(0, -1) : string;\n}\n\nfunction formatArrayValue(v, opts) {\n  var _opts$maxElts = opts.maxElts,\n      maxElts = _opts$maxElts === void 0 ? 16 : _opts$maxElts,\n      _opts$size = opts.size,\n      size = _opts$size === void 0 ? 1 : _opts$size;\n  var string = '[';\n\n  for (var i = 0; i < v.length && i < maxElts; ++i) {\n    if (i > 0) {\n      string += \",\".concat(i % size === 0 ? ' ' : '');\n    }\n\n    string += formatValue(v[i], opts);\n  }\n\n  var terminator = v.length > maxElts ? '...' : ']';\n  return \"\".concat(string).concat(terminator);\n}\n\nexport function formatImage(image, message, scale) {\n  var maxWidth = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 600;\n  var imageUrl = image.src.replace(/\\(/g, '%28').replace(/\\)/g, '%29');\n\n  if (image.width > maxWidth) {\n    scale = Math.min(scale, maxWidth / image.width);\n  }\n\n  var width = image.width * scale;\n  var height = image.height * scale;\n  var style = ['font-size:1px;', \"padding:\".concat(Math.floor(height / 2), \"px \").concat(Math.floor(width / 2), \"px;\"), \"line-height:\".concat(height, \"px;\"), \"background:url(\".concat(imageUrl, \");\"), \"background-size:\".concat(width, \"px \").concat(height, \"px;\"), 'color:transparent;'].join('');\n  return [\"\".concat(message, \" %c+\"), style];\n}\n//# sourceMappingURL=formatters.js.map","import { isBrowser } from './globals';\nexport var COLOR = {\n  BLACK: 30,\n  RED: 31,\n  GREEN: 32,\n  YELLOW: 33,\n  BLUE: 34,\n  MAGENTA: 35,\n  CYAN: 36,\n  WHITE: 37,\n  BRIGHT_BLACK: 90,\n  BRIGHT_RED: 91,\n  BRIGHT_GREEN: 92,\n  BRIGHT_YELLOW: 93,\n  BRIGHT_BLUE: 94,\n  BRIGHT_MAGENTA: 95,\n  BRIGHT_CYAN: 96,\n  BRIGHT_WHITE: 97\n};\n\nfunction getColor(color) {\n  return typeof color === 'string' ? COLOR[color.toUpperCase()] || COLOR.WHITE : color;\n}\n\nexport function addColor(string, color, background) {\n  if (!isBrowser && typeof string === 'string') {\n    if (color) {\n      color = getColor(color);\n      string = \"\\x1B[\".concat(color, \"m\").concat(string, \"\\x1B[39m\");\n    }\n\n    if (background) {\n      color = getColor(background);\n      string = \"\\x1B[\".concat(background + 10, \"m\").concat(string, \"\\x1B[49m\");\n    }\n  }\n\n  return string;\n}\n//# sourceMappingURL=color.js.map","function _createForOfIteratorHelper(o) { if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(n); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nexport function autobind(obj) {\n  var predefined = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ['constructor'];\n  var proto = Object.getPrototypeOf(obj);\n  var propNames = Object.getOwnPropertyNames(proto);\n\n  var _iterator = _createForOfIteratorHelper(propNames),\n      _step;\n\n  try {\n    var _loop = function _loop() {\n      var key = _step.value;\n\n      if (typeof obj[key] === 'function') {\n        if (!predefined.find(function (name) {\n          return key === name;\n        })) {\n          obj[key] = obj[key].bind(obj);\n        }\n      }\n    };\n\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      _loop();\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\n//# sourceMappingURL=autobind.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'Assertion failed');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { window, process, isBrowser } from './globals';\nexport default function getHiResTimestamp() {\n  var timestamp;\n\n  if (isBrowser && window.performance) {\n    timestamp = window.performance.now();\n  } else if (process.hrtime) {\n    var timeParts = process.hrtime();\n    timestamp = timeParts[0] * 1000 + timeParts[1] / 1e6;\n  } else {\n    timestamp = Date.now();\n  }\n\n  return timestamp;\n}\n//# sourceMappingURL=hi-res-timestamp.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { VERSION, isBrowser } from '../utils/globals';\nimport LocalStorage from '../utils/local-storage';\nimport { formatImage, formatTime, leftPad } from '../utils/formatters';\nimport { addColor } from '../utils/color';\nimport { autobind } from '../utils/autobind';\nimport _assert from '../utils/assert';\nimport getHiResTimestamp from '../utils/hi-res-timestamp';\nvar originalConsole = {\n  debug: isBrowser ? console.debug || console.log : console.log,\n  log: console.log,\n  info: console.info,\n  warn: console.warn,\n  error: console.error\n};\nvar DEFAULT_SETTINGS = {\n  enabled: true,\n  level: 0\n};\n\nfunction noop() {}\n\nvar cache = {};\nvar ONCE = {\n  once: true\n};\n\nfunction getTableHeader(table) {\n  for (var key in table) {\n    for (var title in table[key]) {\n      return title || 'untitled';\n    }\n  }\n\n  return 'empty';\n}\n\nvar Log = function () {\n  function Log() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        id = _ref.id;\n\n    _classCallCheck(this, Log);\n\n    this.id = id;\n    this.VERSION = VERSION;\n    this._startTs = getHiResTimestamp();\n    this._deltaTs = getHiResTimestamp();\n    this.LOG_THROTTLE_TIMEOUT = 0;\n    this._storage = new LocalStorage(\"__probe-\".concat(this.id, \"__\"), DEFAULT_SETTINGS);\n    this.userData = {};\n    this.timeStamp(\"\".concat(this.id, \" started\"));\n    autobind(this);\n    Object.seal(this);\n  }\n\n  _createClass(Log, [{\n    key: \"isEnabled\",\n    value: function isEnabled() {\n      return this._storage.config.enabled;\n    }\n  }, {\n    key: \"getLevel\",\n    value: function getLevel() {\n      return this._storage.config.level;\n    }\n  }, {\n    key: \"getTotal\",\n    value: function getTotal() {\n      return Number((getHiResTimestamp() - this._startTs).toPrecision(10));\n    }\n  }, {\n    key: \"getDelta\",\n    value: function getDelta() {\n      return Number((getHiResTimestamp() - this._deltaTs).toPrecision(10));\n    }\n  }, {\n    key: \"getPriority\",\n    value: function getPriority() {\n      return this.level;\n    }\n  }, {\n    key: \"enable\",\n    value: function enable() {\n      var enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      this._storage.updateConfiguration({\n        enabled: enabled\n      });\n\n      return this;\n    }\n  }, {\n    key: \"setLevel\",\n    value: function setLevel(level) {\n      this._storage.updateConfiguration({\n        level: level\n      });\n\n      return this;\n    }\n  }, {\n    key: \"assert\",\n    value: function assert(condition, message) {\n      _assert(condition, message);\n    }\n  }, {\n    key: \"warn\",\n    value: function warn(message) {\n      return this._getLogFunction(0, message, originalConsole.warn, arguments, ONCE);\n    }\n  }, {\n    key: \"error\",\n    value: function error(message) {\n      return this._getLogFunction(0, message, originalConsole.error, arguments);\n    }\n  }, {\n    key: \"deprecated\",\n    value: function deprecated(oldUsage, newUsage) {\n      return this.warn(\"`\".concat(oldUsage, \"` is deprecated and will be removed in a later version. Use `\").concat(newUsage, \"` instead\"));\n    }\n  }, {\n    key: \"removed\",\n    value: function removed(oldUsage, newUsage) {\n      return this.error(\"`\".concat(oldUsage, \"` has been removed. Use `\").concat(newUsage, \"` instead\"));\n    }\n  }, {\n    key: \"probe\",\n    value: function probe(logLevel, message) {\n      return this._getLogFunction(logLevel, message, originalConsole.log, arguments, {\n        time: true,\n        once: true\n      });\n    }\n  }, {\n    key: \"log\",\n    value: function log(logLevel, message) {\n      return this._getLogFunction(logLevel, message, originalConsole.debug, arguments);\n    }\n  }, {\n    key: \"info\",\n    value: function info(logLevel, message) {\n      return this._getLogFunction(logLevel, message, console.info, arguments);\n    }\n  }, {\n    key: \"once\",\n    value: function once(logLevel, message) {\n      return this._getLogFunction(logLevel, message, originalConsole.debug || originalConsole.info, arguments, ONCE);\n    }\n  }, {\n    key: \"table\",\n    value: function table(logLevel, _table, columns) {\n      if (_table) {\n        return this._getLogFunction(logLevel, _table, console.table || noop, columns && [columns], {\n          tag: getTableHeader(_table)\n        });\n      }\n\n      return noop;\n    }\n  }, {\n    key: \"image\",\n    value: function image(_ref2) {\n      var logLevel = _ref2.logLevel,\n          priority = _ref2.priority,\n          _image = _ref2.image,\n          _ref2$message = _ref2.message,\n          message = _ref2$message === void 0 ? '' : _ref2$message,\n          _ref2$scale = _ref2.scale,\n          scale = _ref2$scale === void 0 ? 1 : _ref2$scale;\n\n      if (!this._shouldLog(logLevel || priority)) {\n        return noop;\n      }\n\n      return isBrowser ? logImageInBrowser({\n        image: _image,\n        message: message,\n        scale: scale\n      }) : logImageInNode({\n        image: _image,\n        message: message,\n        scale: scale\n      });\n    }\n  }, {\n    key: \"settings\",\n    value: function settings() {\n      if (console.table) {\n        console.table(this._storage.config);\n      } else {\n        console.log(this._storage.config);\n      }\n    }\n  }, {\n    key: \"get\",\n    value: function get(setting) {\n      return this._storage.config[setting];\n    }\n  }, {\n    key: \"set\",\n    value: function set(setting, value) {\n      this._storage.updateConfiguration(_defineProperty({}, setting, value));\n    }\n  }, {\n    key: \"time\",\n    value: function time(logLevel, message) {\n      return this._getLogFunction(logLevel, message, console.time ? console.time : console.info);\n    }\n  }, {\n    key: \"timeEnd\",\n    value: function timeEnd(logLevel, message) {\n      return this._getLogFunction(logLevel, message, console.timeEnd ? console.timeEnd : console.info);\n    }\n  }, {\n    key: \"timeStamp\",\n    value: function timeStamp(logLevel, message) {\n      return this._getLogFunction(logLevel, message, console.timeStamp || noop);\n    }\n  }, {\n    key: \"group\",\n    value: function group(logLevel, message) {\n      var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n        collapsed: false\n      };\n      opts = normalizeArguments({\n        logLevel: logLevel,\n        message: message,\n        opts: opts\n      });\n      var _opts = opts,\n          collapsed = _opts.collapsed;\n      opts.method = (collapsed ? console.groupCollapsed : console.group) || console.info;\n      return this._getLogFunction(opts);\n    }\n  }, {\n    key: \"groupCollapsed\",\n    value: function groupCollapsed(logLevel, message) {\n      var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return this.group(logLevel, message, Object.assign({}, opts, {\n        collapsed: true\n      }));\n    }\n  }, {\n    key: \"groupEnd\",\n    value: function groupEnd(logLevel) {\n      return this._getLogFunction(logLevel, '', console.groupEnd || noop);\n    }\n  }, {\n    key: \"withGroup\",\n    value: function withGroup(logLevel, message, func) {\n      this.group(logLevel, message)();\n\n      try {\n        func();\n      } finally {\n        this.groupEnd(logLevel)();\n      }\n    }\n  }, {\n    key: \"trace\",\n    value: function trace() {\n      if (console.trace) {\n        console.trace();\n      }\n    }\n  }, {\n    key: \"_shouldLog\",\n    value: function _shouldLog(logLevel) {\n      return this.isEnabled() && this.getLevel() >= normalizeLogLevel(logLevel);\n    }\n  }, {\n    key: \"_getLogFunction\",\n    value: function _getLogFunction(logLevel, message, method) {\n      var args = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n      var opts = arguments.length > 4 ? arguments[4] : undefined;\n\n      if (this._shouldLog(logLevel)) {\n        var _method;\n\n        opts = normalizeArguments({\n          logLevel: logLevel,\n          message: message,\n          args: args,\n          opts: opts\n        });\n        method = method || opts.method;\n\n        _assert(method);\n\n        opts.total = this.getTotal();\n        opts.delta = this.getDelta();\n        this._deltaTs = getHiResTimestamp();\n        var tag = opts.tag || opts.message;\n\n        if (opts.once) {\n          if (!cache[tag]) {\n            cache[tag] = getHiResTimestamp();\n          } else {\n            return noop;\n          }\n        }\n\n        message = decorateMessage(this.id, opts.message, opts);\n        return (_method = method).bind.apply(_method, [console, message].concat(_toConsumableArray(opts.args)));\n      }\n\n      return noop;\n    }\n  }, {\n    key: \"level\",\n    set: function set(newLevel) {\n      this.setLevel(newLevel);\n    },\n    get: function get() {\n      return this.getLevel();\n    }\n  }, {\n    key: \"priority\",\n    set: function set(newPriority) {\n      this.level = newPriority;\n    },\n    get: function get() {\n      return this.level;\n    }\n  }]);\n\n  return Log;\n}();\n\nexport { Log as default };\nLog.VERSION = VERSION;\n\nfunction normalizeLogLevel(logLevel) {\n  if (!logLevel) {\n    return 0;\n  }\n\n  var resolvedLevel;\n\n  switch (_typeof(logLevel)) {\n    case 'number':\n      resolvedLevel = logLevel;\n      break;\n\n    case 'object':\n      resolvedLevel = logLevel.logLevel || logLevel.priority || 0;\n      break;\n\n    default:\n      return 0;\n  }\n\n  _assert(Number.isFinite(resolvedLevel) && resolvedLevel >= 0);\n\n  return resolvedLevel;\n}\n\nexport function normalizeArguments(opts) {\n  var logLevel = opts.logLevel,\n      message = opts.message;\n  opts.logLevel = normalizeLogLevel(logLevel);\n  var args = opts.args ? Array.from(opts.args) : [];\n\n  while (args.length && args.shift() !== message) {}\n\n  opts.args = args;\n\n  switch (_typeof(logLevel)) {\n    case 'string':\n    case 'function':\n      if (message !== undefined) {\n        args.unshift(message);\n      }\n\n      opts.message = logLevel;\n      break;\n\n    case 'object':\n      Object.assign(opts, logLevel);\n      break;\n\n    default:\n  }\n\n  if (typeof opts.message === 'function') {\n    opts.message = opts.message();\n  }\n\n  var messageType = _typeof(opts.message);\n\n  _assert(messageType === 'string' || messageType === 'object');\n\n  return Object.assign(opts, opts.opts);\n}\n\nfunction decorateMessage(id, message, opts) {\n  if (typeof message === 'string') {\n    var time = opts.time ? leftPad(formatTime(opts.total)) : '';\n    message = opts.time ? \"\".concat(id, \": \").concat(time, \"  \").concat(message) : \"\".concat(id, \": \").concat(message);\n    message = addColor(message, opts.color, opts.background);\n  }\n\n  return message;\n}\n\nfunction logImageInNode(_ref3) {\n  var image = _ref3.image,\n      _ref3$message = _ref3.message,\n      message = _ref3$message === void 0 ? '' : _ref3$message,\n      _ref3$scale = _ref3.scale,\n      scale = _ref3$scale === void 0 ? 1 : _ref3$scale;\n  var asciify = null;\n\n  try {\n    asciify = module.require('asciify-image');\n  } catch (error) {}\n\n  if (asciify) {\n    return function () {\n      return asciify(image, {\n        fit: 'box',\n        width: \"\".concat(Math.round(80 * scale), \"%\")\n      }).then(function (data) {\n        return console.log(data);\n      });\n    };\n  }\n\n  return noop;\n}\n\nfunction logImageInBrowser(_ref4) {\n  var image = _ref4.image,\n      _ref4$message = _ref4.message,\n      message = _ref4$message === void 0 ? '' : _ref4$message,\n      _ref4$scale = _ref4.scale,\n      scale = _ref4$scale === void 0 ? 1 : _ref4$scale;\n\n  if (typeof image === 'string') {\n    var img = new Image();\n\n    img.onload = function () {\n      var _console;\n\n      var args = formatImage(img, message, scale);\n\n      (_console = console).log.apply(_console, _toConsumableArray(args));\n    };\n\n    img.src = image;\n    return noop;\n  }\n\n  var element = image.nodeName || '';\n\n  if (element.toLowerCase() === 'img') {\n    var _console2;\n\n    (_console2 = console).log.apply(_console2, _toConsumableArray(formatImage(image, message, scale)));\n\n    return noop;\n  }\n\n  if (element.toLowerCase() === 'canvas') {\n    var _img = new Image();\n\n    _img.onload = function () {\n      var _console3;\n\n      return (_console3 = console).log.apply(_console3, _toConsumableArray(formatImage(_img, message, scale)));\n    };\n\n    _img.src = image.toDataURL();\n    return noop;\n  }\n\n  return noop;\n}\n//# sourceMappingURL=log.js.map","import { Log } from 'probe.gl';\nexport default new Log({\n  id: 'deck'\n});\n//# sourceMappingURL=log.js.map","var fp32shader = \"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\\nconst float TWO_PI = 6.2831854820251465;\\nconst float PI_2 = 1.5707963705062866;\\nconst float PI_16 = 0.1963495463132858;\\n\\nconst float SIN_TABLE_0 = 0.19509032368659973;\\nconst float SIN_TABLE_1 = 0.3826834261417389;\\nconst float SIN_TABLE_2 = 0.5555702447891235;\\nconst float SIN_TABLE_3 = 0.7071067690849304;\\n\\nconst float COS_TABLE_0 = 0.9807852506637573;\\nconst float COS_TABLE_1 = 0.9238795042037964;\\nconst float COS_TABLE_2 = 0.8314695954322815;\\nconst float COS_TABLE_3 = 0.7071067690849304;\\n\\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\\n\\nfloat sin_taylor_fp32(float a) {\\n  float r, s, t, x;\\n\\n  if (a == 0.0) {\\n    return 0.0;\\n  }\\n\\n  x = -a * a;\\n  s = a;\\n  r = a;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_3;\\n  s = s + t;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_5;\\n  s = s + t;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_7;\\n  s = s + t;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_9;\\n  s = s + t;\\n\\n  return s;\\n}\\n\\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\\n  if (a == 0.0) {\\n    sin_t = 0.0;\\n    cos_t = 1.0;\\n  }\\n  sin_t = sin_taylor_fp32(a);\\n  cos_t = sqrt(1.0 - sin_t * sin_t);\\n}\\n\\nfloat tan_taylor_fp32(float a) {\\n    float sin_a;\\n    float cos_a;\\n\\n    if (a == 0.0) {\\n        return 0.0;\\n    }\\n    float z = floor(a / TWO_PI);\\n    float r = a - TWO_PI * z;\\n\\n    float t;\\n    float q = floor(r / PI_2 + 0.5);\\n    int j = int(q);\\n\\n    if (j < -2 || j > 2) {\\n        return 0.0 / 0.0;\\n    }\\n\\n    t = r - PI_2 * q;\\n\\n    q = floor(t / PI_16 + 0.5);\\n    int k = int(q);\\n    int abs_k = int(abs(float(k)));\\n\\n    if (abs_k > 4) {\\n        return 0.0 / 0.0;\\n    } else {\\n        t = t - PI_16 * q;\\n    }\\n\\n    float u = 0.0;\\n    float v = 0.0;\\n\\n    float sin_t, cos_t;\\n    float s, c;\\n    sincos_taylor_fp32(t, sin_t, cos_t);\\n\\n    if (k == 0) {\\n        s = sin_t;\\n        c = cos_t;\\n    } else {\\n        if (abs(float(abs_k) - 1.0) < 0.5) {\\n            u = COS_TABLE_0;\\n            v = SIN_TABLE_0;\\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\\n            u = COS_TABLE_1;\\n            v = SIN_TABLE_1;\\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\\n            u = COS_TABLE_2;\\n            v = SIN_TABLE_2;\\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\\n            u = COS_TABLE_3;\\n            v = SIN_TABLE_3;\\n        }\\n        if (k > 0) {\\n            s = u * sin_t + v * cos_t;\\n            c = u * cos_t - v * sin_t;\\n        } else {\\n            s = u * sin_t - v * cos_t;\\n            c = u * cos_t + v * sin_t;\\n        }\\n    }\\n\\n    if (j == 0) {\\n        sin_a = s;\\n        cos_a = c;\\n    } else if (j == 1) {\\n        sin_a = c;\\n        cos_a = -s;\\n    } else if (j == -1) {\\n        sin_a = -c;\\n        cos_a = s;\\n    } else {\\n        sin_a = -s;\\n        cos_a = -c;\\n    }\\n    return sin_a / cos_a;\\n}\\n#endif\\n\\nfloat tan_fp32(float a) {\\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\\n  return tan_taylor_fp32(a);\\n#else\\n  return tan(a);\\n#endif\\n}\\n\";\nexport var fp32 = {\n  name: 'fp32',\n  vs: fp32shader,\n  fs: null\n};\n//# sourceMappingURL=fp32.js.map","import log from '../utils/log';\nexport var COORDINATE_SYSTEM = {\n  DEFAULT: -1,\n  LNGLAT: 1,\n  METER_OFFSETS: 2,\n  LNGLAT_OFFSETS: 3,\n  CARTESIAN: 0\n};\nObject.defineProperty(COORDINATE_SYSTEM, 'IDENTITY', {\n  get: function get() {\n    return log.deprecated('COORDINATE_SYSTEM.IDENTITY', 'COORDINATE_SYSTEM.CARTESIAN')() || 0;\n  }\n});\nexport var PROJECTION_MODE = {\n  WEB_MERCATOR: 1,\n  GLOBE: 2,\n  WEB_MERCATOR_AUTO_OFFSET: 4,\n  IDENTITY: 0\n};\nexport var EVENTS = {\n  click: {\n    handler: 'onClick'\n  },\n  panstart: {\n    handler: 'onDragStart'\n  },\n  panmove: {\n    handler: 'onDrag'\n  },\n  panend: {\n    handler: 'onDragEnd'\n  }\n};\n//# sourceMappingURL=constants.js.map","import { COORDINATE_SYSTEM, PROJECTION_MODE } from '../../lib/constants';\nvar COORDINATE_SYSTEM_GLSL_CONSTANTS = Object.keys(COORDINATE_SYSTEM).map(function (key) {\n  return \"const int COORDINATE_SYSTEM_\".concat(key, \" = \").concat(COORDINATE_SYSTEM[key], \";\");\n}).join('');\nvar PROJECTION_MODE_GLSL_CONSTANTS = Object.keys(PROJECTION_MODE).map(function (key) {\n  return \"const int PROJECTION_MODE_\".concat(key, \" = \").concat(PROJECTION_MODE[key], \";\");\n}).join('');\nexport default \"\".concat(COORDINATE_SYSTEM_GLSL_CONSTANTS, \"\\n\").concat(PROJECTION_MODE_GLSL_CONSTANTS, \"\\n\\nuniform int project_uCoordinateSystem;\\nuniform int project_uProjectionMode;\\nuniform float project_uScale;\\nuniform bool project_uWrapLongitude;\\nuniform vec3 project_uCommonUnitsPerMeter;\\nuniform vec3 project_uCommonUnitsPerWorldUnit;\\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\\nuniform vec4 project_uCenter;\\nuniform mat4 project_uModelMatrix;\\nuniform mat4 project_uViewProjectionMatrix;\\nuniform vec2 project_uViewportSize;\\nuniform float project_uDevicePixelRatio;\\nuniform float project_uFocalDistance;\\nuniform vec3 project_uCameraPosition;\\nuniform vec3 project_uCoordinateOrigin;\\n\\nconst float TILE_SIZE = 512.0;\\nconst float PI = 3.1415926536;\\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\\nconst vec3 ZERO_64_LOW = vec3(0.0);\\nconst float EARTH_RADIUS = 6370972.0;\\nconst float GLOBE_RADIUS = 256.0;\\nfloat project_size(float meters) {\\n  return meters * project_uCommonUnitsPerMeter.z;\\n}\\n\\nvec2 project_size(vec2 meters) {\\n  return meters * project_uCommonUnitsPerMeter.xy;\\n}\\n\\nvec3 project_size(vec3 meters) {\\n  return meters * project_uCommonUnitsPerMeter;\\n}\\n\\nvec4 project_size(vec4 meters) {\\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\\n}\\nvec3 project_normal(vec3 vector) {\\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\\n}\\n\\nvec4 project_offset_(vec4 offset) {\\n  float dy = offset.y;\\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n    dy = clamp(dy, -1., 1.);\\n  }\\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\\n}\\nvec2 project_mercator_(vec2 lnglat) {\\n  float x = lnglat.x;\\n  if (project_uWrapLongitude) {\\n    x = mod(x + 180., 360.0) - 180.;\\n  }\\n  float y = clamp(lnglat.y, -89.9, 89.9);\\n  return vec2(\\n    radians(x) + PI,\\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\\n  );\\n}\\n\\nvec3 project_globe_(vec3 lnglatz) {\\n  float lambda = radians(lnglatz.x);\\n  float phi = radians(lnglatz.y);\\n  float cosPhi = cos(phi);\\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\\n\\n  return vec3(\\n    sin(lambda) * cosPhi,\\n    -cos(lambda) * cosPhi,\\n    sin(phi)\\n  ) * D;\\n}\\nvec4 project_position(vec4 position, vec3 position64Low) {\\n  vec4 position_world = project_uModelMatrix * position;\\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n      return vec4(\\n        project_mercator_(position_world.xy) * WORLD_SCALE,\\n        project_size(position_world.z),\\n        position_world.w\\n      );\\n    }\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\\n      position_world.xyz += project_uCoordinateOrigin;\\n    }\\n  }\\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n      return vec4(\\n        project_globe_(position_world.xyz),\\n        position_world.w\\n      );\\n    }\\n  }\\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\\n    position_world.xyz -= project_uCoordinateOrigin;\\n  }\\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\\n}\\n\\nvec4 project_position(vec4 position) {\\n  return project_position(position, ZERO_64_LOW);\\n}\\n\\nvec3 project_position(vec3 position, vec3 position64Low) {\\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\\n  return projected_position.xyz;\\n}\\n\\nvec3 project_position(vec3 position) {\\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\\n  return projected_position.xyz;\\n}\\n\\nvec2 project_position(vec2 position) {\\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\\n  return projected_position.xy;\\n}\\n\\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\\n  return viewProjectionMatrix * position + center;\\n}\\nvec4 project_common_position_to_clipspace(vec4 position) {\\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\\n}\\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\\n  return offset * project_uFocalDistance;\\n}\\n\\nfloat project_size_to_pixel(float meters) {\\n  return project_size(meters) * project_uScale;\\n}\\nfloat project_pixel_size(float pixels) {\\n  return pixels / project_uScale;\\n}\\nvec2 project_pixel_size(vec2 pixels) {\\n  return pixels / project_uScale;\\n}\\nmat3 project_get_orientation_matrix(vec3 up) {\\n  vec3 uz = normalize(up);\\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\\n  vec3 uy = cross(uz, ux);\\n  return mat3(ux, uy, uz);\\n}\\n\\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\\n    transform = project_get_orientation_matrix(commonPosition);\\n    return true;\\n  }\\n  return false;\\n}\\n\");\n//# sourceMappingURL=project.glsl.js.map","function isEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (Array.isArray(a)) {\n    var len = a.length;\n\n    if (!b || b.length !== len) {\n      return false;\n    }\n\n    for (var i = 0; i < len; i++) {\n      if (a[i] !== b[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\n\nexport default function memoize(compute) {\n  var cachedArgs = {};\n  var cachedResult;\n  return function (args) {\n    for (var key in args) {\n      if (!isEqual(args[key], cachedArgs[key])) {\n        cachedResult = compute(args);\n        cachedArgs = args;\n        break;\n      }\n    }\n\n    return cachedResult;\n  };\n}\n//# sourceMappingURL=memoize.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'deck.gl: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import * as mat4 from 'gl-matrix/mat4';\nimport * as vec4 from 'gl-matrix/vec4';\nimport { COORDINATE_SYSTEM, PROJECTION_MODE } from '../../lib/constants';\nimport memoize from '../../utils/memoize';\nimport assert from '../../utils/assert';\nvar ZERO_VECTOR = [0, 0, 0, 0];\nvar VECTOR_TO_POINT_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0];\nvar IDENTITY_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\nvar DEFAULT_PIXELS_PER_UNIT2 = [0, 0, 0];\nvar DEFAULT_COORDINATE_ORIGIN = [0, 0, 0];\nvar getMemoizedViewportUniforms = memoize(calculateViewportUniforms);\nexport function getOffsetOrigin(viewport, coordinateSystem) {\n  var coordinateOrigin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : DEFAULT_COORDINATE_ORIGIN;\n  var shaderCoordinateOrigin = coordinateOrigin;\n  var geospatialOrigin;\n  var offsetMode = true;\n\n  if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT_OFFSETS || coordinateSystem === COORDINATE_SYSTEM.METER_OFFSETS) {\n    geospatialOrigin = coordinateOrigin;\n  } else {\n    geospatialOrigin = viewport.isGeospatial ? [Math.fround(viewport.longitude), Math.fround(viewport.latitude), 0] : null;\n  }\n\n  switch (viewport.projectionMode) {\n    case PROJECTION_MODE.WEB_MERCATOR:\n      if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT || coordinateSystem === COORDINATE_SYSTEM.CARTESIAN) {\n        offsetMode = false;\n      }\n\n      break;\n\n    case PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET:\n      if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT) {\n        shaderCoordinateOrigin = geospatialOrigin;\n      } else if (coordinateSystem === COORDINATE_SYSTEM.CARTESIAN) {\n        shaderCoordinateOrigin = [Math.fround(viewport.center[0]), Math.fround(viewport.center[1]), 0];\n        geospatialOrigin = viewport.unprojectPosition(shaderCoordinateOrigin);\n        shaderCoordinateOrigin[0] -= coordinateOrigin[0];\n        shaderCoordinateOrigin[1] -= coordinateOrigin[1];\n        shaderCoordinateOrigin[2] -= coordinateOrigin[2];\n      }\n\n      break;\n\n    case PROJECTION_MODE.IDENTITY:\n      shaderCoordinateOrigin = viewport.position.map(Math.fround);\n      break;\n\n    case PROJECTION_MODE.GLOBE:\n      offsetMode = false;\n      geospatialOrigin = null;\n      break;\n\n    default:\n      offsetMode = false;\n  }\n\n  shaderCoordinateOrigin[2] = shaderCoordinateOrigin[2] || 0;\n  return {\n    geospatialOrigin: geospatialOrigin,\n    shaderCoordinateOrigin: shaderCoordinateOrigin,\n    offsetMode: offsetMode\n  };\n}\n\nfunction calculateMatrixAndOffset(viewport, coordinateSystem, coordinateOrigin) {\n  var viewMatrixUncentered = viewport.viewMatrixUncentered,\n      projectionMatrix = viewport.projectionMatrix;\n  var viewMatrix = viewport.viewMatrix,\n      viewProjectionMatrix = viewport.viewProjectionMatrix;\n  var projectionCenter = ZERO_VECTOR;\n  var cameraPosCommon = viewport.cameraPosition;\n\n  var _getOffsetOrigin = getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin),\n      geospatialOrigin = _getOffsetOrigin.geospatialOrigin,\n      shaderCoordinateOrigin = _getOffsetOrigin.shaderCoordinateOrigin,\n      offsetMode = _getOffsetOrigin.offsetMode;\n\n  if (offsetMode) {\n    var positionCommonSpace = viewport.projectPosition(geospatialOrigin || shaderCoordinateOrigin);\n    cameraPosCommon = [cameraPosCommon[0] - positionCommonSpace[0], cameraPosCommon[1] - positionCommonSpace[1], cameraPosCommon[2] - positionCommonSpace[2]];\n    positionCommonSpace[3] = 1;\n    projectionCenter = vec4.transformMat4([], positionCommonSpace, viewProjectionMatrix);\n    viewMatrix = viewMatrixUncentered || viewMatrix;\n    viewProjectionMatrix = mat4.multiply([], projectionMatrix, viewMatrix);\n    viewProjectionMatrix = mat4.multiply([], viewProjectionMatrix, VECTOR_TO_POINT_MATRIX);\n  }\n\n  return {\n    viewMatrix: viewMatrix,\n    viewProjectionMatrix: viewProjectionMatrix,\n    projectionCenter: projectionCenter,\n    cameraPosCommon: cameraPosCommon,\n    shaderCoordinateOrigin: shaderCoordinateOrigin,\n    geospatialOrigin: geospatialOrigin\n  };\n}\n\nexport function getUniformsFromViewport() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      viewport = _ref.viewport,\n      _ref$devicePixelRatio = _ref.devicePixelRatio,\n      devicePixelRatio = _ref$devicePixelRatio === void 0 ? 1 : _ref$devicePixelRatio,\n      _ref$modelMatrix = _ref.modelMatrix,\n      modelMatrix = _ref$modelMatrix === void 0 ? null : _ref$modelMatrix,\n      _ref$coordinateSystem = _ref.coordinateSystem,\n      coordinateSystem = _ref$coordinateSystem === void 0 ? COORDINATE_SYSTEM.DEFAULT : _ref$coordinateSystem,\n      coordinateOrigin = _ref.coordinateOrigin,\n      _ref$autoWrapLongitud = _ref.autoWrapLongitude,\n      autoWrapLongitude = _ref$autoWrapLongitud === void 0 ? false : _ref$autoWrapLongitud,\n      projectionMode = _ref.projectionMode,\n      positionOrigin = _ref.positionOrigin;\n\n  assert(viewport);\n\n  if (coordinateSystem === COORDINATE_SYSTEM.DEFAULT) {\n    coordinateSystem = viewport.isGeospatial ? COORDINATE_SYSTEM.LNGLAT : COORDINATE_SYSTEM.CARTESIAN;\n  }\n\n  var uniforms = getMemoizedViewportUniforms({\n    viewport: viewport,\n    devicePixelRatio: devicePixelRatio,\n    coordinateSystem: coordinateSystem,\n    coordinateOrigin: coordinateOrigin\n  });\n  uniforms.project_uWrapLongitude = autoWrapLongitude;\n  uniforms.project_uModelMatrix = modelMatrix || IDENTITY_MATRIX;\n  return uniforms;\n}\n\nfunction calculateViewportUniforms(_ref2) {\n  var viewport = _ref2.viewport,\n      devicePixelRatio = _ref2.devicePixelRatio,\n      coordinateSystem = _ref2.coordinateSystem,\n      coordinateOrigin = _ref2.coordinateOrigin;\n\n  var _calculateMatrixAndOf = calculateMatrixAndOffset(viewport, coordinateSystem, coordinateOrigin),\n      projectionCenter = _calculateMatrixAndOf.projectionCenter,\n      viewProjectionMatrix = _calculateMatrixAndOf.viewProjectionMatrix,\n      cameraPosCommon = _calculateMatrixAndOf.cameraPosCommon,\n      shaderCoordinateOrigin = _calculateMatrixAndOf.shaderCoordinateOrigin,\n      geospatialOrigin = _calculateMatrixAndOf.geospatialOrigin;\n\n  var distanceScales = viewport.getDistanceScales();\n  var viewportSize = [viewport.width * devicePixelRatio, viewport.height * devicePixelRatio];\n  var uniforms = {\n    project_uCoordinateSystem: coordinateSystem,\n    project_uProjectionMode: viewport.projectionMode,\n    project_uCoordinateOrigin: shaderCoordinateOrigin,\n    project_uCenter: projectionCenter,\n    project_uViewportSize: viewportSize,\n    project_uDevicePixelRatio: devicePixelRatio,\n    project_uFocalDistance: viewport.focalDistance || 1,\n    project_uCommonUnitsPerMeter: distanceScales.unitsPerMeter,\n    project_uCommonUnitsPerWorldUnit: distanceScales.unitsPerMeter,\n    project_uCommonUnitsPerWorldUnit2: DEFAULT_PIXELS_PER_UNIT2,\n    project_uScale: viewport.scale,\n    project_uViewProjectionMatrix: viewProjectionMatrix,\n    project_uCameraPosition: cameraPosCommon\n  };\n\n  if (geospatialOrigin) {\n    var distanceScalesAtOrigin = viewport.getDistanceScales(geospatialOrigin);\n\n    switch (coordinateSystem) {\n      case COORDINATE_SYSTEM.METER_OFFSETS:\n        uniforms.project_uCommonUnitsPerWorldUnit = distanceScalesAtOrigin.unitsPerMeter;\n        uniforms.project_uCommonUnitsPerWorldUnit2 = distanceScalesAtOrigin.unitsPerMeter2;\n        break;\n\n      case COORDINATE_SYSTEM.LNGLAT:\n      case COORDINATE_SYSTEM.LNGLAT_OFFSETS:\n        uniforms.project_uCommonUnitsPerWorldUnit = distanceScalesAtOrigin.unitsPerDegree;\n        uniforms.project_uCommonUnitsPerWorldUnit2 = distanceScalesAtOrigin.unitsPerDegree2;\n        break;\n\n      case COORDINATE_SYSTEM.CARTESIAN:\n        uniforms.project_uCommonUnitsPerWorldUnit = [1, 1, distanceScalesAtOrigin.unitsPerMeter[2]];\n        uniforms.project_uCommonUnitsPerWorldUnit2 = [0, 0, distanceScalesAtOrigin.unitsPerMeter2[2]];\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  return uniforms;\n}\n//# sourceMappingURL=viewport-uniforms.js.map","import { fp32 } from '@luma.gl/core';\nimport projectShader from './project.glsl';\nimport { getUniformsFromViewport } from './viewport-uniforms';\nvar INITIAL_MODULE_OPTIONS = {};\n\nfunction getUniforms() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : INITIAL_MODULE_OPTIONS;\n\n  if (opts.viewport) {\n    return getUniformsFromViewport(opts);\n  }\n\n  return {};\n}\n\nexport default {\n  name: 'project',\n  dependencies: [fp32],\n  vs: projectShader,\n  getUniforms: getUniforms\n};\n//# sourceMappingURL=project.js.map","import project from '../project/project';\nvar vs = \"\\nvec4 project_position_to_clipspace(\\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\\n) {\\n  vec3 projectedPosition = project_position(position, position64Low);\\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\\n    // offset is specified as ENU\\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\\n    mat3 rotation = project_get_orientation_matrix(projectedPosition);\\n    offset = rotation * offset;\\n  }\\n  commonPosition = vec4(projectedPosition + offset, 1.0);\\n  return project_common_position_to_clipspace(commonPosition);\\n}\\n\\nvec4 project_position_to_clipspace(\\n  vec3 position, vec3 position64Low, vec3 offset\\n) {\\n  vec4 commonPosition;\\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\\n}\\n\";\nexport default {\n  name: 'project32',\n  dependencies: [project],\n  vs: vs\n};\n//# sourceMappingURL=project32.js.map","export default \"#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\\n\\nstruct AmbientLight {\\n vec3 color;\\n};\\n\\nstruct PointLight {\\n vec3 color;\\n vec3 position;\\n vec3 attenuation;\\n};\\n\\nstruct DirectionalLight {\\n  vec3 color;\\n  vec3 direction;\\n};\\n\\nuniform AmbientLight lighting_uAmbientLight;\\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\\nuniform int lighting_uPointLightCount;\\nuniform int lighting_uDirectionalLightCount;\\n\\nuniform bool lighting_uEnabled;\\n\\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\\n  return pointLight.attenuation.x\\n       + pointLight.attenuation.y * distance\\n       + pointLight.attenuation.z * distance * distance;\\n}\\n\\n#endif\\n\";\n//# sourceMappingURL=lights.glsl.js.map","function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport lightingShader from './lights.glsl';\nvar INITIAL_MODULE_OPTIONS = {\n  lightSources: {}\n};\n\nfunction convertColor() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$color = _ref.color,\n      color = _ref$color === void 0 ? [0, 0, 0] : _ref$color,\n      _ref$intensity = _ref.intensity,\n      intensity = _ref$intensity === void 0 ? 1.0 : _ref$intensity;\n\n  return color.map(function (component) {\n    return component * intensity / 255.0;\n  });\n}\n\nfunction getLightSourceUniforms(_ref2) {\n  var ambientLight = _ref2.ambientLight,\n      _ref2$pointLights = _ref2.pointLights,\n      pointLights = _ref2$pointLights === void 0 ? [] : _ref2$pointLights,\n      _ref2$directionalLigh = _ref2.directionalLights,\n      directionalLights = _ref2$directionalLigh === void 0 ? [] : _ref2$directionalLigh;\n  var lightSourceUniforms = {};\n\n  if (ambientLight) {\n    lightSourceUniforms['lighting_uAmbientLight.color'] = convertColor(ambientLight);\n  } else {\n    lightSourceUniforms['lighting_uAmbientLight.color'] = [0, 0, 0];\n  }\n\n  pointLights.forEach(function (pointLight, index) {\n    lightSourceUniforms[\"lighting_uPointLight[\".concat(index, \"].color\")] = convertColor(pointLight);\n    lightSourceUniforms[\"lighting_uPointLight[\".concat(index, \"].position\")] = pointLight.position;\n    lightSourceUniforms[\"lighting_uPointLight[\".concat(index, \"].attenuation\")] = pointLight.attenuation || [1, 0, 0];\n  });\n  lightSourceUniforms.lighting_uPointLightCount = pointLights.length;\n  directionalLights.forEach(function (directionalLight, index) {\n    lightSourceUniforms[\"lighting_uDirectionalLight[\".concat(index, \"].color\")] = convertColor(directionalLight);\n    lightSourceUniforms[\"lighting_uDirectionalLight[\".concat(index, \"].direction\")] = directionalLight.direction;\n  });\n  lightSourceUniforms.lighting_uDirectionalLightCount = directionalLights.length;\n  return lightSourceUniforms;\n}\n\nfunction getUniforms() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : INITIAL_MODULE_OPTIONS;\n\n  if ('lightSources' in opts) {\n    var _ref3 = opts.lightSources || {},\n        ambientLight = _ref3.ambientLight,\n        pointLights = _ref3.pointLights,\n        directionalLights = _ref3.directionalLights;\n\n    var hasLights = ambientLight || pointLights && pointLights.length > 0 || directionalLights && directionalLights.length > 0;\n\n    if (!hasLights) {\n      return {\n        lighting_uEnabled: false\n      };\n    }\n\n    return Object.assign({}, getLightSourceUniforms({\n      ambientLight: ambientLight,\n      pointLights: pointLights,\n      directionalLights: directionalLights\n    }), {\n      lighting_uEnabled: true\n    });\n  }\n\n  if ('lights' in opts) {\n    var lightSources = {\n      pointLights: [],\n      directionalLights: []\n    };\n\n    var _iterator = _createForOfIteratorHelper(opts.lights || []),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var light = _step.value;\n\n        switch (light.type) {\n          case 'ambient':\n            lightSources.ambientLight = light;\n            break;\n\n          case 'directional':\n            lightSources.directionalLights.push(light);\n            break;\n\n          case 'point':\n            lightSources.pointLights.push(light);\n            break;\n\n          default:\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    return getUniforms({\n      lightSources: lightSources\n    });\n  }\n\n  return {};\n}\n\nexport var lights = {\n  name: 'lights',\n  vs: lightingShader,\n  fs: lightingShader,\n  getUniforms: getUniforms,\n  defines: {\n    MAX_LIGHTS: 3\n  }\n};\n//# sourceMappingURL=lights.js.map","export default \"\\nuniform float lighting_uAmbient;\\nuniform float lighting_uDiffuse;\\nuniform float lighting_uShininess;\\nuniform vec3  lighting_uSpecularColor;\\n\\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\\n    vec3 halfway_direction = normalize(light_direction + view_direction);\\n    float lambertian = dot(light_direction, normal_worldspace);\\n    float specular = 0.0;\\n    if (lambertian > 0.0) {\\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\\n      specular = pow(specular_angle, lighting_uShininess);\\n    }\\n    lambertian = max(lambertian, 0.0);\\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\\n}\\n\\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\\n  vec3 lightColor = surfaceColor;\\n\\n  if (lighting_uEnabled) {\\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\\n\\n    for (int i = 0; i < MAX_LIGHTS; i++) {\\n      if (i >= lighting_uPointLightCount) {\\n        break;\\n      }\\n      PointLight pointLight = lighting_uPointLight[i];\\n      vec3 light_position_worldspace = pointLight.position;\\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\\n    }\\n\\n    for (int i = 0; i < MAX_LIGHTS; i++) {\\n      if (i >= lighting_uDirectionalLightCount) {\\n        break;\\n      }\\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\\n    }\\n  }\\n  return lightColor;\\n}\\n\\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\\n  vec3 lightColor = vec3(0, 0, 0);\\n  vec3 surfaceColor = vec3(0, 0, 0);\\n\\n  if (lighting_uEnabled) {\\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\\n\\n    for (int i = 0; i < MAX_LIGHTS; i++) {\\n      if (i >= lighting_uPointLightCount) {\\n        break;\\n      }\\n      PointLight pointLight = lighting_uPointLight[i];\\n      vec3 light_position_worldspace = pointLight.position;\\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\\n    }\\n\\n    for (int i = 0; i < MAX_LIGHTS; i++) {\\n      if (i >= lighting_uDirectionalLightCount) {\\n        break;\\n      }\\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\\n    }\\n  }\\n  return lightColor;\\n}\\n\";\n//# sourceMappingURL=phong-lighting.glsl.js.map","import { lights } from '../lights/lights';\nimport lightingShader from './phong-lighting.glsl';\nvar INITIAL_MODULE_OPTIONS = {};\n\nfunction getMaterialUniforms(material) {\n  var _material$ambient = material.ambient,\n      ambient = _material$ambient === void 0 ? 0.35 : _material$ambient,\n      _material$diffuse = material.diffuse,\n      diffuse = _material$diffuse === void 0 ? 0.6 : _material$diffuse,\n      _material$shininess = material.shininess,\n      shininess = _material$shininess === void 0 ? 32 : _material$shininess,\n      _material$specularCol = material.specularColor,\n      specularColor = _material$specularCol === void 0 ? [30, 30, 30] : _material$specularCol;\n  return {\n    lighting_uAmbient: ambient,\n    lighting_uDiffuse: diffuse,\n    lighting_uShininess: shininess,\n    lighting_uSpecularColor: specularColor.map(function (x) {\n      return x / 255;\n    })\n  };\n}\n\nfunction getUniforms() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : INITIAL_MODULE_OPTIONS;\n\n  if (!('material' in opts)) {\n    return {};\n  }\n\n  var material = opts.material;\n\n  if (!material) {\n    return {\n      lighting_uEnabled: false\n    };\n  }\n\n  return getMaterialUniforms(material);\n}\n\nexport var gouraudLighting = {\n  name: 'gouraud-lighting',\n  dependencies: [lights],\n  vs: lightingShader,\n  defines: {\n    LIGHTING_VERTEX: 1\n  },\n  getUniforms: getUniforms\n};\nexport var phongLighting = {\n  name: 'phong-lighting',\n  dependencies: [lights],\n  fs: lightingShader,\n  defines: {\n    LIGHTING_FRAGMENT: 1\n  },\n  getUniforms: getUniforms\n};\n//# sourceMappingURL=phong-lighting.js.map","var DEFAULT_HIGHLIGHT_COLOR = new Uint8Array([0, 255, 255, 255]);\nvar DEFAULT_MODULE_OPTIONS = {\n  pickingSelectedColor: null,\n  pickingHighlightColor: DEFAULT_HIGHLIGHT_COLOR,\n  pickingActive: false,\n  pickingAttribute: false\n};\n\nfunction getUniforms() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_MODULE_OPTIONS;\n  var uniforms = {};\n\n  if (opts.pickingSelectedColor !== undefined) {\n    if (!opts.pickingSelectedColor) {\n      uniforms.picking_uSelectedColorValid = 0;\n    } else {\n      var selectedColor = opts.pickingSelectedColor.slice(0, 3);\n      uniforms.picking_uSelectedColorValid = 1;\n      uniforms.picking_uSelectedColor = selectedColor;\n    }\n  }\n\n  if (opts.pickingHighlightColor) {\n    var color = Array.from(opts.pickingHighlightColor, function (x) {\n      return x / 255;\n    });\n\n    if (!Number.isFinite(color[3])) {\n      color[3] = 1;\n    }\n\n    uniforms.picking_uHighlightColor = color;\n  }\n\n  if (opts.pickingActive !== undefined) {\n    uniforms.picking_uActive = Boolean(opts.pickingActive);\n    uniforms.picking_uAttribute = Boolean(opts.pickingAttribute);\n  }\n\n  return uniforms;\n}\n\nvar vs = \"uniform bool picking_uActive;\\nuniform bool picking_uAttribute;\\nuniform vec3 picking_uSelectedColor;\\nuniform bool picking_uSelectedColorValid;\\n\\nout vec4 picking_vRGBcolor_Avalid;\\n\\nconst float COLOR_SCALE = 1. / 255.;\\n\\nbool picking_isColorValid(vec3 color) {\\n  return dot(color, vec3(1.0)) > 0.001;\\n}\\n\\nbool isVertexPicked(vec3 vertexColor) {\\n  return\\n    picking_uSelectedColorValid &&\\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\\n}\\n\\nvoid picking_setPickingColor(vec3 pickingColor) {\\n  if (picking_uActive) {\\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\\n\\n    if (!picking_uAttribute) {\\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\\n    }\\n  } else {\\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\\n  }\\n}\\n\\nvoid picking_setPickingAttribute(float value) {\\n  if (picking_uAttribute) {\\n    picking_vRGBcolor_Avalid.r = value;\\n  }\\n}\\nvoid picking_setPickingAttribute(vec2 value) {\\n  if (picking_uAttribute) {\\n    picking_vRGBcolor_Avalid.rg = value;\\n  }\\n}\\nvoid picking_setPickingAttribute(vec3 value) {\\n  if (picking_uAttribute) {\\n    picking_vRGBcolor_Avalid.rgb = value;\\n  }\\n}\\n\";\nvar fs = \"uniform bool picking_uActive;\\nuniform vec3 picking_uSelectedColor;\\nuniform vec4 picking_uHighlightColor;\\n\\nin vec4 picking_vRGBcolor_Avalid;\\nvec4 picking_filterHighlightColor(vec4 color) {\\n  if (picking_uActive) {\\n    return color;\\n  }\\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\\n\\n  if (selected) {\\n    float highLightAlpha = picking_uHighlightColor.a;\\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\\n    float highLightRatio = highLightAlpha / blendedAlpha;\\n\\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\\n    return vec4(blendedRGB, blendedAlpha);\\n  } else {\\n    return color;\\n  }\\n}\\nvec4 picking_filterPickingColor(vec4 color) {\\n  if (picking_uActive) {\\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\\n      discard;\\n    }\\n    return picking_vRGBcolor_Avalid;\\n  }\\n  return color;\\n}\\nvec4 picking_filterColor(vec4 color) {\\n  vec4 highightColor = picking_filterHighlightColor(color);\\n  return picking_filterPickingColor(highightColor);\\n}\\n\\n\";\nexport var picking = {\n  name: 'picking',\n  vs: vs,\n  fs: fs,\n  getUniforms: getUniforms\n};\n//# sourceMappingURL=picking.js.map","import { picking } from '@luma.gl/core';\nexport default Object.assign({\n  inject: {\n    'vs:DECKGL_FILTER_COLOR': \"\\n    picking_setPickingColor(geometry.pickingColor);\\n    // for picking depth values\\n    picking_setPickingAttribute(geometry.position.z);\\n    \",\n    'fs:DECKGL_FILTER_COLOR': {\n      order: 99,\n      injection: \"\\n    // use highlight color if this fragment belongs to the selected object.\\n    color = picking_filterHighlightColor(color);\\n\\n    // use picking color if rendering to picking FBO.\\n    color = picking_filterPickingColor(color);\\n      \"\n    }\n  }\n}, picking);\n//# sourceMappingURL=picking.js.map","import { Log } from 'probe.gl';\nexport var log = new Log({\n  id: 'luma.gl'\n});\n//# sourceMappingURL=log.js.map","export function cssToDeviceRatio(gl) {\n  var luma = gl.luma;\n\n  if (gl.canvas && luma) {\n    var clientWidth = luma.canvasSizeInfo.clientWidth;\n    return clientWidth ? gl.drawingBufferWidth / clientWidth : 1;\n  }\n\n  return 1;\n}\nexport function cssToDevicePixels(gl, cssPixel) {\n  var yInvert = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var ratio = cssToDeviceRatio(gl);\n  var width = gl.drawingBufferWidth;\n  var height = gl.drawingBufferHeight;\n  return scalePixels(cssPixel, ratio, width, height, yInvert);\n}\nexport function getDevicePixelRatio(useDevicePixels) {\n  var windowRatio = typeof window === 'undefined' ? 1 : window.devicePixelRatio || 1;\n\n  if (Number.isFinite(useDevicePixels)) {\n    return useDevicePixels <= 0 ? 1 : useDevicePixels;\n  }\n\n  return useDevicePixels ? windowRatio : 1;\n}\n\nfunction scalePixels(pixel, ratio, width, height, yInvert) {\n  var x = scaleX(pixel[0], ratio, width);\n  var y = scaleY(pixel[1], ratio, height, yInvert);\n  var t = scaleX(pixel[0] + 1, ratio, width);\n  var xHigh = t === width - 1 ? t : t - 1;\n  t = scaleY(pixel[1] + 1, ratio, height, yInvert);\n  var yHigh;\n\n  if (yInvert) {\n    t = t === 0 ? t : t + 1;\n    yHigh = y;\n    y = t;\n  } else {\n    yHigh = t === height - 1 ? t : t - 1;\n  }\n\n  return {\n    x: x,\n    y: y,\n    width: Math.max(xHigh - x + 1, 1),\n    height: Math.max(yHigh - y + 1, 1)\n  };\n}\n\nfunction scaleX(x, ratio, width) {\n  var r = Math.min(Math.round(x * ratio), width - 1);\n  return r;\n}\n\nfunction scaleY(y, ratio, height, yInvert) {\n  return yInvert ? Math.max(0, height - 1 - Math.round(y * ratio)) : Math.min(Math.round(y * ratio), height - 1);\n}\n//# sourceMappingURL=device-pixels.js.map","import { global, isBrowser as getIsBrowser } from 'probe.gl/env';\nimport { trackContextState } from '../state-tracker/track-context-state';\nimport { log as _log } from '../utils/log';\nimport { assert } from '../utils/assert';\nimport { getDevicePixelRatio } from '../utils/device-pixels';\nimport { isWebGL2 } from '../utils/webgl-checks';\nvar isBrowser = getIsBrowser();\nvar isPage = isBrowser && typeof document !== 'undefined';\nvar CONTEXT_DEFAULTS = {\n  webgl2: true,\n  webgl1: true,\n  throwOnError: true,\n  manageState: true,\n  canvas: null,\n  debug: false,\n  width: 800,\n  height: 600\n};\nexport function createGLContext() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  assert(isBrowser, \"createGLContext only available in the browser.\\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils\");\n  options = Object.assign({}, CONTEXT_DEFAULTS, options);\n  var _options = options,\n      width = _options.width,\n      height = _options.height;\n\n  function onError(message) {\n    if (options.throwOnError) {\n      throw new Error(message);\n    }\n\n    console.error(message);\n    return null;\n  }\n\n  options.onError = onError;\n  var gl;\n  var _options2 = options,\n      canvas = _options2.canvas;\n  var targetCanvas = getCanvas({\n    canvas: canvas,\n    width: width,\n    height: height,\n    onError: onError\n  });\n  gl = createBrowserContext(targetCanvas, options);\n\n  if (!gl) {\n    return null;\n  }\n\n  gl = instrumentGLContext(gl, options);\n  logInfo(gl);\n  return gl;\n}\nexport function instrumentGLContext(gl) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!gl || gl._instrumented) {\n    return gl;\n  }\n\n  gl._version = gl._version || getVersion(gl);\n  gl.luma = gl.luma || {};\n  gl.luma.canvasSizeInfo = gl.luma.canvasSizeInfo || {};\n  options = Object.assign({}, CONTEXT_DEFAULTS, options);\n  var _options3 = options,\n      manageState = _options3.manageState,\n      debug = _options3.debug;\n\n  if (manageState) {\n    trackContextState(gl, {\n      copyState: false,\n      log: function log() {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return _log.log.apply(_log, [1].concat(args))();\n      }\n    });\n  }\n\n  if (isBrowser && debug) {\n    if (!global.makeDebugContext) {\n      _log.warn('WebGL debug mode not activated. import \"@luma.gl/debug\" to enable.')();\n    } else {\n      gl = global.makeDebugContext(gl, options);\n      _log.level = Math.max(_log.level, 1);\n    }\n  }\n\n  gl._instrumented = true;\n  return gl;\n}\nexport function getContextDebugInfo(gl) {\n  var vendorMasked = gl.getParameter(7936);\n  var rendererMasked = gl.getParameter(7937);\n  var ext = gl.getExtension('WEBGL_debug_renderer_info');\n  var vendorUnmasked = ext && gl.getParameter(ext.UNMASKED_VENDOR_WEBGL || 7936);\n  var rendererUnmasked = ext && gl.getParameter(ext.UNMASKED_RENDERER_WEBGL || 7937);\n  return {\n    vendor: vendorUnmasked || vendorMasked,\n    renderer: rendererUnmasked || rendererMasked,\n    vendorMasked: vendorMasked,\n    rendererMasked: rendererMasked,\n    version: gl.getParameter(7938),\n    shadingLanguageVersion: gl.getParameter(35724)\n  };\n}\nexport function resizeGLContext(gl) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (gl.canvas) {\n    var devicePixelRatio = getDevicePixelRatio(options.useDevicePixels);\n    setDevicePixelRatio(gl, devicePixelRatio, options);\n    return;\n  }\n\n  var ext = gl.getExtension('STACKGL_resize_drawingbuffer');\n\n  if (ext && \"width\" in options && \"height\" in options) {\n    ext.resize(options.width, options.height);\n  }\n}\n\nfunction createBrowserContext(canvas, options) {\n  var onError = options.onError;\n  var errorMessage = null;\n\n  var onCreateError = function onCreateError(error) {\n    return errorMessage = error.statusMessage || errorMessage;\n  };\n\n  canvas.addEventListener('webglcontextcreationerror', onCreateError, false);\n  var _options$webgl = options.webgl1,\n      webgl1 = _options$webgl === void 0 ? true : _options$webgl,\n      _options$webgl2 = options.webgl2,\n      webgl2 = _options$webgl2 === void 0 ? true : _options$webgl2;\n  var gl = null;\n\n  if (webgl2) {\n    gl = gl || canvas.getContext('webgl2', options);\n    gl = gl || canvas.getContext('experimental-webgl2', options);\n  }\n\n  if (webgl1) {\n    gl = gl || canvas.getContext('webgl', options);\n    gl = gl || canvas.getContext('experimental-webgl', options);\n  }\n\n  canvas.removeEventListener('webglcontextcreationerror', onCreateError, false);\n\n  if (!gl) {\n    return onError(\"Failed to create \".concat(webgl2 && !webgl1 ? 'WebGL2' : 'WebGL', \" context: \").concat(errorMessage || 'Unknown error'));\n  }\n\n  if (options.onContextLost) {\n    canvas.addEventListener('webglcontextlost', options.onContextLost, false);\n  }\n\n  if (options.onContextRestored) {\n    canvas.addEventListener('webglcontextrestored', options.onContextRestored, false);\n  }\n\n  return gl;\n}\n\nfunction getCanvas(_ref) {\n  var canvas = _ref.canvas,\n      _ref$width = _ref.width,\n      width = _ref$width === void 0 ? 800 : _ref$width,\n      _ref$height = _ref.height,\n      height = _ref$height === void 0 ? 600 : _ref$height,\n      onError = _ref.onError;\n  var targetCanvas;\n\n  if (typeof canvas === 'string') {\n    var isPageLoaded = isPage && document.readyState === 'complete';\n\n    if (!isPageLoaded) {\n      onError(\"createGLContext called on canvas '\".concat(canvas, \"' before page was loaded\"));\n    }\n\n    targetCanvas = document.getElementById(canvas);\n  } else if (canvas) {\n    targetCanvas = canvas;\n  } else {\n    targetCanvas = document.createElement('canvas');\n    targetCanvas.id = 'lumagl-canvas';\n    targetCanvas.style.width = Number.isFinite(width) ? \"\".concat(width, \"px\") : '100%';\n    targetCanvas.style.height = Number.isFinite(height) ? \"\".concat(height, \"px\") : '100%';\n    document.body.insertBefore(targetCanvas, document.body.firstChild);\n  }\n\n  return targetCanvas;\n}\n\nfunction logInfo(gl) {\n  var webGL = isWebGL2(gl) ? 'WebGL2' : 'WebGL1';\n  var info = getContextDebugInfo(gl);\n  var driver = info ? \"(\".concat(info.vendor, \",\").concat(info.renderer, \")\") : '';\n  var debug = gl.debug ? ' debug' : '';\n\n  _log.info(1, \"\".concat(webGL).concat(debug, \" context \").concat(driver))();\n}\n\nfunction getVersion(gl) {\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return 2;\n  }\n\n  return 1;\n}\n\nfunction setDevicePixelRatio(gl, devicePixelRatio, options) {\n  var clientWidth = 'width' in options ? options.width : gl.canvas.clientWidth;\n  var clientHeight = 'height' in options ? options.height : gl.canvas.clientHeight;\n\n  if (!clientWidth || !clientHeight) {\n    _log.log(1, 'Canvas clientWidth/clientHeight is 0')();\n\n    devicePixelRatio = 1;\n    clientWidth = gl.canvas.width || 1;\n    clientHeight = gl.canvas.height || 1;\n  }\n\n  gl.luma = gl.luma || {};\n  gl.luma.canvasSizeInfo = gl.luma.canvasSizeInfo || {};\n  var cachedSize = gl.luma.canvasSizeInfo;\n\n  if (cachedSize.clientWidth !== clientWidth || cachedSize.clientHeight !== clientHeight || cachedSize.devicePixelRatio !== devicePixelRatio) {\n    var clampedPixelRatio = devicePixelRatio;\n    var canvasWidth = Math.floor(clientWidth * clampedPixelRatio);\n    var canvasHeight = Math.floor(clientHeight * clampedPixelRatio);\n    gl.canvas.width = canvasWidth;\n    gl.canvas.height = canvasHeight;\n\n    if (gl.drawingBufferWidth !== canvasWidth || gl.drawingBufferHeight !== canvasHeight) {\n      _log.warn(\"Device pixel ratio clamped\")();\n\n      clampedPixelRatio = Math.min(gl.drawingBufferWidth / clientWidth, gl.drawingBufferHeight / clientHeight);\n      gl.canvas.width = Math.floor(clientWidth * clampedPixelRatio);\n      gl.canvas.height = Math.floor(clientHeight * clampedPixelRatio);\n    }\n\n    Object.assign(gl.luma.canvasSizeInfo, {\n      clientWidth: clientWidth,\n      clientHeight: clientHeight,\n      devicePixelRatio: devicePixelRatio\n    });\n  }\n}\n//# sourceMappingURL=context.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport getHiResTimestamp from '../utils/hi-res-timestamp';\n\nvar Stat = function () {\n  function Stat(name, type) {\n    _classCallCheck(this, Stat);\n\n    this.name = name;\n    this.type = type;\n    this.sampleSize = 1;\n    this.reset();\n  }\n\n  _createClass(Stat, [{\n    key: \"setSampleSize\",\n    value: function setSampleSize(samples) {\n      this.sampleSize = samples;\n      return this;\n    }\n  }, {\n    key: \"incrementCount\",\n    value: function incrementCount() {\n      this.addCount(1);\n      return this;\n    }\n  }, {\n    key: \"decrementCount\",\n    value: function decrementCount() {\n      this.subtractCount(1);\n      return this;\n    }\n  }, {\n    key: \"addCount\",\n    value: function addCount(value) {\n      this._count += value;\n      this._samples++;\n\n      this._checkSampling();\n\n      return this;\n    }\n  }, {\n    key: \"subtractCount\",\n    value: function subtractCount(value) {\n      this._count -= value;\n      this._samples++;\n\n      this._checkSampling();\n\n      return this;\n    }\n  }, {\n    key: \"addTime\",\n    value: function addTime(time) {\n      this._time += time;\n      this.lastTiming = time;\n      this._samples++;\n\n      this._checkSampling();\n\n      return this;\n    }\n  }, {\n    key: \"timeStart\",\n    value: function timeStart() {\n      this._startTime = getHiResTimestamp();\n      this._timerPending = true;\n      return this;\n    }\n  }, {\n    key: \"timeEnd\",\n    value: function timeEnd() {\n      if (!this._timerPending) {\n        return this;\n      }\n\n      this.addTime(getHiResTimestamp() - this._startTime);\n      this._timerPending = false;\n\n      this._checkSampling();\n\n      return this;\n    }\n  }, {\n    key: \"getSampleAverageCount\",\n    value: function getSampleAverageCount() {\n      return this.sampleSize > 0 ? this.lastSampleCount / this.sampleSize : 0;\n    }\n  }, {\n    key: \"getSampleAverageTime\",\n    value: function getSampleAverageTime() {\n      return this.sampleSize > 0 ? this.lastSampleTime / this.sampleSize : 0;\n    }\n  }, {\n    key: \"getSampleHz\",\n    value: function getSampleHz() {\n      return this.lastSampleTime > 0 ? this.sampleSize / (this.lastSampleTime / 1000) : 0;\n    }\n  }, {\n    key: \"getAverageCount\",\n    value: function getAverageCount() {\n      return this.samples > 0 ? this.count / this.samples : 0;\n    }\n  }, {\n    key: \"getAverageTime\",\n    value: function getAverageTime() {\n      return this.samples > 0 ? this.time / this.samples : 0;\n    }\n  }, {\n    key: \"getHz\",\n    value: function getHz() {\n      return this.time > 0 ? this.samples / (this.time / 1000) : 0;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.time = 0;\n      this.count = 0;\n      this.samples = 0;\n      this.lastTiming = 0;\n      this.lastSampleTime = 0;\n      this.lastSampleCount = 0;\n      this._count = 0;\n      this._time = 0;\n      this._samples = 0;\n      this._startTime = 0;\n      this._timerPending = false;\n      return this;\n    }\n  }, {\n    key: \"_checkSampling\",\n    value: function _checkSampling() {\n      if (this._samples === this.sampleSize) {\n        this.lastSampleTime = this._time;\n        this.lastSampleCount = this._count;\n        this.count += this._count;\n        this.time += this._time;\n        this.samples += this._samples;\n        this._time = 0;\n        this._count = 0;\n        this._samples = 0;\n      }\n    }\n  }]);\n\n  return Stat;\n}();\n\nexport { Stat as default };\n//# sourceMappingURL=stat.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport Stat from './stat';\n\nvar Stats = function () {\n  function Stats(_ref) {\n    var id = _ref.id,\n        stats = _ref.stats;\n\n    _classCallCheck(this, Stats);\n\n    this.id = id;\n    this.stats = {};\n\n    this._initializeStats(stats);\n\n    Object.seal(this);\n  }\n\n  _createClass(Stats, [{\n    key: \"get\",\n    value: function get(name) {\n      var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'count';\n      return this._getOrCreate({\n        name: name,\n        type: type\n      });\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      for (var key in this.stats) {\n        this.stats[key].reset();\n      }\n\n      return this;\n    }\n  }, {\n    key: \"forEach\",\n    value: function forEach(fn) {\n      for (var key in this.stats) {\n        fn(this.stats[key]);\n      }\n    }\n  }, {\n    key: \"getTable\",\n    value: function getTable() {\n      var table = {};\n      this.forEach(function (stat) {\n        table[stat.name] = {\n          time: stat.time || 0,\n          count: stat.count || 0,\n          average: stat.getAverageTime() || 0,\n          hz: stat.getHz() || 0\n        };\n      });\n      return table;\n    }\n  }, {\n    key: \"_initializeStats\",\n    value: function _initializeStats() {\n      var _this = this;\n\n      var stats = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      stats.forEach(function (stat) {\n        return _this._getOrCreate(stat);\n      });\n    }\n  }, {\n    key: \"_getOrCreate\",\n    value: function _getOrCreate(stat) {\n      if (!stat || !stat.name) {\n        return null;\n      }\n\n      var name = stat.name,\n          type = stat.type;\n\n      if (!this.stats[name]) {\n        if (stat instanceof Stat) {\n          this.stats[name] = stat;\n        } else {\n          this.stats[name] = new Stat(name, type);\n        }\n      }\n\n      return this.stats[name];\n    }\n  }, {\n    key: \"size\",\n    get: function get() {\n      return Object.keys(this.stats).length;\n    }\n  }]);\n\n  return Stats;\n}();\n\nexport { Stats as default };\n//# sourceMappingURL=stats.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { log } from '@luma.gl/gltools';\nimport { Stats } from 'probe.gl';\nimport { isBrowser, global } from 'probe.gl/env';\nvar VERSION = typeof \"8.4.4\" !== 'undefined' ? \"8.4.4\" : 'untranspiled source';\nvar STARTUP_MESSAGE = 'set luma.log.level=1 (or higher) to trace rendering';\n\nvar StatsManager = function () {\n  function StatsManager() {\n    _classCallCheck(this, StatsManager);\n\n    this.stats = new Map();\n  }\n\n  _createClass(StatsManager, [{\n    key: \"get\",\n    value: function get(name) {\n      if (!this.stats.has(name)) {\n        this.stats.set(name, new Stats({\n          id: name\n        }));\n      }\n\n      return this.stats.get(name);\n    }\n  }]);\n\n  return StatsManager;\n}();\n\nvar lumaStats = new StatsManager();\n\nif (global.luma && global.luma.VERSION !== VERSION) {\n  throw new Error(\"luma.gl - multiple VERSIONs detected: \".concat(global.luma.VERSION, \" vs \").concat(VERSION));\n}\n\nif (!global.luma) {\n  if (isBrowser()) {\n    log.log(1, \"luma.gl \".concat(VERSION, \" - \").concat(STARTUP_MESSAGE))();\n  }\n\n  global.luma = global.luma || {\n    VERSION: VERSION,\n    version: VERSION,\n    log: log,\n    stats: lumaStats,\n    globals: {\n      modules: {},\n      nodeIO: {}\n    }\n  };\n}\n\nexport { lumaStats };\nexport default global.luma;\n//# sourceMappingURL=init.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'luma.gl: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { assert } from '../utils';\nexport function getKeyValue(gl, name) {\n  if (typeof name !== 'string') {\n    return name;\n  }\n\n  var number = Number(name);\n\n  if (!isNaN(number)) {\n    return number;\n  }\n\n  name = name.replace(/^.*\\./, '');\n  var value = gl[name];\n  assert(value !== undefined, \"Accessing undefined constant GL.\".concat(name));\n  return value;\n}\nexport function getKey(gl, value) {\n  value = Number(value);\n\n  for (var key in gl) {\n    if (gl[key] === value) {\n      return \"GL.\".concat(key);\n    }\n  }\n\n  return String(value);\n}\nexport function getKeyType(gl, value) {\n  assert(value !== undefined, 'undefined key');\n  value = Number(value);\n\n  for (var key in gl) {\n    if (gl[key] === value) {\n      return \"GL.\".concat(key);\n    }\n  }\n\n  return String(value);\n}\n//# sourceMappingURL=constants-to-keys.js.map","import assert from './assert';\nvar uidCounters = {};\nexport function uid() {\n  var id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'id';\n  uidCounters[id] = uidCounters[id] || 1;\n  var count = uidCounters[id]++;\n  return \"\".concat(id, \"-\").concat(count);\n}\nexport function isPowerOfTwo(n) {\n  assert(typeof n === 'number', 'Input must be a number');\n  return n && (n & n - 1) === 0;\n}\nexport function isObjectEmpty(obj) {\n  var isEmpty = true;\n\n  for (var key in obj) {\n    isEmpty = false;\n    break;\n  }\n\n  return isEmpty;\n}\n//# sourceMappingURL=utils.js.map","import { log } from '@luma.gl/gltools';\nexport function stubRemovedMethods(instance, className, version, methodNames) {\n  var upgradeMessage = \"See luma.gl \".concat(version, \" Upgrade Guide at https://luma.gl/docs/upgrade-guide\");\n  var prototype = Object.getPrototypeOf(instance);\n  methodNames.forEach(function (methodName) {\n    if (prototype.methodName) {\n      return;\n    }\n\n    prototype[methodName] = function () {\n      log.removed(\"Calling removed method \".concat(className, \".\").concat(methodName, \": \"), upgradeMessage)();\n      throw new Error(methodName);\n    };\n  });\n}\n//# sourceMappingURL=stub-methods.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { isWebGL2, assertWebGLContext } from '@luma.gl/gltools';\nimport { lumaStats } from '../init';\nimport { getKey, getKeyValue } from '../webgl-utils';\nimport { uid, assert, stubRemovedMethods as _stubRemovedMethods } from '../utils';\nvar ERR_RESOURCE_METHOD_UNDEFINED = 'Resource subclass must define virtual methods';\n\nvar Resource = function () {\n  function Resource(gl) {\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Resource);\n\n    assertWebGLContext(gl);\n    var id = opts.id,\n        _opts$userData = opts.userData,\n        userData = _opts$userData === void 0 ? {} : _opts$userData;\n    this.gl = gl;\n    this.gl2 = gl;\n    this.id = id || uid(this.constructor.name);\n    this.userData = userData;\n    this._bound = false;\n    this._handle = opts.handle;\n\n    if (this._handle === undefined) {\n      this._handle = this._createHandle();\n    }\n\n    this.byteLength = 0;\n\n    this._addStats();\n  }\n\n  _createClass(Resource, [{\n    key: \"toString\",\n    value: function toString() {\n      return \"\".concat(this.constructor.name, \"(\").concat(this.id, \")\");\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref$deleteChildren = _ref.deleteChildren,\n          deleteChildren = _ref$deleteChildren === void 0 ? false : _ref$deleteChildren;\n\n      var children = this._handle && this._deleteHandle(this._handle);\n\n      if (this._handle) {\n        this._removeStats();\n      }\n\n      this._handle = null;\n\n      if (children && deleteChildren) {\n        children.filter(Boolean).forEach(function (child) {\n          return child[\"delete\"]();\n        });\n      }\n\n      return this;\n    }\n  }, {\n    key: \"bind\",\n    value: function bind() {\n      var funcOrHandle = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.handle;\n\n      if (typeof funcOrHandle !== 'function') {\n        this._bindHandle(funcOrHandle);\n\n        return this;\n      }\n\n      var value;\n\n      if (!this._bound) {\n        this._bindHandle(this.handle);\n\n        this._bound = true;\n        value = funcOrHandle();\n        this._bound = false;\n\n        this._bindHandle(null);\n      } else {\n        value = funcOrHandle();\n      }\n\n      return value;\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind() {\n      this.bind(null);\n    }\n  }, {\n    key: \"getParameter\",\n    value: function getParameter(pname) {\n      var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      pname = getKeyValue(this.gl, pname);\n      assert(pname);\n      var parameters = this.constructor.PARAMETERS || {};\n      var parameter = parameters[pname];\n\n      if (parameter) {\n        var isWebgl2 = isWebGL2(this.gl);\n        var parameterAvailable = (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n        if (!parameterAvailable) {\n          var webgl1Default = parameter.webgl1;\n          var webgl2Default = 'webgl2' in parameter ? parameter.webgl2 : parameter.webgl1;\n          var defaultValue = isWebgl2 ? webgl2Default : webgl1Default;\n          return defaultValue;\n        }\n      }\n\n      return this._getParameter(pname, opts);\n    }\n  }, {\n    key: \"getParameters\",\n    value: function getParameters() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var parameters = options.parameters,\n          keys = options.keys;\n      var PARAMETERS = this.constructor.PARAMETERS || {};\n      var isWebgl2 = isWebGL2(this.gl);\n      var values = {};\n      var parameterKeys = parameters || Object.keys(PARAMETERS);\n\n      var _iterator = _createForOfIteratorHelper(parameterKeys),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var pname = _step.value;\n          var parameter = PARAMETERS[pname];\n          var parameterAvailable = parameter && (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n          if (parameterAvailable) {\n            var key = keys ? getKey(this.gl, pname) : pname;\n            values[key] = this.getParameter(pname, options);\n\n            if (keys && parameter.type === 'GLenum') {\n              values[key] = getKey(this.gl, values[key]);\n            }\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return values;\n    }\n  }, {\n    key: \"setParameter\",\n    value: function setParameter(pname, value) {\n      pname = getKeyValue(this.gl, pname);\n      assert(pname);\n      var parameters = this.constructor.PARAMETERS || {};\n      var parameter = parameters[pname];\n\n      if (parameter) {\n        var isWebgl2 = isWebGL2(this.gl);\n        var parameterAvailable = (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n        if (!parameterAvailable) {\n          throw new Error('Parameter not available on this platform');\n        }\n\n        if (parameter.type === 'GLenum') {\n          value = getKeyValue(value);\n        }\n      }\n\n      this._setParameter(pname, value);\n\n      return this;\n    }\n  }, {\n    key: \"setParameters\",\n    value: function setParameters(parameters) {\n      for (var pname in parameters) {\n        this.setParameter(pname, parameters[pname]);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"stubRemovedMethods\",\n    value: function stubRemovedMethods(className, version, methodNames) {\n      return _stubRemovedMethods(this, className, version, methodNames);\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize(opts) {}\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n    }\n  }, {\n    key: \"_bindHandle\",\n    value: function _bindHandle(handle) {\n      throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n    }\n  }, {\n    key: \"_getOptsFromHandle\",\n    value: function _getOptsFromHandle() {\n      throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n    }\n  }, {\n    key: \"_getParameter\",\n    value: function _getParameter(pname, opts) {\n      throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n    }\n  }, {\n    key: \"_setParameter\",\n    value: function _setParameter(pname, value) {\n      throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n    }\n  }, {\n    key: \"_context\",\n    value: function _context() {\n      this.gl.luma = this.gl.luma || {};\n      return this.gl.luma;\n    }\n  }, {\n    key: \"_addStats\",\n    value: function _addStats() {\n      var name = this.constructor.name;\n      var stats = lumaStats.get('Resource Counts');\n      stats.get('Resources Created').incrementCount();\n      stats.get(\"\".concat(name, \"s Created\")).incrementCount();\n      stats.get(\"\".concat(name, \"s Active\")).incrementCount();\n    }\n  }, {\n    key: \"_removeStats\",\n    value: function _removeStats() {\n      var name = this.constructor.name;\n      var stats = lumaStats.get('Resource Counts');\n      stats.get(\"\".concat(name, \"s Active\")).decrementCount();\n    }\n  }, {\n    key: \"_trackAllocatedMemory\",\n    value: function _trackAllocatedMemory(bytes) {\n      var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.constructor.name;\n      var stats = lumaStats.get('Memory Usage');\n      stats.get('GPU Memory').addCount(bytes);\n      stats.get(\"\".concat(name, \" Memory\")).addCount(bytes);\n      this.byteLength = bytes;\n    }\n  }, {\n    key: \"_trackDeallocatedMemory\",\n    value: function _trackDeallocatedMemory() {\n      var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.constructor.name;\n      var stats = lumaStats.get('Memory Usage');\n      stats.get('GPU Memory').subtractCount(this.byteLength);\n      stats.get(\"\".concat(name, \" Memory\")).subtractCount(this.byteLength);\n      this.byteLength = 0;\n    }\n  }, {\n    key: \"handle\",\n    get: function get() {\n      return this._handle;\n    }\n  }]);\n\n  return Resource;\n}();\n\nexport { Resource as default };\n//# sourceMappingURL=resource.js.map","var ERR_TYPE_DEDUCTION = 'Failed to deduce GL constant from typed array';\nexport function getGLTypeFromTypedArray(arrayOrType) {\n  var type = ArrayBuffer.isView(arrayOrType) ? arrayOrType.constructor : arrayOrType;\n\n  switch (type) {\n    case Float32Array:\n      return 5126;\n\n    case Uint16Array:\n      return 5123;\n\n    case Uint32Array:\n      return 5125;\n\n    case Uint8Array:\n      return 5121;\n\n    case Uint8ClampedArray:\n      return 5121;\n\n    case Int8Array:\n      return 5120;\n\n    case Int16Array:\n      return 5122;\n\n    case Int32Array:\n      return 5124;\n\n    default:\n      throw new Error(ERR_TYPE_DEDUCTION);\n  }\n}\nexport function getTypedArrayFromGLType(glType) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$clamped = _ref.clamped,\n      clamped = _ref$clamped === void 0 ? true : _ref$clamped;\n\n  switch (glType) {\n    case 5126:\n      return Float32Array;\n\n    case 5123:\n    case 33635:\n    case 32819:\n    case 32820:\n      return Uint16Array;\n\n    case 5125:\n      return Uint32Array;\n\n    case 5121:\n      return clamped ? Uint8ClampedArray : Uint8Array;\n\n    case 5120:\n      return Int8Array;\n\n    case 5122:\n      return Int16Array;\n\n    case 5124:\n      return Int32Array;\n\n    default:\n      throw new Error('Failed to deduce typed array type from GL constant');\n  }\n}\nexport function flipRows(_ref2) {\n  var data = _ref2.data,\n      width = _ref2.width,\n      height = _ref2.height,\n      _ref2$bytesPerPixel = _ref2.bytesPerPixel,\n      bytesPerPixel = _ref2$bytesPerPixel === void 0 ? 4 : _ref2$bytesPerPixel,\n      temp = _ref2.temp;\n  var bytesPerRow = width * bytesPerPixel;\n  temp = temp || new Uint8Array(bytesPerRow);\n\n  for (var y = 0; y < height / 2; ++y) {\n    var topOffset = y * bytesPerRow;\n    var bottomOffset = (height - y - 1) * bytesPerRow;\n    temp.set(data.subarray(topOffset, topOffset + bytesPerRow));\n    data.copyWithin(topOffset, bottomOffset, bottomOffset + bytesPerRow);\n    data.set(temp, bottomOffset);\n  }\n}\nexport function scalePixels(_ref3) {\n  var data = _ref3.data,\n      width = _ref3.width,\n      height = _ref3.height;\n  var newWidth = Math.round(width / 2);\n  var newHeight = Math.round(height / 2);\n  var newData = new Uint8Array(newWidth * newHeight * 4);\n\n  for (var y = 0; y < newHeight; y++) {\n    for (var x = 0; x < newWidth; x++) {\n      for (var c = 0; c < 4; c++) {\n        newData[(y * newWidth + x) * 4 + c] = data[(y * 2 * width + x * 2) * 4 + c];\n      }\n    }\n  }\n\n  return {\n    data: newData,\n    width: newWidth,\n    height: newHeight\n  };\n}\n//# sourceMappingURL=typed-array-utils.js.map","import { log } from '@luma.gl/gltools';\nexport function checkProps(className, props, propChecks) {\n  var _propChecks$removedPr = propChecks.removedProps,\n      removedProps = _propChecks$removedPr === void 0 ? {} : _propChecks$removedPr,\n      _propChecks$deprecate = propChecks.deprecatedProps,\n      deprecatedProps = _propChecks$deprecate === void 0 ? {} : _propChecks$deprecate,\n      _propChecks$replacedP = propChecks.replacedProps,\n      replacedProps = _propChecks$replacedP === void 0 ? {} : _propChecks$replacedP;\n\n  for (var propName in removedProps) {\n    if (propName in props) {\n      var replacementProp = removedProps[propName];\n      var replacement = replacementProp ? \"\".concat(className, \".\").concat(removedProps[propName]) : 'N/A';\n      log.removed(\"\".concat(className, \".\").concat(propName), replacement)();\n    }\n  }\n\n  for (var _propName in deprecatedProps) {\n    if (_propName in props) {\n      var _replacementProp = deprecatedProps[_propName];\n      log.deprecated(\"\".concat(className, \".\").concat(_propName), \"\".concat(className, \".\").concat(_replacementProp))();\n    }\n  }\n\n  var newProps = null;\n\n  for (var _propName2 in replacedProps) {\n    if (_propName2 in props) {\n      var _replacementProp2 = replacedProps[_propName2];\n      log.deprecated(\"\".concat(className, \".\").concat(_propName2), \"\".concat(className, \".\").concat(_replacementProp2))();\n      newProps = newProps || Object.assign({}, props);\n      newProps[_replacementProp2] = props[_propName2];\n      delete newProps[_propName2];\n    }\n  }\n\n  return newProps || props;\n}\n//# sourceMappingURL=check-props.js.map","import _construct from \"@babel/runtime/helpers/esm/construct\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { getTypedArrayFromGLType } from '../webgl-utils';\nimport { checkProps, assert } from '../utils';\nvar DEFAULT_ACCESSOR_VALUES = {\n  offset: 0,\n  stride: 0,\n  type: 5126,\n  size: 1,\n  divisor: 0,\n  normalized: false,\n  integer: false\n};\nvar PROP_CHECKS = {\n  deprecatedProps: {\n    instanced: 'divisor',\n    isInstanced: 'divisor'\n  }\n};\n\nvar Accessor = function () {\n  _createClass(Accessor, null, [{\n    key: \"getBytesPerElement\",\n    value: function getBytesPerElement(accessor) {\n      var ArrayType = getTypedArrayFromGLType(accessor.type || 5126);\n      return ArrayType.BYTES_PER_ELEMENT;\n    }\n  }, {\n    key: \"getBytesPerVertex\",\n    value: function getBytesPerVertex(accessor) {\n      assert(accessor.size);\n      var ArrayType = getTypedArrayFromGLType(accessor.type || 5126);\n      return ArrayType.BYTES_PER_ELEMENT * accessor.size;\n    }\n  }, {\n    key: \"resolve\",\n    value: function resolve() {\n      for (var _len = arguments.length, accessors = new Array(_len), _key = 0; _key < _len; _key++) {\n        accessors[_key] = arguments[_key];\n      }\n\n      return _construct(Accessor, [DEFAULT_ACCESSOR_VALUES].concat(accessors));\n    }\n  }]);\n\n  function Accessor() {\n    var _this = this;\n\n    _classCallCheck(this, Accessor);\n\n    for (var _len2 = arguments.length, accessors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      accessors[_key2] = arguments[_key2];\n    }\n\n    accessors.forEach(function (accessor) {\n      return _this._assign(accessor);\n    });\n    Object.freeze(this);\n  }\n\n  _createClass(Accessor, [{\n    key: \"toString\",\n    value: function toString() {\n      return JSON.stringify(this);\n    }\n  }, {\n    key: \"_assign\",\n    value: function _assign() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      props = checkProps('Accessor', props, PROP_CHECKS);\n\n      if (props.type !== undefined) {\n        this.type = props.type;\n\n        if (props.type === 5124 || props.type === 5125) {\n          this.integer = true;\n        }\n      }\n\n      if (props.size !== undefined) {\n        this.size = props.size;\n      }\n\n      if (props.offset !== undefined) {\n        this.offset = props.offset;\n      }\n\n      if (props.stride !== undefined) {\n        this.stride = props.stride;\n      }\n\n      if (props.normalized !== undefined) {\n        this.normalized = props.normalized;\n      }\n\n      if (props.integer !== undefined) {\n        this.integer = props.integer;\n      }\n\n      if (props.divisor !== undefined) {\n        this.divisor = props.divisor;\n      }\n\n      if (props.buffer !== undefined) {\n        this.buffer = props.buffer;\n      }\n\n      if (props.index !== undefined) {\n        if (typeof props.index === 'boolean') {\n          this.index = props.index ? 1 : 0;\n        } else {\n          this.index = props.index;\n        }\n      }\n\n      if (props.instanced !== undefined) {\n        this.divisor = props.instanced ? 1 : 0;\n      }\n\n      if (props.isInstanced !== undefined) {\n        this.divisor = props.isInstanced ? 1 : 0;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"BYTES_PER_ELEMENT\",\n    get: function get() {\n      return Accessor.getBytesPerElement(this);\n    }\n  }, {\n    key: \"BYTES_PER_VERTEX\",\n    get: function get() {\n      return Accessor.getBytesPerVertex(this);\n    }\n  }]);\n\n  return Accessor;\n}();\n\nexport { Accessor as default };\nexport { DEFAULT_ACCESSOR_VALUES };\n//# sourceMappingURL=accessor.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport Resource from './resource';\nimport Accessor from './accessor';\nimport { getGLTypeFromTypedArray, getTypedArrayFromGLType } from '../webgl-utils';\nimport { assertWebGL2Context, log } from '@luma.gl/gltools';\nimport { assert, checkProps } from '../utils';\nvar DEBUG_DATA_LENGTH = 10;\nvar DEPRECATED_PROPS = {\n  offset: 'accessor.offset',\n  stride: 'accessor.stride',\n  type: 'accessor.type',\n  size: 'accessor.size',\n  divisor: 'accessor.divisor',\n  normalized: 'accessor.normalized',\n  integer: 'accessor.integer',\n  instanced: 'accessor.divisor',\n  isInstanced: 'accessor.divisor'\n};\nvar PROP_CHECKS_INITIALIZE = {\n  removedProps: {},\n  replacedProps: {\n    bytes: 'byteLength'\n  },\n  deprecatedProps: DEPRECATED_PROPS\n};\nvar PROP_CHECKS_SET_PROPS = {\n  removedProps: DEPRECATED_PROPS\n};\n\nvar Buffer = function (_Resource) {\n  _inherits(Buffer, _Resource);\n\n  var _super = _createSuper(Buffer);\n\n  function Buffer(gl) {\n    var _this;\n\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Buffer);\n\n    _this = _super.call(this, gl, props);\n\n    _this.stubRemovedMethods('Buffer', 'v6.0', ['layout', 'setLayout', 'getIndexedParameter']);\n\n    _this.target = props.target || (_this.gl.webgl2 ? 36662 : 34962);\n\n    _this.initialize(props);\n\n    Object.seal(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Buffer, [{\n    key: \"getElementCount\",\n    value: function getElementCount() {\n      var accessor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.accessor;\n      return Math.round(this.byteLength / Accessor.getBytesPerElement(accessor));\n    }\n  }, {\n    key: \"getVertexCount\",\n    value: function getVertexCount() {\n      var accessor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.accessor;\n      return Math.round(this.byteLength / Accessor.getBytesPerVertex(accessor));\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (ArrayBuffer.isView(props)) {\n        props = {\n          data: props\n        };\n      }\n\n      if (Number.isFinite(props)) {\n        props = {\n          byteLength: props\n        };\n      }\n\n      props = checkProps('Buffer', props, PROP_CHECKS_INITIALIZE);\n      this.usage = props.usage || 35044;\n      this.debugData = null;\n      this.setAccessor(Object.assign({}, props, props.accessor));\n\n      if (props.data) {\n        this._setData(props.data, props.offset, props.byteLength);\n      } else {\n        this._setByteLength(props.byteLength || 0);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      props = checkProps('Buffer', props, PROP_CHECKS_SET_PROPS);\n\n      if ('accessor' in props) {\n        this.setAccessor(props.accessor);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"setAccessor\",\n    value: function setAccessor(accessor) {\n      accessor = Object.assign({}, accessor);\n      delete accessor.buffer;\n      this.accessor = new Accessor(accessor);\n      return this;\n    }\n  }, {\n    key: \"reallocate\",\n    value: function reallocate(byteLength) {\n      if (byteLength > this.byteLength) {\n        this._setByteLength(byteLength);\n\n        return true;\n      }\n\n      this.bytesUsed = byteLength;\n      return false;\n    }\n  }, {\n    key: \"setData\",\n    value: function setData(props) {\n      return this.initialize(props);\n    }\n  }, {\n    key: \"subData\",\n    value: function subData(props) {\n      if (ArrayBuffer.isView(props)) {\n        props = {\n          data: props\n        };\n      }\n\n      var _props = props,\n          data = _props.data,\n          _props$offset = _props.offset,\n          offset = _props$offset === void 0 ? 0 : _props$offset,\n          _props$srcOffset = _props.srcOffset,\n          srcOffset = _props$srcOffset === void 0 ? 0 : _props$srcOffset;\n      var byteLength = props.byteLength || props.length;\n      assert(data);\n      var target = this.gl.webgl2 ? 36663 : this.target;\n      this.gl.bindBuffer(target, this.handle);\n\n      if (srcOffset !== 0 || byteLength !== undefined) {\n        assertWebGL2Context(this.gl);\n        this.gl.bufferSubData(this.target, offset, data, srcOffset, byteLength);\n      } else {\n        this.gl.bufferSubData(target, offset, data);\n      }\n\n      this.gl.bindBuffer(target, null);\n      this.debugData = null;\n\n      this._inferType(data);\n\n      return this;\n    }\n  }, {\n    key: \"copyData\",\n    value: function copyData(_ref) {\n      var sourceBuffer = _ref.sourceBuffer,\n          _ref$readOffset = _ref.readOffset,\n          readOffset = _ref$readOffset === void 0 ? 0 : _ref$readOffset,\n          _ref$writeOffset = _ref.writeOffset,\n          writeOffset = _ref$writeOffset === void 0 ? 0 : _ref$writeOffset,\n          size = _ref.size;\n      var gl = this.gl;\n      assertWebGL2Context(gl);\n      gl.bindBuffer(36662, sourceBuffer.handle);\n      gl.bindBuffer(36663, this.handle);\n      gl.copyBufferSubData(36662, 36663, readOffset, writeOffset, size);\n      gl.bindBuffer(36662, null);\n      gl.bindBuffer(36663, null);\n      this.debugData = null;\n      return this;\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref2$dstData = _ref2.dstData,\n          dstData = _ref2$dstData === void 0 ? null : _ref2$dstData,\n          _ref2$srcByteOffset = _ref2.srcByteOffset,\n          srcByteOffset = _ref2$srcByteOffset === void 0 ? 0 : _ref2$srcByteOffset,\n          _ref2$dstOffset = _ref2.dstOffset,\n          dstOffset = _ref2$dstOffset === void 0 ? 0 : _ref2$dstOffset,\n          _ref2$length = _ref2.length,\n          length = _ref2$length === void 0 ? 0 : _ref2$length;\n\n      assertWebGL2Context(this.gl);\n      var ArrayType = getTypedArrayFromGLType(this.accessor.type || 5126, {\n        clamped: false\n      });\n\n      var sourceAvailableElementCount = this._getAvailableElementCount(srcByteOffset);\n\n      var dstElementOffset = dstOffset;\n      var dstAvailableElementCount;\n      var dstElementCount;\n\n      if (dstData) {\n        dstElementCount = dstData.length;\n        dstAvailableElementCount = dstElementCount - dstElementOffset;\n      } else {\n        dstAvailableElementCount = Math.min(sourceAvailableElementCount, length || sourceAvailableElementCount);\n        dstElementCount = dstElementOffset + dstAvailableElementCount;\n      }\n\n      var copyElementCount = Math.min(sourceAvailableElementCount, dstAvailableElementCount);\n      length = length || copyElementCount;\n      assert(length <= copyElementCount);\n      dstData = dstData || new ArrayType(dstElementCount);\n      this.gl.bindBuffer(36662, this.handle);\n      this.gl.getBufferSubData(36662, srcByteOffset, dstData, dstOffset, length);\n      this.gl.bindBuffer(36662, null);\n      return dstData;\n    }\n  }, {\n    key: \"bind\",\n    value: function bind() {\n      var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref3$target = _ref3.target,\n          target = _ref3$target === void 0 ? this.target : _ref3$target,\n          _ref3$index = _ref3.index,\n          index = _ref3$index === void 0 ? this.accessor && this.accessor.index : _ref3$index,\n          _ref3$offset = _ref3.offset,\n          offset = _ref3$offset === void 0 ? 0 : _ref3$offset,\n          size = _ref3.size;\n\n      if (target === 35345 || target === 35982) {\n        if (size !== undefined) {\n          this.gl.bindBufferRange(target, index, this.handle, offset, size);\n        } else {\n          assert(offset === 0);\n          this.gl.bindBufferBase(target, index, this.handle);\n        }\n      } else {\n        this.gl.bindBuffer(target, this.handle);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind() {\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref4$target = _ref4.target,\n          target = _ref4$target === void 0 ? this.target : _ref4$target,\n          _ref4$index = _ref4.index,\n          index = _ref4$index === void 0 ? this.accessor && this.accessor.index : _ref4$index;\n\n      var isIndexedBuffer = target === 35345 || target === 35982;\n\n      if (isIndexedBuffer) {\n        this.gl.bindBufferBase(target, index, null);\n      } else {\n        this.gl.bindBuffer(target, null);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"getDebugData\",\n    value: function getDebugData() {\n      if (!this.debugData) {\n        this.debugData = this.getData({\n          length: Math.min(DEBUG_DATA_LENGTH, this.byteLength)\n        });\n        return {\n          data: this.debugData,\n          changed: true\n        };\n      }\n\n      return {\n        data: this.debugData,\n        changed: false\n      };\n    }\n  }, {\n    key: \"invalidateDebugData\",\n    value: function invalidateDebugData() {\n      this.debugData = null;\n    }\n  }, {\n    key: \"_setData\",\n    value: function _setData(data) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var byteLength = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : data.byteLength + offset;\n      assert(ArrayBuffer.isView(data));\n\n      this._trackDeallocatedMemory();\n\n      var target = this._getTarget();\n\n      this.gl.bindBuffer(target, this.handle);\n      this.gl.bufferData(target, byteLength, this.usage);\n      this.gl.bufferSubData(target, offset, data);\n      this.gl.bindBuffer(target, null);\n      this.debugData = data.slice(0, DEBUG_DATA_LENGTH);\n      this.bytesUsed = byteLength;\n\n      this._trackAllocatedMemory(byteLength);\n\n      var type = getGLTypeFromTypedArray(data);\n      assert(type);\n      this.setAccessor(new Accessor(this.accessor, {\n        type: type\n      }));\n      return this;\n    }\n  }, {\n    key: \"_setByteLength\",\n    value: function _setByteLength(byteLength) {\n      var usage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.usage;\n      assert(byteLength >= 0);\n\n      this._trackDeallocatedMemory();\n\n      var data = byteLength;\n\n      if (byteLength === 0) {\n        data = new Float32Array(0);\n      }\n\n      var target = this._getTarget();\n\n      this.gl.bindBuffer(target, this.handle);\n      this.gl.bufferData(target, data, usage);\n      this.gl.bindBuffer(target, null);\n      this.usage = usage;\n      this.debugData = null;\n      this.bytesUsed = byteLength;\n\n      this._trackAllocatedMemory(byteLength);\n\n      return this;\n    }\n  }, {\n    key: \"_getTarget\",\n    value: function _getTarget() {\n      return this.gl.webgl2 ? 36663 : this.target;\n    }\n  }, {\n    key: \"_getAvailableElementCount\",\n    value: function _getAvailableElementCount(srcByteOffset) {\n      var ArrayType = getTypedArrayFromGLType(this.accessor.type || 5126, {\n        clamped: false\n      });\n      var sourceElementOffset = srcByteOffset / ArrayType.BYTES_PER_ELEMENT;\n      return this.getElementCount() - sourceElementOffset;\n    }\n  }, {\n    key: \"_inferType\",\n    value: function _inferType(data) {\n      if (!this.accessor.type) {\n        this.setAccessor(new Accessor(this.accessor, {\n          type: getGLTypeFromTypedArray(data)\n        }));\n      }\n    }\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createBuffer();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteBuffer(this.handle);\n\n      this._trackDeallocatedMemory();\n    }\n  }, {\n    key: \"_getParameter\",\n    value: function _getParameter(pname) {\n      this.gl.bindBuffer(this.target, this.handle);\n      var value = this.gl.getBufferParameter(this.target, pname);\n      this.gl.bindBuffer(this.target, null);\n      return value;\n    }\n  }, {\n    key: \"setByteLength\",\n    value: function setByteLength(byteLength) {\n      log.deprecated('setByteLength', 'reallocate')();\n      return this.reallocate(byteLength);\n    }\n  }, {\n    key: \"updateAccessor\",\n    value: function updateAccessor(opts) {\n      log.deprecated('updateAccessor(...)', 'setAccessor(new Accessor(buffer.accessor, ...)')();\n      this.accessor = new Accessor(this.accessor, opts);\n      return this;\n    }\n  }, {\n    key: \"type\",\n    get: function get() {\n      log.deprecated('Buffer.type', 'Buffer.accessor.type')();\n      return this.accessor.type;\n    }\n  }, {\n    key: \"bytes\",\n    get: function get() {\n      log.deprecated('Buffer.bytes', 'Buffer.byteLength')();\n      return this.byteLength;\n    }\n  }]);\n\n  return Buffer;\n}(Resource);\n\nexport { Buffer as default };\n//# sourceMappingURL=buffer.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _TEXTURE_FORMATS, _DATA_FORMAT_CHANNELS, _TYPE_SIZES;\n\nimport { isWebGL2 } from '@luma.gl/gltools';\nexport var TEXTURE_FORMATS = (_TEXTURE_FORMATS = {}, _defineProperty(_TEXTURE_FORMATS, 6407, {\n  dataFormat: 6407,\n  types: [5121, 33635]\n}), _defineProperty(_TEXTURE_FORMATS, 6408, {\n  dataFormat: 6408,\n  types: [5121, 32819, 32820]\n}), _defineProperty(_TEXTURE_FORMATS, 6406, {\n  dataFormat: 6406,\n  types: [5121]\n}), _defineProperty(_TEXTURE_FORMATS, 6409, {\n  dataFormat: 6409,\n  types: [5121]\n}), _defineProperty(_TEXTURE_FORMATS, 6410, {\n  dataFormat: 6410,\n  types: [5121]\n}), _defineProperty(_TEXTURE_FORMATS, 33326, {\n  dataFormat: 6403,\n  types: [5126],\n  gl2: true\n}), _defineProperty(_TEXTURE_FORMATS, 33328, {\n  dataFormat: 33319,\n  types: [5126],\n  gl2: true\n}), _defineProperty(_TEXTURE_FORMATS, 34837, {\n  dataFormat: 6407,\n  types: [5126],\n  gl2: true\n}), _defineProperty(_TEXTURE_FORMATS, 34836, {\n  dataFormat: 6408,\n  types: [5126],\n  gl2: true\n}), _TEXTURE_FORMATS);\nexport var DATA_FORMAT_CHANNELS = (_DATA_FORMAT_CHANNELS = {}, _defineProperty(_DATA_FORMAT_CHANNELS, 6403, 1), _defineProperty(_DATA_FORMAT_CHANNELS, 36244, 1), _defineProperty(_DATA_FORMAT_CHANNELS, 33319, 2), _defineProperty(_DATA_FORMAT_CHANNELS, 33320, 2), _defineProperty(_DATA_FORMAT_CHANNELS, 6407, 3), _defineProperty(_DATA_FORMAT_CHANNELS, 36248, 3), _defineProperty(_DATA_FORMAT_CHANNELS, 6408, 4), _defineProperty(_DATA_FORMAT_CHANNELS, 36249, 4), _defineProperty(_DATA_FORMAT_CHANNELS, 6402, 1), _defineProperty(_DATA_FORMAT_CHANNELS, 34041, 1), _defineProperty(_DATA_FORMAT_CHANNELS, 6406, 1), _defineProperty(_DATA_FORMAT_CHANNELS, 6409, 1), _defineProperty(_DATA_FORMAT_CHANNELS, 6410, 2), _DATA_FORMAT_CHANNELS);\nexport var TYPE_SIZES = (_TYPE_SIZES = {}, _defineProperty(_TYPE_SIZES, 5126, 4), _defineProperty(_TYPE_SIZES, 5125, 4), _defineProperty(_TYPE_SIZES, 5124, 4), _defineProperty(_TYPE_SIZES, 5123, 2), _defineProperty(_TYPE_SIZES, 5122, 2), _defineProperty(_TYPE_SIZES, 5131, 2), _defineProperty(_TYPE_SIZES, 5120, 1), _defineProperty(_TYPE_SIZES, 5121, 1), _TYPE_SIZES);\nexport function isFormatSupported(gl, format) {\n  var info = TEXTURE_FORMATS[format];\n\n  if (!info) {\n    return false;\n  }\n\n  if (info.gl1 === undefined && info.gl2 === undefined) {\n    return true;\n  }\n\n  var value = isWebGL2(gl) ? info.gl2 || info.gl1 : info.gl1;\n  return typeof value === 'string' ? gl.getExtension(value) : value;\n}\nexport function isLinearFilteringSupported(gl, format) {\n  var info = TEXTURE_FORMATS[format];\n\n  switch (info && info.types[0]) {\n    case 5126:\n      return gl.getExtension('OES_texture_float_linear');\n\n    case 5131:\n      return gl.getExtension('OES_texture_half_float_linear');\n\n    default:\n      return true;\n  }\n}\n//# sourceMappingURL=texture-formats.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { isWebGL2, assertWebGL2Context, withParameters, log } from '@luma.gl/gltools';\nimport { global } from 'probe.gl/env';\nimport Resource from './resource';\nimport Buffer from './buffer';\nimport { TEXTURE_FORMATS, DATA_FORMAT_CHANNELS, TYPE_SIZES, isFormatSupported, isLinearFilteringSupported } from './texture-formats';\nimport { uid, isPowerOfTwo, assert } from '../utils';\nvar NPOT_MIN_FILTERS = [9729, 9728];\n\nvar WebGLBuffer = global.WebGLBuffer || function WebGLBuffer() {};\n\nvar Texture = function (_Resource) {\n  _inherits(Texture, _Resource);\n\n  var _super = _createSuper(Texture);\n\n  _createClass(Texture, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var format = opts.format,\n          linearFiltering = opts.linearFiltering;\n      var supported = true;\n\n      if (format) {\n        supported = supported && isFormatSupported(gl, format);\n        supported = supported && (!linearFiltering || isLinearFilteringSupported(gl, format));\n      }\n\n      return supported;\n    }\n  }]);\n\n  function Texture(gl, props) {\n    var _this;\n\n    _classCallCheck(this, Texture);\n\n    var _props$id = props.id,\n        id = _props$id === void 0 ? uid('texture') : _props$id,\n        handle = props.handle,\n        target = props.target;\n    _this = _super.call(this, gl, {\n      id: id,\n      handle: handle\n    });\n    _this.target = target;\n    _this.textureUnit = undefined;\n    _this.loaded = false;\n    _this.width = undefined;\n    _this.height = undefined;\n    _this.depth = undefined;\n    _this.format = undefined;\n    _this.type = undefined;\n    _this.dataFormat = undefined;\n    _this.border = undefined;\n    _this.textureUnit = undefined;\n    _this.mipmaps = undefined;\n    return _this;\n  }\n\n  _createClass(Texture, [{\n    key: \"toString\",\n    value: function toString() {\n      return \"Texture(\".concat(this.id, \",\").concat(this.width, \"x\").concat(this.height, \")\");\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize() {\n      var _this2 = this;\n\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var data = props.data;\n\n      if (data instanceof Promise) {\n        data.then(function (resolvedImageData) {\n          return _this2.initialize(Object.assign({}, props, {\n            pixels: resolvedImageData,\n            data: resolvedImageData\n          }));\n        });\n        return this;\n      }\n\n      var isVideo = typeof HTMLVideoElement !== 'undefined' && data instanceof HTMLVideoElement;\n\n      if (isVideo && data.readyState < HTMLVideoElement.HAVE_METADATA) {\n        this._video = null;\n        data.addEventListener('loadeddata', function () {\n          return _this2.initialize(props);\n        });\n        return this;\n      }\n\n      var _props$pixels = props.pixels,\n          pixels = _props$pixels === void 0 ? null : _props$pixels,\n          _props$format = props.format,\n          format = _props$format === void 0 ? 6408 : _props$format,\n          _props$border = props.border,\n          border = _props$border === void 0 ? 0 : _props$border,\n          _props$recreate = props.recreate,\n          recreate = _props$recreate === void 0 ? false : _props$recreate,\n          _props$parameters = props.parameters,\n          parameters = _props$parameters === void 0 ? {} : _props$parameters,\n          _props$pixelStore = props.pixelStore,\n          pixelStore = _props$pixelStore === void 0 ? {} : _props$pixelStore,\n          _props$textureUnit = props.textureUnit,\n          textureUnit = _props$textureUnit === void 0 ? undefined : _props$textureUnit;\n\n      if (!data) {\n        data = pixels;\n      }\n\n      var width = props.width,\n          height = props.height,\n          dataFormat = props.dataFormat,\n          type = props.type,\n          _props$compressed = props.compressed,\n          compressed = _props$compressed === void 0 ? false : _props$compressed,\n          _props$mipmaps = props.mipmaps,\n          mipmaps = _props$mipmaps === void 0 ? true : _props$mipmaps;\n      var _props$depth = props.depth,\n          depth = _props$depth === void 0 ? 0 : _props$depth;\n\n      var _this$_deduceParamete = this._deduceParameters({\n        format: format,\n        type: type,\n        dataFormat: dataFormat,\n        compressed: compressed,\n        data: data,\n        width: width,\n        height: height\n      });\n\n      width = _this$_deduceParamete.width;\n      height = _this$_deduceParamete.height;\n      compressed = _this$_deduceParamete.compressed;\n      dataFormat = _this$_deduceParamete.dataFormat;\n      type = _this$_deduceParamete.type;\n      this.width = width;\n      this.height = height;\n      this.depth = depth;\n      this.format = format;\n      this.type = type;\n      this.dataFormat = dataFormat;\n      this.border = border;\n      this.textureUnit = textureUnit;\n\n      if (Number.isFinite(this.textureUnit)) {\n        this.gl.activeTexture(33984 + this.textureUnit);\n        this.gl.bindTexture(this.target, this.handle);\n      }\n\n      if (mipmaps && this._isNPOT()) {\n        log.warn(\"texture: \".concat(this, \" is Non-Power-Of-Two, disabling mipmaping\"))();\n        mipmaps = false;\n\n        this._updateForNPOT(parameters);\n      }\n\n      this.mipmaps = mipmaps;\n      this.setImageData({\n        data: data,\n        width: width,\n        height: height,\n        depth: depth,\n        format: format,\n        type: type,\n        dataFormat: dataFormat,\n        border: border,\n        mipmaps: mipmaps,\n        parameters: pixelStore,\n        compressed: compressed\n      });\n\n      if (mipmaps) {\n        this.generateMipmap();\n      }\n\n      this.setParameters(parameters);\n\n      if (recreate) {\n        this.data = data;\n      }\n\n      if (isVideo) {\n        this._video = {\n          video: data,\n          parameters: parameters,\n          lastTime: data.readyState >= HTMLVideoElement.HAVE_CURRENT_DATA ? data.currentTime : -1\n        };\n      }\n\n      return this;\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      if (this._video) {\n        var _this$_video = this._video,\n            video = _this$_video.video,\n            parameters = _this$_video.parameters,\n            lastTime = _this$_video.lastTime;\n\n        if (lastTime === video.currentTime || video.readyState < HTMLVideoElement.HAVE_CURRENT_DATA) {\n          return;\n        }\n\n        this.setSubImageData({\n          data: video,\n          parameters: parameters\n        });\n\n        if (this.mipmaps) {\n          this.generateMipmap();\n        }\n\n        this._video.lastTime = video.currentTime;\n      }\n    }\n  }, {\n    key: \"resize\",\n    value: function resize(_ref) {\n      var height = _ref.height,\n          width = _ref.width,\n          _ref$mipmaps = _ref.mipmaps,\n          mipmaps = _ref$mipmaps === void 0 ? false : _ref$mipmaps;\n\n      if (width !== this.width || height !== this.height) {\n        return this.initialize({\n          width: width,\n          height: height,\n          format: this.format,\n          type: this.type,\n          dataFormat: this.dataFormat,\n          border: this.border,\n          mipmaps: mipmaps\n        });\n      }\n\n      return this;\n    }\n  }, {\n    key: \"generateMipmap\",\n    value: function generateMipmap() {\n      var _this3 = this;\n\n      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (this._isNPOT()) {\n        log.warn(\"texture: \".concat(this, \" is Non-Power-Of-Two, disabling mipmaping\"))();\n        return this;\n      }\n\n      this.mipmaps = true;\n      this.gl.bindTexture(this.target, this.handle);\n      withParameters(this.gl, params, function () {\n        _this3.gl.generateMipmap(_this3.target);\n      });\n      this.gl.bindTexture(this.target, null);\n      return this;\n    }\n  }, {\n    key: \"setImageData\",\n    value: function setImageData(options) {\n      this._trackDeallocatedMemory('Texture');\n\n      var _options$target = options.target,\n          target = _options$target === void 0 ? this.target : _options$target,\n          _options$pixels = options.pixels,\n          pixels = _options$pixels === void 0 ? null : _options$pixels,\n          _options$level = options.level,\n          level = _options$level === void 0 ? 0 : _options$level,\n          _options$format = options.format,\n          format = _options$format === void 0 ? this.format : _options$format,\n          _options$border = options.border,\n          border = _options$border === void 0 ? this.border : _options$border,\n          _options$offset = options.offset,\n          offset = _options$offset === void 0 ? 0 : _options$offset,\n          _options$parameters = options.parameters,\n          parameters = _options$parameters === void 0 ? {} : _options$parameters;\n      var _options$data = options.data,\n          data = _options$data === void 0 ? null : _options$data,\n          _options$type = options.type,\n          type = _options$type === void 0 ? this.type : _options$type,\n          _options$width = options.width,\n          width = _options$width === void 0 ? this.width : _options$width,\n          _options$height = options.height,\n          height = _options$height === void 0 ? this.height : _options$height,\n          _options$dataFormat = options.dataFormat,\n          dataFormat = _options$dataFormat === void 0 ? this.dataFormat : _options$dataFormat,\n          _options$compressed = options.compressed,\n          compressed = _options$compressed === void 0 ? false : _options$compressed;\n\n      if (!data) {\n        data = pixels;\n      }\n\n      var _this$_deduceParamete2 = this._deduceParameters({\n        format: format,\n        type: type,\n        dataFormat: dataFormat,\n        compressed: compressed,\n        data: data,\n        width: width,\n        height: height\n      });\n\n      type = _this$_deduceParamete2.type;\n      dataFormat = _this$_deduceParamete2.dataFormat;\n      compressed = _this$_deduceParamete2.compressed;\n      width = _this$_deduceParamete2.width;\n      height = _this$_deduceParamete2.height;\n      var gl = this.gl;\n      gl.bindTexture(this.target, this.handle);\n      var dataType = null;\n\n      var _this$_getDataType = this._getDataType({\n        data: data,\n        compressed: compressed\n      });\n\n      data = _this$_getDataType.data;\n      dataType = _this$_getDataType.dataType;\n      var gl2;\n      withParameters(this.gl, parameters, function () {\n        switch (dataType) {\n          case 'null':\n            gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data);\n            break;\n\n          case 'typed-array':\n            gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data, offset);\n            break;\n\n          case 'buffer':\n            gl2 = assertWebGL2Context(gl);\n            gl2.bindBuffer(35052, data.handle || data);\n            gl2.texImage2D(target, level, format, width, height, border, dataFormat, type, offset);\n            gl2.bindBuffer(35052, null);\n            break;\n\n          case 'browser-object':\n            if (isWebGL2(gl)) {\n              gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data);\n            } else {\n              gl.texImage2D(target, level, format, dataFormat, type, data);\n            }\n\n            break;\n\n          case 'compressed':\n            var _iterator = _createForOfIteratorHelper(data.entries()),\n                _step;\n\n            try {\n              for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                var _step$value = _slicedToArray(_step.value, 2),\n                    levelIndex = _step$value[0],\n                    levelData = _step$value[1];\n\n                gl.compressedTexImage2D(target, levelIndex, levelData.format, levelData.width, levelData.height, border, levelData.data);\n              }\n            } catch (err) {\n              _iterator.e(err);\n            } finally {\n              _iterator.f();\n            }\n\n            break;\n\n          default:\n            assert(false, 'Unknown image data type');\n        }\n      });\n\n      if (data && data.byteLength) {\n        this._trackAllocatedMemory(data.byteLength, 'Texture');\n      } else {\n        var channels = DATA_FORMAT_CHANNELS[this.dataFormat] || 4;\n        var channelSize = TYPE_SIZES[this.type] || 1;\n\n        this._trackAllocatedMemory(this.width * this.height * channels * channelSize, 'Texture');\n      }\n\n      this.loaded = true;\n      return this;\n    }\n  }, {\n    key: \"setSubImageData\",\n    value: function setSubImageData(_ref2) {\n      var _this4 = this;\n\n      var _ref2$target = _ref2.target,\n          target = _ref2$target === void 0 ? this.target : _ref2$target,\n          _ref2$pixels = _ref2.pixels,\n          pixels = _ref2$pixels === void 0 ? null : _ref2$pixels,\n          _ref2$data = _ref2.data,\n          data = _ref2$data === void 0 ? null : _ref2$data,\n          _ref2$x = _ref2.x,\n          x = _ref2$x === void 0 ? 0 : _ref2$x,\n          _ref2$y = _ref2.y,\n          y = _ref2$y === void 0 ? 0 : _ref2$y,\n          _ref2$width = _ref2.width,\n          width = _ref2$width === void 0 ? this.width : _ref2$width,\n          _ref2$height = _ref2.height,\n          height = _ref2$height === void 0 ? this.height : _ref2$height,\n          _ref2$level = _ref2.level,\n          level = _ref2$level === void 0 ? 0 : _ref2$level,\n          _ref2$format = _ref2.format,\n          format = _ref2$format === void 0 ? this.format : _ref2$format,\n          _ref2$type = _ref2.type,\n          type = _ref2$type === void 0 ? this.type : _ref2$type,\n          _ref2$dataFormat = _ref2.dataFormat,\n          dataFormat = _ref2$dataFormat === void 0 ? this.dataFormat : _ref2$dataFormat,\n          _ref2$compressed = _ref2.compressed,\n          compressed = _ref2$compressed === void 0 ? false : _ref2$compressed,\n          _ref2$offset = _ref2.offset,\n          offset = _ref2$offset === void 0 ? 0 : _ref2$offset,\n          _ref2$border = _ref2.border,\n          border = _ref2$border === void 0 ? this.border : _ref2$border,\n          _ref2$parameters = _ref2.parameters,\n          parameters = _ref2$parameters === void 0 ? {} : _ref2$parameters;\n\n      var _this$_deduceParamete3 = this._deduceParameters({\n        format: format,\n        type: type,\n        dataFormat: dataFormat,\n        compressed: compressed,\n        data: data,\n        width: width,\n        height: height\n      });\n\n      type = _this$_deduceParamete3.type;\n      dataFormat = _this$_deduceParamete3.dataFormat;\n      compressed = _this$_deduceParamete3.compressed;\n      width = _this$_deduceParamete3.width;\n      height = _this$_deduceParamete3.height;\n      assert(this.depth === 0, 'texSubImage not supported for 3D textures');\n\n      if (!data) {\n        data = pixels;\n      }\n\n      if (data && data.data) {\n        var ndarray = data;\n        data = ndarray.data;\n        width = ndarray.shape[0];\n        height = ndarray.shape[1];\n      }\n\n      if (data instanceof Buffer) {\n        data = data.handle;\n      }\n\n      this.gl.bindTexture(this.target, this.handle);\n      withParameters(this.gl, parameters, function () {\n        if (compressed) {\n          _this4.gl.compressedTexSubImage2D(target, level, x, y, width, height, format, data);\n        } else if (data === null) {\n          _this4.gl.texSubImage2D(target, level, x, y, width, height, dataFormat, type, null);\n        } else if (ArrayBuffer.isView(data)) {\n          _this4.gl.texSubImage2D(target, level, x, y, width, height, dataFormat, type, data, offset);\n        } else if (data instanceof WebGLBuffer) {\n          var gl2 = assertWebGL2Context(_this4.gl);\n          gl2.bindBuffer(35052, data);\n          gl2.texSubImage2D(target, level, x, y, width, height, dataFormat, type, offset);\n          gl2.bindBuffer(35052, null);\n        } else if (isWebGL2(_this4.gl)) {\n          var _gl = assertWebGL2Context(_this4.gl);\n\n          _gl.texSubImage2D(target, level, x, y, width, height, dataFormat, type, data);\n        } else {\n          _this4.gl.texSubImage2D(target, level, x, y, dataFormat, type, data);\n        }\n      });\n      this.gl.bindTexture(this.target, null);\n    }\n  }, {\n    key: \"copyFramebuffer\",\n    value: function copyFramebuffer() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      log.error('Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})')();\n      return null;\n    }\n  }, {\n    key: \"getActiveUnit\",\n    value: function getActiveUnit() {\n      return this.gl.getParameter(34016) - 33984;\n    }\n  }, {\n    key: \"bind\",\n    value: function bind() {\n      var textureUnit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.textureUnit;\n      var gl = this.gl;\n\n      if (textureUnit !== undefined) {\n        this.textureUnit = textureUnit;\n        gl.activeTexture(33984 + textureUnit);\n      }\n\n      gl.bindTexture(this.target, this.handle);\n      return textureUnit;\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind() {\n      var textureUnit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.textureUnit;\n      var gl = this.gl;\n\n      if (textureUnit !== undefined) {\n        this.textureUnit = textureUnit;\n        gl.activeTexture(33984 + textureUnit);\n      }\n\n      gl.bindTexture(this.target, null);\n      return textureUnit;\n    }\n  }, {\n    key: \"_getDataType\",\n    value: function _getDataType(_ref3) {\n      var data = _ref3.data,\n          _ref3$compressed = _ref3.compressed,\n          compressed = _ref3$compressed === void 0 ? false : _ref3$compressed;\n\n      if (compressed) {\n        return {\n          data: data,\n          dataType: 'compressed'\n        };\n      }\n\n      if (data === null) {\n        return {\n          data: data,\n          dataType: 'null'\n        };\n      }\n\n      if (ArrayBuffer.isView(data)) {\n        return {\n          data: data,\n          dataType: 'typed-array'\n        };\n      }\n\n      if (data instanceof Buffer) {\n        return {\n          data: data.handle,\n          dataType: 'buffer'\n        };\n      }\n\n      if (data instanceof WebGLBuffer) {\n        return {\n          data: data,\n          dataType: 'buffer'\n        };\n      }\n\n      return {\n        data: data,\n        dataType: 'browser-object'\n      };\n    }\n  }, {\n    key: \"_deduceParameters\",\n    value: function _deduceParameters(opts) {\n      var format = opts.format,\n          data = opts.data;\n      var width = opts.width,\n          height = opts.height,\n          dataFormat = opts.dataFormat,\n          type = opts.type,\n          compressed = opts.compressed;\n      var textureFormat = TEXTURE_FORMATS[format];\n      dataFormat = dataFormat || textureFormat && textureFormat.dataFormat;\n      type = type || textureFormat && textureFormat.types[0];\n      compressed = compressed || textureFormat && textureFormat.compressed;\n\n      var _this$_deduceImageSiz = this._deduceImageSize(data, width, height);\n\n      width = _this$_deduceImageSiz.width;\n      height = _this$_deduceImageSiz.height;\n      return {\n        dataFormat: dataFormat,\n        type: type,\n        compressed: compressed,\n        width: width,\n        height: height,\n        format: format,\n        data: data\n      };\n    }\n  }, {\n    key: \"_deduceImageSize\",\n    value: function _deduceImageSize(data, width, height) {\n      var size;\n\n      if (typeof ImageData !== 'undefined' && data instanceof ImageData) {\n        size = {\n          width: data.width,\n          height: data.height\n        };\n      } else if (typeof HTMLImageElement !== 'undefined' && data instanceof HTMLImageElement) {\n        size = {\n          width: data.naturalWidth,\n          height: data.naturalHeight\n        };\n      } else if (typeof HTMLCanvasElement !== 'undefined' && data instanceof HTMLCanvasElement) {\n        size = {\n          width: data.width,\n          height: data.height\n        };\n      } else if (typeof ImageBitmap !== 'undefined' && data instanceof ImageBitmap) {\n        size = {\n          width: data.width,\n          height: data.height\n        };\n      } else if (typeof HTMLVideoElement !== 'undefined' && data instanceof HTMLVideoElement) {\n        size = {\n          width: data.videoWidth,\n          height: data.videoHeight\n        };\n      } else if (!data) {\n        size = {\n          width: width >= 0 ? width : 1,\n          height: height >= 0 ? height : 1\n        };\n      } else {\n        size = {\n          width: width,\n          height: height\n        };\n      }\n\n      assert(size, 'Could not deduced texture size');\n      assert(width === undefined || size.width === width, 'Deduced texture width does not match supplied width');\n      assert(height === undefined || size.height === height, 'Deduced texture height does not match supplied height');\n      return size;\n    }\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createTexture();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteTexture(this.handle);\n\n      this._trackDeallocatedMemory('Texture');\n    }\n  }, {\n    key: \"_getParameter\",\n    value: function _getParameter(pname) {\n      switch (pname) {\n        case 4096:\n          return this.width;\n\n        case 4097:\n          return this.height;\n\n        default:\n          this.gl.bindTexture(this.target, this.handle);\n          var value = this.gl.getTexParameter(this.target, pname);\n          this.gl.bindTexture(this.target, null);\n          return value;\n      }\n    }\n  }, {\n    key: \"_setParameter\",\n    value: function _setParameter(pname, param) {\n      this.gl.bindTexture(this.target, this.handle);\n      param = this._getNPOTParam(pname, param);\n\n      switch (pname) {\n        case 33082:\n        case 33083:\n          this.gl.texParameterf(this.handle, pname, param);\n          break;\n\n        case 4096:\n        case 4097:\n          assert(false);\n          break;\n\n        default:\n          this.gl.texParameteri(this.target, pname, param);\n          break;\n      }\n\n      this.gl.bindTexture(this.target, null);\n      return this;\n    }\n  }, {\n    key: \"_isNPOT\",\n    value: function _isNPOT() {\n      if (isWebGL2(this.gl)) {\n        return false;\n      }\n\n      if (!this.width || !this.height) {\n        return false;\n      }\n\n      return !isPowerOfTwo(this.width) || !isPowerOfTwo(this.height);\n    }\n  }, {\n    key: \"_updateForNPOT\",\n    value: function _updateForNPOT(parameters) {\n      if (parameters[this.gl.TEXTURE_MIN_FILTER] === undefined) {\n        parameters[this.gl.TEXTURE_MIN_FILTER] = this.gl.LINEAR;\n      }\n\n      if (parameters[this.gl.TEXTURE_WRAP_S] === undefined) {\n        parameters[this.gl.TEXTURE_WRAP_S] = this.gl.CLAMP_TO_EDGE;\n      }\n\n      if (parameters[this.gl.TEXTURE_WRAP_T] === undefined) {\n        parameters[this.gl.TEXTURE_WRAP_T] = this.gl.CLAMP_TO_EDGE;\n      }\n    }\n  }, {\n    key: \"_getNPOTParam\",\n    value: function _getNPOTParam(pname, param) {\n      if (this._isNPOT()) {\n        switch (pname) {\n          case 10241:\n            if (NPOT_MIN_FILTERS.indexOf(param) === -1) {\n              param = 9729;\n            }\n\n            break;\n\n          case 10242:\n          case 10243:\n            if (param !== 33071) {\n              param = 33071;\n            }\n\n            break;\n\n          default:\n            break;\n        }\n      }\n\n      return param;\n    }\n  }]);\n\n  return Texture;\n}(Resource);\n\nexport { Texture as default };\n//# sourceMappingURL=texture.js.map","import { assert } from '../utils';\nvar pathPrefix = '';\nexport function setPathPrefix(prefix) {\n  pathPrefix = prefix;\n}\nexport function loadFile(url) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  assert(typeof url === 'string');\n  url = pathPrefix + url;\n  var dataType = options.dataType || 'text';\n  return fetch(url, options).then(function (res) {\n    return res[dataType]();\n  });\n}\nexport function loadImage(url, opts) {\n  assert(typeof url === 'string');\n  url = pathPrefix + url;\n  return new Promise(function (resolve, reject) {\n    try {\n      var image = new Image();\n\n      image.onload = function () {\n        return resolve(image);\n      };\n\n      image.onerror = function () {\n        return reject(new Error(\"Could not load image \".concat(url, \".\")));\n      };\n\n      image.crossOrigin = opts && opts.crossOrigin || 'anonymous';\n      image.src = url;\n    } catch (error) {\n      reject(error);\n    }\n  });\n}\n//# sourceMappingURL=load-file.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { assertWebGLContext } from '@luma.gl/gltools';\nimport Texture from './texture';\nimport { loadImage } from '../utils/load-file';\n\nvar Texture2D = function (_Texture) {\n  _inherits(Texture2D, _Texture);\n\n  var _super = _createSuper(Texture2D);\n\n  _createClass(Texture2D, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl, opts) {\n      return Texture.isSupported(gl, opts);\n    }\n  }]);\n\n  function Texture2D(gl) {\n    var _this;\n\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Texture2D);\n\n    assertWebGLContext(gl);\n\n    if (props instanceof Promise || typeof props === 'string') {\n      props = {\n        data: props\n      };\n    }\n\n    if (typeof props.data === 'string') {\n      props = Object.assign({}, props, {\n        data: loadImage(props.data)\n      });\n    }\n\n    _this = _super.call(this, gl, Object.assign({}, props, {\n      target: 3553\n    }));\n\n    _this.initialize(props);\n\n    Object.seal(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  return Texture2D;\n}(Texture);\n\nexport { Texture2D as default };\n//# sourceMappingURL=texture-2d.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _$33190$36012$;\n\nvar EXT_FLOAT_WEBGL2 = 'EXT_color_buffer_float';\nexport default (_$33190$36012$ = {}, _defineProperty(_$33190$36012$, 33189, {\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 33190, {\n  gl2: true,\n  bpp: 3\n}), _defineProperty(_$33190$36012$, 36012, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 36168, {\n  bpp: 1\n}), _defineProperty(_$33190$36012$, 34041, {\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 35056, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 36013, {\n  gl2: true,\n  bpp: 5\n}), _defineProperty(_$33190$36012$, 32854, {\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 36194, {\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 32855, {\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 33321, {\n  gl2: true,\n  bpp: 1\n}), _defineProperty(_$33190$36012$, 33330, {\n  gl2: true,\n  bpp: 1\n}), _defineProperty(_$33190$36012$, 33329, {\n  gl2: true,\n  bpp: 1\n}), _defineProperty(_$33190$36012$, 33332, {\n  gl2: true,\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 33331, {\n  gl2: true,\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 33334, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 33333, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 33323, {\n  gl2: true,\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 33336, {\n  gl2: true,\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 33335, {\n  gl2: true,\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 33338, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 33337, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 33340, {\n  gl2: true,\n  bpp: 8\n}), _defineProperty(_$33190$36012$, 33339, {\n  gl2: true,\n  bpp: 8\n}), _defineProperty(_$33190$36012$, 32849, {\n  gl2: true,\n  bpp: 3\n}), _defineProperty(_$33190$36012$, 32856, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 32857, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 36220, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 36238, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 36975, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 36214, {\n  gl2: true,\n  bpp: 8\n}), _defineProperty(_$33190$36012$, 36232, {\n  gl2: true,\n  bpp: 8\n}), _defineProperty(_$33190$36012$, 36226, {\n  gl2: true,\n  bpp: 16\n}), _defineProperty(_$33190$36012$, 36208, {\n  gl2: true,\n  bpp: 16\n}), _defineProperty(_$33190$36012$, 33325, {\n  gl2: EXT_FLOAT_WEBGL2,\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 33327, {\n  gl2: EXT_FLOAT_WEBGL2,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 34842, {\n  gl2: EXT_FLOAT_WEBGL2,\n  bpp: 8\n}), _defineProperty(_$33190$36012$, 33326, {\n  gl2: EXT_FLOAT_WEBGL2,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 33328, {\n  gl2: EXT_FLOAT_WEBGL2,\n  bpp: 8\n}), _defineProperty(_$33190$36012$, 34836, {\n  gl2: EXT_FLOAT_WEBGL2,\n  bpp: 16\n}), _defineProperty(_$33190$36012$, 35898, {\n  gl2: EXT_FLOAT_WEBGL2,\n  bpp: 4\n}), _$33190$36012$);\n//# sourceMappingURL=renderbuffer-formats.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport Resource from './resource';\nimport RENDERBUFFER_FORMATS from './renderbuffer-formats';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { assert } from '../utils';\n\nfunction isFormatSupported(gl, format, formats) {\n  var info = formats[format];\n\n  if (!info) {\n    return false;\n  }\n\n  var value = isWebGL2(gl) ? info.gl2 || info.gl1 : info.gl1;\n\n  if (typeof value === 'string') {\n    return gl.getExtension(value);\n  }\n\n  return value;\n}\n\nvar Renderbuffer = function (_Resource) {\n  _inherits(Renderbuffer, _Resource);\n\n  var _super = _createSuper(Renderbuffer);\n\n  _createClass(Renderbuffer, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        format: null\n      },\n          format = _ref.format;\n\n      return !format || isFormatSupported(gl, format, RENDERBUFFER_FORMATS);\n    }\n  }, {\n    key: \"getSamplesForFormat\",\n    value: function getSamplesForFormat(gl, _ref2) {\n      var format = _ref2.format;\n      return gl.getInternalformatParameter(36161, format, 32937);\n    }\n  }]);\n\n  function Renderbuffer(gl) {\n    var _this;\n\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Renderbuffer);\n\n    _this = _super.call(this, gl, opts);\n\n    _this.initialize(opts);\n\n    Object.seal(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Renderbuffer, [{\n    key: \"initialize\",\n    value: function initialize(_ref3) {\n      var format = _ref3.format,\n          _ref3$width = _ref3.width,\n          width = _ref3$width === void 0 ? 1 : _ref3$width,\n          _ref3$height = _ref3.height,\n          height = _ref3$height === void 0 ? 1 : _ref3$height,\n          _ref3$samples = _ref3.samples,\n          samples = _ref3$samples === void 0 ? 0 : _ref3$samples;\n      assert(format, 'Needs format');\n\n      this._trackDeallocatedMemory();\n\n      this.gl.bindRenderbuffer(36161, this.handle);\n\n      if (samples !== 0 && isWebGL2(this.gl)) {\n        this.gl.renderbufferStorageMultisample(36161, samples, format, width, height);\n      } else {\n        this.gl.renderbufferStorage(36161, format, width, height);\n      }\n\n      this.format = format;\n      this.width = width;\n      this.height = height;\n      this.samples = samples;\n\n      this._trackAllocatedMemory(this.width * this.height * (this.samples || 1) * RENDERBUFFER_FORMATS[this.format].bpp);\n\n      return this;\n    }\n  }, {\n    key: \"resize\",\n    value: function resize(_ref4) {\n      var width = _ref4.width,\n          height = _ref4.height;\n\n      if (width !== this.width || height !== this.height) {\n        return this.initialize({\n          width: width,\n          height: height,\n          format: this.format,\n          samples: this.samples\n        });\n      }\n\n      return this;\n    }\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createRenderbuffer();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteRenderbuffer(this.handle);\n\n      this._trackDeallocatedMemory();\n    }\n  }, {\n    key: \"_bindHandle\",\n    value: function _bindHandle(handle) {\n      this.gl.bindRenderbuffer(36161, handle);\n    }\n  }, {\n    key: \"_syncHandle\",\n    value: function _syncHandle(handle) {\n      this.format = this.getParameter(36164);\n      this.width = this.getParameter(36162);\n      this.height = this.getParameter(36163);\n      this.samples = this.getParameter(36011);\n    }\n  }, {\n    key: \"_getParameter\",\n    value: function _getParameter(pname) {\n      this.gl.bindRenderbuffer(36161, this.handle);\n      var value = this.gl.getRenderbufferParameter(36161, pname);\n      return value;\n    }\n  }]);\n\n  return Renderbuffer;\n}(Resource);\n\nexport { Renderbuffer as default };\n//# sourceMappingURL=renderbuffer.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { assertWebGL2Context, withParameters } from '@luma.gl/gltools';\nimport { assert } from '../utils';\nvar GL_DEPTH_BUFFER_BIT = 0x00000100;\nvar GL_STENCIL_BUFFER_BIT = 0x00000400;\nvar GL_COLOR_BUFFER_BIT = 0x00004000;\nvar GL_COLOR = 0x1800;\nvar GL_DEPTH = 0x1801;\nvar GL_STENCIL = 0x1802;\nvar GL_DEPTH_STENCIL = 0x84f9;\nvar ERR_ARGUMENTS = 'clear: bad arguments';\nexport function clear(gl) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$framebuffer = _ref.framebuffer,\n      framebuffer = _ref$framebuffer === void 0 ? null : _ref$framebuffer,\n      _ref$color = _ref.color,\n      color = _ref$color === void 0 ? null : _ref$color,\n      _ref$depth = _ref.depth,\n      depth = _ref$depth === void 0 ? null : _ref$depth,\n      _ref$stencil = _ref.stencil,\n      stencil = _ref$stencil === void 0 ? null : _ref$stencil;\n\n  var parameters = {};\n\n  if (framebuffer) {\n    parameters.framebuffer = framebuffer;\n  }\n\n  var clearFlags = 0;\n\n  if (color) {\n    clearFlags |= GL_COLOR_BUFFER_BIT;\n\n    if (color !== true) {\n      parameters.clearColor = color;\n    }\n  }\n\n  if (depth) {\n    clearFlags |= GL_DEPTH_BUFFER_BIT;\n\n    if (depth !== true) {\n      parameters.clearDepth = depth;\n    }\n  }\n\n  if (stencil) {\n    clearFlags |= GL_STENCIL_BUFFER_BIT;\n\n    if (depth !== true) {\n      parameters.clearStencil = depth;\n    }\n  }\n\n  assert(clearFlags !== 0, ERR_ARGUMENTS);\n  withParameters(gl, parameters, function () {\n    gl.clear(clearFlags);\n  });\n}\nexport function clearBuffer(gl) {\n  var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref2$framebuffer = _ref2.framebuffer,\n      framebuffer = _ref2$framebuffer === void 0 ? null : _ref2$framebuffer,\n      _ref2$buffer = _ref2.buffer,\n      buffer = _ref2$buffer === void 0 ? GL_COLOR : _ref2$buffer,\n      _ref2$drawBuffer = _ref2.drawBuffer,\n      drawBuffer = _ref2$drawBuffer === void 0 ? 0 : _ref2$drawBuffer,\n      _ref2$value = _ref2.value,\n      value = _ref2$value === void 0 ? [0, 0, 0, 0] : _ref2$value;\n\n  assertWebGL2Context(gl);\n  withParameters(gl, {\n    framebuffer: framebuffer\n  }, function () {\n    switch (buffer) {\n      case GL_COLOR:\n        switch (value.constructor) {\n          case Int32Array:\n            gl.clearBufferiv(buffer, drawBuffer, value);\n            break;\n\n          case Uint32Array:\n            gl.clearBufferuiv(buffer, drawBuffer, value);\n            break;\n\n          case Float32Array:\n          default:\n            gl.clearBufferfv(buffer, drawBuffer, value);\n        }\n\n        break;\n\n      case GL_DEPTH:\n        gl.clearBufferfv(GL_DEPTH, 0, [value]);\n        break;\n\n      case GL_STENCIL:\n        gl.clearBufferiv(GL_STENCIL, 0, [value]);\n        break;\n\n      case GL_DEPTH_STENCIL:\n        var _value = _slicedToArray(value, 2),\n            depth = _value[0],\n            stencil = _value[1];\n\n        gl.clearBufferfi(GL_DEPTH_STENCIL, 0, depth, stencil);\n        break;\n\n      default:\n        assert(false, ERR_ARGUMENTS);\n    }\n  });\n}\n//# sourceMappingURL=clear.js.map","import { assert } from '../utils';\nexport function glFormatToComponents(format) {\n  switch (format) {\n    case 6406:\n    case 33326:\n    case 6403:\n      return 1;\n\n    case 33328:\n    case 33319:\n      return 2;\n\n    case 6407:\n    case 34837:\n      return 3;\n\n    case 6408:\n    case 34836:\n      return 4;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function glTypeToBytes(type) {\n  switch (type) {\n    case 5121:\n      return 1;\n\n    case 33635:\n    case 32819:\n    case 32820:\n      return 2;\n\n    case 5126:\n      return 4;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\n//# sourceMappingURL=format-utils.js.map","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { log, assertWebGLContext } from '@luma.gl/gltools';\nimport Texture from './texture';\nvar FACES = [34069, 34070, 34071, 34072, 34073, 34074];\n\nvar TextureCube = function (_Texture) {\n  _inherits(TextureCube, _Texture);\n\n  var _super = _createSuper(TextureCube);\n\n  function TextureCube(gl) {\n    var _this;\n\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, TextureCube);\n\n    assertWebGLContext(gl);\n    _this = _super.call(this, gl, Object.assign({}, props, {\n      target: 34067\n    }));\n\n    _this.initialize(props);\n\n    Object.seal(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(TextureCube, [{\n    key: \"initialize\",\n    value: function initialize() {\n      var _this2 = this;\n\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _props$mipmaps = props.mipmaps,\n          mipmaps = _props$mipmaps === void 0 ? true : _props$mipmaps,\n          _props$parameters = props.parameters,\n          parameters = _props$parameters === void 0 ? {} : _props$parameters;\n      this.opts = props;\n      this.setCubeMapImageData(props).then(function () {\n        _this2.loaded = true;\n\n        if (mipmaps) {\n          _this2.generateMipmap(props);\n        }\n\n        _this2.setParameters(parameters);\n      });\n      return this;\n    }\n  }, {\n    key: \"subImage\",\n    value: function subImage(_ref) {\n      var face = _ref.face,\n          data = _ref.data,\n          _ref$x = _ref.x,\n          x = _ref$x === void 0 ? 0 : _ref$x,\n          _ref$y = _ref.y,\n          y = _ref$y === void 0 ? 0 : _ref$y,\n          _ref$mipmapLevel = _ref.mipmapLevel,\n          mipmapLevel = _ref$mipmapLevel === void 0 ? 0 : _ref$mipmapLevel;\n      return this._subImage({\n        target: face,\n        data: data,\n        x: x,\n        y: y,\n        mipmapLevel: mipmapLevel\n      });\n    }\n  }, {\n    key: \"setCubeMapImageData\",\n    value: function () {\n      var _setCubeMapImageData = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(_ref2) {\n        var _this3 = this;\n\n        var width, height, pixels, data, _ref2$border, border, _ref2$format, format, _ref2$type, type, gl, imageDataMap, resolvedFaces;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                width = _ref2.width, height = _ref2.height, pixels = _ref2.pixels, data = _ref2.data, _ref2$border = _ref2.border, border = _ref2$border === void 0 ? 0 : _ref2$border, _ref2$format = _ref2.format, format = _ref2$format === void 0 ? 6408 : _ref2$format, _ref2$type = _ref2.type, type = _ref2$type === void 0 ? 5121 : _ref2$type;\n                gl = this.gl;\n                imageDataMap = pixels || data;\n                _context.next = 5;\n                return Promise.all(FACES.map(function (face) {\n                  var facePixels = imageDataMap[face];\n                  return Promise.all(Array.isArray(facePixels) ? facePixels : [facePixels]);\n                }));\n\n              case 5:\n                resolvedFaces = _context.sent;\n                this.bind();\n                FACES.forEach(function (face, index) {\n                  if (resolvedFaces[index].length > 1 && _this3.opts.mipmaps !== false) {\n                    log.warn(\"\".concat(_this3.id, \" has mipmap and multiple LODs.\"))();\n                  }\n\n                  resolvedFaces[index].forEach(function (image, lodLevel) {\n                    if (width && height) {\n                      gl.texImage2D(face, lodLevel, format, width, height, border, format, type, image);\n                    } else {\n                      gl.texImage2D(face, lodLevel, format, format, type, image);\n                    }\n                  });\n                });\n                this.unbind();\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function setCubeMapImageData(_x) {\n        return _setCubeMapImageData.apply(this, arguments);\n      }\n\n      return setCubeMapImageData;\n    }()\n  }, {\n    key: \"setImageDataForFace\",\n    value: function setImageDataForFace(options) {\n      var _this4 = this;\n\n      var face = options.face,\n          width = options.width,\n          height = options.height,\n          pixels = options.pixels,\n          data = options.data,\n          _options$border = options.border,\n          border = _options$border === void 0 ? 0 : _options$border,\n          _options$format = options.format,\n          format = _options$format === void 0 ? 6408 : _options$format,\n          _options$type = options.type,\n          type = _options$type === void 0 ? 5121 : _options$type;\n      var gl = this.gl;\n      var imageData = pixels || data;\n      this.bind();\n\n      if (imageData instanceof Promise) {\n        imageData.then(function (resolvedImageData) {\n          return _this4.setImageDataForFace(Object.assign({}, options, {\n            face: face,\n            data: resolvedImageData,\n            pixels: resolvedImageData\n          }));\n        });\n      } else if (this.width || this.height) {\n        gl.texImage2D(face, 0, format, width, height, border, format, type, imageData);\n      } else {\n        gl.texImage2D(face, 0, format, format, type, imageData);\n      }\n\n      return this;\n    }\n  }]);\n\n  return TextureCube;\n}(Texture);\n\nexport { TextureCube as default };\nTextureCube.FACES = FACES;\n//# sourceMappingURL=texture-cube.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { isWebGL2, assertWebGL2Context, withParameters } from '@luma.gl/gltools';\nimport Texture from './texture';\nimport { DATA_FORMAT_CHANNELS, TYPE_SIZES } from './texture-formats';\nimport Buffer from './buffer';\n\nvar Texture3D = function (_Texture) {\n  _inherits(Texture3D, _Texture);\n\n  var _super = _createSuper(Texture3D);\n\n  _createClass(Texture3D, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      return isWebGL2(gl);\n    }\n  }]);\n\n  function Texture3D(gl) {\n    var _this;\n\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Texture3D);\n\n    assertWebGL2Context(gl);\n    props = Object.assign({\n      depth: 1\n    }, props, {\n      target: 32879,\n      unpackFlipY: false\n    });\n    _this = _super.call(this, gl, props);\n\n    _this.initialize(props);\n\n    Object.seal(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Texture3D, [{\n    key: \"setImageData\",\n    value: function setImageData(_ref) {\n      var _this2 = this;\n\n      var _ref$level = _ref.level,\n          level = _ref$level === void 0 ? 0 : _ref$level,\n          _ref$dataFormat = _ref.dataFormat,\n          dataFormat = _ref$dataFormat === void 0 ? 6408 : _ref$dataFormat,\n          width = _ref.width,\n          height = _ref.height,\n          _ref$depth = _ref.depth,\n          depth = _ref$depth === void 0 ? 1 : _ref$depth,\n          _ref$border = _ref.border,\n          border = _ref$border === void 0 ? 0 : _ref$border,\n          format = _ref.format,\n          _ref$type = _ref.type,\n          type = _ref$type === void 0 ? 5121 : _ref$type,\n          _ref$offset = _ref.offset,\n          offset = _ref$offset === void 0 ? 0 : _ref$offset,\n          data = _ref.data,\n          _ref$parameters = _ref.parameters,\n          parameters = _ref$parameters === void 0 ? {} : _ref$parameters;\n\n      this._trackDeallocatedMemory('Texture');\n\n      this.gl.bindTexture(this.target, this.handle);\n      withParameters(this.gl, parameters, function () {\n        if (ArrayBuffer.isView(data)) {\n          _this2.gl.texImage3D(_this2.target, level, dataFormat, width, height, depth, border, format, type, data);\n        }\n\n        if (data instanceof Buffer) {\n          _this2.gl.bindBuffer(35052, data.handle);\n\n          _this2.gl.texImage3D(_this2.target, level, dataFormat, width, height, depth, border, format, type, offset);\n        }\n      });\n\n      if (data && data.byteLength) {\n        this._trackAllocatedMemory(data.byteLength, 'Texture');\n      } else {\n        var channels = DATA_FORMAT_CHANNELS[this.dataFormat] || 4;\n        var channelSize = TYPE_SIZES[this.type] || 1;\n\n        this._trackAllocatedMemory(this.width * this.height * this.depth * channels * channelSize, 'Texture');\n      }\n\n      this.loaded = true;\n      return this;\n    }\n  }]);\n\n  return Texture3D;\n}(Texture);\n\nexport { Texture3D as default };\n//# sourceMappingURL=texture-3d.js.map","import Buffer from './buffer';\nimport Framebuffer from './framebuffer';\nimport Texture from './texture';\nimport { assertWebGL2Context, withParameters, log } from '@luma.gl/gltools';\nimport { flipRows, scalePixels } from '../webgl-utils';\nimport { getTypedArrayFromGLType, getGLTypeFromTypedArray } from '../webgl-utils/typed-array-utils';\nimport { glFormatToComponents, glTypeToBytes } from '../webgl-utils/format-utils';\nimport { toFramebuffer } from '../webgl-utils/texture-utils';\nimport { assert } from '../utils';\nexport function readPixelsToArray(source) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _options$sourceX = options.sourceX,\n      sourceX = _options$sourceX === void 0 ? 0 : _options$sourceX,\n      _options$sourceY = options.sourceY,\n      sourceY = _options$sourceY === void 0 ? 0 : _options$sourceY,\n      _options$sourceFormat = options.sourceFormat,\n      sourceFormat = _options$sourceFormat === void 0 ? 6408 : _options$sourceFormat;\n  var _options$sourceAttach = options.sourceAttachment,\n      sourceAttachment = _options$sourceAttach === void 0 ? 36064 : _options$sourceAttach,\n      _options$target = options.target,\n      target = _options$target === void 0 ? null : _options$target,\n      sourceWidth = options.sourceWidth,\n      sourceHeight = options.sourceHeight,\n      sourceType = options.sourceType;\n\n  var _getFramebuffer = getFramebuffer(source),\n      framebuffer = _getFramebuffer.framebuffer,\n      deleteFramebuffer = _getFramebuffer.deleteFramebuffer;\n\n  assert(framebuffer);\n  var gl = framebuffer.gl,\n      handle = framebuffer.handle,\n      attachments = framebuffer.attachments;\n  sourceWidth = sourceWidth || framebuffer.width;\n  sourceHeight = sourceHeight || framebuffer.height;\n\n  if (sourceAttachment === 36064 && handle === null) {\n    sourceAttachment = 1028;\n  }\n\n  assert(attachments[sourceAttachment]);\n  sourceType = sourceType || attachments[sourceAttachment].type;\n  target = getPixelArray(target, sourceType, sourceFormat, sourceWidth, sourceHeight);\n  sourceType = sourceType || getGLTypeFromTypedArray(target);\n  var prevHandle = gl.bindFramebuffer(36160, handle);\n  gl.readPixels(sourceX, sourceY, sourceWidth, sourceHeight, sourceFormat, sourceType, target);\n  gl.bindFramebuffer(36160, prevHandle || null);\n\n  if (deleteFramebuffer) {\n    framebuffer[\"delete\"]();\n  }\n\n  return target;\n}\nexport function readPixelsToBuffer(source, _ref) {\n  var _ref$sourceX = _ref.sourceX,\n      sourceX = _ref$sourceX === void 0 ? 0 : _ref$sourceX,\n      _ref$sourceY = _ref.sourceY,\n      sourceY = _ref$sourceY === void 0 ? 0 : _ref$sourceY,\n      _ref$sourceFormat = _ref.sourceFormat,\n      sourceFormat = _ref$sourceFormat === void 0 ? 6408 : _ref$sourceFormat,\n      _ref$target = _ref.target,\n      target = _ref$target === void 0 ? null : _ref$target,\n      _ref$targetByteOffset = _ref.targetByteOffset,\n      targetByteOffset = _ref$targetByteOffset === void 0 ? 0 : _ref$targetByteOffset,\n      sourceWidth = _ref.sourceWidth,\n      sourceHeight = _ref.sourceHeight,\n      sourceType = _ref.sourceType;\n\n  var _getFramebuffer2 = getFramebuffer(source),\n      framebuffer = _getFramebuffer2.framebuffer,\n      deleteFramebuffer = _getFramebuffer2.deleteFramebuffer;\n\n  assert(framebuffer);\n  sourceWidth = sourceWidth || framebuffer.width;\n  sourceHeight = sourceHeight || framebuffer.height;\n  var gl2 = assertWebGL2Context(framebuffer.gl);\n  sourceType = sourceType || (target ? target.type : 5121);\n\n  if (!target) {\n    var components = glFormatToComponents(sourceFormat);\n    var byteCount = glTypeToBytes(sourceType);\n    var byteLength = targetByteOffset + sourceWidth * sourceHeight * components * byteCount;\n    target = new Buffer(gl2, {\n      byteLength: byteLength,\n      accessor: {\n        type: sourceType,\n        size: components\n      }\n    });\n  }\n\n  target.bind({\n    target: 35051\n  });\n  withParameters(gl2, {\n    framebuffer: framebuffer\n  }, function () {\n    gl2.readPixels(sourceX, sourceY, sourceWidth, sourceHeight, sourceFormat, sourceType, targetByteOffset);\n  });\n  target.unbind({\n    target: 35051\n  });\n\n  if (deleteFramebuffer) {\n    framebuffer[\"delete\"]();\n  }\n\n  return target;\n}\nexport function copyToDataUrl(source) {\n  var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref2$sourceAttachmen = _ref2.sourceAttachment,\n      sourceAttachment = _ref2$sourceAttachmen === void 0 ? 36064 : _ref2$sourceAttachmen,\n      _ref2$targetMaxHeight = _ref2.targetMaxHeight,\n      targetMaxHeight = _ref2$targetMaxHeight === void 0 ? Number.MAX_SAFE_INTEGER : _ref2$targetMaxHeight;\n\n  var data = readPixelsToArray(source, {\n    sourceAttachment: sourceAttachment\n  });\n  var width = source.width,\n      height = source.height;\n\n  while (height > targetMaxHeight) {\n    var _scalePixels = scalePixels({\n      data: data,\n      width: width,\n      height: height\n    });\n\n    data = _scalePixels.data;\n    width = _scalePixels.width;\n    height = _scalePixels.height;\n  }\n\n  flipRows({\n    data: data,\n    width: width,\n    height: height\n  });\n  var canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  var context = canvas.getContext('2d');\n  var imageData = context.createImageData(width, height);\n  imageData.data.set(data);\n  context.putImageData(imageData, 0, 0);\n  return canvas.toDataURL();\n}\nexport function copyToImage(source) {\n  var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref3$sourceAttachmen = _ref3.sourceAttachment,\n      sourceAttachment = _ref3$sourceAttachmen === void 0 ? 36064 : _ref3$sourceAttachmen,\n      _ref3$targetImage = _ref3.targetImage,\n      targetImage = _ref3$targetImage === void 0 ? null : _ref3$targetImage;\n\n  var dataUrl = copyToDataUrl(source, {\n    sourceAttachment: sourceAttachment\n  });\n  targetImage = targetImage || new Image();\n  targetImage.src = dataUrl;\n  return targetImage;\n}\nexport function copyToTexture(source, target) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var _options$sourceX2 = options.sourceX,\n      sourceX = _options$sourceX2 === void 0 ? 0 : _options$sourceX2,\n      _options$sourceY2 = options.sourceY,\n      sourceY = _options$sourceY2 === void 0 ? 0 : _options$sourceY2,\n      _options$targetMipmap = options.targetMipmaplevel,\n      targetMipmaplevel = _options$targetMipmap === void 0 ? 0 : _options$targetMipmap,\n      _options$targetIntern = options.targetInternalFormat,\n      targetInternalFormat = _options$targetIntern === void 0 ? 6408 : _options$targetIntern;\n  var targetX = options.targetX,\n      targetY = options.targetY,\n      targetZ = options.targetZ,\n      width = options.width,\n      height = options.height;\n\n  var _getFramebuffer3 = getFramebuffer(source),\n      framebuffer = _getFramebuffer3.framebuffer,\n      deleteFramebuffer = _getFramebuffer3.deleteFramebuffer;\n\n  assert(framebuffer);\n  var gl = framebuffer.gl,\n      handle = framebuffer.handle;\n  var isSubCopy = typeof targetX !== 'undefined' || typeof targetY !== 'undefined' || typeof targetZ !== 'undefined';\n  targetX = targetX || 0;\n  targetY = targetY || 0;\n  targetZ = targetZ || 0;\n  var prevHandle = gl.bindFramebuffer(36160, handle);\n  assert(target);\n  var texture = null;\n\n  if (target instanceof Texture) {\n    texture = target;\n    width = Number.isFinite(width) ? width : texture.width;\n    height = Number.isFinite(height) ? height : texture.height;\n    texture.bind(0);\n    target = texture.target;\n  }\n\n  if (!isSubCopy) {\n    gl.copyTexImage2D(target, targetMipmaplevel, targetInternalFormat, sourceX, sourceY, width, height, 0);\n  } else {\n    switch (target) {\n      case 3553:\n      case 34067:\n        gl.copyTexSubImage2D(target, targetMipmaplevel, targetX, targetY, sourceX, sourceY, width, height);\n        break;\n\n      case 35866:\n      case 32879:\n        var gl2 = assertWebGL2Context(gl);\n        gl2.copyTexSubImage3D(target, targetMipmaplevel, targetX, targetY, targetZ, sourceX, sourceY, width, height);\n        break;\n\n      default:\n    }\n  }\n\n  if (texture) {\n    texture.unbind();\n  }\n\n  gl.bindFramebuffer(36160, prevHandle || null);\n\n  if (deleteFramebuffer) {\n    framebuffer[\"delete\"]();\n  }\n\n  return texture;\n}\nexport function blit(source, target) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var _options$sourceX3 = options.sourceX0,\n      sourceX0 = _options$sourceX3 === void 0 ? 0 : _options$sourceX3,\n      _options$sourceY3 = options.sourceY0,\n      sourceY0 = _options$sourceY3 === void 0 ? 0 : _options$sourceY3,\n      _options$targetX = options.targetX0,\n      targetX0 = _options$targetX === void 0 ? 0 : _options$targetX,\n      _options$targetY = options.targetY0,\n      targetY0 = _options$targetY === void 0 ? 0 : _options$targetY,\n      _options$color = options.color,\n      color = _options$color === void 0 ? true : _options$color,\n      _options$depth = options.depth,\n      depth = _options$depth === void 0 ? false : _options$depth,\n      _options$stencil = options.stencil,\n      stencil = _options$stencil === void 0 ? false : _options$stencil,\n      _options$filter = options.filter,\n      filter = _options$filter === void 0 ? 9728 : _options$filter;\n  var sourceX1 = options.sourceX1,\n      sourceY1 = options.sourceY1,\n      targetX1 = options.targetX1,\n      targetY1 = options.targetY1,\n      _options$sourceAttach2 = options.sourceAttachment,\n      sourceAttachment = _options$sourceAttach2 === void 0 ? 36064 : _options$sourceAttach2,\n      _options$mask = options.mask,\n      mask = _options$mask === void 0 ? 0 : _options$mask;\n\n  var _getFramebuffer4 = getFramebuffer(source),\n      srcFramebuffer = _getFramebuffer4.framebuffer,\n      deleteSrcFramebuffer = _getFramebuffer4.deleteFramebuffer;\n\n  var _getFramebuffer5 = getFramebuffer(target),\n      dstFramebuffer = _getFramebuffer5.framebuffer,\n      deleteDstFramebuffer = _getFramebuffer5.deleteFramebuffer;\n\n  assert(srcFramebuffer);\n  assert(dstFramebuffer);\n  var gl = dstFramebuffer.gl,\n      handle = dstFramebuffer.handle,\n      width = dstFramebuffer.width,\n      height = dstFramebuffer.height,\n      readBuffer = dstFramebuffer.readBuffer;\n  var gl2 = assertWebGL2Context(gl);\n\n  if (!srcFramebuffer.handle && sourceAttachment === 36064) {\n    sourceAttachment = 1028;\n  }\n\n  if (color) {\n    mask |= 16384;\n  }\n\n  if (depth) {\n    mask |= 256;\n  }\n\n  if (stencil) {\n    mask |= 1024;\n  }\n\n  if (deleteSrcFramebuffer || deleteDstFramebuffer) {\n    if (mask & (256 | 1024)) {\n      mask = 16384;\n      log.warn('Blitting from or into a Texture object, forcing mask to GL.COLOR_BUFFER_BIT')();\n    }\n  }\n\n  assert(mask);\n  sourceX1 = sourceX1 === undefined ? srcFramebuffer.width : sourceX1;\n  sourceY1 = sourceY1 === undefined ? srcFramebuffer.height : sourceY1;\n  targetX1 = targetX1 === undefined ? width : targetX1;\n  targetY1 = targetY1 === undefined ? height : targetY1;\n  var prevDrawHandle = gl.bindFramebuffer(36009, handle);\n  var prevReadHandle = gl.bindFramebuffer(36008, srcFramebuffer.handle);\n  gl2.readBuffer(sourceAttachment);\n  gl2.blitFramebuffer(sourceX0, sourceY0, sourceX1, sourceY1, targetX0, targetY0, targetX1, targetY1, mask, filter);\n  gl2.readBuffer(readBuffer);\n  gl2.bindFramebuffer(36008, prevReadHandle || null);\n  gl2.bindFramebuffer(36009, prevDrawHandle || null);\n\n  if (deleteSrcFramebuffer) {\n    srcFramebuffer[\"delete\"]();\n  }\n\n  if (deleteDstFramebuffer) {\n    dstFramebuffer[\"delete\"]();\n  }\n\n  return dstFramebuffer;\n}\n\nfunction getFramebuffer(source) {\n  if (!(source instanceof Framebuffer)) {\n    return {\n      framebuffer: toFramebuffer(source),\n      deleteFramebuffer: true\n    };\n  }\n\n  return {\n    framebuffer: source,\n    deleteFramebuffer: false\n  };\n}\n\nfunction getPixelArray(pixelArray, type, format, width, height) {\n  if (pixelArray) {\n    return pixelArray;\n  }\n\n  type = type || 5121;\n  var ArrayType = getTypedArrayFromGLType(type, {\n    clamped: false\n  });\n  var components = glFormatToComponents(format);\n  return new ArrayType(width * height * components);\n}\n//# sourceMappingURL=copy-and-blit.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Texture2D from '../classes/texture-2d';\nimport TextureCube from '../classes/texture-cube';\nimport Texture3D from '../classes/texture-3d';\nimport Framebuffer from '../classes/framebuffer';\nimport { assert } from '../utils';\nexport function cloneTextureFrom(refTexture, overrides) {\n  assert(refTexture instanceof Texture2D || refTexture instanceof TextureCube || refTexture instanceof Texture3D);\n  var TextureType = refTexture.constructor;\n  var gl = refTexture.gl,\n      width = refTexture.width,\n      height = refTexture.height,\n      format = refTexture.format,\n      type = refTexture.type,\n      dataFormat = refTexture.dataFormat,\n      border = refTexture.border,\n      mipmaps = refTexture.mipmaps;\n  var textureOptions = Object.assign({\n    width: width,\n    height: height,\n    format: format,\n    type: type,\n    dataFormat: dataFormat,\n    border: border,\n    mipmaps: mipmaps\n  }, overrides);\n  return new TextureType(gl, textureOptions);\n}\nexport function toFramebuffer(texture, opts) {\n  var gl = texture.gl,\n      width = texture.width,\n      height = texture.height,\n      id = texture.id;\n  var framebuffer = new Framebuffer(gl, Object.assign({}, opts, {\n    id: \"framebuffer-for-\".concat(id),\n    width: width,\n    height: height,\n    attachments: _defineProperty({}, 36064, texture)\n  }));\n  return framebuffer;\n}\n//# sourceMappingURL=texture-utils.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { getWebGL2Context, assertWebGL2Context, log as _log } from '@luma.gl/gltools';\nimport Resource from './resource';\nimport Texture2D from './texture-2d';\nimport Renderbuffer from './renderbuffer';\nimport { clear as _clear, clearBuffer } from './clear';\nimport { copyToDataUrl } from './copy-and-blit.js';\nimport { getFeatures } from '../features';\nimport { getKey } from '../webgl-utils';\nimport { assert } from '../utils';\nvar ERR_MULTIPLE_RENDERTARGETS = 'Multiple render targets not supported';\n\nvar Framebuffer = function (_Resource) {\n  _inherits(Framebuffer, _Resource);\n\n  var _super = _createSuper(Framebuffer);\n\n  _createClass(Framebuffer, [{\n    key: \"MAX_COLOR_ATTACHMENTS\",\n    get: function get() {\n      var gl2 = assertWebGL2Context(this.gl);\n      return gl2.getParameter(gl2.MAX_COLOR_ATTACHMENTS);\n    }\n  }, {\n    key: \"MAX_DRAW_BUFFERS\",\n    get: function get() {\n      var gl2 = assertWebGL2Context(this.gl);\n      return gl2.getParameter(gl2.MAX_DRAW_BUFFERS);\n    }\n  }], [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var colorBufferFloat = options.colorBufferFloat,\n          colorBufferHalfFloat = options.colorBufferHalfFloat;\n      var supported = true;\n\n      if (colorBufferFloat) {\n        supported = Boolean(gl.getExtension('EXT_color_buffer_float') || gl.getExtension('WEBGL_color_buffer_float') || gl.getExtension('OES_texture_float'));\n      }\n\n      if (colorBufferHalfFloat) {\n        supported = supported && Boolean(gl.getExtension('EXT_color_buffer_float') || gl.getExtension('EXT_color_buffer_half_float'));\n      }\n\n      return supported;\n    }\n  }, {\n    key: \"getDefaultFramebuffer\",\n    value: function getDefaultFramebuffer(gl) {\n      gl.luma = gl.luma || {};\n      gl.luma.defaultFramebuffer = gl.luma.defaultFramebuffer || new Framebuffer(gl, {\n        id: 'default-framebuffer',\n        handle: null,\n        attachments: {}\n      });\n      return gl.luma.defaultFramebuffer;\n    }\n  }]);\n\n  function Framebuffer(gl) {\n    var _this;\n\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Framebuffer);\n\n    _this = _super.call(this, gl, opts);\n    _this.width = null;\n    _this.height = null;\n    _this.attachments = {};\n    _this.readBuffer = 36064;\n    _this.drawBuffers = [36064];\n    _this.ownResources = [];\n\n    _this.initialize(opts);\n\n    Object.seal(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Framebuffer, [{\n    key: \"initialize\",\n    value: function initialize(_ref) {\n      var _ref$width = _ref.width,\n          width = _ref$width === void 0 ? 1 : _ref$width,\n          _ref$height = _ref.height,\n          height = _ref$height === void 0 ? 1 : _ref$height,\n          _ref$attachments = _ref.attachments,\n          attachments = _ref$attachments === void 0 ? null : _ref$attachments,\n          _ref$color = _ref.color,\n          color = _ref$color === void 0 ? true : _ref$color,\n          _ref$depth = _ref.depth,\n          depth = _ref$depth === void 0 ? true : _ref$depth,\n          _ref$stencil = _ref.stencil,\n          stencil = _ref$stencil === void 0 ? false : _ref$stencil,\n          _ref$check = _ref.check,\n          check = _ref$check === void 0 ? true : _ref$check,\n          _ref$readBuffer = _ref.readBuffer,\n          readBuffer = _ref$readBuffer === void 0 ? undefined : _ref$readBuffer,\n          _ref$drawBuffers = _ref.drawBuffers,\n          drawBuffers = _ref$drawBuffers === void 0 ? undefined : _ref$drawBuffers;\n      assert(width >= 0 && height >= 0, 'Width and height need to be integers');\n      this.width = width;\n      this.height = height;\n\n      if (attachments) {\n        for (var attachment in attachments) {\n          var target = attachments[attachment];\n          var object = Array.isArray(target) ? target[0] : target;\n          object.resize({\n            width: width,\n            height: height\n          });\n        }\n      } else {\n        attachments = this._createDefaultAttachments(color, depth, stencil, width, height);\n      }\n\n      this.update({\n        clearAttachments: true,\n        attachments: attachments,\n        readBuffer: readBuffer,\n        drawBuffers: drawBuffers\n      });\n\n      if (attachments && check) {\n        this.checkStatus();\n      }\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      var _iterator = _createForOfIteratorHelper(this.ownResources),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var resource = _step.value;\n          resource[\"delete\"]();\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      _get(_getPrototypeOf(Framebuffer.prototype), \"delete\", this).call(this);\n\n      return this;\n    }\n  }, {\n    key: \"update\",\n    value: function update(_ref2) {\n      var _ref2$attachments = _ref2.attachments,\n          attachments = _ref2$attachments === void 0 ? {} : _ref2$attachments,\n          readBuffer = _ref2.readBuffer,\n          drawBuffers = _ref2.drawBuffers,\n          _ref2$clearAttachment = _ref2.clearAttachments,\n          clearAttachments = _ref2$clearAttachment === void 0 ? false : _ref2$clearAttachment,\n          _ref2$resizeAttachmen = _ref2.resizeAttachments,\n          resizeAttachments = _ref2$resizeAttachmen === void 0 ? true : _ref2$resizeAttachmen;\n      this.attach(attachments, {\n        clearAttachments: clearAttachments,\n        resizeAttachments: resizeAttachments\n      });\n      var gl = this.gl;\n      var prevHandle = gl.bindFramebuffer(36160, this.handle);\n\n      if (readBuffer) {\n        this._setReadBuffer(readBuffer);\n      }\n\n      if (drawBuffers) {\n        this._setDrawBuffers(drawBuffers);\n      }\n\n      gl.bindFramebuffer(36160, prevHandle || null);\n      return this;\n    }\n  }, {\n    key: \"resize\",\n    value: function resize() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var width = options.width,\n          height = options.height;\n\n      if (this.handle === null) {\n        assert(width === undefined && height === undefined);\n        this.width = this.gl.drawingBufferWidth;\n        this.height = this.gl.drawingBufferHeight;\n        return this;\n      }\n\n      if (width === undefined) {\n        width = this.gl.drawingBufferWidth;\n      }\n\n      if (height === undefined) {\n        height = this.gl.drawingBufferHeight;\n      }\n\n      if (width !== this.width && height !== this.height) {\n        _log.log(2, \"Resizing framebuffer \".concat(this.id, \" to \").concat(width, \"x\").concat(height))();\n      }\n\n      for (var attachmentPoint in this.attachments) {\n        this.attachments[attachmentPoint].resize({\n          width: width,\n          height: height\n        });\n      }\n\n      this.width = width;\n      this.height = height;\n      return this;\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(attachments) {\n      var _this2 = this;\n\n      var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref3$clearAttachment = _ref3.clearAttachments,\n          clearAttachments = _ref3$clearAttachment === void 0 ? false : _ref3$clearAttachment,\n          _ref3$resizeAttachmen = _ref3.resizeAttachments,\n          resizeAttachments = _ref3$resizeAttachmen === void 0 ? true : _ref3$resizeAttachmen;\n\n      var newAttachments = {};\n\n      if (clearAttachments) {\n        Object.keys(this.attachments).forEach(function (key) {\n          newAttachments[key] = null;\n        });\n      }\n\n      Object.assign(newAttachments, attachments);\n      var prevHandle = this.gl.bindFramebuffer(36160, this.handle);\n\n      for (var key in newAttachments) {\n        assert(key !== undefined, 'Misspelled framebuffer binding point?');\n        var attachment = Number(key);\n        var descriptor = newAttachments[attachment];\n        var object = descriptor;\n\n        if (!object) {\n          this._unattach(attachment);\n        } else if (object instanceof Renderbuffer) {\n          this._attachRenderbuffer({\n            attachment: attachment,\n            renderbuffer: object\n          });\n        } else if (Array.isArray(descriptor)) {\n          var _descriptor = _slicedToArray(descriptor, 3),\n              texture = _descriptor[0],\n              _descriptor$ = _descriptor[1],\n              layer = _descriptor$ === void 0 ? 0 : _descriptor$,\n              _descriptor$2 = _descriptor[2],\n              level = _descriptor$2 === void 0 ? 0 : _descriptor$2;\n\n          object = texture;\n\n          this._attachTexture({\n            attachment: attachment,\n            texture: texture,\n            layer: layer,\n            level: level\n          });\n        } else {\n          this._attachTexture({\n            attachment: attachment,\n            texture: object,\n            layer: 0,\n            level: 0\n          });\n        }\n\n        if (resizeAttachments && object) {\n          object.resize({\n            width: this.width,\n            height: this.height\n          });\n        }\n      }\n\n      this.gl.bindFramebuffer(36160, prevHandle || null);\n      Object.assign(this.attachments, attachments);\n      Object.keys(this.attachments).filter(function (key) {\n        return !_this2.attachments[key];\n      }).forEach(function (key) {\n        delete _this2.attachments[key];\n      });\n    }\n  }, {\n    key: \"checkStatus\",\n    value: function checkStatus() {\n      var gl = this.gl;\n      var status = this.getStatus();\n\n      if (status !== 36053) {\n        throw new Error(_getFrameBufferStatus(status));\n      }\n\n      return this;\n    }\n  }, {\n    key: \"getStatus\",\n    value: function getStatus() {\n      var gl = this.gl;\n      var prevHandle = gl.bindFramebuffer(36160, this.handle);\n      var status = gl.checkFramebufferStatus(36160);\n      gl.bindFramebuffer(36160, prevHandle || null);\n      return status;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var color = options.color,\n          depth = options.depth,\n          stencil = options.stencil,\n          _options$drawBuffers = options.drawBuffers,\n          drawBuffers = _options$drawBuffers === void 0 ? [] : _options$drawBuffers;\n      var prevHandle = this.gl.bindFramebuffer(36160, this.handle);\n\n      if (color || depth || stencil) {\n        _clear(this.gl, {\n          color: color,\n          depth: depth,\n          stencil: stencil\n        });\n      }\n\n      drawBuffers.forEach(function (value, drawBuffer) {\n        clearBuffer({\n          drawBuffer: drawBuffer,\n          value: value\n        });\n      });\n      this.gl.bindFramebuffer(36160, prevHandle || null);\n      return this;\n    }\n  }, {\n    key: \"readPixels\",\n    value: function readPixels() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _log.error('Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)')();\n\n      return null;\n    }\n  }, {\n    key: \"readPixelsToBuffer\",\n    value: function readPixelsToBuffer() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _log.error('Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)')();\n\n      return null;\n    }\n  }, {\n    key: \"copyToDataUrl\",\n    value: function copyToDataUrl() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _log.error('Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)')();\n\n      return null;\n    }\n  }, {\n    key: \"copyToImage\",\n    value: function copyToImage() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _log.error('Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)')();\n\n      return null;\n    }\n  }, {\n    key: \"copyToTexture\",\n    value: function copyToTexture() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _log.error('Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})')();\n\n      return null;\n    }\n  }, {\n    key: \"blit\",\n    value: function blit() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _log.error('Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)')();\n\n      return null;\n    }\n  }, {\n    key: \"invalidate\",\n    value: function invalidate(_ref4) {\n      var _ref4$attachments = _ref4.attachments,\n          attachments = _ref4$attachments === void 0 ? [] : _ref4$attachments,\n          _ref4$x = _ref4.x,\n          x = _ref4$x === void 0 ? 0 : _ref4$x,\n          _ref4$y = _ref4.y,\n          y = _ref4$y === void 0 ? 0 : _ref4$y,\n          width = _ref4.width,\n          height = _ref4.height;\n      var gl2 = assertWebGL2Context(this.gl);\n      var prevHandle = gl2.bindFramebuffer(36008, this.handle);\n      var invalidateAll = x === 0 && y === 0 && width === undefined && height === undefined;\n\n      if (invalidateAll) {\n        gl2.invalidateFramebuffer(36008, attachments);\n      } else {\n        gl2.invalidateFramebuffer(36008, attachments, x, y, width, height);\n      }\n\n      gl2.bindFramebuffer(36008, prevHandle);\n      return this;\n    }\n  }, {\n    key: \"getAttachmentParameter\",\n    value: function getAttachmentParameter(attachment, pname, keys) {\n      var value = this._getAttachmentParameterFallback(pname);\n\n      if (value === null) {\n        this.gl.bindFramebuffer(36160, this.handle);\n        value = this.gl.getFramebufferAttachmentParameter(36160, attachment, pname);\n        this.gl.bindFramebuffer(36160, null);\n      }\n\n      if (keys && value > 1000) {\n        value = getKey(this.gl, value);\n      }\n\n      return value;\n    }\n  }, {\n    key: \"getAttachmentParameters\",\n    value: function getAttachmentParameters() {\n      var attachment = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 36064;\n      var keys = arguments.length > 1 ? arguments[1] : undefined;\n      var parameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.constructor.ATTACHMENT_PARAMETERS || [];\n      var values = {};\n\n      var _iterator2 = _createForOfIteratorHelper(parameters),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var pname = _step2.value;\n          var key = keys ? getKey(this.gl, pname) : pname;\n          values[key] = this.getAttachmentParameter(attachment, pname, keys);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      return values;\n    }\n  }, {\n    key: \"getParameters\",\n    value: function getParameters() {\n      var keys = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var attachments = Object.keys(this.attachments);\n      var parameters = {};\n\n      for (var _i = 0, _attachments = attachments; _i < _attachments.length; _i++) {\n        var attachmentName = _attachments[_i];\n        var attachment = Number(attachmentName);\n        var key = keys ? getKey(this.gl, attachment) : attachment;\n        parameters[key] = this.getAttachmentParameters(attachment, keys);\n      }\n\n      return parameters;\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      if (typeof window !== 'undefined') {\n        window.open(copyToDataUrl(this), 'luma-debug-texture');\n      }\n\n      return this;\n    }\n  }, {\n    key: \"log\",\n    value: function log() {\n      var logLevel = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var message = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n      if (logLevel > _log.level || typeof window === 'undefined') {\n        return this;\n      }\n\n      message = message || \"Framebuffer \".concat(this.id);\n      var image = copyToDataUrl(this, {\n        targetMaxHeight: 100\n      });\n\n      _log.image({\n        logLevel: logLevel,\n        message: message,\n        image: image\n      }, message)();\n\n      return this;\n    }\n  }, {\n    key: \"bind\",\n    value: function bind() {\n      var _ref5 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref5$target = _ref5.target,\n          target = _ref5$target === void 0 ? 36160 : _ref5$target;\n\n      this.gl.bindFramebuffer(target, this.handle);\n      return this;\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind() {\n      var _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref6$target = _ref6.target,\n          target = _ref6$target === void 0 ? 36160 : _ref6$target;\n\n      this.gl.bindFramebuffer(target, null);\n      return this;\n    }\n  }, {\n    key: \"_createDefaultAttachments\",\n    value: function _createDefaultAttachments(color, depth, stencil, width, height) {\n      var defaultAttachments = null;\n\n      if (color) {\n        var _parameters;\n\n        defaultAttachments = defaultAttachments || {};\n        defaultAttachments[36064] = new Texture2D(this.gl, {\n          id: \"\".concat(this.id, \"-color0\"),\n          pixels: null,\n          format: 6408,\n          type: 5121,\n          width: width,\n          height: height,\n          mipmaps: false,\n          parameters: (_parameters = {}, _defineProperty(_parameters, 10241, 9729), _defineProperty(_parameters, 10240, 9729), _defineProperty(_parameters, 10242, 33071), _defineProperty(_parameters, 10243, 33071), _parameters)\n        });\n        this.ownResources.push(defaultAttachments[36064]);\n      }\n\n      if (depth && stencil) {\n        defaultAttachments = defaultAttachments || {};\n        defaultAttachments[33306] = new Renderbuffer(this.gl, {\n          id: \"\".concat(this.id, \"-depth-stencil\"),\n          format: 35056,\n          width: width,\n          height: 111\n        });\n        this.ownResources.push(defaultAttachments[33306]);\n      } else if (depth) {\n        defaultAttachments = defaultAttachments || {};\n        defaultAttachments[36096] = new Renderbuffer(this.gl, {\n          id: \"\".concat(this.id, \"-depth\"),\n          format: 33189,\n          width: width,\n          height: height\n        });\n        this.ownResources.push(defaultAttachments[36096]);\n      } else if (stencil) {\n        assert(false);\n      }\n\n      return defaultAttachments;\n    }\n  }, {\n    key: \"_unattach\",\n    value: function _unattach(attachment) {\n      var oldAttachment = this.attachments[attachment];\n\n      if (!oldAttachment) {\n        return;\n      }\n\n      if (oldAttachment instanceof Renderbuffer) {\n        this.gl.framebufferRenderbuffer(36160, attachment, 36161, null);\n      } else {\n        this.gl.framebufferTexture2D(36160, attachment, 3553, null, 0);\n      }\n\n      delete this.attachments[attachment];\n    }\n  }, {\n    key: \"_attachRenderbuffer\",\n    value: function _attachRenderbuffer(_ref7) {\n      var _ref7$attachment = _ref7.attachment,\n          attachment = _ref7$attachment === void 0 ? 36064 : _ref7$attachment,\n          renderbuffer = _ref7.renderbuffer;\n      var gl = this.gl;\n      gl.framebufferRenderbuffer(36160, attachment, 36161, renderbuffer.handle);\n      this.attachments[attachment] = renderbuffer;\n    }\n  }, {\n    key: \"_attachTexture\",\n    value: function _attachTexture(_ref8) {\n      var _ref8$attachment = _ref8.attachment,\n          attachment = _ref8$attachment === void 0 ? 36064 : _ref8$attachment,\n          texture = _ref8.texture,\n          layer = _ref8.layer,\n          level = _ref8.level;\n      var gl = this.gl;\n      gl.bindTexture(texture.target, texture.handle);\n\n      switch (texture.target) {\n        case 35866:\n        case 32879:\n          var gl2 = assertWebGL2Context(gl);\n          gl2.framebufferTextureLayer(36160, attachment, texture.target, level, layer);\n          break;\n\n        case 34067:\n          var face = mapIndexToCubeMapFace(layer);\n          gl.framebufferTexture2D(36160, attachment, face, texture.handle, level);\n          break;\n\n        case 3553:\n          gl.framebufferTexture2D(36160, attachment, 3553, texture.handle, level);\n          break;\n\n        default:\n          assert(false, 'Illegal texture type');\n      }\n\n      gl.bindTexture(texture.target, null);\n      this.attachments[attachment] = texture;\n    }\n  }, {\n    key: \"_setReadBuffer\",\n    value: function _setReadBuffer(readBuffer) {\n      var gl2 = getWebGL2Context(this.gl);\n\n      if (gl2) {\n        gl2.readBuffer(readBuffer);\n      } else {\n        assert(readBuffer === 36064 || readBuffer === 1029, ERR_MULTIPLE_RENDERTARGETS);\n      }\n\n      this.readBuffer = readBuffer;\n    }\n  }, {\n    key: \"_setDrawBuffers\",\n    value: function _setDrawBuffers(drawBuffers) {\n      var gl = this.gl;\n      var gl2 = assertWebGL2Context(gl);\n\n      if (gl2) {\n        gl2.drawBuffers(drawBuffers);\n      } else {\n        var ext = gl.getExtension('WEBGL_draw_buffers');\n\n        if (ext) {\n          ext.drawBuffersWEBGL(drawBuffers);\n        } else {\n          assert(drawBuffers.length === 1 && (drawBuffers[0] === 36064 || drawBuffers[0] === 1029), ERR_MULTIPLE_RENDERTARGETS);\n        }\n      }\n\n      this.drawBuffers = drawBuffers;\n    }\n  }, {\n    key: \"_getAttachmentParameterFallback\",\n    value: function _getAttachmentParameterFallback(pname) {\n      var caps = getFeatures(this.gl);\n\n      switch (pname) {\n        case 36052:\n          return !caps.WEBGL2 ? 0 : null;\n\n        case 33298:\n        case 33299:\n        case 33300:\n        case 33301:\n        case 33302:\n        case 33303:\n          return !caps.WEBGL2 ? 8 : null;\n\n        case 33297:\n          return !caps.WEBGL2 ? 5125 : null;\n\n        case 33296:\n          return !caps.WEBGL2 && !caps.EXT_sRGB ? 9729 : null;\n\n        default:\n          return null;\n      }\n    }\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createFramebuffer();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteFramebuffer(this.handle);\n    }\n  }, {\n    key: \"_bindHandle\",\n    value: function _bindHandle(handle) {\n      return this.gl.bindFramebuffer(36160, handle);\n    }\n  }, {\n    key: \"color\",\n    get: function get() {\n      return this.attachments[36064] || null;\n    }\n  }, {\n    key: \"texture\",\n    get: function get() {\n      return this.attachments[36064] || null;\n    }\n  }, {\n    key: \"depth\",\n    get: function get() {\n      return this.attachments[36096] || this.attachments[33306] || null;\n    }\n  }, {\n    key: \"stencil\",\n    get: function get() {\n      return this.attachments[36128] || this.attachments[33306] || null;\n    }\n  }]);\n\n  return Framebuffer;\n}(Resource);\n\nexport { Framebuffer as default };\n\nfunction mapIndexToCubeMapFace(layer) {\n  return layer < 34069 ? layer + 34069 : layer;\n}\n\nfunction _getFrameBufferStatus(status) {\n  var STATUS = Framebuffer.STATUS || {};\n  return STATUS[status] || \"Framebuffer error \".concat(status);\n}\n\nexport var FRAMEBUFFER_ATTACHMENT_PARAMETERS = [36049, 36048, 33296, 33298, 33299, 33300, 33301, 33302, 33303];\nFramebuffer.ATTACHMENT_PARAMETERS = FRAMEBUFFER_ATTACHMENT_PARAMETERS;\n//# sourceMappingURL=framebuffer.js.map","function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport WEBGL_FEATURES from './webgl-features-table';\nimport { isWebGL2, log } from '@luma.gl/gltools';\nimport { assert } from '../utils';\nvar LOG_UNSUPPORTED_FEATURE = 2;\nexport function hasFeature(gl, feature) {\n  return hasFeatures(gl, feature);\n}\nexport function hasFeatures(gl, features) {\n  features = Array.isArray(features) ? features : [features];\n  return features.every(function (feature) {\n    return isFeatureSupported(gl, feature);\n  });\n}\nexport function getFeatures(gl) {\n  gl.luma = gl.luma || {};\n  gl.luma.caps = gl.luma.caps || {};\n\n  for (var cap in WEBGL_FEATURES) {\n    if (gl.luma.caps[cap] === undefined) {\n      gl.luma.caps[cap] = isFeatureSupported(gl, cap);\n    }\n  }\n\n  return gl.luma.caps;\n}\n\nfunction isFeatureSupported(gl, cap) {\n  gl.luma = gl.luma || {};\n  gl.luma.caps = gl.luma.caps || {};\n\n  if (gl.luma.caps[cap] === undefined) {\n    gl.luma.caps[cap] = queryFeature(gl, cap);\n  }\n\n  if (!gl.luma.caps[cap]) {\n    log.log(LOG_UNSUPPORTED_FEATURE, \"Feature: \".concat(cap, \" not supported\"))();\n  }\n\n  return gl.luma.caps[cap];\n}\n\nfunction queryFeature(gl, cap) {\n  var feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n  var isSupported;\n  var featureDefinition = isWebGL2(gl) ? feature[1] || feature[0] : feature[0];\n\n  if (typeof featureDefinition === 'function') {\n    isSupported = featureDefinition(gl);\n  } else if (Array.isArray(featureDefinition)) {\n    isSupported = true;\n\n    var _iterator = _createForOfIteratorHelper(featureDefinition),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var extension = _step.value;\n        isSupported = isSupported && Boolean(gl.getExtension(extension));\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  } else if (typeof featureDefinition === 'string') {\n    isSupported = Boolean(gl.getExtension(featureDefinition));\n  } else if (typeof featureDefinition === 'boolean') {\n    isSupported = featureDefinition;\n  } else {\n    assert(false);\n  }\n\n  return isSupported;\n}\n//# sourceMappingURL=features.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _FEATURES$WEBGL2$FEAT;\n\nimport Framebuffer from '../classes/framebuffer';\nimport Texture2D from '../classes/texture-2d';\nexport var FEATURES = {\n  WEBGL2: 'WEBGL2',\n  VERTEX_ARRAY_OBJECT: 'VERTEX_ARRAY_OBJECT',\n  TIMER_QUERY: 'TIMER_QUERY',\n  INSTANCED_RENDERING: 'INSTANCED_RENDERING',\n  MULTIPLE_RENDER_TARGETS: 'MULTIPLE_RENDER_TARGETS',\n  ELEMENT_INDEX_UINT32: 'ELEMENT_INDEX_UINT32',\n  BLEND_EQUATION_MINMAX: 'BLEND_EQUATION_MINMAX',\n  FLOAT_BLEND: 'FLOAT_BLEND',\n  COLOR_ENCODING_SRGB: 'COLOR_ENCODING_SRGB',\n  TEXTURE_DEPTH: 'TEXTURE_DEPTH',\n  TEXTURE_FLOAT: 'TEXTURE_FLOAT',\n  TEXTURE_HALF_FLOAT: 'TEXTURE_HALF_FLOAT',\n  TEXTURE_FILTER_LINEAR_FLOAT: 'TEXTURE_FILTER_LINEAR_FLOAT',\n  TEXTURE_FILTER_LINEAR_HALF_FLOAT: 'TEXTURE_FILTER_LINEAR_HALF_FLOAT',\n  TEXTURE_FILTER_ANISOTROPIC: 'TEXTURE_FILTER_ANISOTROPIC',\n  COLOR_ATTACHMENT_RGBA32F: 'COLOR_ATTACHMENT_RGBA32F',\n  COLOR_ATTACHMENT_FLOAT: 'COLOR_ATTACHMENT_FLOAT',\n  COLOR_ATTACHMENT_HALF_FLOAT: 'COLOR_ATTACHMENT_HALF_FLOAT',\n  GLSL_FRAG_DATA: 'GLSL_FRAG_DATA',\n  GLSL_FRAG_DEPTH: 'GLSL_FRAG_DEPTH',\n  GLSL_DERIVATIVES: 'GLSL_DERIVATIVES',\n  GLSL_TEXTURE_LOD: 'GLSL_TEXTURE_LOD'\n};\n\nfunction checkFloat32ColorAttachment(gl) {\n  var testTexture = new Texture2D(gl, {\n    format: 6408,\n    type: 5126,\n    dataFormat: 6408\n  });\n  var testFb = new Framebuffer(gl, {\n    id: \"test-framebuffer\",\n    check: false,\n    attachments: _defineProperty({}, 36064, testTexture)\n  });\n  var status = testFb.getStatus();\n  testTexture[\"delete\"]();\n  testFb[\"delete\"]();\n  return status === 36053;\n}\n\nexport default (_FEATURES$WEBGL2$FEAT = {}, _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.WEBGL2, [false, true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.VERTEX_ARRAY_OBJECT, ['OES_vertex_array_object', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.TIMER_QUERY, ['EXT_disjoint_timer_query', 'EXT_disjoint_timer_query_webgl2']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.INSTANCED_RENDERING, ['ANGLE_instanced_arrays', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.MULTIPLE_RENDER_TARGETS, ['WEBGL_draw_buffers', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.ELEMENT_INDEX_UINT32, ['OES_element_index_uint', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.BLEND_EQUATION_MINMAX, ['EXT_blend_minmax', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.FLOAT_BLEND, ['EXT_float_blend']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.COLOR_ENCODING_SRGB, ['EXT_sRGB', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.TEXTURE_DEPTH, ['WEBGL_depth_texture', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.TEXTURE_FLOAT, ['OES_texture_float', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.TEXTURE_HALF_FLOAT, ['OES_texture_half_float', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.TEXTURE_FILTER_LINEAR_FLOAT, ['OES_texture_float_linear']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.TEXTURE_FILTER_LINEAR_HALF_FLOAT, ['OES_texture_half_float_linear']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.TEXTURE_FILTER_ANISOTROPIC, ['EXT_texture_filter_anisotropic']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.COLOR_ATTACHMENT_RGBA32F, [checkFloat32ColorAttachment, 'EXT_color_buffer_float']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.COLOR_ATTACHMENT_FLOAT, [false, 'EXT_color_buffer_float']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.COLOR_ATTACHMENT_HALF_FLOAT, ['EXT_color_buffer_half_float']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.GLSL_FRAG_DATA, ['WEBGL_draw_buffers', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.GLSL_FRAG_DEPTH, ['EXT_frag_depth', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.GLSL_DERIVATIVES, ['OES_standard_derivatives', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.GLSL_TEXTURE_LOD, ['EXT_shader_texture_lod', true]), _FEATURES$WEBGL2$FEAT);\n//# sourceMappingURL=webgl-features-table.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar ShaderAttribute = function () {\n  function ShaderAttribute(dataColumn, opts) {\n    _classCallCheck(this, ShaderAttribute);\n\n    this.opts = opts;\n    this.source = dataColumn;\n  }\n\n  _createClass(ShaderAttribute, [{\n    key: \"getValue\",\n    value: function getValue() {\n      var buffer = this.source.getBuffer();\n      var accessor = this.getAccessor();\n\n      if (buffer) {\n        return [buffer, accessor];\n      }\n\n      var value = this.source.value;\n      var size = accessor.size;\n      var constantValue = value;\n\n      if (value && value.length !== size) {\n        constantValue = new Float32Array(size);\n        var index = accessor.elementOffset || 0;\n\n        for (var i = 0; i < size; ++i) {\n          constantValue[i] = value[index + i];\n        }\n      }\n\n      return constantValue;\n    }\n  }, {\n    key: \"getAccessor\",\n    value: function getAccessor() {\n      return _objectSpread(_objectSpread({}, this.source.getAccessor()), this.opts);\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this.source.value;\n    }\n  }]);\n\n  return ShaderAttribute;\n}();\n\nexport { ShaderAttribute as default };\n//# sourceMappingURL=shader-attribute.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nexport var TypedArrayManager = function () {\n  function TypedArrayManager(props) {\n    _classCallCheck(this, TypedArrayManager);\n\n    this._pool = [];\n    this.props = {\n      overAlloc: 2,\n      poolSize: 100\n    };\n    this.setProps(props);\n  }\n\n  _createClass(TypedArrayManager, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      Object.assign(this.props, props);\n    }\n  }, {\n    key: \"allocate\",\n    value: function allocate(typedArray, count, _ref) {\n      var _ref$size = _ref.size,\n          size = _ref$size === void 0 ? 1 : _ref$size,\n          type = _ref.type,\n          _ref$padding = _ref.padding,\n          padding = _ref$padding === void 0 ? 0 : _ref$padding,\n          _ref$copy = _ref.copy,\n          copy = _ref$copy === void 0 ? false : _ref$copy,\n          _ref$initialize = _ref.initialize,\n          initialize = _ref$initialize === void 0 ? false : _ref$initialize,\n          maxCount = _ref.maxCount;\n      var Type = type || typedArray && typedArray.constructor || Float32Array;\n      var newSize = count * size + padding;\n\n      if (ArrayBuffer.isView(typedArray)) {\n        if (newSize <= typedArray.length) {\n          return typedArray;\n        }\n\n        if (newSize * typedArray.BYTES_PER_ELEMENT <= typedArray.buffer.byteLength) {\n          return new Type(typedArray.buffer, 0, newSize);\n        }\n      }\n\n      var maxSize;\n\n      if (maxCount) {\n        maxSize = maxCount * size + padding;\n      }\n\n      var newArray = this._allocate(Type, newSize, initialize, maxSize);\n\n      if (typedArray && copy) {\n        newArray.set(typedArray);\n      } else if (!initialize) {\n        newArray.fill(0, 0, 4);\n      }\n\n      this._release(typedArray);\n\n      return newArray;\n    }\n  }, {\n    key: \"release\",\n    value: function release(typedArray) {\n      this._release(typedArray);\n    }\n  }, {\n    key: \"_allocate\",\n    value: function _allocate(Type, size, initialize, maxSize) {\n      var sizeToAllocate = Math.max(Math.ceil(size * this.props.overAlloc), 1);\n\n      if (sizeToAllocate > maxSize) {\n        sizeToAllocate = maxSize;\n      }\n\n      var pool = this._pool;\n      var byteLength = Type.BYTES_PER_ELEMENT * sizeToAllocate;\n      var i = pool.findIndex(function (b) {\n        return b.byteLength >= byteLength;\n      });\n\n      if (i >= 0) {\n        var array = new Type(pool.splice(i, 1)[0], 0, sizeToAllocate);\n\n        if (initialize) {\n          array.fill(0);\n        }\n\n        return array;\n      }\n\n      return new Type(sizeToAllocate);\n    }\n  }, {\n    key: \"_release\",\n    value: function _release(typedArray) {\n      if (!ArrayBuffer.isView(typedArray)) {\n        return;\n      }\n\n      var pool = this._pool;\n      var buffer = typedArray.buffer;\n      var byteLength = buffer.byteLength;\n      var i = pool.findIndex(function (b) {\n        return b.byteLength >= byteLength;\n      });\n\n      if (i < 0) {\n        pool.push(buffer);\n      } else if (i > 0 || pool.length < this.props.poolSize) {\n        pool.splice(i, 0, buffer);\n      }\n\n      if (pool.length > this.props.poolSize) {\n        pool.shift();\n      }\n    }\n  }]);\n\n  return TypedArrayManager;\n}();\nexport default new TypedArrayManager();\n//# sourceMappingURL=typed-array-manager.js.map","import typedArrayManager from './typed-array-manager';\nimport { Vector3 } from 'math.gl';\nexport function createMat4() {\n  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\nexport function mod(value, divisor) {\n  var modulus = value % divisor;\n  return modulus < 0 ? divisor + modulus : modulus;\n}\nexport function getCameraPosition(viewMatrixInverse) {\n  return [viewMatrixInverse[12], viewMatrixInverse[13], viewMatrixInverse[14]];\n}\nexport function getFrustumPlanes(viewProjectionMatrix) {\n  var planes = {};\n  planes.left = getFrustumPlane(viewProjectionMatrix[3] + viewProjectionMatrix[0], viewProjectionMatrix[7] + viewProjectionMatrix[4], viewProjectionMatrix[11] + viewProjectionMatrix[8], viewProjectionMatrix[15] + viewProjectionMatrix[12]);\n  planes.right = getFrustumPlane(viewProjectionMatrix[3] - viewProjectionMatrix[0], viewProjectionMatrix[7] - viewProjectionMatrix[4], viewProjectionMatrix[11] - viewProjectionMatrix[8], viewProjectionMatrix[15] - viewProjectionMatrix[12]);\n  planes.bottom = getFrustumPlane(viewProjectionMatrix[3] + viewProjectionMatrix[1], viewProjectionMatrix[7] + viewProjectionMatrix[5], viewProjectionMatrix[11] + viewProjectionMatrix[9], viewProjectionMatrix[15] + viewProjectionMatrix[13]);\n  planes.top = getFrustumPlane(viewProjectionMatrix[3] - viewProjectionMatrix[1], viewProjectionMatrix[7] - viewProjectionMatrix[5], viewProjectionMatrix[11] - viewProjectionMatrix[9], viewProjectionMatrix[15] - viewProjectionMatrix[13]);\n  planes.near = getFrustumPlane(viewProjectionMatrix[3] + viewProjectionMatrix[2], viewProjectionMatrix[7] + viewProjectionMatrix[6], viewProjectionMatrix[11] + viewProjectionMatrix[10], viewProjectionMatrix[15] + viewProjectionMatrix[14]);\n  planes.far = getFrustumPlane(viewProjectionMatrix[3] - viewProjectionMatrix[2], viewProjectionMatrix[7] - viewProjectionMatrix[6], viewProjectionMatrix[11] - viewProjectionMatrix[10], viewProjectionMatrix[15] - viewProjectionMatrix[14]);\n  return planes;\n}\nvar scratchVector = new Vector3();\n\nfunction getFrustumPlane(a, b, c, d) {\n  scratchVector.set(a, b, c);\n  var L = scratchVector.len();\n  return {\n    distance: d / L,\n    normal: new Vector3(-a / L, -b / L, -c / L)\n  };\n}\n\nexport function fp64LowPart(x) {\n  return x - Math.fround(x);\n}\nvar scratchArray;\nexport function toDoublePrecisionArray(typedArray, _ref) {\n  var _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 1 : _ref$size,\n      _ref$startIndex = _ref.startIndex,\n      startIndex = _ref$startIndex === void 0 ? 0 : _ref$startIndex,\n      endIndex = _ref.endIndex;\n\n  if (!Number.isFinite(endIndex)) {\n    endIndex = typedArray.length;\n  }\n\n  var count = (endIndex - startIndex) / size;\n  scratchArray = typedArrayManager.allocate(scratchArray, count, {\n    type: Float32Array,\n    size: size * 2\n  });\n  var sourceIndex = startIndex;\n  var targetIndex = 0;\n\n  while (sourceIndex < endIndex) {\n    for (var j = 0; j < size; j++) {\n      var value = typedArray[sourceIndex++];\n      scratchArray[targetIndex + j] = value;\n      scratchArray[targetIndex + j + size] = fp64LowPart(value);\n    }\n\n    targetIndex += size * 2;\n  }\n\n  return scratchArray.subarray(0, count * size * 2);\n}\n//# sourceMappingURL=math-utils.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { hasFeature, FEATURES, Buffer } from '@luma.gl/core';\nimport ShaderAttribute from './shader-attribute';\nimport { glArrayFromType } from './gl-utils';\nimport typedArrayManager from '../../utils/typed-array-manager';\nimport { toDoublePrecisionArray } from '../../utils/math-utils';\nimport log from '../../utils/log';\n\nfunction getStride(accessor) {\n  return accessor.stride || accessor.size * accessor.bytesPerElement;\n}\n\nfunction resolveShaderAttribute(baseAccessor, shaderAttributeOptions) {\n  if (shaderAttributeOptions.offset) {\n    log.removed('shaderAttribute.offset', 'vertexOffset, elementOffset')();\n  }\n\n  var stride = getStride(baseAccessor);\n  var vertexOffset = 'vertexOffset' in shaderAttributeOptions ? shaderAttributeOptions.vertexOffset : baseAccessor.vertexOffset || 0;\n  var elementOffset = shaderAttributeOptions.elementOffset || 0;\n  var offset = vertexOffset * stride + elementOffset * baseAccessor.bytesPerElement + (baseAccessor.offset || 0);\n  return _objectSpread(_objectSpread({}, shaderAttributeOptions), {}, {\n    offset: offset,\n    stride: stride\n  });\n}\n\nfunction resolveDoublePrecisionShaderAttributes(baseAccessor, shaderAttributeOptions) {\n  var resolvedOptions = resolveShaderAttribute(baseAccessor, shaderAttributeOptions);\n  return {\n    high: resolvedOptions,\n    low: _objectSpread(_objectSpread({}, resolvedOptions), {}, {\n      offset: resolvedOptions.offset + baseAccessor.size * 4\n    })\n  };\n}\n\nvar DataColumn = function () {\n  function DataColumn(gl, opts) {\n    _classCallCheck(this, DataColumn);\n\n    this.gl = gl;\n    this.id = opts.id;\n    this.size = opts.size;\n    var logicalType = opts.logicalType || opts.type;\n    var doublePrecision = logicalType === 5130;\n    var defaultValue = opts.defaultValue;\n    defaultValue = Number.isFinite(defaultValue) ? [defaultValue] : defaultValue || new Array(this.size).fill(0);\n    opts.defaultValue = defaultValue;\n    var bufferType = logicalType;\n\n    if (doublePrecision) {\n      bufferType = 5126;\n    } else if (!bufferType && opts.isIndexed) {\n      bufferType = gl && hasFeature(gl, FEATURES.ELEMENT_INDEX_UINT32) ? 5125 : 5123;\n    } else if (!bufferType) {\n      bufferType = 5126;\n    }\n\n    opts.logicalType = logicalType;\n    opts.type = bufferType;\n    var defaultType = glArrayFromType(logicalType || bufferType || 5126);\n    this.shaderAttributes = {};\n    this.doublePrecision = doublePrecision;\n\n    if (doublePrecision && opts.fp64 === false) {\n      defaultType = Float32Array;\n    }\n\n    opts.bytesPerElement = defaultType.BYTES_PER_ELEMENT;\n    this.defaultType = defaultType;\n    this.value = null;\n    this.settings = opts;\n    this.state = {\n      externalBuffer: null,\n      bufferAccessor: opts,\n      allocatedValue: null,\n      constant: false\n    };\n    this._buffer = null;\n    this.setData(opts);\n  }\n\n  _createClass(DataColumn, [{\n    key: \"delete\",\n    value: function _delete() {\n      if (this._buffer) {\n        this._buffer[\"delete\"]();\n\n        this._buffer = null;\n      }\n\n      typedArrayManager.release(this.state.allocatedValue);\n    }\n  }, {\n    key: \"getShaderAttributes\",\n    value: function getShaderAttributes(id, options) {\n      if (this.doublePrecision) {\n        var shaderAttributes = {};\n        var isBuffer64Bit = this.value instanceof Float64Array;\n        var doubleShaderAttributeDefs = resolveDoublePrecisionShaderAttributes(this.getAccessor(), options || {});\n        shaderAttributes[id] = new ShaderAttribute(this, doubleShaderAttributeDefs.high);\n        shaderAttributes[\"\".concat(id, \"64Low\")] = isBuffer64Bit ? new ShaderAttribute(this, doubleShaderAttributeDefs.low) : new Float32Array(this.size);\n        return shaderAttributes;\n      }\n\n      if (options) {\n        var shaderAttributeDef = resolveShaderAttribute(this.getAccessor(), options);\n        return _defineProperty({}, id, new ShaderAttribute(this, shaderAttributeDef));\n      }\n\n      return _defineProperty({}, id, this);\n    }\n  }, {\n    key: \"getBuffer\",\n    value: function getBuffer() {\n      if (this.state.constant) {\n        return null;\n      }\n\n      return this.state.externalBuffer || this._buffer;\n    }\n  }, {\n    key: \"getValue\",\n    value: function getValue() {\n      if (this.state.constant) {\n        return this.value;\n      }\n\n      return [this.getBuffer(), this.getAccessor()];\n    }\n  }, {\n    key: \"getAccessor\",\n    value: function getAccessor() {\n      return this.state.bufferAccessor;\n    }\n  }, {\n    key: \"setData\",\n    value: function setData(opts) {\n      var state = this.state;\n\n      if (ArrayBuffer.isView(opts)) {\n        opts = {\n          value: opts\n        };\n      } else if (opts instanceof Buffer) {\n        opts = {\n          buffer: opts\n        };\n      }\n\n      var accessor = _objectSpread(_objectSpread({}, this.settings), opts);\n\n      state.bufferAccessor = accessor;\n\n      if (opts.constant) {\n        var value = opts.value;\n        value = this._normalizeValue(value, [], 0);\n\n        if (this.settings.normalized) {\n          value = this._normalizeConstant(value);\n        }\n\n        var hasChanged = !state.constant || !this._areValuesEqual(value, this.value);\n\n        if (!hasChanged) {\n          return false;\n        }\n\n        state.externalBuffer = null;\n        state.constant = true;\n        this.value = value;\n      } else if (opts.buffer) {\n        var buffer = opts.buffer;\n        state.externalBuffer = buffer;\n        state.constant = false;\n        this.value = opts.value;\n        var isBuffer64Bit = opts.value instanceof Float64Array;\n        accessor.type = opts.type || buffer.accessor.type;\n        accessor.bytesPerElement = buffer.accessor.BYTES_PER_ELEMENT * (isBuffer64Bit ? 2 : 1);\n        accessor.stride = getStride(accessor);\n      } else if (opts.value) {\n        this._checkExternalBuffer(opts);\n\n        var _value = opts.value;\n        state.externalBuffer = null;\n        state.constant = false;\n        this.value = _value;\n        accessor.bytesPerElement = _value.BYTES_PER_ELEMENT;\n        accessor.stride = getStride(accessor);\n        var _buffer = this.buffer,\n            byteOffset = this.byteOffset;\n\n        if (this.doublePrecision && _value instanceof Float64Array) {\n          _value = toDoublePrecisionArray(_value, accessor);\n        }\n\n        var requiredBufferSize = _value.byteLength + byteOffset + accessor.stride * 2;\n\n        if (_buffer.byteLength < requiredBufferSize) {\n          _buffer.reallocate(requiredBufferSize);\n        }\n\n        _buffer.setAccessor(null);\n\n        _buffer.subData({\n          data: _value,\n          offset: byteOffset\n        });\n\n        accessor.type = opts.type || _buffer.accessor.type;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"updateSubBuffer\",\n    value: function updateSubBuffer() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var value = this.value;\n      var _opts$startOffset = opts.startOffset,\n          startOffset = _opts$startOffset === void 0 ? 0 : _opts$startOffset,\n          endOffset = opts.endOffset;\n      this.buffer.subData({\n        data: this.doublePrecision && value instanceof Float64Array ? toDoublePrecisionArray(value, {\n          size: this.size,\n          startIndex: startOffset,\n          endIndex: endOffset\n        }) : value.subarray(startOffset, endOffset),\n        offset: startOffset * value.BYTES_PER_ELEMENT + this.byteOffset\n      });\n    }\n  }, {\n    key: \"allocate\",\n    value: function allocate(_ref3) {\n      var numInstances = _ref3.numInstances,\n          _ref3$copy = _ref3.copy,\n          copy = _ref3$copy === void 0 ? false : _ref3$copy;\n      var state = this.state;\n      var oldValue = state.allocatedValue;\n      var value = typedArrayManager.allocate(oldValue, numInstances + 1, {\n        size: this.size,\n        type: this.defaultType,\n        copy: copy\n      });\n      this.value = value;\n      var buffer = this.buffer,\n          byteOffset = this.byteOffset;\n\n      if (buffer.byteLength < value.byteLength + byteOffset) {\n        buffer.reallocate(value.byteLength + byteOffset);\n\n        if (copy && oldValue) {\n          buffer.subData({\n            data: oldValue instanceof Float64Array ? toDoublePrecisionArray(oldValue, this) : oldValue,\n            offset: byteOffset\n          });\n        }\n      }\n\n      state.allocatedValue = value;\n      state.constant = false;\n      state.externalBuffer = null;\n      state.bufferAccessor = this.settings;\n      return true;\n    }\n  }, {\n    key: \"_checkExternalBuffer\",\n    value: function _checkExternalBuffer(opts) {\n      var value = opts.value;\n\n      if (!opts.constant && value) {\n        var ArrayType = this.defaultType;\n        var illegalArrayType = false;\n\n        if (this.doublePrecision) {\n          illegalArrayType = value.BYTES_PER_ELEMENT < 4;\n        }\n\n        if (illegalArrayType) {\n          throw new Error(\"Attribute \".concat(this.id, \" does not support \").concat(value.constructor.name));\n        }\n\n        if (!(value instanceof ArrayType) && this.settings.normalized && !('normalized' in opts)) {\n          log.warn(\"Attribute \".concat(this.id, \" is normalized\"))();\n        }\n      }\n    }\n  }, {\n    key: \"_normalizeConstant\",\n    value: function _normalizeConstant(value) {\n      switch (this.settings.type) {\n        case 5120:\n          return new Float32Array(value).map(function (x) {\n            return (x + 128) / 255 * 2 - 1;\n          });\n\n        case 5122:\n          return new Float32Array(value).map(function (x) {\n            return (x + 32768) / 65535 * 2 - 1;\n          });\n\n        case 5121:\n          return new Float32Array(value).map(function (x) {\n            return x / 255;\n          });\n\n        case 5123:\n          return new Float32Array(value).map(function (x) {\n            return x / 65535;\n          });\n\n        default:\n          return value;\n      }\n    }\n  }, {\n    key: \"_normalizeValue\",\n    value: function _normalizeValue(value, out, start) {\n      var _this$settings = this.settings,\n          defaultValue = _this$settings.defaultValue,\n          size = _this$settings.size;\n\n      if (Number.isFinite(value)) {\n        out[start] = value;\n        return out;\n      }\n\n      if (!value) {\n        out[start] = defaultValue[0];\n        return out;\n      }\n\n      switch (size) {\n        case 4:\n          out[start + 3] = Number.isFinite(value[3]) ? value[3] : defaultValue[3];\n\n        case 3:\n          out[start + 2] = Number.isFinite(value[2]) ? value[2] : defaultValue[2];\n\n        case 2:\n          out[start + 1] = Number.isFinite(value[1]) ? value[1] : defaultValue[1];\n\n        case 1:\n          out[start + 0] = Number.isFinite(value[0]) ? value[0] : defaultValue[0];\n          break;\n\n        default:\n          var i = size;\n\n          while (--i >= 0) {\n            out[start + i] = Number.isFinite(value[i]) ? value[i] : defaultValue[i];\n          }\n\n      }\n\n      return out;\n    }\n  }, {\n    key: \"_areValuesEqual\",\n    value: function _areValuesEqual(value1, value2) {\n      if (!value1 || !value2) {\n        return false;\n      }\n\n      var size = this.size;\n\n      for (var i = 0; i < size; i++) {\n        if (value1[i] !== value2[i]) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"buffer\",\n    get: function get() {\n      if (!this._buffer) {\n        var _this$settings2 = this.settings,\n            isIndexed = _this$settings2.isIndexed,\n            type = _this$settings2.type;\n        this._buffer = new Buffer(this.gl, {\n          id: this.id,\n          target: isIndexed ? 34963 : 34962,\n          accessor: {\n            type: type\n          }\n        });\n      }\n\n      return this._buffer;\n    }\n  }, {\n    key: \"byteOffset\",\n    get: function get() {\n      var accessor = this.getAccessor();\n\n      if (accessor.vertexOffset) {\n        return accessor.vertexOffset * getStride(accessor);\n      }\n\n      return 0;\n    }\n  }]);\n\n  return DataColumn;\n}();\n\nexport { DataColumn as default };\n//# sourceMappingURL=data-column.js.map","export function glArrayFromType(glType) {\n  switch (glType) {\n    case 5126:\n      return Float32Array;\n\n    case 5130:\n      return Float64Array;\n\n    case 5123:\n    case 33635:\n    case 32819:\n    case 32820:\n      return Uint16Array;\n\n    case 5125:\n      return Uint32Array;\n\n    case 5121:\n      return Uint8ClampedArray;\n\n    case 5120:\n      return Int8Array;\n\n    case 5122:\n      return Int16Array;\n\n    case 5124:\n      return Int32Array;\n\n    default:\n      throw new Error('Unknown GL type');\n  }\n}\n//# sourceMappingURL=gl-utils.js.map","var EMPTY_ARRAY = [];\nvar placeholderArray = [];\nexport function createIterable(data) {\n  var startRow = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var endRow = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Infinity;\n  var iterable = EMPTY_ARRAY;\n  var objectInfo = {\n    index: -1,\n    data: data,\n    target: []\n  };\n\n  if (!data) {\n    iterable = EMPTY_ARRAY;\n  } else if (typeof data[Symbol.iterator] === 'function') {\n    iterable = data;\n  } else if (data.length > 0) {\n    placeholderArray.length = data.length;\n    iterable = placeholderArray;\n  }\n\n  if (startRow > 0 || Number.isFinite(endRow)) {\n    iterable = (Array.isArray(iterable) ? iterable : Array.from(iterable)).slice(startRow, endRow);\n    objectInfo.index = startRow - 1;\n  }\n\n  return {\n    iterable: iterable,\n    objectInfo: objectInfo\n  };\n}\nexport function isAsyncIterable(data) {\n  return data && data[Symbol.asyncIterator];\n}\nexport function getAccessorFromBuffer(typedArray, _ref) {\n  var size = _ref.size,\n      stride = _ref.stride,\n      offset = _ref.offset,\n      startIndices = _ref.startIndices,\n      nested = _ref.nested;\n  var bytesPerElement = typedArray.BYTES_PER_ELEMENT;\n  var elementStride = stride ? stride / bytesPerElement : size;\n  var elementOffset = offset ? offset / bytesPerElement : 0;\n  var vertexCount = Math.floor((typedArray.length - elementOffset) / elementStride);\n  return function (_, _ref2) {\n    var index = _ref2.index,\n        target = _ref2.target;\n\n    if (!startIndices) {\n      var sourceIndex = index * elementStride + elementOffset;\n\n      for (var j = 0; j < size; j++) {\n        target[j] = typedArray[sourceIndex + j];\n      }\n\n      return target;\n    }\n\n    var startIndex = startIndices[index];\n    var endIndex = startIndices[index + 1] || vertexCount;\n    var result;\n\n    if (nested) {\n      result = new Array(endIndex - startIndex);\n\n      for (var i = startIndex; i < endIndex; i++) {\n        var _sourceIndex = i * elementStride + elementOffset;\n\n        target = new Array(size);\n\n        for (var _j = 0; _j < size; _j++) {\n          target[_j] = typedArray[_sourceIndex + _j];\n        }\n\n        result[i - startIndex] = target;\n      }\n    } else if (elementStride === size) {\n      result = typedArray.subarray(startIndex * size + elementOffset, endIndex * size + elementOffset);\n    } else {\n      result = new typedArray.constructor((endIndex - startIndex) * size);\n      var targetIndex = 0;\n\n      for (var _i = startIndex; _i < endIndex; _i++) {\n        var _sourceIndex2 = _i * elementStride + elementOffset;\n\n        for (var _j2 = 0; _j2 < size; _j2++) {\n          result[targetIndex++] = typedArray[_sourceIndex2 + _j2];\n        }\n      }\n    }\n\n    return result;\n  };\n}\n//# sourceMappingURL=iterable-utils.js.map","export function flatten(array) {\n  var filter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n    return true;\n  };\n\n  if (!Array.isArray(array)) {\n    return filter(array) ? [array] : [];\n  }\n\n  return flattenArray(array, filter, []);\n}\n\nfunction flattenArray(array, filter, result) {\n  var index = -1;\n\n  while (++index < array.length) {\n    var value = array[index];\n\n    if (Array.isArray(value)) {\n      flattenArray(value, filter, result);\n    } else if (filter(value)) {\n      result.push(value);\n    }\n  }\n\n  return result;\n}\n\nexport function fillArray(_ref) {\n  var target = _ref.target,\n      source = _ref.source,\n      _ref$start = _ref.start,\n      start = _ref$start === void 0 ? 0 : _ref$start,\n      _ref$count = _ref.count,\n      count = _ref$count === void 0 ? 1 : _ref$count;\n  var length = source.length;\n  var total = count * length;\n  var copied = 0;\n\n  for (var i = start; copied < length; copied++) {\n    target[i++] = source[copied];\n  }\n\n  while (copied < total) {\n    if (copied < total - copied) {\n      target.copyWithin(start + copied, start, start + copied);\n      copied *= 2;\n    } else {\n      target.copyWithin(start + copied, start, start + total - copied);\n      copied = total;\n    }\n  }\n\n  return target;\n}\n//# sourceMappingURL=flatten.js.map","export var EMPTY = [];\nexport var FULL = [[0, Infinity]];\nexport function add(rangeList, range) {\n  if (rangeList === FULL) {\n    return rangeList;\n  }\n\n  if (range[0] < 0) {\n    range[0] = 0;\n  }\n\n  if (range[0] >= range[1]) {\n    return rangeList;\n  }\n\n  var newRangeList = [];\n  var len = rangeList.length;\n  var insertPosition = 0;\n\n  for (var i = 0; i < len; i++) {\n    var range0 = rangeList[i];\n\n    if (range0[1] < range[0]) {\n      newRangeList.push(range0);\n      insertPosition = i + 1;\n    } else if (range0[0] > range[1]) {\n      newRangeList.push(range0);\n    } else {\n      range = [Math.min(range0[0], range[0]), Math.max(range0[1], range[1])];\n    }\n  }\n\n  newRangeList.splice(insertPosition, 0, range);\n  return newRangeList;\n}\n//# sourceMappingURL=range.js.map","function padArrayChunk(_ref) {\n  var source = _ref.source,\n      target = _ref.target,\n      _ref$start = _ref.start,\n      start = _ref$start === void 0 ? 0 : _ref$start,\n      end = _ref.end,\n      size = _ref.size,\n      getData = _ref.getData;\n  end = end || target.length;\n  var sourceLength = source.length;\n  var targetLength = end - start;\n\n  if (sourceLength > targetLength) {\n    target.set(source.subarray(0, targetLength), start);\n    return;\n  }\n\n  target.set(source, start);\n\n  if (!getData) {\n    return;\n  }\n\n  var i = sourceLength;\n\n  while (i < targetLength) {\n    var datum = getData(i, source);\n\n    for (var j = 0; j < size; j++) {\n      target[start + i] = datum[j] || 0;\n      i++;\n    }\n  }\n}\n\nexport function padArray(_ref2) {\n  var source = _ref2.source,\n      target = _ref2.target,\n      size = _ref2.size,\n      getData = _ref2.getData,\n      sourceStartIndices = _ref2.sourceStartIndices,\n      targetStartIndices = _ref2.targetStartIndices;\n\n  if (!Array.isArray(targetStartIndices)) {\n    padArrayChunk({\n      source: source,\n      target: target,\n      size: size,\n      getData: getData\n    });\n    return target;\n  }\n\n  var sourceIndex = 0;\n  var targetIndex = 0;\n\n  var getChunkData = getData && function (i, chunk) {\n    return getData(i + targetIndex, chunk);\n  };\n\n  var n = Math.min(sourceStartIndices.length, targetStartIndices.length);\n\n  for (var i = 1; i < n; i++) {\n    var nextSourceIndex = sourceStartIndices[i] * size;\n    var nextTargetIndex = targetStartIndices[i] * size;\n    padArrayChunk({\n      source: source.subarray(sourceIndex, nextSourceIndex),\n      target: target,\n      start: targetIndex,\n      end: nextTargetIndex,\n      size: size,\n      getData: getChunkData\n    });\n    sourceIndex = nextSourceIndex;\n    targetIndex = nextTargetIndex;\n  }\n\n  if (targetIndex < target.length) {\n    padArrayChunk({\n      source: [],\n      target: target,\n      start: targetIndex,\n      size: size,\n      getData: getChunkData\n    });\n  }\n\n  return target;\n}\n//# sourceMappingURL=array-utils.js.map","import { padArray } from '../../utils/array-utils';\nvar DEFAULT_TRANSITION_SETTINGS = {\n  interpolation: {\n    duration: 0,\n    easing: function easing(t) {\n      return t;\n    }\n  },\n  spring: {\n    stiffness: 0.05,\n    damping: 0.5\n  }\n};\nexport function normalizeTransitionSettings(userSettings, layerSettings) {\n  if (!userSettings) {\n    return null;\n  }\n\n  if (Number.isFinite(userSettings)) {\n    userSettings = {\n      duration: userSettings\n    };\n  }\n\n  userSettings.type = userSettings.type || 'interpolation';\n  return Object.assign({}, DEFAULT_TRANSITION_SETTINGS[userSettings.type], layerSettings, userSettings);\n}\nexport function getSourceBufferAttribute(gl, attribute) {\n  var buffer = attribute.getBuffer();\n\n  if (buffer) {\n    return [attribute.getBuffer(), {\n      divisor: 0,\n      size: attribute.size,\n      normalized: attribute.settings.normalized\n    }];\n  }\n\n  return attribute.value;\n}\nexport function getAttributeTypeFromSize(size) {\n  switch (size) {\n    case 1:\n      return 'float';\n\n    case 2:\n      return 'vec2';\n\n    case 3:\n      return 'vec3';\n\n    case 4:\n      return 'vec4';\n\n    default:\n      throw new Error(\"No defined attribute type for size \\\"\".concat(size, \"\\\"\"));\n  }\n}\nexport function cycleBuffers(buffers) {\n  buffers.push(buffers.shift());\n}\nexport function getAttributeBufferLength(attribute, numInstances) {\n  var doublePrecision = attribute.doublePrecision,\n      settings = attribute.settings,\n      value = attribute.value,\n      size = attribute.size;\n  var multiplier = doublePrecision && value instanceof Float64Array ? 2 : 1;\n  return (settings.noAlloc ? value.length : numInstances * size) * multiplier;\n}\nexport function padBuffer(_ref) {\n  var buffer = _ref.buffer,\n      numInstances = _ref.numInstances,\n      attribute = _ref.attribute,\n      fromLength = _ref.fromLength,\n      fromStartIndices = _ref.fromStartIndices,\n      _ref$getData = _ref.getData,\n      getData = _ref$getData === void 0 ? function (x) {\n    return x;\n  } : _ref$getData;\n  var precisionMultiplier = attribute.doublePrecision && attribute.value instanceof Float64Array ? 2 : 1;\n  var size = attribute.size * precisionMultiplier;\n  var byteOffset = attribute.byteOffset;\n  var toStartIndices = attribute.startIndices;\n  var hasStartIndices = fromStartIndices && toStartIndices;\n  var toLength = getAttributeBufferLength(attribute, numInstances);\n  var isConstant = attribute.state.constant;\n\n  if (!hasStartIndices && fromLength >= toLength) {\n    return;\n  }\n\n  var toData = isConstant ? attribute.value : attribute.getBuffer().getData({\n    srcByteOffset: byteOffset\n  });\n\n  if (attribute.settings.normalized && !isConstant) {\n    var getter = getData;\n\n    getData = function getData(value, chunk) {\n      return attribute._normalizeConstant(getter(value, chunk));\n    };\n  }\n\n  var getMissingData = isConstant ? function (i, chunk) {\n    return getData(toData, chunk);\n  } : function (i, chunk) {\n    return getData(toData.subarray(i, i + size), chunk);\n  };\n  var source = buffer.getData({\n    length: fromLength\n  });\n  var data = new Float32Array(toLength);\n  padArray({\n    source: source,\n    target: data,\n    sourceStartIndices: fromStartIndices,\n    targetStartIndices: toStartIndices,\n    size: size,\n    getData: getMissingData\n  });\n\n  if (buffer.byteLength < data.byteLength + byteOffset) {\n    buffer.reallocate(data.byteLength + byteOffset);\n  }\n\n  buffer.subData({\n    data: data,\n    offset: byteOffset\n  });\n}\n//# sourceMappingURL=attribute-transition-utils.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport DataColumn from './data-column';\nimport assert from '../../utils/assert';\nimport { createIterable, getAccessorFromBuffer } from '../../utils/iterable-utils';\nimport { fillArray } from '../../utils/flatten';\nimport * as range from '../../utils/range';\nimport { normalizeTransitionSettings } from './attribute-transition-utils';\n\nvar Attribute = function (_DataColumn) {\n  _inherits(Attribute, _DataColumn);\n\n  var _super = _createSuper(Attribute);\n\n  function Attribute(gl) {\n    var _this;\n\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Attribute);\n\n    _this = _super.call(this, gl, opts);\n    var _opts$transition = opts.transition,\n        transition = _opts$transition === void 0 ? false : _opts$transition,\n        _opts$noAlloc = opts.noAlloc,\n        noAlloc = _opts$noAlloc === void 0 ? false : _opts$noAlloc,\n        _opts$update = opts.update,\n        update = _opts$update === void 0 ? null : _opts$update,\n        _opts$accessor = opts.accessor,\n        accessor = _opts$accessor === void 0 ? null : _opts$accessor,\n        _opts$transform = opts.transform,\n        transform = _opts$transform === void 0 ? null : _opts$transform,\n        _opts$startIndices = opts.startIndices,\n        startIndices = _opts$startIndices === void 0 ? null : _opts$startIndices;\n    Object.assign(_this.settings, {\n      transition: transition,\n      noAlloc: noAlloc,\n      update: update || accessor && _this._autoUpdater,\n      accessor: accessor,\n      transform: transform\n    });\n    Object.assign(_this.state, {\n      lastExternalBuffer: null,\n      binaryValue: null,\n      binaryAccessor: null,\n      needsUpdate: true,\n      needsRedraw: false,\n      updateRanges: range.FULL,\n      startIndices: startIndices\n    });\n    Object.seal(_this.settings);\n    Object.seal(_this.state);\n\n    _this._validateAttributeUpdaters();\n\n    return _this;\n  }\n\n  _createClass(Attribute, [{\n    key: \"needsUpdate\",\n    value: function needsUpdate() {\n      return this.state.needsUpdate;\n    }\n  }, {\n    key: \"needsRedraw\",\n    value: function needsRedraw() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref$clearChangedFlag = _ref.clearChangedFlags,\n          clearChangedFlags = _ref$clearChangedFlag === void 0 ? false : _ref$clearChangedFlag;\n\n      var needsRedraw = this.state.needsRedraw;\n      this.state.needsRedraw = needsRedraw && !clearChangedFlags;\n      return needsRedraw;\n    }\n  }, {\n    key: \"getUpdateTriggers\",\n    value: function getUpdateTriggers() {\n      var accessor = this.settings.accessor;\n      return [this.id].concat(typeof accessor !== 'function' && accessor || []);\n    }\n  }, {\n    key: \"supportsTransition\",\n    value: function supportsTransition() {\n      return Boolean(this.settings.transition);\n    }\n  }, {\n    key: \"getTransitionSetting\",\n    value: function getTransitionSetting(opts) {\n      if (!opts || !this.supportsTransition()) {\n        return null;\n      }\n\n      var accessor = this.settings.accessor;\n      var layerSettings = this.settings.transition;\n      var userSettings = Array.isArray(accessor) ? opts[accessor.find(function (a) {\n        return opts[a];\n      })] : opts[accessor];\n      return normalizeTransitionSettings(userSettings, layerSettings);\n    }\n  }, {\n    key: \"setNeedsUpdate\",\n    value: function setNeedsUpdate() {\n      var reason = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.id;\n      var dataRange = arguments.length > 1 ? arguments[1] : undefined;\n      this.state.needsUpdate = this.state.needsUpdate || reason;\n      this.setNeedsRedraw(reason);\n\n      if (dataRange) {\n        var _dataRange$startRow = dataRange.startRow,\n            startRow = _dataRange$startRow === void 0 ? 0 : _dataRange$startRow,\n            _dataRange$endRow = dataRange.endRow,\n            endRow = _dataRange$endRow === void 0 ? Infinity : _dataRange$endRow;\n        this.state.updateRanges = range.add(this.state.updateRanges, [startRow, endRow]);\n      } else {\n        this.state.updateRanges = range.FULL;\n      }\n    }\n  }, {\n    key: \"clearNeedsUpdate\",\n    value: function clearNeedsUpdate() {\n      this.state.needsUpdate = false;\n      this.state.updateRanges = range.EMPTY;\n    }\n  }, {\n    key: \"setNeedsRedraw\",\n    value: function setNeedsRedraw() {\n      var reason = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.id;\n      this.state.needsRedraw = this.state.needsRedraw || reason;\n    }\n  }, {\n    key: \"update\",\n    value: function update(opts) {\n      this.setData(opts);\n    }\n  }, {\n    key: \"allocate\",\n    value: function allocate(numInstances) {\n      var state = this.state,\n          settings = this.settings;\n\n      if (settings.noAlloc) {\n        return false;\n      }\n\n      if (settings.update) {\n        assert(Number.isFinite(numInstances));\n\n        _get(_getPrototypeOf(Attribute.prototype), \"allocate\", this).call(this, {\n          numInstances: numInstances,\n          copy: state.updateRanges !== range.FULL\n        });\n\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"updateBuffer\",\n    value: function updateBuffer(_ref2) {\n      var numInstances = _ref2.numInstances,\n          data = _ref2.data,\n          props = _ref2.props,\n          context = _ref2.context;\n\n      if (!this.needsUpdate()) {\n        return false;\n      }\n\n      var updateRanges = this.state.updateRanges,\n          _this$settings = this.settings,\n          update = _this$settings.update,\n          noAlloc = _this$settings.noAlloc;\n      var updated = true;\n\n      if (update) {\n        var _iterator = _createForOfIteratorHelper(updateRanges),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var _step$value = _slicedToArray(_step.value, 2),\n                _startRow = _step$value[0],\n                _endRow = _step$value[1];\n\n            update.call(context, this, {\n              data: data,\n              startRow: _startRow,\n              endRow: _endRow,\n              props: props,\n              numInstances: numInstances\n            });\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n\n        if (!this.value) {} else if (this.constant || this.buffer.byteLength < this.value.byteLength + this.byteOffset) {\n          this.setData({\n            value: this.value,\n            constant: this.constant\n          });\n        } else {\n          var _iterator2 = _createForOfIteratorHelper(updateRanges),\n              _step2;\n\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var _step2$value = _slicedToArray(_step2.value, 2),\n                  startRow = _step2$value[0],\n                  endRow = _step2$value[1];\n\n              var startOffset = Number.isFinite(startRow) ? this.getVertexOffset(startRow) : 0;\n              var endOffset = Number.isFinite(endRow) ? this.getVertexOffset(endRow) : noAlloc || !Number.isFinite(numInstances) ? this.value.length : numInstances * this.size;\n\n              _get(_getPrototypeOf(Attribute.prototype), \"updateSubBuffer\", this).call(this, {\n                startOffset: startOffset,\n                endOffset: endOffset\n              });\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n        }\n\n        this._checkAttributeArray();\n      } else {\n        updated = false;\n      }\n\n      this.clearNeedsUpdate();\n      this.setNeedsRedraw();\n      return updated;\n    }\n  }, {\n    key: \"setConstantValue\",\n    value: function setConstantValue(value) {\n      if (value === undefined || typeof value === 'function') {\n        return false;\n      }\n\n      var hasChanged = this.setData({\n        constant: true,\n        value: value\n      });\n\n      if (hasChanged) {\n        this.setNeedsRedraw();\n      }\n\n      this.clearNeedsUpdate();\n      return true;\n    }\n  }, {\n    key: \"setExternalBuffer\",\n    value: function setExternalBuffer(buffer) {\n      var state = this.state;\n\n      if (!buffer) {\n        state.lastExternalBuffer = null;\n        return false;\n      }\n\n      this.clearNeedsUpdate();\n\n      if (state.lastExternalBuffer === buffer) {\n        return true;\n      }\n\n      state.lastExternalBuffer = buffer;\n      this.setNeedsRedraw();\n      this.setData(buffer);\n      return true;\n    }\n  }, {\n    key: \"setBinaryValue\",\n    value: function setBinaryValue(buffer) {\n      var startIndices = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var state = this.state,\n          settings = this.settings;\n\n      if (!buffer) {\n        state.binaryValue = null;\n        state.binaryAccessor = null;\n        return false;\n      }\n\n      if (settings.noAlloc) {\n        return false;\n      }\n\n      if (state.binaryValue === buffer) {\n        this.clearNeedsUpdate();\n        return true;\n      }\n\n      state.binaryValue = buffer;\n      this.setNeedsRedraw();\n\n      if (ArrayBuffer.isView(buffer)) {\n        buffer = {\n          value: buffer\n        };\n      }\n\n      var needsUpdate = settings.transform || startIndices !== this.startIndices;\n\n      if (needsUpdate) {\n        assert(ArrayBuffer.isView(buffer.value), \"invalid \".concat(settings.accessor));\n        var needsNormalize = buffer.size && buffer.size !== this.size;\n        state.binaryAccessor = getAccessorFromBuffer(buffer.value, {\n          size: buffer.size || this.size,\n          stride: buffer.stride,\n          offset: buffer.offset,\n          startIndices: startIndices,\n          nested: needsNormalize\n        });\n        return false;\n      }\n\n      this.clearNeedsUpdate();\n      this.setData(buffer);\n      return true;\n    }\n  }, {\n    key: \"getVertexOffset\",\n    value: function getVertexOffset(row) {\n      var startIndices = this.startIndices;\n      var vertexIndex = startIndices ? startIndices[row] : row;\n      return vertexIndex * this.size;\n    }\n  }, {\n    key: \"getShaderAttributes\",\n    value: function getShaderAttributes() {\n      var shaderAttributeDefs = this.settings.shaderAttributes || _defineProperty({}, this.id, null);\n\n      var shaderAttributes = {};\n\n      for (var shaderAttributeName in shaderAttributeDefs) {\n        Object.assign(shaderAttributes, _get(_getPrototypeOf(Attribute.prototype), \"getShaderAttributes\", this).call(this, shaderAttributeName, shaderAttributeDefs[shaderAttributeName]));\n      }\n\n      return shaderAttributes;\n    }\n  }, {\n    key: \"_autoUpdater\",\n    value: function _autoUpdater(attribute, _ref4) {\n      var data = _ref4.data,\n          startRow = _ref4.startRow,\n          endRow = _ref4.endRow,\n          props = _ref4.props,\n          numInstances = _ref4.numInstances;\n\n      if (attribute.constant) {\n        return;\n      }\n\n      var settings = attribute.settings,\n          state = attribute.state,\n          value = attribute.value,\n          size = attribute.size,\n          startIndices = attribute.startIndices;\n      var accessor = settings.accessor,\n          transform = settings.transform;\n      var accessorFunc = state.binaryAccessor || (typeof accessor === 'function' ? accessor : props[accessor]);\n      assert(typeof accessorFunc === 'function', \"accessor \\\"\".concat(accessor, \"\\\" is not a function\"));\n      var i = attribute.getVertexOffset(startRow);\n\n      var _createIterable = createIterable(data, startRow, endRow),\n          iterable = _createIterable.iterable,\n          objectInfo = _createIterable.objectInfo;\n\n      var _iterator3 = _createForOfIteratorHelper(iterable),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var object = _step3.value;\n          objectInfo.index++;\n          var objectValue = accessorFunc(object, objectInfo);\n\n          if (transform) {\n            objectValue = transform.call(this, objectValue);\n          }\n\n          if (startIndices) {\n            var numVertices = (objectInfo.index < startIndices.length - 1 ? startIndices[objectInfo.index + 1] : numInstances) - startIndices[objectInfo.index];\n\n            if (objectValue && Array.isArray(objectValue[0])) {\n              var startIndex = i;\n\n              var _iterator4 = _createForOfIteratorHelper(objectValue),\n                  _step4;\n\n              try {\n                for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n                  var item = _step4.value;\n\n                  attribute._normalizeValue(item, value, startIndex);\n\n                  startIndex += size;\n                }\n              } catch (err) {\n                _iterator4.e(err);\n              } finally {\n                _iterator4.f();\n              }\n            } else if (objectValue && objectValue.length > size) {\n              value.set(objectValue, i);\n            } else {\n              attribute._normalizeValue(objectValue, objectInfo.target, 0);\n\n              fillArray({\n                target: value,\n                source: objectInfo.target,\n                start: i,\n                count: numVertices\n              });\n            }\n\n            i += numVertices * size;\n          } else {\n            attribute._normalizeValue(objectValue, value, i);\n\n            i += size;\n          }\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  }, {\n    key: \"_validateAttributeUpdaters\",\n    value: function _validateAttributeUpdaters() {\n      var settings = this.settings;\n      var hasUpdater = settings.noAlloc || typeof settings.update === 'function';\n\n      if (!hasUpdater) {\n        throw new Error(\"Attribute \".concat(this.id, \" missing update or accessor\"));\n      }\n    }\n  }, {\n    key: \"_checkAttributeArray\",\n    value: function _checkAttributeArray() {\n      var value = this.value;\n      var limit = Math.min(4, this.size);\n\n      if (value && value.length >= limit) {\n        var valid = true;\n\n        switch (limit) {\n          case 4:\n            valid = valid && Number.isFinite(value[3]);\n\n          case 3:\n            valid = valid && Number.isFinite(value[2]);\n\n          case 2:\n            valid = valid && Number.isFinite(value[1]);\n\n          case 1:\n            valid = valid && Number.isFinite(value[0]);\n            break;\n\n          default:\n            valid = false;\n        }\n\n        if (!valid) {\n          throw new Error(\"Illegal attribute generated for \".concat(this.id));\n        }\n      }\n    }\n  }, {\n    key: \"startIndices\",\n    get: function get() {\n      return this.state.startIndices;\n    },\n    set: function set(layout) {\n      this.state.startIndices = layout;\n    }\n  }]);\n\n  return Attribute;\n}(DataColumn);\n\nexport { Attribute as default };\n//# sourceMappingURL=attribute.js.map","import deckLog from '../utils/log';\nimport { getLoggers } from './loggers';\nvar loggers = {};\n\nif (process.env.NODE_ENV !== 'production') {\n  loggers = getLoggers(deckLog);\n}\n\nexport function register(handlers) {\n  loggers = handlers;\n}\nexport default function debug(eventType) {\n  if (deckLog.level > 0 && loggers[eventType]) {\n    var _loggers$eventType;\n\n    (_loggers$eventType = loggers[eventType]).call.apply(_loggers$eventType, arguments);\n  }\n}\n//# sourceMappingURL=index.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'shadertools: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { assert } from '../utils';\nvar FS100 = \"void main() {gl_FragColor = vec4(0);}\";\nvar FS_GLES = \"out vec4 transform_output;\\nvoid main() {\\n  transform_output = vec4(0);\\n}\";\nvar FS300 = \"#version 300 es\\n\".concat(FS_GLES);\nexport function getQualifierDetails(line, qualifiers) {\n  qualifiers = Array.isArray(qualifiers) ? qualifiers : [qualifiers];\n  var words = line.replace(/^\\s+/, '').split(/\\s+/);\n\n  var _words = _slicedToArray(words, 3),\n      qualifier = _words[0],\n      type = _words[1],\n      definition = _words[2];\n\n  if (!qualifiers.includes(qualifier) || !type || !definition) {\n    return null;\n  }\n\n  var name = definition.split(';')[0];\n  return {\n    qualifier: qualifier,\n    type: type,\n    name: name\n  };\n}\nexport function getPassthroughFS() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _options$version = options.version,\n      version = _options$version === void 0 ? 100 : _options$version,\n      input = options.input,\n      inputType = options.inputType,\n      output = options.output;\n\n  if (!input) {\n    if (version === 300) {\n      return FS300;\n    } else if (version > 300) {\n      return \"#version \".concat(version, \"\\n\").concat(FS_GLES);\n    }\n\n    return FS100;\n  }\n\n  var outputValue = convertToVec4(input, inputType);\n\n  if (version >= 300) {\n    return \"#version \".concat(version, \" \").concat(version === 300 ? 'es' : '', \"\\nin \").concat(inputType, \" \").concat(input, \";\\nout vec4 \").concat(output, \";\\nvoid main() {\\n  \").concat(output, \" = \").concat(outputValue, \";\\n}\");\n  }\n\n  return \"varying \".concat(inputType, \" \").concat(input, \";\\nvoid main() {\\n  gl_FragColor = \").concat(outputValue, \";\\n}\");\n}\nexport function typeToChannelSuffix(type) {\n  switch (type) {\n    case 'float':\n      return 'x';\n\n    case 'vec2':\n      return 'xy';\n\n    case 'vec3':\n      return 'xyz';\n\n    case 'vec4':\n      return 'xyzw';\n\n    default:\n      assert(false);\n      return null;\n  }\n}\nexport function typeToChannelCount(type) {\n  switch (type) {\n    case 'float':\n      return 1;\n\n    case 'vec2':\n      return 2;\n\n    case 'vec3':\n      return 3;\n\n    case 'vec4':\n      return 4;\n\n    default:\n      assert(false);\n      return null;\n  }\n}\nexport function convertToVec4(variable, type) {\n  switch (type) {\n    case 'float':\n      return \"vec4(\".concat(variable, \", 0.0, 0.0, 1.0)\");\n\n    case 'vec2':\n      return \"vec4(\".concat(variable, \", 0.0, 1.0)\");\n\n    case 'vec3':\n      return \"vec4(\".concat(variable, \", 1.0)\");\n\n    case 'vec4':\n      return variable;\n\n    default:\n      assert(false);\n      return null;\n  }\n}\n//# sourceMappingURL=shader-utils.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { isWebGL2, assertWebGL2Context, log } from '@luma.gl/gltools';\nimport Resource from './resource';\nimport Buffer from './buffer';\nimport { isObjectEmpty } from '../utils';\n\nvar TransformFeedback = function (_Resource) {\n  _inherits(TransformFeedback, _Resource);\n\n  var _super = _createSuper(TransformFeedback);\n\n  _createClass(TransformFeedback, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      return isWebGL2(gl);\n    }\n  }]);\n\n  function TransformFeedback(gl) {\n    var _this;\n\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, TransformFeedback);\n\n    assertWebGL2Context(gl);\n    _this = _super.call(this, gl, props);\n\n    _this.initialize(props);\n\n    _this.stubRemovedMethods('TransformFeedback', 'v6.0', ['pause', 'resume']);\n\n    Object.seal(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(TransformFeedback, [{\n    key: \"initialize\",\n    value: function initialize() {\n      var _this2 = this;\n\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.buffers = {};\n      this.unused = {};\n      this.configuration = null;\n      this.bindOnUse = true;\n\n      if (!isObjectEmpty(this.buffers)) {\n        this.bind(function () {\n          return _this2._unbindBuffers();\n        });\n      }\n\n      this.setProps(props);\n      return this;\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('program' in props) {\n        this.configuration = props.program && props.program.configuration;\n      }\n\n      if ('configuration' in props) {\n        this.configuration = props.configuration;\n      }\n\n      if ('bindOnUse' in props) {\n        props = props.bindOnUse;\n      }\n\n      if ('buffers' in props) {\n        this.setBuffers(props.buffers);\n      }\n    }\n  }, {\n    key: \"setBuffers\",\n    value: function setBuffers() {\n      var _this3 = this;\n\n      var buffers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.bind(function () {\n        for (var bufferName in buffers) {\n          _this3.setBuffer(bufferName, buffers[bufferName]);\n        }\n      });\n      return this;\n    }\n  }, {\n    key: \"setBuffer\",\n    value: function setBuffer(locationOrName, bufferOrParams) {\n      var _this4 = this;\n\n      var location = this._getVaryingIndex(locationOrName);\n\n      var _this$_getBufferParam = this._getBufferParams(bufferOrParams),\n          buffer = _this$_getBufferParam.buffer,\n          byteSize = _this$_getBufferParam.byteSize,\n          byteOffset = _this$_getBufferParam.byteOffset;\n\n      if (location < 0) {\n        this.unused[locationOrName] = buffer;\n        log.warn(function () {\n          return \"\".concat(_this4.id, \" unused varying buffer \").concat(locationOrName);\n        })();\n        return this;\n      }\n\n      this.buffers[location] = bufferOrParams;\n\n      if (!this.bindOnUse) {\n        this._bindBuffer(location, buffer, byteOffset, byteSize);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"begin\",\n    value: function begin() {\n      var primitiveMode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      this.gl.bindTransformFeedback(36386, this.handle);\n\n      this._bindBuffers();\n\n      this.gl.beginTransformFeedback(primitiveMode);\n      return this;\n    }\n  }, {\n    key: \"end\",\n    value: function end() {\n      this.gl.endTransformFeedback();\n\n      this._unbindBuffers();\n\n      this.gl.bindTransformFeedback(36386, null);\n      return this;\n    }\n  }, {\n    key: \"_getBufferParams\",\n    value: function _getBufferParams(bufferOrParams) {\n      var byteOffset;\n      var byteSize;\n      var buffer;\n\n      if (bufferOrParams instanceof Buffer === false) {\n        buffer = bufferOrParams.buffer;\n        byteSize = bufferOrParams.byteSize;\n        byteOffset = bufferOrParams.byteOffset;\n      } else {\n        buffer = bufferOrParams;\n      }\n\n      if (byteOffset !== undefined || byteSize !== undefined) {\n        byteOffset = byteOffset || 0;\n        byteSize = byteSize || buffer.byteLength - byteOffset;\n      }\n\n      return {\n        buffer: buffer,\n        byteOffset: byteOffset,\n        byteSize: byteSize\n      };\n    }\n  }, {\n    key: \"_getVaryingInfo\",\n    value: function _getVaryingInfo(locationOrName) {\n      return this.configuration && this.configuration.getVaryingInfo(locationOrName);\n    }\n  }, {\n    key: \"_getVaryingIndex\",\n    value: function _getVaryingIndex(locationOrName) {\n      if (this.configuration) {\n        return this.configuration.getVaryingInfo(locationOrName).location;\n      }\n\n      var location = Number(locationOrName);\n      return Number.isFinite(location) ? location : -1;\n    }\n  }, {\n    key: \"_bindBuffers\",\n    value: function _bindBuffers() {\n      if (this.bindOnUse) {\n        for (var bufferIndex in this.buffers) {\n          var _this$_getBufferParam2 = this._getBufferParams(this.buffers[bufferIndex]),\n              buffer = _this$_getBufferParam2.buffer,\n              byteSize = _this$_getBufferParam2.byteSize,\n              byteOffset = _this$_getBufferParam2.byteOffset;\n\n          this._bindBuffer(bufferIndex, buffer, byteOffset, byteSize);\n        }\n      }\n    }\n  }, {\n    key: \"_unbindBuffers\",\n    value: function _unbindBuffers() {\n      if (this.bindOnUse) {\n        for (var bufferIndex in this.buffers) {\n          this._bindBuffer(bufferIndex, null);\n        }\n      }\n    }\n  }, {\n    key: \"_bindBuffer\",\n    value: function _bindBuffer(index, buffer) {\n      var byteOffset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var byteSize = arguments.length > 3 ? arguments[3] : undefined;\n      var handle = buffer && buffer.handle;\n\n      if (!handle || byteSize === undefined) {\n        this.gl.bindBufferBase(35982, index, handle);\n      } else {\n        this.gl.bindBufferRange(35982, index, handle, byteOffset, byteSize);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createTransformFeedback();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteTransformFeedback(this.handle);\n    }\n  }, {\n    key: \"_bindHandle\",\n    value: function _bindHandle(handle) {\n      this.gl.bindTransformFeedback(36386, this.handle);\n    }\n  }]);\n\n  return TransformFeedback;\n}(Resource);\n\nexport { TransformFeedback as default };\n//# sourceMappingURL=transform-feedback.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { Buffer, TransformFeedback } from '@luma.gl/webgl';\nimport { assert } from '@luma.gl/webgl';\n\nvar BufferTransform = function () {\n  function BufferTransform(gl) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, BufferTransform);\n\n    this.gl = gl;\n    this.currentIndex = 0;\n    this.feedbackMap = {};\n    this.varyings = null;\n    this.bindings = [];\n    this.resources = {};\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  _createClass(BufferTransform, [{\n    key: \"setupResources\",\n    value: function setupResources(opts) {\n      var _iterator = _createForOfIteratorHelper(this.bindings),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var binding = _step.value;\n\n          this._setupTransformFeedback(binding, opts);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: \"updateModelProps\",\n    value: function updateModelProps() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var varyings = this.varyings;\n\n      if (varyings.length > 0) {\n        props = Object.assign({}, props, {\n          varyings: varyings\n        });\n      }\n\n      return props;\n    }\n  }, {\n    key: \"getDrawOptions\",\n    value: function getDrawOptions() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var binding = this.bindings[this.currentIndex];\n      var sourceBuffers = binding.sourceBuffers,\n          transformFeedback = binding.transformFeedback;\n      var attributes = Object.assign({}, sourceBuffers, opts.attributes);\n      return {\n        attributes: attributes,\n        transformFeedback: transformFeedback\n      };\n    }\n  }, {\n    key: \"swap\",\n    value: function swap() {\n      if (this.feedbackMap) {\n        this.currentIndex = this._getNextIndex();\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this._setupBuffers(opts);\n    }\n  }, {\n    key: \"getBuffer\",\n    value: function getBuffer(varyingName) {\n      var feedbackBuffers = this.bindings[this.currentIndex].feedbackBuffers;\n      var bufferOrParams = varyingName ? feedbackBuffers[varyingName] : null;\n\n      if (!bufferOrParams) {\n        return null;\n      }\n\n      return bufferOrParams instanceof Buffer ? bufferOrParams : bufferOrParams.buffer;\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var varyingName = options.varyingName;\n      var buffer = this.getBuffer(varyingName);\n\n      if (buffer) {\n        return buffer.getData();\n      }\n\n      return null;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      for (var name in this.resources) {\n        this.resources[name][\"delete\"]();\n      }\n    }\n  }, {\n    key: \"_initialize\",\n    value: function _initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this._setupBuffers(props);\n\n      this.varyings = props.varyings || Object.keys(this.bindings[this.currentIndex].feedbackBuffers);\n\n      if (this.varyings.length > 0) {\n        assert(isWebGL2(this.gl));\n      }\n    }\n  }, {\n    key: \"_getFeedbackBuffers\",\n    value: function _getFeedbackBuffers(props) {\n      var _props$sourceBuffers = props.sourceBuffers,\n          sourceBuffers = _props$sourceBuffers === void 0 ? {} : _props$sourceBuffers;\n      var feedbackBuffers = {};\n\n      if (this.bindings[this.currentIndex]) {\n        Object.assign(feedbackBuffers, this.bindings[this.currentIndex].feedbackBuffers);\n      }\n\n      if (this.feedbackMap) {\n        for (var sourceName in this.feedbackMap) {\n          var feedbackName = this.feedbackMap[sourceName];\n\n          if (sourceName in sourceBuffers) {\n            feedbackBuffers[feedbackName] = sourceName;\n          }\n        }\n      }\n\n      Object.assign(feedbackBuffers, props.feedbackBuffers);\n\n      for (var bufferName in feedbackBuffers) {\n        var bufferOrRef = feedbackBuffers[bufferName];\n\n        if (typeof bufferOrRef === 'string') {\n          var sourceBuffer = sourceBuffers[bufferOrRef];\n          var byteLength = sourceBuffer.byteLength,\n              usage = sourceBuffer.usage,\n              accessor = sourceBuffer.accessor;\n          feedbackBuffers[bufferName] = this._createNewBuffer(bufferName, {\n            byteLength: byteLength,\n            usage: usage,\n            accessor: accessor\n          });\n        }\n      }\n\n      return feedbackBuffers;\n    }\n  }, {\n    key: \"_setupBuffers\",\n    value: function _setupBuffers() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _props$sourceBuffers2 = props.sourceBuffers,\n          sourceBuffers = _props$sourceBuffers2 === void 0 ? null : _props$sourceBuffers2;\n      Object.assign(this.feedbackMap, props.feedbackMap);\n\n      var feedbackBuffers = this._getFeedbackBuffers(props);\n\n      this._updateBindings({\n        sourceBuffers: sourceBuffers,\n        feedbackBuffers: feedbackBuffers\n      });\n    }\n  }, {\n    key: \"_setupTransformFeedback\",\n    value: function _setupTransformFeedback(binding, _ref) {\n      var model = _ref.model;\n      var program = model.program;\n      binding.transformFeedback = new TransformFeedback(this.gl, {\n        program: program,\n        buffers: binding.feedbackBuffers\n      });\n    }\n  }, {\n    key: \"_updateBindings\",\n    value: function _updateBindings(opts) {\n      this.bindings[this.currentIndex] = this._updateBinding(this.bindings[this.currentIndex], opts);\n\n      if (this.feedbackMap) {\n        var _this$_swapBuffers = this._swapBuffers(this.bindings[this.currentIndex]),\n            sourceBuffers = _this$_swapBuffers.sourceBuffers,\n            feedbackBuffers = _this$_swapBuffers.feedbackBuffers;\n\n        var nextIndex = this._getNextIndex();\n\n        this.bindings[nextIndex] = this._updateBinding(this.bindings[nextIndex], {\n          sourceBuffers: sourceBuffers,\n          feedbackBuffers: feedbackBuffers\n        });\n      }\n    }\n  }, {\n    key: \"_updateBinding\",\n    value: function _updateBinding(binding, opts) {\n      if (!binding) {\n        return {\n          sourceBuffers: Object.assign({}, opts.sourceBuffers),\n          feedbackBuffers: Object.assign({}, opts.feedbackBuffers)\n        };\n      }\n\n      Object.assign(binding.sourceBuffers, opts.sourceBuffers);\n      Object.assign(binding.feedbackBuffers, opts.feedbackBuffers);\n\n      if (binding.transformFeedback) {\n        binding.transformFeedback.setBuffers(binding.feedbackBuffers);\n      }\n\n      return binding;\n    }\n  }, {\n    key: \"_swapBuffers\",\n    value: function _swapBuffers(opts) {\n      if (!this.feedbackMap) {\n        return null;\n      }\n\n      var sourceBuffers = Object.assign({}, opts.sourceBuffers);\n      var feedbackBuffers = Object.assign({}, opts.feedbackBuffers);\n\n      for (var srcName in this.feedbackMap) {\n        var dstName = this.feedbackMap[srcName];\n        sourceBuffers[srcName] = opts.feedbackBuffers[dstName];\n        feedbackBuffers[dstName] = opts.sourceBuffers[srcName];\n        assert(feedbackBuffers[dstName] instanceof Buffer);\n      }\n\n      return {\n        sourceBuffers: sourceBuffers,\n        feedbackBuffers: feedbackBuffers\n      };\n    }\n  }, {\n    key: \"_createNewBuffer\",\n    value: function _createNewBuffer(name, opts) {\n      var buffer = new Buffer(this.gl, opts);\n\n      if (this.resources[name]) {\n        this.resources[name][\"delete\"]();\n      }\n\n      this.resources[name] = buffer;\n      return buffer;\n    }\n  }, {\n    key: \"_getNextIndex\",\n    value: function _getNextIndex() {\n      return (this.currentIndex + 1) % 2;\n    }\n  }]);\n\n  return BufferTransform;\n}();\n\nexport { BufferTransform as default };\n//# sourceMappingURL=buffer-transform.js.map","export default function getShaderVersion(source) {\n  var version = 100;\n  var words = source.match(/[^\\s]+/g);\n\n  if (words.length >= 2 && words[0] === '#version') {\n    var v = parseInt(words[1], 10);\n\n    if (Number.isFinite(v)) {\n      version = v;\n    }\n  }\n\n  return version;\n}\n//# sourceMappingURL=get-shader-version.js.map","export var MODULE_INJECTORS_VS = \"#ifdef MODULE_LOGDEPTH\\n  logdepth_adjustPosition(gl_Position);\\n#endif\\n\";\nexport var MODULE_INJECTORS_FS = \"#ifdef MODULE_MATERIAL\\n  gl_FragColor = material_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_LIGHTING\\n  gl_FragColor = lighting_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_FOG\\n  gl_FragColor = fog_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_PICKING\\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_LOGDEPTH\\n  logdepth_setFragDepth();\\n#endif\\n\";\n//# sourceMappingURL=module-injectors.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _MODULE_INJECTORS;\n\nimport { MODULE_INJECTORS_VS, MODULE_INJECTORS_FS } from '../modules/module-injectors';\nimport { VERTEX_SHADER, FRAGMENT_SHADER } from './constants';\nimport { assert } from '../utils';\nvar MODULE_INJECTORS = (_MODULE_INJECTORS = {}, _defineProperty(_MODULE_INJECTORS, VERTEX_SHADER, MODULE_INJECTORS_VS), _defineProperty(_MODULE_INJECTORS, FRAGMENT_SHADER, MODULE_INJECTORS_FS), _MODULE_INJECTORS);\nexport var DECLARATION_INJECT_MARKER = '__LUMA_INJECT_DECLARATIONS__';\nvar REGEX_START_OF_MAIN = /void\\s+main\\s*\\([^)]*\\)\\s*\\{\\n?/;\nvar REGEX_END_OF_MAIN = /}\\n?[^{}]*$/;\nvar fragments = [];\nexport default function injectShader(source, type, inject) {\n  var injectStandardStubs = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var isVertex = type === VERTEX_SHADER;\n\n  var _loop = function _loop(key) {\n    var fragmentData = inject[key];\n    fragmentData.sort(function (a, b) {\n      return a.order - b.order;\n    });\n    fragments.length = fragmentData.length;\n\n    for (var i = 0, len = fragmentData.length; i < len; ++i) {\n      fragments[i] = fragmentData[i].injection;\n    }\n\n    var fragmentString = \"\".concat(fragments.join('\\n'), \"\\n\");\n\n    switch (key) {\n      case 'vs:#decl':\n        if (isVertex) {\n          source = source.replace(DECLARATION_INJECT_MARKER, fragmentString);\n        }\n\n        break;\n\n      case 'vs:#main-start':\n        if (isVertex) {\n          source = source.replace(REGEX_START_OF_MAIN, function (match) {\n            return match + fragmentString;\n          });\n        }\n\n        break;\n\n      case 'vs:#main-end':\n        if (isVertex) {\n          source = source.replace(REGEX_END_OF_MAIN, function (match) {\n            return fragmentString + match;\n          });\n        }\n\n        break;\n\n      case 'fs:#decl':\n        if (!isVertex) {\n          source = source.replace(DECLARATION_INJECT_MARKER, fragmentString);\n        }\n\n        break;\n\n      case 'fs:#main-start':\n        if (!isVertex) {\n          source = source.replace(REGEX_START_OF_MAIN, function (match) {\n            return match + fragmentString;\n          });\n        }\n\n        break;\n\n      case 'fs:#main-end':\n        if (!isVertex) {\n          source = source.replace(REGEX_END_OF_MAIN, function (match) {\n            return fragmentString + match;\n          });\n        }\n\n        break;\n\n      default:\n        source = source.replace(key, function (match) {\n          return match + fragmentString;\n        });\n    }\n  };\n\n  for (var key in inject) {\n    _loop(key);\n  }\n\n  source = source.replace(DECLARATION_INJECT_MARKER, '');\n\n  if (injectStandardStubs) {\n    source = source.replace(/\\}\\s*$/, function (match) {\n      return match + MODULE_INJECTORS[type];\n    });\n  }\n\n  return source;\n}\nexport function combineInjects(injects) {\n  var result = {};\n  assert(Array.isArray(injects) && injects.length > 1);\n  injects.forEach(function (inject) {\n    for (var key in inject) {\n      result[key] = result[key] ? \"\".concat(result[key], \"\\n\").concat(inject[key]) : inject[key];\n    }\n  });\n  return result;\n}\n//# sourceMappingURL=inject-shader.js.map","export var VERTEX_SHADER = 'vs';\nexport var FRAGMENT_SHADER = 'fs';\n//# sourceMappingURL=constants.js.map","var vs = \"attribute float transform_elementID;\\nvec2 transform_getPixelSizeHalf(vec2 size) {\\n  return vec2(1.) / (2. * size);\\n}\\n\\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\\n  return vec2(xIndex, yIndex);\\n}\\nvec2 transform_getTexCoord(vec2 size) {\\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\\n  vec2 coord = indices / size + pixelSizeHalf;\\n  return coord;\\n}\\nvec2 transform_getPos(vec2 size) {\\n  vec2 texCoord = transform_getTexCoord(size);\\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\\n  return pos;\\n}\\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\\n  vec2 texCoord = transform_getTexCoord(size);\\n  vec4 textureColor = texture2D(texSampler, texCoord);\\n  return textureColor;\\n}\\n\";\nexport var transform = {\n  name: 'transform',\n  vs: vs,\n  fs: null\n};\n//# sourceMappingURL=transform.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _SRC_TEX_PARAMETER_OV;\n\nimport { cloneTextureFrom, readPixelsToArray, getShaderVersion, Buffer, Texture2D, Framebuffer } from '@luma.gl/webgl';\nimport { _transform as transformModule, getPassthroughFS, typeToChannelCount, combineInjects } from '@luma.gl/shadertools';\nimport { updateForTextures, getSizeUniforms } from './transform-shader-utils';\nvar SRC_TEX_PARAMETER_OVERRIDES = (_SRC_TEX_PARAMETER_OV = {}, _defineProperty(_SRC_TEX_PARAMETER_OV, 10241, 9728), _defineProperty(_SRC_TEX_PARAMETER_OV, 10240, 9728), _defineProperty(_SRC_TEX_PARAMETER_OV, 10242, 33071), _defineProperty(_SRC_TEX_PARAMETER_OV, 10243, 33071), _SRC_TEX_PARAMETER_OV);\nvar FS_OUTPUT_VARIABLE = 'transform_output';\n\nvar TextureTransform = function () {\n  function TextureTransform(gl) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, TextureTransform);\n\n    this.gl = gl;\n    this.id = this.currentIndex = 0;\n    this._swapTexture = null;\n    this.targetTextureVarying = null;\n    this.targetTextureType = null;\n    this.samplerTextureMap = null;\n    this.bindings = [];\n    this.resources = {};\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  _createClass(TextureTransform, [{\n    key: \"updateModelProps\",\n    value: function updateModelProps() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var updatedModelProps = this._processVertexShader(props);\n\n      return Object.assign({}, props, updatedModelProps);\n    }\n  }, {\n    key: \"getDrawOptions\",\n    value: function getDrawOptions() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _this$bindings$this$c = this.bindings[this.currentIndex],\n          sourceBuffers = _this$bindings$this$c.sourceBuffers,\n          sourceTextures = _this$bindings$this$c.sourceTextures,\n          framebuffer = _this$bindings$this$c.framebuffer,\n          targetTexture = _this$bindings$this$c.targetTexture;\n      var attributes = Object.assign({}, sourceBuffers, opts.attributes);\n      var uniforms = Object.assign({}, opts.uniforms);\n      var parameters = Object.assign({}, opts.parameters);\n      var discard = opts.discard;\n\n      if (this.hasSourceTextures || this.hasTargetTexture) {\n        attributes.transform_elementID = this.elementIDBuffer;\n\n        for (var sampler in this.samplerTextureMap) {\n          var textureName = this.samplerTextureMap[sampler];\n          uniforms[sampler] = sourceTextures[textureName];\n        }\n\n        this._setSourceTextureParameters();\n\n        var sizeUniforms = getSizeUniforms({\n          sourceTextureMap: sourceTextures,\n          targetTextureVarying: this.targetTextureVarying,\n          targetTexture: targetTexture\n        });\n        Object.assign(uniforms, sizeUniforms);\n      }\n\n      if (this.hasTargetTexture) {\n        discard = false;\n        parameters.viewport = [0, 0, framebuffer.width, framebuffer.height];\n      }\n\n      return {\n        attributes: attributes,\n        framebuffer: framebuffer,\n        uniforms: uniforms,\n        discard: discard,\n        parameters: parameters\n      };\n    }\n  }, {\n    key: \"swap\",\n    value: function swap() {\n      if (this._swapTexture) {\n        this.currentIndex = this._getNextIndex();\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this._setupTextures(opts);\n    }\n  }, {\n    key: \"getTargetTexture\",\n    value: function getTargetTexture() {\n      var targetTexture = this.bindings[this.currentIndex].targetTexture;\n      return targetTexture;\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref$packed = _ref.packed,\n          packed = _ref$packed === void 0 ? false : _ref$packed;\n\n      var framebuffer = this.bindings[this.currentIndex].framebuffer;\n      var pixels = readPixelsToArray(framebuffer);\n\n      if (!packed) {\n        return pixels;\n      }\n\n      var ArrayType = pixels.constructor;\n      var channelCount = typeToChannelCount(this.targetTextureType);\n      var packedPixels = new ArrayType(pixels.length * channelCount / 4);\n      var packCount = 0;\n\n      for (var i = 0; i < pixels.length; i += 4) {\n        for (var j = 0; j < channelCount; j++) {\n          packedPixels[packCount++] = pixels[i + j];\n        }\n      }\n\n      return packedPixels;\n    }\n  }, {\n    key: \"getFramebuffer\",\n    value: function getFramebuffer() {\n      var currentResources = this.bindings[this.currentIndex];\n      return currentResources.framebuffer;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      if (this.ownTexture) {\n        this.ownTexture[\"delete\"]();\n      }\n\n      if (this.elementIDBuffer) {\n        this.elementIDBuffer[\"delete\"]();\n      }\n    }\n  }, {\n    key: \"_initialize\",\n    value: function _initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _targetTextureVarying = props._targetTextureVarying,\n          _swapTexture = props._swapTexture;\n      this._swapTexture = _swapTexture;\n      this.targetTextureVarying = _targetTextureVarying;\n      this.hasTargetTexture = _targetTextureVarying;\n\n      this._setupTextures(props);\n    }\n  }, {\n    key: \"_createTargetTexture\",\n    value: function _createTargetTexture(props) {\n      var sourceTextures = props.sourceTextures,\n          textureOrReference = props.textureOrReference;\n\n      if (textureOrReference instanceof Texture2D) {\n        return textureOrReference;\n      }\n\n      var refTexture = sourceTextures[textureOrReference];\n\n      if (!refTexture) {\n        return null;\n      }\n\n      this._targetRefTexName = textureOrReference;\n      return this._createNewTexture(refTexture);\n    }\n  }, {\n    key: \"_setupTextures\",\n    value: function _setupTextures() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var sourceBuffers = props.sourceBuffers,\n          _props$_sourceTexture = props._sourceTextures,\n          _sourceTextures = _props$_sourceTexture === void 0 ? {} : _props$_sourceTexture,\n          _targetTexture = props._targetTexture;\n\n      var targetTexture = this._createTargetTexture({\n        sourceTextures: _sourceTextures,\n        textureOrReference: _targetTexture\n      });\n\n      this.hasSourceTextures = this.hasSourceTextures || _sourceTextures && Object.keys(_sourceTextures).length > 0;\n\n      this._updateBindings({\n        sourceBuffers: sourceBuffers,\n        sourceTextures: _sourceTextures,\n        targetTexture: targetTexture\n      });\n\n      if ('elementCount' in props) {\n        this._updateElementIDBuffer(props.elementCount);\n      }\n    }\n  }, {\n    key: \"_updateElementIDBuffer\",\n    value: function _updateElementIDBuffer(elementCount) {\n      if (typeof elementCount !== 'number' || this.elementCount >= elementCount) {\n        return;\n      }\n\n      var elementIds = new Float32Array(elementCount);\n      elementIds.forEach(function (_, index, array) {\n        array[index] = index;\n      });\n\n      if (!this.elementIDBuffer) {\n        this.elementIDBuffer = new Buffer(this.gl, {\n          data: elementIds,\n          accessor: {\n            size: 1\n          }\n        });\n      } else {\n        this.elementIDBuffer.setData({\n          data: elementIds\n        });\n      }\n\n      this.elementCount = elementCount;\n    }\n  }, {\n    key: \"_updateBindings\",\n    value: function _updateBindings(opts) {\n      this.bindings[this.currentIndex] = this._updateBinding(this.bindings[this.currentIndex], opts);\n\n      if (this._swapTexture) {\n        var _this$_swapTextures = this._swapTextures(this.bindings[this.currentIndex]),\n            sourceTextures = _this$_swapTextures.sourceTextures,\n            targetTexture = _this$_swapTextures.targetTexture;\n\n        var nextIndex = this._getNextIndex();\n\n        this.bindings[nextIndex] = this._updateBinding(this.bindings[nextIndex], {\n          sourceTextures: sourceTextures,\n          targetTexture: targetTexture\n        });\n      }\n    }\n  }, {\n    key: \"_updateBinding\",\n    value: function _updateBinding(binding, opts) {\n      var sourceBuffers = opts.sourceBuffers,\n          sourceTextures = opts.sourceTextures,\n          targetTexture = opts.targetTexture;\n\n      if (!binding) {\n        binding = {\n          sourceBuffers: {},\n          sourceTextures: {},\n          targetTexture: null\n        };\n      }\n\n      Object.assign(binding.sourceTextures, sourceTextures);\n      Object.assign(binding.sourceBuffers, sourceBuffers);\n\n      if (targetTexture) {\n        binding.targetTexture = targetTexture;\n        var width = targetTexture.width,\n            height = targetTexture.height;\n        var _binding = binding,\n            framebuffer = _binding.framebuffer;\n\n        if (framebuffer) {\n          framebuffer.update({\n            attachments: _defineProperty({}, 36064, targetTexture),\n            resizeAttachments: false\n          });\n          framebuffer.resize({\n            width: width,\n            height: height\n          });\n        } else {\n          binding.framebuffer = new Framebuffer(this.gl, {\n            id: \"transform-framebuffer\",\n            width: width,\n            height: height,\n            attachments: _defineProperty({}, 36064, targetTexture)\n          });\n        }\n      }\n\n      return binding;\n    }\n  }, {\n    key: \"_setSourceTextureParameters\",\n    value: function _setSourceTextureParameters() {\n      var index = this.currentIndex;\n      var sourceTextures = this.bindings[index].sourceTextures;\n\n      for (var name in sourceTextures) {\n        sourceTextures[name].setParameters(SRC_TEX_PARAMETER_OVERRIDES);\n      }\n    }\n  }, {\n    key: \"_swapTextures\",\n    value: function _swapTextures(opts) {\n      if (!this._swapTexture) {\n        return null;\n      }\n\n      var sourceTextures = Object.assign({}, opts.sourceTextures);\n      sourceTextures[this._swapTexture] = opts.targetTexture;\n      var targetTexture = opts.sourceTextures[this._swapTexture];\n      return {\n        sourceTextures: sourceTextures,\n        targetTexture: targetTexture\n      };\n    }\n  }, {\n    key: \"_createNewTexture\",\n    value: function _createNewTexture(refTexture) {\n      var _parameters;\n\n      var texture = cloneTextureFrom(refTexture, {\n        parameters: (_parameters = {}, _defineProperty(_parameters, 10241, 9728), _defineProperty(_parameters, 10240, 9728), _defineProperty(_parameters, 10242, 33071), _defineProperty(_parameters, 10243, 33071), _parameters),\n        pixelStore: _defineProperty({}, 37440, false)\n      });\n\n      if (this.ownTexture) {\n        this.ownTexture[\"delete\"]();\n      }\n\n      this.ownTexture = texture;\n      return texture;\n    }\n  }, {\n    key: \"_getNextIndex\",\n    value: function _getNextIndex() {\n      return (this.currentIndex + 1) % 2;\n    }\n  }, {\n    key: \"_processVertexShader\",\n    value: function _processVertexShader() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _this$bindings$this$c2 = this.bindings[this.currentIndex],\n          sourceTextures = _this$bindings$this$c2.sourceTextures,\n          targetTexture = _this$bindings$this$c2.targetTexture;\n\n      var _updateForTextures = updateForTextures({\n        vs: props.vs,\n        sourceTextureMap: sourceTextures,\n        targetTextureVarying: this.targetTextureVarying,\n        targetTexture: targetTexture\n      }),\n          vs = _updateForTextures.vs,\n          uniforms = _updateForTextures.uniforms,\n          targetTextureType = _updateForTextures.targetTextureType,\n          inject = _updateForTextures.inject,\n          samplerTextureMap = _updateForTextures.samplerTextureMap;\n\n      var combinedInject = combineInjects([props.inject || {}, inject]);\n      this.targetTextureType = targetTextureType;\n      this.samplerTextureMap = samplerTextureMap;\n      var fs = props._fs || getPassthroughFS({\n        version: getShaderVersion(vs),\n        input: this.targetTextureVarying,\n        inputType: targetTextureType,\n        output: FS_OUTPUT_VARIABLE\n      });\n      var modules = this.hasSourceTextures || this.targetTextureVarying ? [transformModule].concat(props.modules || []) : props.modules;\n      return {\n        vs: vs,\n        fs: fs,\n        modules: modules,\n        uniforms: uniforms,\n        inject: combinedInject\n      };\n    }\n  }]);\n\n  return TextureTransform;\n}();\n\nexport { TextureTransform as default };\n//# sourceMappingURL=texture-transform.js.map","import { assert } from '@luma.gl/webgl';\nimport { combineInjects, getQualifierDetails, typeToChannelSuffix } from '@luma.gl/shadertools';\nvar SAMPLER_UNIFORM_PREFIX = 'transform_uSampler_';\nvar SIZE_UNIFORM_PREFIX = 'transform_uSize_';\nvar VS_POS_VARIABLE = 'transform_position';\nexport function updateForTextures(_ref) {\n  var vs = _ref.vs,\n      sourceTextureMap = _ref.sourceTextureMap,\n      targetTextureVarying = _ref.targetTextureVarying,\n      targetTexture = _ref.targetTexture;\n  var texAttributeNames = Object.keys(sourceTextureMap);\n  var sourceCount = texAttributeNames.length;\n  var targetTextureType = null;\n  var samplerTextureMap = {};\n  var updatedVs = vs;\n  var finalInject = {};\n\n  if (sourceCount > 0 || targetTextureVarying) {\n    var vsLines = updatedVs.split('\\n');\n    var updateVsLines = vsLines.slice();\n    vsLines.forEach(function (line, index, lines) {\n      if (sourceCount > 0) {\n        var updated = processAttributeDefinition(line, sourceTextureMap);\n\n        if (updated) {\n          var updatedLine = updated.updatedLine,\n              inject = updated.inject;\n          updateVsLines[index] = updatedLine;\n          finalInject = combineInjects([finalInject, inject]);\n          Object.assign(samplerTextureMap, updated.samplerTextureMap);\n          sourceCount--;\n        }\n      }\n\n      if (targetTextureVarying && !targetTextureType) {\n        targetTextureType = getVaryingType(line, targetTextureVarying);\n      }\n    });\n\n    if (targetTextureVarying) {\n      assert(targetTexture);\n      var sizeName = \"\".concat(SIZE_UNIFORM_PREFIX).concat(targetTextureVarying);\n      var uniformDeclaration = \"uniform vec2 \".concat(sizeName, \";\\n\");\n      var posInstructions = \"     vec2 \".concat(VS_POS_VARIABLE, \" = transform_getPos(\").concat(sizeName, \");\\n     gl_Position = vec4(\").concat(VS_POS_VARIABLE, \", 0, 1.);\\n\");\n      var inject = {\n        'vs:#decl': uniformDeclaration,\n        'vs:#main-start': posInstructions\n      };\n      finalInject = combineInjects([finalInject, inject]);\n    }\n\n    updatedVs = updateVsLines.join('\\n');\n  }\n\n  return {\n    vs: updatedVs,\n    targetTextureType: targetTextureType,\n    inject: finalInject,\n    samplerTextureMap: samplerTextureMap\n  };\n}\nexport function getSizeUniforms(_ref2) {\n  var sourceTextureMap = _ref2.sourceTextureMap,\n      targetTextureVarying = _ref2.targetTextureVarying,\n      targetTexture = _ref2.targetTexture;\n  var uniforms = {};\n  var width;\n  var height;\n\n  if (targetTextureVarying) {\n    width = targetTexture.width;\n    height = targetTexture.height;\n    uniforms[\"\".concat(SIZE_UNIFORM_PREFIX).concat(targetTextureVarying)] = [width, height];\n  }\n\n  for (var textureName in sourceTextureMap) {\n    var _sourceTextureMap$tex = sourceTextureMap[textureName];\n    width = _sourceTextureMap$tex.width;\n    height = _sourceTextureMap$tex.height;\n    uniforms[\"\".concat(SIZE_UNIFORM_PREFIX).concat(textureName)] = [width, height];\n  }\n\n  return uniforms;\n}\n\nfunction getAttributeDefinition(line) {\n  return getQualifierDetails(line, ['attribute', 'in']);\n}\n\nfunction getSamplerDeclerations(textureName) {\n  var samplerName = \"\".concat(SAMPLER_UNIFORM_PREFIX).concat(textureName);\n  var sizeName = \"\".concat(SIZE_UNIFORM_PREFIX).concat(textureName);\n  var uniformDeclerations = \"  uniform sampler2D \".concat(samplerName, \";\\n  uniform vec2 \").concat(sizeName, \";\");\n  return {\n    samplerName: samplerName,\n    sizeName: sizeName,\n    uniformDeclerations: uniformDeclerations\n  };\n}\n\nexport function getVaryingType(line, varying) {\n  var qualaiferDetails = getQualifierDetails(line, ['varying', 'out']);\n\n  if (!qualaiferDetails) {\n    return null;\n  }\n\n  return qualaiferDetails.name === varying ? qualaiferDetails.type : null;\n}\nexport function processAttributeDefinition(line, textureMap) {\n  var samplerTextureMap = {};\n  var attributeData = getAttributeDefinition(line);\n\n  if (!attributeData) {\n    return null;\n  }\n\n  var type = attributeData.type,\n      name = attributeData.name;\n\n  if (name && textureMap[name]) {\n    var updatedLine = \"// \".concat(line, \" => Replaced by Transform with a sampler\");\n\n    var _getSamplerDecleratio = getSamplerDeclerations(name),\n        samplerName = _getSamplerDecleratio.samplerName,\n        sizeName = _getSamplerDecleratio.sizeName,\n        uniformDeclerations = _getSamplerDecleratio.uniformDeclerations;\n\n    var channels = typeToChannelSuffix(type);\n    var sampleInstruction = \"  \".concat(type, \" \").concat(name, \" = transform_getInput(\").concat(samplerName, \", \").concat(sizeName, \").\").concat(channels, \";\\n\");\n    samplerTextureMap[samplerName] = name;\n    var inject = {\n      'vs:#decl': uniformDeclerations,\n      'vs:#main-start': sampleInstruction\n    };\n    return {\n      updatedLine: updatedLine,\n      inject: inject,\n      samplerTextureMap: samplerTextureMap\n    };\n  }\n\n  return null;\n}\n//# sourceMappingURL=transform-shader-utils.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar TYPE_DEFINITIONS = {\n  number: {\n    validate: function validate(value, propType) {\n      return Number.isFinite(value) && (!('max' in propType) || value <= propType.max) && (!('min' in propType) || value >= propType.min);\n    }\n  },\n  array: {\n    validate: function validate(value, propType) {\n      return Array.isArray(value) || ArrayBuffer.isView(value);\n    }\n  }\n};\nexport function parsePropTypes(propDefs) {\n  var propTypes = {};\n\n  for (var propName in propDefs) {\n    var propDef = propDefs[propName];\n    var propType = parsePropType(propDef);\n    propTypes[propName] = propType;\n  }\n\n  return propTypes;\n}\n\nfunction parsePropType(propDef) {\n  var type = getTypeOf(propDef);\n\n  if (type === 'object') {\n    if (!propDef) {\n      return {\n        type: 'object',\n        value: null\n      };\n    }\n\n    if ('type' in propDef) {\n      return Object.assign({}, propDef, TYPE_DEFINITIONS[propDef.type]);\n    }\n\n    if (!('value' in propDef)) {\n      return {\n        type: 'object',\n        value: propDef\n      };\n    }\n\n    type = getTypeOf(propDef.value);\n    return Object.assign({\n      type: type\n    }, propDef, TYPE_DEFINITIONS[type]);\n  }\n\n  return Object.assign({\n    type: type,\n    value: propDef\n  }, TYPE_DEFINITIONS[type]);\n}\n\nfunction getTypeOf(value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    return 'array';\n  }\n\n  return _typeof(value);\n}\n//# sourceMappingURL=prop-types.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { assert } from '../utils';\nimport { parsePropTypes } from './filters/prop-types';\nvar VERTEX_SHADER = 'vs';\nvar FRAGMENT_SHADER = 'fs';\n\nvar ShaderModule = function () {\n  function ShaderModule(_ref) {\n    var name = _ref.name,\n        vs = _ref.vs,\n        fs = _ref.fs,\n        _ref$dependencies = _ref.dependencies,\n        dependencies = _ref$dependencies === void 0 ? [] : _ref$dependencies,\n        uniforms = _ref.uniforms,\n        getUniforms = _ref.getUniforms,\n        _ref$deprecations = _ref.deprecations,\n        deprecations = _ref$deprecations === void 0 ? [] : _ref$deprecations,\n        _ref$defines = _ref.defines,\n        defines = _ref$defines === void 0 ? {} : _ref$defines,\n        _ref$inject = _ref.inject,\n        inject = _ref$inject === void 0 ? {} : _ref$inject,\n        vertexShader = _ref.vertexShader,\n        fragmentShader = _ref.fragmentShader;\n\n    _classCallCheck(this, ShaderModule);\n\n    assert(typeof name === 'string');\n    this.name = name;\n    this.vs = vs || vertexShader;\n    this.fs = fs || fragmentShader;\n    this.getModuleUniforms = getUniforms;\n    this.dependencies = dependencies;\n    this.deprecations = this._parseDeprecationDefinitions(deprecations);\n    this.defines = defines;\n    this.injections = normalizeInjections(inject);\n\n    if (uniforms) {\n      this.uniforms = parsePropTypes(uniforms);\n    }\n  }\n\n  _createClass(ShaderModule, [{\n    key: \"getModuleSource\",\n    value: function getModuleSource(type) {\n      var moduleSource;\n\n      switch (type) {\n        case VERTEX_SHADER:\n          moduleSource = this.vs || '';\n          break;\n\n        case FRAGMENT_SHADER:\n          moduleSource = this.fs || '';\n          break;\n\n        default:\n          assert(false);\n      }\n\n      return \"#define MODULE_\".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi, '_'), \"\\n\").concat(moduleSource, \"// END MODULE_\").concat(this.name, \"\\n\\n\");\n    }\n  }, {\n    key: \"getUniforms\",\n    value: function getUniforms(opts, uniforms) {\n      if (this.getModuleUniforms) {\n        return this.getModuleUniforms(opts, uniforms);\n      }\n\n      if (this.uniforms) {\n        return this._defaultGetUniforms(opts);\n      }\n\n      return {};\n    }\n  }, {\n    key: \"getDefines\",\n    value: function getDefines() {\n      return this.defines;\n    }\n  }, {\n    key: \"checkDeprecations\",\n    value: function checkDeprecations(shaderSource, log) {\n      this.deprecations.forEach(function (def) {\n        if (def.regex.test(shaderSource)) {\n          if (def.deprecated) {\n            log.deprecated(def.old, def[\"new\"])();\n          } else {\n            log.removed(def.old, def[\"new\"])();\n          }\n        }\n      });\n    }\n  }, {\n    key: \"_parseDeprecationDefinitions\",\n    value: function _parseDeprecationDefinitions(deprecations) {\n      deprecations.forEach(function (def) {\n        switch (def.type) {\n          case 'function':\n            def.regex = new RegExp(\"\\\\b\".concat(def.old, \"\\\\(\"));\n            break;\n\n          default:\n            def.regex = new RegExp(\"\".concat(def.type, \" \").concat(def.old, \";\"));\n        }\n      });\n      return deprecations;\n    }\n  }, {\n    key: \"_defaultGetUniforms\",\n    value: function _defaultGetUniforms() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var uniforms = {};\n      var propTypes = this.uniforms;\n\n      for (var key in propTypes) {\n        var propDef = propTypes[key];\n\n        if (key in opts && !propDef[\"private\"]) {\n          if (propDef.validate) {\n            assert(propDef.validate(opts[key], propDef), \"\".concat(this.name, \": invalid \").concat(key));\n          }\n\n          uniforms[key] = opts[key];\n        } else {\n          uniforms[key] = propDef.value;\n        }\n      }\n\n      return uniforms;\n    }\n  }]);\n\n  return ShaderModule;\n}();\n\nexport { ShaderModule as default };\nexport function normalizeShaderModule(module) {\n  if (!module.normalized) {\n    module.normalized = true;\n\n    if (module.uniforms && !module.getUniforms) {\n      var shaderModule = new ShaderModule(module);\n      module.getUniforms = shaderModule.getUniforms.bind(shaderModule);\n    }\n  }\n\n  return module;\n}\n\nfunction normalizeInjections(injections) {\n  var result = {\n    vs: {},\n    fs: {}\n  };\n\n  for (var hook in injections) {\n    var injection = injections[hook];\n    var stage = hook.slice(0, 2);\n\n    if (typeof injection === 'string') {\n      injection = {\n        order: 0,\n        injection: injection\n      };\n    }\n\n    result[stage][hook] = injection;\n  }\n\n  return result;\n}\n//# sourceMappingURL=shader-module.js.map","function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport ShaderModule from './shader-module';\nimport { assert } from '../utils';\nexport function resolveModules(modules) {\n  return getShaderDependencies(instantiateModules(modules));\n}\n\nfunction getShaderDependencies(modules) {\n  var moduleMap = {};\n  var moduleDepth = {};\n  getDependencyGraph({\n    modules: modules,\n    level: 0,\n    moduleMap: moduleMap,\n    moduleDepth: moduleDepth\n  });\n  return Object.keys(moduleDepth).sort(function (a, b) {\n    return moduleDepth[b] - moduleDepth[a];\n  }).map(function (name) {\n    return moduleMap[name];\n  });\n}\n\nfunction getDependencyGraph(_ref) {\n  var modules = _ref.modules,\n      level = _ref.level,\n      moduleMap = _ref.moduleMap,\n      moduleDepth = _ref.moduleDepth;\n\n  if (level >= 5) {\n    throw new Error('Possible loop in shader dependency graph');\n  }\n\n  var _iterator = _createForOfIteratorHelper(modules),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var module = _step.value;\n      moduleMap[module.name] = module;\n\n      if (moduleDepth[module.name] === undefined || moduleDepth[module.name] < level) {\n        moduleDepth[module.name] = level;\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  var _iterator2 = _createForOfIteratorHelper(modules),\n      _step2;\n\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var _module = _step2.value;\n\n      if (_module.dependencies) {\n        getDependencyGraph({\n          modules: _module.dependencies,\n          level: level + 1,\n          moduleMap: moduleMap,\n          moduleDepth: moduleDepth\n        });\n      }\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n}\n\nfunction instantiateModules(modules, seen) {\n  return modules.map(function (module) {\n    if (module instanceof ShaderModule) {\n      return module;\n    }\n\n    assert(typeof module !== 'string', \"Shader module use by name is deprecated. Import shader module '\".concat(module, \"' and use it directly.\"));\n    assert(module.name, 'shader module has no name');\n    module = new ShaderModule(module);\n    module.dependencies = instantiateModules(module.dependencies);\n    return module;\n  });\n}\n\nexport var TEST_EXPORTS = {\n  getShaderDependencies: getShaderDependencies,\n  getDependencyGraph: getDependencyGraph\n};\n//# sourceMappingURL=resolve-modules.js.map","export default function isOldIE() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var navigator = typeof window !== 'undefined' ? window.navigator || {} : {};\n  var userAgent = opts.userAgent || navigator.userAgent || '';\n  var isMSIE = userAgent.indexOf('MSIE ') !== -1;\n  var isTrident = userAgent.indexOf('Trident/') !== -1;\n  return isMSIE || isTrident;\n}\n//# sourceMappingURL=is-old-ie.js.map","import isOldIE from './is-old-ie';\nimport assert from './assert';\nvar GL_VENDOR = 0x1f00;\nvar GL_RENDERER = 0x1f01;\nvar GL_VERSION = 0x1f02;\nvar GL_SHADING_LANGUAGE_VERSION = 0x8b8c;\nvar WEBGL_FEATURES = {\n  GLSL_FRAG_DATA: ['WEBGL_draw_buffers', true],\n  GLSL_FRAG_DEPTH: ['EXT_frag_depth', true],\n  GLSL_DERIVATIVES: ['OES_standard_derivatives', true],\n  GLSL_TEXTURE_LOD: ['EXT_shader_texture_lod', true]\n};\nvar FEATURES = {};\nObject.keys(WEBGL_FEATURES).forEach(function (key) {\n  FEATURES[key] = key;\n});\nexport { FEATURES };\n\nfunction isWebGL2(gl) {\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return true;\n  }\n\n  return Boolean(gl && gl._version === 2);\n}\n\nexport function getContextInfo(gl) {\n  var info = gl.getExtension('WEBGL_debug_renderer_info');\n  var vendor = gl.getParameter(info && info.UNMASKED_VENDOR_WEBGL || GL_VENDOR);\n  var renderer = gl.getParameter(info && info.UNMASKED_RENDERER_WEBGL || GL_RENDERER);\n  var gpuVendor = identifyGPUVendor(vendor, renderer);\n  var gpuInfo = {\n    gpuVendor: gpuVendor,\n    vendor: vendor,\n    renderer: renderer,\n    version: gl.getParameter(GL_VERSION),\n    shadingLanguageVersion: gl.getParameter(GL_SHADING_LANGUAGE_VERSION)\n  };\n  return gpuInfo;\n}\n\nfunction identifyGPUVendor(vendor, renderer) {\n  if (vendor.match(/NVIDIA/i) || renderer.match(/NVIDIA/i)) {\n    return 'NVIDIA';\n  }\n\n  if (vendor.match(/INTEL/i) || renderer.match(/INTEL/i)) {\n    return 'INTEL';\n  }\n\n  if (vendor.match(/AMD/i) || renderer.match(/AMD/i) || vendor.match(/ATI/i) || renderer.match(/ATI/i)) {\n    return 'AMD';\n  }\n\n  return 'UNKNOWN GPU';\n}\n\nvar compiledGlslExtensions = {};\nexport function canCompileGLGSExtension(gl, cap) {\n  var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n\n  if (!isOldIE(opts)) {\n    return true;\n  }\n\n  if (cap in compiledGlslExtensions) {\n    return compiledGlslExtensions[cap];\n  }\n\n  var extensionName = feature[0];\n  var behavior = opts.behavior || 'enable';\n  var source = \"#extension GL_\".concat(extensionName, \" : \").concat(behavior, \"\\nvoid main(void) {}\");\n  var shader = gl.createShader(35633);\n  gl.shaderSource(shader, source);\n  gl.compileShader(shader);\n  var canCompile = gl.getShaderParameter(shader, 35713);\n  gl.deleteShader(shader);\n  compiledGlslExtensions[cap] = canCompile;\n  return canCompile;\n}\n\nfunction getFeature(gl, cap) {\n  var feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n  var extensionName = isWebGL2(gl) ? feature[1] || feature[0] : feature[0];\n  var value = typeof extensionName === 'string' ? Boolean(gl.getExtension(extensionName)) : extensionName;\n  assert(value === false || value === true);\n  return value;\n}\n\nexport function hasFeatures(gl, features) {\n  features = Array.isArray(features) ? features : [features];\n  return features.every(function (feature) {\n    return getFeature(gl, feature);\n  });\n}\n//# sourceMappingURL=webgl-info.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar ES300_REPLACEMENTS = [[/^(#version[ \\t]+(100|300[ \\t]+es))?[ \\t]*\\n/, '#version 300 es\\n'], [/\\btexture(2D|2DProj|Cube)Lod(EXT)?\\(/g, 'textureLod('], [/\\btexture(2D|2DProj|Cube)(EXT)?\\(/g, 'texture(']];\nvar ES300_VERTEX_REPLACEMENTS = [].concat(ES300_REPLACEMENTS, [[/^[ \\t]*attribute[ \\t]+(.+;)/gm, 'in $1'], [/^[ \\t]*varying[ \\t]+(.+;)/gm, 'out $1']]);\nvar ES300_FRAGMENT_REPLACEMENTS = [].concat(ES300_REPLACEMENTS, [[/^[ \\t]*varying[ \\t]+(.+;)/gm, 'in $1']]);\nvar ES100_REPLACEMENTS = [[/^#version[ \\t]+300[ \\t]+es/, '#version 100'], [/\\btexture(2D|2DProj|Cube)Lod\\(/g, 'texture$1LodEXT('], [/\\btexture\\(/g, 'texture2D('], [/\\btextureLod\\(/g, 'texture2DLodEXT(']];\nvar ES100_VERTEX_REPLACEMENTS = [].concat(ES100_REPLACEMENTS, [[/^[ \\t]*in[ \\t]+(.+;)/gm, 'attribute $1'], [/^[ \\t]*out[ \\t]+(.+;)/gm, 'varying $1']]);\nvar ES100_FRAGMENT_REPLACEMENTS = [].concat(ES100_REPLACEMENTS, [[/^[ \\t]*in[ \\t]+/gm, 'varying ']]);\nvar FS_OUTPUT_REGEX = /^[ \\t]*out[ \\t]+vec4[ \\t]+(\\w+)[ \\t]*;\\s+/m;\nexport default function transpileShader(source, targetGLSLVersion, isVertex) {\n  switch (targetGLSLVersion) {\n    case 300:\n      return convertShader(source, isVertex ? ES300_VERTEX_REPLACEMENTS : ES300_FRAGMENT_REPLACEMENTS);\n\n    case 100:\n      return isVertex ? convertShader(source, ES100_VERTEX_REPLACEMENTS) : convertFragmentShaderTo100(source);\n\n    default:\n      throw new Error(\"unknown GLSL version \".concat(targetGLSLVersion));\n  }\n}\n\nfunction convertShader(source, replacements) {\n  var _iterator = _createForOfIteratorHelper(replacements),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _step$value = _slicedToArray(_step.value, 2),\n          pattern = _step$value[0],\n          replacement = _step$value[1];\n\n      source = source.replace(pattern, replacement);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return source;\n}\n\nfunction convertFragmentShaderTo100(source) {\n  source = convertShader(source, ES100_FRAGMENT_REPLACEMENTS);\n  var outputMatch = source.match(FS_OUTPUT_REGEX);\n\n  if (outputMatch) {\n    var outputName = outputMatch[1];\n    source = source.replace(FS_OUTPUT_REGEX, '').replace(new RegExp(\"\\\\b\".concat(outputName, \"\\\\b\"), 'g'), 'gl_FragColor');\n  }\n\n  return source;\n}\n//# sourceMappingURL=transpile-shader.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _SHADER_TYPE;\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { VERTEX_SHADER, FRAGMENT_SHADER } from './constants';\nimport { resolveModules } from './resolve-modules';\nimport { getPlatformShaderDefines, getVersionDefines } from './platform-defines';\nimport injectShader, { DECLARATION_INJECT_MARKER } from './inject-shader';\nimport transpileShader from './transpile-shader';\nimport { assert } from '../utils';\nvar INJECT_SHADER_DECLARATIONS = \"\\n\\n\".concat(DECLARATION_INJECT_MARKER, \"\\n\\n\");\nvar SHADER_TYPE = (_SHADER_TYPE = {}, _defineProperty(_SHADER_TYPE, VERTEX_SHADER, 'vertex'), _defineProperty(_SHADER_TYPE, FRAGMENT_SHADER, 'fragment'), _SHADER_TYPE);\nvar FRAGMENT_SHADER_PROLOGUE = \"precision highp float;\\n\\n\";\nexport function assembleShaders(gl, opts) {\n  var vs = opts.vs,\n      fs = opts.fs;\n  var modules = resolveModules(opts.modules || []);\n  return {\n    gl: gl,\n    vs: assembleShader(gl, Object.assign({}, opts, {\n      source: vs,\n      type: VERTEX_SHADER,\n      modules: modules\n    })),\n    fs: assembleShader(gl, Object.assign({}, opts, {\n      source: fs,\n      type: FRAGMENT_SHADER,\n      modules: modules\n    })),\n    getUniforms: assembleGetUniforms(modules)\n  };\n}\n\nfunction assembleShader(gl, _ref) {\n  var id = _ref.id,\n      source = _ref.source,\n      type = _ref.type,\n      modules = _ref.modules,\n      _ref$defines = _ref.defines,\n      defines = _ref$defines === void 0 ? {} : _ref$defines,\n      _ref$hookFunctions = _ref.hookFunctions,\n      hookFunctions = _ref$hookFunctions === void 0 ? [] : _ref$hookFunctions,\n      _ref$inject = _ref.inject,\n      inject = _ref$inject === void 0 ? {} : _ref$inject,\n      _ref$transpileToGLSL = _ref.transpileToGLSL100,\n      transpileToGLSL100 = _ref$transpileToGLSL === void 0 ? false : _ref$transpileToGLSL,\n      _ref$prologue = _ref.prologue,\n      prologue = _ref$prologue === void 0 ? true : _ref$prologue,\n      log = _ref.log;\n  assert(typeof source === 'string', 'shader source must be a string');\n  var isVertex = type === VERTEX_SHADER;\n  var sourceLines = source.split('\\n');\n  var glslVersion = 100;\n  var versionLine = '';\n  var coreSource = source;\n\n  if (sourceLines[0].indexOf('#version ') === 0) {\n    glslVersion = 300;\n    versionLine = sourceLines[0];\n    coreSource = sourceLines.slice(1).join('\\n');\n  } else {\n    versionLine = \"#version \".concat(glslVersion);\n  }\n\n  var allDefines = {};\n  modules.forEach(function (module) {\n    Object.assign(allDefines, module.getDefines());\n  });\n  Object.assign(allDefines, defines);\n  var assembledSource = prologue ? \"\".concat(versionLine, \"\\n\").concat(getShaderName({\n    id: id,\n    source: source,\n    type: type\n  }), \"\\n\").concat(getShaderType({\n    type: type\n  }), \"\\n\").concat(getPlatformShaderDefines(gl), \"\\n\").concat(getVersionDefines(gl, glslVersion, !isVertex), \"\\n\").concat(getApplicationDefines(allDefines), \"\\n\").concat(isVertex ? '' : FRAGMENT_SHADER_PROLOGUE, \"\\n\") : \"\".concat(versionLine, \"\\n\");\n  var hookFunctionMap = normalizeHookFunctions(hookFunctions);\n  var hookInjections = {};\n  var declInjections = {};\n  var mainInjections = {};\n\n  for (var key in inject) {\n    var injection = typeof inject[key] === 'string' ? {\n      injection: inject[key],\n      order: 0\n    } : inject[key];\n    var match = key.match(/^(v|f)s:(#)?([\\w-]+)$/);\n\n    if (match) {\n      var hash = match[2];\n      var name = match[3];\n\n      if (hash) {\n        if (name === 'decl') {\n          declInjections[key] = [injection];\n        } else {\n          mainInjections[key] = [injection];\n        }\n      } else {\n        hookInjections[key] = [injection];\n      }\n    } else {\n      mainInjections[key] = [injection];\n    }\n  }\n\n  var _iterator = _createForOfIteratorHelper(modules),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var module = _step.value;\n\n      if (log) {\n        module.checkDeprecations(coreSource, log);\n      }\n\n      var moduleSource = module.getModuleSource(type, glslVersion);\n      assembledSource += moduleSource;\n      var injections = module.injections[type];\n\n      for (var _key in injections) {\n        var _match = _key.match(/^(v|f)s:#([\\w-]+)$/);\n\n        if (_match) {\n          var _name = _match[2];\n          var injectionType = _name === 'decl' ? declInjections : mainInjections;\n          injectionType[_key] = injectionType[_key] || [];\n\n          injectionType[_key].push(injections[_key]);\n        } else {\n          hookInjections[_key] = hookInjections[_key] || [];\n\n          hookInjections[_key].push(injections[_key]);\n        }\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  assembledSource += INJECT_SHADER_DECLARATIONS;\n  assembledSource = injectShader(assembledSource, type, declInjections);\n  assembledSource += getHookFunctions(hookFunctionMap[type], hookInjections);\n  assembledSource += coreSource;\n  assembledSource = injectShader(assembledSource, type, mainInjections);\n  assembledSource = transpileShader(assembledSource, transpileToGLSL100 ? 100 : glslVersion, isVertex);\n  return assembledSource;\n}\n\nfunction assembleGetUniforms(modules) {\n  return function getUniforms(opts) {\n    var uniforms = {};\n\n    var _iterator2 = _createForOfIteratorHelper(modules),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var module = _step2.value;\n        var moduleUniforms = module.getUniforms(opts, uniforms);\n        Object.assign(uniforms, moduleUniforms);\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n\n    return uniforms;\n  };\n}\n\nfunction getShaderType(_ref2) {\n  var type = _ref2.type;\n  return \"\\n#define SHADER_TYPE_\".concat(SHADER_TYPE[type].toUpperCase(), \"\\n\");\n}\n\nfunction getShaderName(_ref3) {\n  var id = _ref3.id,\n      source = _ref3.source,\n      type = _ref3.type;\n  var injectShaderName = id && typeof id === 'string' && source.indexOf('SHADER_NAME') === -1;\n  return injectShaderName ? \"\\n#define SHADER_NAME \".concat(id, \"_\").concat(SHADER_TYPE[type], \"\\n\\n\") : '';\n}\n\nfunction getApplicationDefines() {\n  var defines = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var count = 0;\n  var sourceText = '';\n\n  for (var define in defines) {\n    if (count === 0) {\n      sourceText += '\\n// APPLICATION DEFINES\\n';\n    }\n\n    count++;\n    var value = defines[define];\n\n    if (value || Number.isFinite(value)) {\n      sourceText += \"#define \".concat(define.toUpperCase(), \" \").concat(defines[define], \"\\n\");\n    }\n  }\n\n  if (count === 0) {\n    sourceText += '\\n';\n  }\n\n  return sourceText;\n}\n\nfunction getHookFunctions(hookFunctions, hookInjections) {\n  var result = '';\n\n  for (var hookName in hookFunctions) {\n    var hookFunction = hookFunctions[hookName];\n    result += \"void \".concat(hookFunction.signature, \" {\\n\");\n\n    if (hookFunction.header) {\n      result += \"  \".concat(hookFunction.header);\n    }\n\n    if (hookInjections[hookName]) {\n      var injections = hookInjections[hookName];\n      injections.sort(function (a, b) {\n        return a.order - b.order;\n      });\n\n      var _iterator3 = _createForOfIteratorHelper(injections),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var injection = _step3.value;\n          result += \"  \".concat(injection.injection, \"\\n\");\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n\n    if (hookFunction.footer) {\n      result += \"  \".concat(hookFunction.footer);\n    }\n\n    result += '}\\n';\n  }\n\n  return result;\n}\n\nfunction normalizeHookFunctions(hookFunctions) {\n  var result = {\n    vs: {},\n    fs: {}\n  };\n  hookFunctions.forEach(function (hook) {\n    var opts;\n\n    if (typeof hook !== 'string') {\n      opts = hook;\n      hook = opts.hook;\n    } else {\n      opts = {};\n    }\n\n    hook = hook.trim();\n\n    var _hook$split = hook.split(':'),\n        _hook$split2 = _slicedToArray(_hook$split, 2),\n        stage = _hook$split2[0],\n        signature = _hook$split2[1];\n\n    var name = hook.replace(/\\(.+/, '');\n    result[stage][name] = Object.assign(opts, {\n      signature: signature\n    });\n  });\n  return result;\n}\n//# sourceMappingURL=assemble-shaders.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _UNIFORM_SETTERS;\n\nimport { log } from '@luma.gl/gltools';\nimport Framebuffer from './framebuffer';\nimport Renderbuffer from './renderbuffer';\nimport Texture from './texture';\nimport { assert } from '../utils';\nvar UNIFORM_SETTERS = (_UNIFORM_SETTERS = {}, _defineProperty(_UNIFORM_SETTERS, 5126, getArraySetter.bind(null, 'uniform1fv', toFloatArray, 1, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35664, getArraySetter.bind(null, 'uniform2fv', toFloatArray, 2, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35665, getArraySetter.bind(null, 'uniform3fv', toFloatArray, 3, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35666, getArraySetter.bind(null, 'uniform4fv', toFloatArray, 4, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 5124, getArraySetter.bind(null, 'uniform1iv', toIntArray, 1, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35667, getArraySetter.bind(null, 'uniform2iv', toIntArray, 2, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35668, getArraySetter.bind(null, 'uniform3iv', toIntArray, 3, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35669, getArraySetter.bind(null, 'uniform4iv', toIntArray, 4, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35670, getArraySetter.bind(null, 'uniform1iv', toIntArray, 1, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35671, getArraySetter.bind(null, 'uniform2iv', toIntArray, 2, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35672, getArraySetter.bind(null, 'uniform3iv', toIntArray, 3, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35673, getArraySetter.bind(null, 'uniform4iv', toIntArray, 4, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35674, getArraySetter.bind(null, 'uniformMatrix2fv', toFloatArray, 4, setMatrixUniform)), _defineProperty(_UNIFORM_SETTERS, 35675, getArraySetter.bind(null, 'uniformMatrix3fv', toFloatArray, 9, setMatrixUniform)), _defineProperty(_UNIFORM_SETTERS, 35676, getArraySetter.bind(null, 'uniformMatrix4fv', toFloatArray, 16, setMatrixUniform)), _defineProperty(_UNIFORM_SETTERS, 35678, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 35680, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 5125, getArraySetter.bind(null, 'uniform1uiv', toUIntArray, 1, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 36294, getArraySetter.bind(null, 'uniform2uiv', toUIntArray, 2, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 36295, getArraySetter.bind(null, 'uniform3uiv', toUIntArray, 3, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 36296, getArraySetter.bind(null, 'uniform4uiv', toUIntArray, 4, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35685, getArraySetter.bind(null, 'uniformMatrix2x3fv', toFloatArray, 6, setMatrixUniform)), _defineProperty(_UNIFORM_SETTERS, 35686, getArraySetter.bind(null, 'uniformMatrix2x4fv', toFloatArray, 8, setMatrixUniform)), _defineProperty(_UNIFORM_SETTERS, 35687, getArraySetter.bind(null, 'uniformMatrix3x2fv', toFloatArray, 6, setMatrixUniform)), _defineProperty(_UNIFORM_SETTERS, 35688, getArraySetter.bind(null, 'uniformMatrix3x4fv', toFloatArray, 12, setMatrixUniform)), _defineProperty(_UNIFORM_SETTERS, 35689, getArraySetter.bind(null, 'uniformMatrix4x2fv', toFloatArray, 8, setMatrixUniform)), _defineProperty(_UNIFORM_SETTERS, 35690, getArraySetter.bind(null, 'uniformMatrix4x3fv', toFloatArray, 12, setMatrixUniform)), _defineProperty(_UNIFORM_SETTERS, 35678, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 35680, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 35679, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 35682, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36289, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36292, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36293, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36298, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36299, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36300, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36303, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36306, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36307, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36308, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36311, getSamplerSetter), _UNIFORM_SETTERS);\nvar FLOAT_ARRAY = {};\nvar INT_ARRAY = {};\nvar UINT_ARRAY = {};\nvar array1 = [0];\n\nfunction toTypedArray(value, uniformLength, Type, cache) {\n  if (uniformLength === 1 && typeof value === 'boolean') {\n    value = value ? 1 : 0;\n  }\n\n  if (Number.isFinite(value)) {\n    array1[0] = value;\n    value = array1;\n  }\n\n  var length = value.length;\n\n  if (length % uniformLength) {\n    log.warn(\"Uniform size should be multiples of \".concat(uniformLength), value)();\n  }\n\n  if (value instanceof Type) {\n    return value;\n  }\n\n  var result = cache[length];\n\n  if (!result) {\n    result = new Type(length);\n    cache[length] = result;\n  }\n\n  for (var i = 0; i < length; i++) {\n    result[i] = value[i];\n  }\n\n  return result;\n}\n\nfunction toFloatArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Float32Array, FLOAT_ARRAY);\n}\n\nfunction toIntArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Int32Array, INT_ARRAY);\n}\n\nfunction toUIntArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Uint32Array, UINT_ARRAY);\n}\n\nexport function getUniformSetter(gl, location, info) {\n  var setter = UNIFORM_SETTERS[info.type];\n\n  if (!setter) {\n    throw new Error(\"Unknown GLSL uniform type \".concat(info.type));\n  }\n\n  return setter().bind(null, gl, location);\n}\nexport function parseUniformName(name) {\n  if (name[name.length - 1] !== ']') {\n    return {\n      name: name,\n      length: 1,\n      isArray: false\n    };\n  }\n\n  var UNIFORM_NAME_REGEXP = /([^[]*)(\\[[0-9]+\\])?/;\n  var matches = name.match(UNIFORM_NAME_REGEXP);\n\n  if (!matches || matches.length < 2) {\n    throw new Error(\"Failed to parse GLSL uniform name \".concat(name));\n  }\n\n  return {\n    name: matches[1],\n    length: matches[2] || 1,\n    isArray: Boolean(matches[2])\n  };\n}\nexport function checkUniformValues(uniforms, source, uniformMap) {\n  for (var uniformName in uniforms) {\n    var value = uniforms[uniformName];\n    var shouldCheck = !uniformMap || Boolean(uniformMap[uniformName]);\n\n    if (shouldCheck && !checkUniformValue(value)) {\n      source = source ? \"\".concat(source, \" \") : '';\n      console.error(\"\".concat(source, \" Bad uniform \").concat(uniformName), value);\n      throw new Error(\"\".concat(source, \" Bad uniform \").concat(uniformName));\n    }\n  }\n\n  return true;\n}\n\nfunction checkUniformValue(value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    return checkUniformArray(value);\n  }\n\n  if (isFinite(value)) {\n    return true;\n  } else if (value === true || value === false) {\n    return true;\n  } else if (value instanceof Texture) {\n    return true;\n  } else if (value instanceof Renderbuffer) {\n    return true;\n  } else if (value instanceof Framebuffer) {\n    return Boolean(value.texture);\n  }\n\n  return false;\n}\n\nexport function copyUniform(uniforms, key, value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    if (uniforms[key]) {\n      var dest = uniforms[key];\n\n      for (var i = 0, len = value.length; i < len; ++i) {\n        dest[i] = value[i];\n      }\n    } else {\n      uniforms[key] = value.slice();\n    }\n  } else {\n    uniforms[key] = value;\n  }\n}\n\nfunction checkUniformArray(value) {\n  if (value.length === 0) {\n    return false;\n  }\n\n  var checkLength = Math.min(value.length, 16);\n\n  for (var i = 0; i < checkLength; ++i) {\n    if (!Number.isFinite(value[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction getSamplerSetter() {\n  var cache = null;\n  return function (gl, location, value) {\n    var update = cache !== value;\n\n    if (update) {\n      gl.uniform1i(location, value);\n      cache = value;\n    }\n\n    return update;\n  };\n}\n\nfunction getArraySetter(functionName, toArray, size, uniformSetter) {\n  var cache = null;\n  var cacheLength = null;\n  return function (gl, location, value) {\n    var arrayValue = toArray(value, size);\n    var length = arrayValue.length;\n    var update = false;\n\n    if (cache === null) {\n      cache = new Float32Array(length);\n      cacheLength = length;\n      update = true;\n    } else {\n      assert(cacheLength === length, 'Uniform length cannot change.');\n\n      for (var i = 0; i < length; ++i) {\n        if (arrayValue[i] !== cache[i]) {\n          update = true;\n          break;\n        }\n      }\n    }\n\n    if (update) {\n      uniformSetter(gl, functionName, location, arrayValue);\n      cache.set(arrayValue);\n    }\n\n    return update;\n  };\n}\n\nfunction setVectorUniform(gl, functionName, location, value) {\n  gl[functionName](location, value);\n}\n\nfunction setMatrixUniform(gl, functionName, location, value) {\n  gl[functionName](location, false, value);\n}\n//# sourceMappingURL=uniforms.js.map","import { getContextInfo, hasFeatures, canCompileGLGSExtension, FEATURES } from '../utils/webgl-info';\nexport function getPlatformShaderDefines(gl) {\n  var debugInfo = getContextInfo(gl);\n\n  switch (debugInfo.gpuVendor.toLowerCase()) {\n    case 'nvidia':\n      return \"#define NVIDIA_GPU\\n// Nvidia optimizes away the calculation necessary for emulated fp64\\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\\n\";\n\n    case 'intel':\n      return \"#define INTEL_GPU\\n// Intel optimizes away the calculation necessary for emulated fp64\\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\\n// Intel's built-in 'tan' function doesn't have acceptable precision\\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\\n\";\n\n    case 'amd':\n      return \"#define AMD_GPU\\n\";\n\n    default:\n      return \"#define DEFAULT_GPU\\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\\n// Intel's built-in 'tan' function doesn't have acceptable precision\\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\\n\";\n  }\n}\nexport function getVersionDefines(gl, glslVersion, isFragment) {\n  var versionDefines = \"#if (__VERSION__ > 120)\\n\\n# define FEATURE_GLSL_DERIVATIVES\\n# define FEATURE_GLSL_DRAW_BUFFERS\\n# define FEATURE_GLSL_FRAG_DEPTH\\n# define FEATURE_GLSL_TEXTURE_LOD\\n\\n// DEPRECATED FLAGS, remove in v9\\n# define FRAG_DEPTH\\n# define DERIVATIVES\\n# define DRAW_BUFFERS\\n# define TEXTURE_LOD\\n\\n#endif // __VERSION\\n\";\n\n  if (hasFeatures(gl, FEATURES.GLSL_FRAG_DEPTH)) {\n    versionDefines += \"\\n// FRAG_DEPTH => gl_FragDepth is available\\n#ifdef GL_EXT_frag_depth\\n#extension GL_EXT_frag_depth : enable\\n# define FEATURE_GLSL_FRAG_DEPTH\\n# define FRAG_DEPTH\\n# define gl_FragDepth gl_FragDepthEXT\\n#endif\\n\";\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_DERIVATIVES) && canCompileGLGSExtension(gl, FEATURES.GLSL_DERIVATIVES)) {\n    versionDefines += \"\\n// DERIVATIVES => dxdF, dxdY and fwidth are available\\n#ifdef GL_OES_standard_derivatives\\n#extension GL_OES_standard_derivatives : enable\\n# define FEATURE_GLSL_DERIVATIVES\\n# define DERIVATIVES\\n#endif\\n\";\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_FRAG_DATA) && canCompileGLGSExtension(gl, FEATURES.GLSL_FRAG_DATA, {\n    behavior: 'require'\n  })) {\n    versionDefines += \"\\n// DRAW_BUFFERS => gl_FragData[] is available\\n#ifdef GL_EXT_draw_buffers\\n#extension GL_EXT_draw_buffers : require\\n#define FEATURE_GLSL_DRAW_BUFFERS\\n#define DRAW_BUFFERS\\n#endif\\n\";\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_TEXTURE_LOD)) {\n    versionDefines += \"// TEXTURE_LOD => texture2DLod etc are available\\n#ifdef GL_EXT_shader_texture_lod\\n#extension GL_EXT_shader_texture_lod : enable\\n\\n# define FEATURE_GLSL_TEXTURE_LOD\\n# define TEXTURE_LOD\\n\\n#endif\\n\";\n  }\n\n  return versionDefines;\n}\n//# sourceMappingURL=platform-defines.js.map","export default function getShaderName(shader) {\n  var defaultName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'unnamed';\n  var SHADER_NAME_REGEXP = /#define[\\s*]SHADER_NAME[\\s*]([A-Za-z0-9_-]+)[\\s*]/;\n  var match = shader.match(SHADER_NAME_REGEXP);\n  return match ? match[1] : defaultName;\n}\n//# sourceMappingURL=get-shader-name.js.map","import getShaderName from './get-shader-name';\nimport getShaderTypeName from './get-shader-type-name';\nexport default function formatGLSLCompilerError(errLog, src, shaderType) {\n  var _parseGLSLCompilerErr = parseGLSLCompilerError(errLog, src, shaderType),\n      shaderName = _parseGLSLCompilerErr.shaderName,\n      errors = _parseGLSLCompilerErr.errors,\n      warnings = _parseGLSLCompilerErr.warnings;\n\n  return \"GLSL compilation error in \".concat(shaderName, \"\\n\\n\").concat(errors, \"\\n\").concat(warnings);\n}\nexport function parseGLSLCompilerError(errLog, src, shaderType, shaderName) {\n  var errorStrings = errLog.split(/\\r?\\n/);\n  var errors = {};\n  var warnings = {};\n  var name = shaderName || getShaderName(src) || '(unnamed)';\n  var shaderDescription = \"\".concat(getShaderTypeName(shaderType), \" shader \").concat(name);\n\n  for (var i = 0; i < errorStrings.length; i++) {\n    var errorString = errorStrings[i];\n\n    if (errorString.length <= 1) {\n      continue;\n    }\n\n    var segments = errorString.split(':');\n    var type = segments[0];\n    var line = parseInt(segments[2], 10);\n\n    if (isNaN(line)) {\n      throw new Error(\"GLSL compilation error in \".concat(shaderDescription, \": \").concat(errLog));\n    }\n\n    if (type !== 'WARNING') {\n      errors[line] = errorString;\n    } else {\n      warnings[line] = errorString;\n    }\n  }\n\n  var lines = addLineNumbers(src);\n  return {\n    shaderName: shaderDescription,\n    errors: formatErrors(errors, lines),\n    warnings: formatErrors(warnings, lines)\n  };\n}\n\nfunction formatErrors(errors, lines) {\n  var message = '';\n\n  for (var i = 0; i < lines.length; i++) {\n    var line = lines[i];\n\n    if (!errors[i + 3] && !errors[i + 2] && !errors[i + 1]) {\n      continue;\n    }\n\n    message += \"\".concat(line, \"\\n\");\n\n    if (errors[i + 1]) {\n      var error = errors[i + 1];\n      var segments = error.split(':', 3);\n      var type = segments[0];\n      var column = parseInt(segments[1], 10) || 0;\n      var err = error.substring(segments.join(':').length + 1).trim();\n      message += padLeft(\"^^^ \".concat(type, \": \").concat(err, \"\\n\\n\"), column);\n    }\n  }\n\n  return message;\n}\n\nfunction addLineNumbers(string) {\n  var start = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var delim = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : ': ';\n  var lines = string.split(/\\r?\\n/);\n  var maxDigits = String(lines.length + start - 1).length;\n  return lines.map(function (line, i) {\n    var lineNumber = String(i + start);\n    var digits = lineNumber.length;\n    var prefix = padLeft(lineNumber, maxDigits - digits);\n    return prefix + delim + line;\n  });\n}\n\nfunction padLeft(string, digits) {\n  var result = '';\n\n  for (var i = 0; i < digits; ++i) {\n    result += ' ';\n  }\n\n  return \"\".concat(result).concat(string);\n}\n//# sourceMappingURL=format-glsl-error.js.map","var GL_FRAGMENT_SHADER = 0x8b30;\nvar GL_VERTEX_SHADER = 0x8b31;\nexport default function getShaderTypeName(type) {\n  switch (type) {\n    case GL_FRAGMENT_SHADER:\n      return 'fragment';\n\n    case GL_VERTEX_SHADER:\n      return 'vertex';\n\n    default:\n      return 'unknown type';\n  }\n}\n//# sourceMappingURL=get-shader-type-name.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { assertWebGLContext, log } from '@luma.gl/gltools';\nimport { parseGLSLCompilerError, getShaderName } from '../glsl-utils';\nimport { uid, assert } from '../utils';\nimport Resource from './resource';\nvar ERR_SOURCE = 'Shader: GLSL source code must be a JavaScript string';\nexport var Shader = function (_Resource) {\n  _inherits(Shader, _Resource);\n\n  var _super = _createSuper(Shader);\n\n  _createClass(Shader, null, [{\n    key: \"getTypeName\",\n    value: function getTypeName(shaderType) {\n      switch (shaderType) {\n        case 35633:\n          return 'vertex-shader';\n\n        case 35632:\n          return 'fragment-shader';\n\n        default:\n          assert(false);\n          return 'unknown';\n      }\n    }\n  }]);\n\n  function Shader(gl, props) {\n    var _this;\n\n    _classCallCheck(this, Shader);\n\n    assertWebGLContext(gl);\n    assert(typeof props.source === 'string', ERR_SOURCE);\n    var id = getShaderName(props.source, null) || props.id || uid(\"unnamed \".concat(Shader.getTypeName(props.shaderType)));\n    _this = _super.call(this, gl, {\n      id: id\n    });\n    _this.shaderType = props.shaderType;\n    _this.source = props.source;\n\n    _this.initialize(props);\n\n    return _this;\n  }\n\n  _createClass(Shader, [{\n    key: \"initialize\",\n    value: function initialize(_ref) {\n      var source = _ref.source;\n      var shaderName = getShaderName(source, null);\n\n      if (shaderName) {\n        this.id = uid(shaderName);\n      }\n\n      this._compile(source);\n    }\n  }, {\n    key: \"getParameter\",\n    value: function getParameter(pname) {\n      return this.gl.getShaderParameter(this.handle, pname);\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return \"\".concat(Shader.getTypeName(this.shaderType), \":\").concat(this.id);\n    }\n  }, {\n    key: \"getName\",\n    value: function getName() {\n      return getShaderName(this.source) || 'unnamed-shader';\n    }\n  }, {\n    key: \"getSource\",\n    value: function getSource() {\n      return this.gl.getShaderSource(this.handle);\n    }\n  }, {\n    key: \"getTranslatedSource\",\n    value: function getTranslatedSource() {\n      var extension = this.gl.getExtension('WEBGL_debug_shaders');\n      return extension ? extension.getTranslatedShaderSource(this.handle) : 'No translated source available. WEBGL_debug_shaders not implemented';\n    }\n  }, {\n    key: \"_compile\",\n    value: function _compile() {\n      var source = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.source;\n\n      if (!source.startsWith('#version ')) {\n        source = \"#version 100\\n\".concat(source);\n      }\n\n      this.source = source;\n      this.gl.shaderSource(this.handle, this.source);\n      this.gl.compileShader(this.handle);\n      var compileStatus = this.getParameter(35713);\n\n      if (!compileStatus) {\n        var infoLog = this.gl.getShaderInfoLog(this.handle);\n\n        var _parseGLSLCompilerErr = parseGLSLCompilerError(infoLog, this.source, this.shaderType, this.id),\n            shaderName = _parseGLSLCompilerErr.shaderName,\n            errors = _parseGLSLCompilerErr.errors,\n            warnings = _parseGLSLCompilerErr.warnings;\n\n        log.error(\"GLSL compilation errors in \".concat(shaderName, \"\\n\").concat(errors))();\n        log.warn(\"GLSL compilation warnings in \".concat(shaderName, \"\\n\").concat(warnings))();\n        throw new Error(\"GLSL compilation errors in \".concat(shaderName));\n      }\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteShader(this.handle);\n    }\n  }, {\n    key: \"_getOptsFromHandle\",\n    value: function _getOptsFromHandle() {\n      return {\n        type: this.getParameter(35663),\n        source: this.getSource()\n      };\n    }\n  }]);\n\n  return Shader;\n}(Resource);\nexport var VertexShader = function (_Shader) {\n  _inherits(VertexShader, _Shader);\n\n  var _super2 = _createSuper(VertexShader);\n\n  function VertexShader(gl, props) {\n    _classCallCheck(this, VertexShader);\n\n    if (typeof props === 'string') {\n      props = {\n        source: props\n      };\n    }\n\n    return _super2.call(this, gl, Object.assign({}, props, {\n      shaderType: 35633\n    }));\n  }\n\n  _createClass(VertexShader, [{\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createShader(35633);\n    }\n  }]);\n\n  return VertexShader;\n}(Shader);\nexport var FragmentShader = function (_Shader2) {\n  _inherits(FragmentShader, _Shader2);\n\n  var _super3 = _createSuper(FragmentShader);\n\n  function FragmentShader(gl, props) {\n    _classCallCheck(this, FragmentShader);\n\n    if (typeof props === 'string') {\n      props = {\n        source: props\n      };\n    }\n\n    return _super3.call(this, gl, Object.assign({}, props, {\n      shaderType: 35632\n    }));\n  }\n\n  _createClass(FragmentShader, [{\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createShader(35632);\n    }\n  }]);\n\n  return FragmentShader;\n}(Shader);\n//# sourceMappingURL=shader.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _COMPOSITE_GL_TYPES;\n\nimport { assert } from '../utils';\nvar GL_BYTE = 0x1400;\nvar GL_UNSIGNED_BYTE = 0x1401;\nvar GL_SHORT = 0x1402;\nvar GL_UNSIGNED_SHORT = 0x1403;\nvar GL_POINTS = 0x0;\nvar GL_LINES = 0x1;\nvar GL_LINE_LOOP = 0x2;\nvar GL_LINE_STRIP = 0x3;\nvar GL_TRIANGLES = 0x4;\nvar GL_TRIANGLE_STRIP = 0x5;\nvar GL_TRIANGLE_FAN = 0x6;\nvar GL_FLOAT = 0x1406;\nvar GL_FLOAT_VEC2 = 0x8b50;\nvar GL_FLOAT_VEC3 = 0x8b51;\nvar GL_FLOAT_VEC4 = 0x8b52;\nvar GL_INT = 0x1404;\nvar GL_INT_VEC2 = 0x8b53;\nvar GL_INT_VEC3 = 0x8b54;\nvar GL_INT_VEC4 = 0x8b55;\nvar GL_UNSIGNED_INT = 0x1405;\nvar GL_UNSIGNED_INT_VEC2 = 0x8dc6;\nvar GL_UNSIGNED_INT_VEC3 = 0x8dc7;\nvar GL_UNSIGNED_INT_VEC4 = 0x8dc8;\nvar GL_BOOL = 0x8b56;\nvar GL_BOOL_VEC2 = 0x8b57;\nvar GL_BOOL_VEC3 = 0x8b58;\nvar GL_BOOL_VEC4 = 0x8b59;\nvar GL_FLOAT_MAT2 = 0x8b5a;\nvar GL_FLOAT_MAT3 = 0x8b5b;\nvar GL_FLOAT_MAT4 = 0x8b5c;\nvar GL_FLOAT_MAT2x3 = 0x8b65;\nvar GL_FLOAT_MAT2x4 = 0x8b66;\nvar GL_FLOAT_MAT3x2 = 0x8b67;\nvar GL_FLOAT_MAT3x4 = 0x8b68;\nvar GL_FLOAT_MAT4x2 = 0x8b69;\nvar GL_FLOAT_MAT4x3 = 0x8b6a;\nvar COMPOSITE_GL_TYPES = (_COMPOSITE_GL_TYPES = {}, _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT, [GL_FLOAT, 1, 'float']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_VEC2, [GL_FLOAT, 2, 'vec2']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_VEC3, [GL_FLOAT, 3, 'vec3']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_VEC4, [GL_FLOAT, 4, 'vec4']), _defineProperty(_COMPOSITE_GL_TYPES, GL_INT, [GL_INT, 1, 'int']), _defineProperty(_COMPOSITE_GL_TYPES, GL_INT_VEC2, [GL_INT, 2, 'ivec2']), _defineProperty(_COMPOSITE_GL_TYPES, GL_INT_VEC3, [GL_INT, 3, 'ivec3']), _defineProperty(_COMPOSITE_GL_TYPES, GL_INT_VEC4, [GL_INT, 4, 'ivec4']), _defineProperty(_COMPOSITE_GL_TYPES, GL_UNSIGNED_INT, [GL_UNSIGNED_INT, 1, 'uint']), _defineProperty(_COMPOSITE_GL_TYPES, GL_UNSIGNED_INT_VEC2, [GL_UNSIGNED_INT, 2, 'uvec2']), _defineProperty(_COMPOSITE_GL_TYPES, GL_UNSIGNED_INT_VEC3, [GL_UNSIGNED_INT, 3, 'uvec3']), _defineProperty(_COMPOSITE_GL_TYPES, GL_UNSIGNED_INT_VEC4, [GL_UNSIGNED_INT, 4, 'uvec4']), _defineProperty(_COMPOSITE_GL_TYPES, GL_BOOL, [GL_FLOAT, 1, 'bool']), _defineProperty(_COMPOSITE_GL_TYPES, GL_BOOL_VEC2, [GL_FLOAT, 2, 'bvec2']), _defineProperty(_COMPOSITE_GL_TYPES, GL_BOOL_VEC3, [GL_FLOAT, 3, 'bvec3']), _defineProperty(_COMPOSITE_GL_TYPES, GL_BOOL_VEC4, [GL_FLOAT, 4, 'bvec4']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT2, [GL_FLOAT, 8, 'mat2']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT2x3, [GL_FLOAT, 8, 'mat2x3']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT2x4, [GL_FLOAT, 8, 'mat2x4']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT3, [GL_FLOAT, 12, 'mat3']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT3x2, [GL_FLOAT, 12, 'mat3x2']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT3x4, [GL_FLOAT, 12, 'mat3x4']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT4, [GL_FLOAT, 16, 'mat4']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT4x2, [GL_FLOAT, 16, 'mat4x2']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT4x3, [GL_FLOAT, 16, 'mat4x3']), _COMPOSITE_GL_TYPES);\nexport function getPrimitiveDrawMode(drawMode) {\n  switch (drawMode) {\n    case GL_POINTS:\n      return GL_POINTS;\n\n    case GL_LINES:\n      return GL_LINES;\n\n    case GL_LINE_STRIP:\n      return GL_LINES;\n\n    case GL_LINE_LOOP:\n      return GL_LINES;\n\n    case GL_TRIANGLES:\n      return GL_TRIANGLES;\n\n    case GL_TRIANGLE_STRIP:\n      return GL_TRIANGLES;\n\n    case GL_TRIANGLE_FAN:\n      return GL_TRIANGLES;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function getPrimitiveCount(_ref) {\n  var drawMode = _ref.drawMode,\n      vertexCount = _ref.vertexCount;\n\n  switch (drawMode) {\n    case GL_POINTS:\n    case GL_LINE_LOOP:\n      return vertexCount;\n\n    case GL_LINES:\n      return vertexCount / 2;\n\n    case GL_LINE_STRIP:\n      return vertexCount - 1;\n\n    case GL_TRIANGLES:\n      return vertexCount / 3;\n\n    case GL_TRIANGLE_STRIP:\n    case GL_TRIANGLE_FAN:\n      return vertexCount - 2;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function getVertexCount(_ref2) {\n  var drawMode = _ref2.drawMode,\n      vertexCount = _ref2.vertexCount;\n  var primitiveCount = getPrimitiveCount({\n    drawMode: drawMode,\n    vertexCount: vertexCount\n  });\n\n  switch (getPrimitiveDrawMode(drawMode)) {\n    case GL_POINTS:\n      return primitiveCount;\n\n    case GL_LINES:\n      return primitiveCount * 2;\n\n    case GL_TRIANGLES:\n      return primitiveCount * 3;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function decomposeCompositeGLType(compositeGLType) {\n  var typeAndSize = COMPOSITE_GL_TYPES[compositeGLType];\n\n  if (!typeAndSize) {\n    return null;\n  }\n\n  var _typeAndSize = _slicedToArray(typeAndSize, 2),\n      type = _typeAndSize[0],\n      components = _typeAndSize[1];\n\n  return {\n    type: type,\n    components: components\n  };\n}\nexport function getCompositeGLType(type, components) {\n  switch (type) {\n    case GL_BYTE:\n    case GL_UNSIGNED_BYTE:\n    case GL_SHORT:\n    case GL_UNSIGNED_SHORT:\n      type = GL_FLOAT;\n      break;\n\n    default:\n  }\n\n  for (var glType in COMPOSITE_GL_TYPES) {\n    var _COMPOSITE_GL_TYPES$g = _slicedToArray(COMPOSITE_GL_TYPES[glType], 3),\n        compType = _COMPOSITE_GL_TYPES$g[0],\n        compComponents = _COMPOSITE_GL_TYPES$g[1],\n        name = _COMPOSITE_GL_TYPES$g[2];\n\n    if (compType === type && compComponents === components) {\n      return {\n        glType: glType,\n        name: name\n      };\n    }\n  }\n\n  return null;\n}\n//# sourceMappingURL=attribute-utils.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport Accessor from './accessor';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { decomposeCompositeGLType } from '../webgl-utils/attribute-utils';\n\nvar ProgramConfiguration = function () {\n  function ProgramConfiguration(program) {\n    _classCallCheck(this, ProgramConfiguration);\n\n    this.id = program.id;\n    this.attributeInfos = [];\n    this.attributeInfosByName = {};\n    this.attributeInfosByLocation = [];\n    this.varyingInfos = [];\n    this.varyingInfosByName = {};\n    Object.seal(this);\n\n    this._readAttributesFromProgram(program);\n\n    this._readVaryingsFromProgram(program);\n  }\n\n  _createClass(ProgramConfiguration, [{\n    key: \"getAttributeInfo\",\n    value: function getAttributeInfo(locationOrName) {\n      var location = Number(locationOrName);\n\n      if (Number.isFinite(location)) {\n        return this.attributeInfosByLocation[location];\n      }\n\n      return this.attributeInfosByName[locationOrName] || null;\n    }\n  }, {\n    key: \"getAttributeLocation\",\n    value: function getAttributeLocation(locationOrName) {\n      var attributeInfo = this.getAttributeInfo(locationOrName);\n      return attributeInfo ? attributeInfo.location : -1;\n    }\n  }, {\n    key: \"getAttributeAccessor\",\n    value: function getAttributeAccessor(locationOrName) {\n      var attributeInfo = this.getAttributeInfo(locationOrName);\n      return attributeInfo ? attributeInfo.accessor : null;\n    }\n  }, {\n    key: \"getVaryingInfo\",\n    value: function getVaryingInfo(locationOrName) {\n      var location = Number(locationOrName);\n\n      if (Number.isFinite(location)) {\n        return this.varyingInfos[location];\n      }\n\n      return this.varyingInfosByName[locationOrName] || null;\n    }\n  }, {\n    key: \"getVaryingIndex\",\n    value: function getVaryingIndex(locationOrName) {\n      var varying = this.getVaryingInfo();\n      return varying ? varying.location : -1;\n    }\n  }, {\n    key: \"getVaryingAccessor\",\n    value: function getVaryingAccessor(locationOrName) {\n      var varying = this.getVaryingInfo();\n      return varying ? varying.accessor : null;\n    }\n  }, {\n    key: \"_readAttributesFromProgram\",\n    value: function _readAttributesFromProgram(program) {\n      var gl = program.gl;\n      var count = gl.getProgramParameter(program.handle, 35721);\n\n      for (var index = 0; index < count; index++) {\n        var _gl$getActiveAttrib = gl.getActiveAttrib(program.handle, index),\n            name = _gl$getActiveAttrib.name,\n            type = _gl$getActiveAttrib.type,\n            size = _gl$getActiveAttrib.size;\n\n        var location = gl.getAttribLocation(program.handle, name);\n\n        if (location >= 0) {\n          this._addAttribute(location, name, type, size);\n        }\n      }\n\n      this.attributeInfos.sort(function (a, b) {\n        return a.location - b.location;\n      });\n    }\n  }, {\n    key: \"_readVaryingsFromProgram\",\n    value: function _readVaryingsFromProgram(program) {\n      var gl = program.gl;\n\n      if (!isWebGL2(gl)) {\n        return;\n      }\n\n      var count = gl.getProgramParameter(program.handle, 35971);\n\n      for (var location = 0; location < count; location++) {\n        var _gl$getTransformFeedb = gl.getTransformFeedbackVarying(program.handle, location),\n            name = _gl$getTransformFeedb.name,\n            type = _gl$getTransformFeedb.type,\n            size = _gl$getTransformFeedb.size;\n\n        this._addVarying(location, name, type, size);\n      }\n\n      this.varyingInfos.sort(function (a, b) {\n        return a.location - b.location;\n      });\n    }\n  }, {\n    key: \"_addAttribute\",\n    value: function _addAttribute(location, name, compositeType, size) {\n      var _decomposeCompositeGL = decomposeCompositeGLType(compositeType),\n          type = _decomposeCompositeGL.type,\n          components = _decomposeCompositeGL.components;\n\n      var accessor = {\n        type: type,\n        size: size * components\n      };\n\n      this._inferProperties(location, name, accessor);\n\n      var attributeInfo = {\n        location: location,\n        name: name,\n        accessor: new Accessor(accessor)\n      };\n      this.attributeInfos.push(attributeInfo);\n      this.attributeInfosByLocation[location] = attributeInfo;\n      this.attributeInfosByName[attributeInfo.name] = attributeInfo;\n    }\n  }, {\n    key: \"_inferProperties\",\n    value: function _inferProperties(location, name, accessor) {\n      if (/instance/i.test(name)) {\n        accessor.divisor = 1;\n      }\n    }\n  }, {\n    key: \"_addVarying\",\n    value: function _addVarying(location, name, compositeType, size) {\n      var _decomposeCompositeGL2 = decomposeCompositeGLType(compositeType),\n          type = _decomposeCompositeGL2.type,\n          components = _decomposeCompositeGL2.components;\n\n      var accessor = new Accessor({\n        type: type,\n        size: size * components\n      });\n      var varying = {\n        location: location,\n        name: name,\n        accessor: accessor\n      };\n      this.varyingInfos.push(varying);\n      this.varyingInfosByName[varying.name] = varying;\n    }\n  }]);\n\n  return ProgramConfiguration;\n}();\n\nexport { ProgramConfiguration as default };\n//# sourceMappingURL=program-configuration.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport Resource from './resource';\nimport Texture from './texture';\nimport Framebuffer from './framebuffer';\nimport { parseUniformName, getUniformSetter } from './uniforms';\nimport { VertexShader, FragmentShader } from './shader';\nimport ProgramConfiguration from './program-configuration';\nimport { copyUniform, checkUniformValues } from './uniforms';\nimport { isWebGL2, assertWebGL2Context, withParameters, log } from '@luma.gl/gltools';\nimport { getKey } from '../webgl-utils';\nimport { getPrimitiveDrawMode } from '../webgl-utils/attribute-utils';\nimport { uid, assert } from '../utils';\nvar LOG_PROGRAM_PERF_PRIORITY = 4;\nvar GL_SEPARATE_ATTRIBS = 0x8c8d;\nvar V6_DEPRECATED_METHODS = ['setVertexArray', 'setAttributes', 'setBuffers', 'unsetBuffers', 'use', 'getUniformCount', 'getUniformInfo', 'getUniformLocation', 'getUniformValue', 'getVarying', 'getFragDataLocation', 'getAttachedShaders', 'getAttributeCount', 'getAttributeLocation', 'getAttributeInfo'];\n\nvar Program = function (_Resource) {\n  _inherits(Program, _Resource);\n\n  var _super = _createSuper(Program);\n\n  function Program(gl) {\n    var _this;\n\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Program);\n\n    _this = _super.call(this, gl, props);\n\n    _this.stubRemovedMethods('Program', 'v6.0', V6_DEPRECATED_METHODS);\n\n    _this._isCached = false;\n\n    _this.initialize(props);\n\n    Object.seal(_assertThisInitialized(_this));\n\n    _this._setId(props.id);\n\n    return _this;\n  }\n\n  _createClass(Program, [{\n    key: \"initialize\",\n    value: function initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var hash = props.hash,\n          vs = props.vs,\n          fs = props.fs,\n          varyings = props.varyings,\n          _props$bufferMode = props.bufferMode,\n          bufferMode = _props$bufferMode === void 0 ? GL_SEPARATE_ATTRIBS : _props$bufferMode;\n      this.hash = hash || '';\n      this.vs = typeof vs === 'string' ? new VertexShader(this.gl, {\n        id: \"\".concat(props.id, \"-vs\"),\n        source: vs\n      }) : vs;\n      this.fs = typeof fs === 'string' ? new FragmentShader(this.gl, {\n        id: \"\".concat(props.id, \"-fs\"),\n        source: fs\n      }) : fs;\n      assert(this.vs instanceof VertexShader);\n      assert(this.fs instanceof FragmentShader);\n      this.uniforms = {};\n      this._textureUniforms = {};\n\n      if (varyings && varyings.length > 0) {\n        assertWebGL2Context(this.gl);\n        this.varyings = varyings;\n        this.gl2.transformFeedbackVaryings(this.handle, varyings, bufferMode);\n      }\n\n      this._compileAndLink();\n\n      this._readUniformLocationsFromLinkedProgram();\n\n      this.configuration = new ProgramConfiguration(this);\n      return this.setProps(props);\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (this._isCached) {\n        return this;\n      }\n\n      return _get(_getPrototypeOf(Program.prototype), \"delete\", this).call(this, options);\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('uniforms' in props) {\n        this.setUniforms(props.uniforms);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(_ref) {\n      var _this2 = this;\n\n      var logPriority = _ref.logPriority,\n          _ref$drawMode = _ref.drawMode,\n          drawMode = _ref$drawMode === void 0 ? 4 : _ref$drawMode,\n          vertexCount = _ref.vertexCount,\n          _ref$offset = _ref.offset,\n          offset = _ref$offset === void 0 ? 0 : _ref$offset,\n          start = _ref.start,\n          end = _ref.end,\n          _ref$isIndexed = _ref.isIndexed,\n          isIndexed = _ref$isIndexed === void 0 ? false : _ref$isIndexed,\n          _ref$indexType = _ref.indexType,\n          indexType = _ref$indexType === void 0 ? 5123 : _ref$indexType,\n          _ref$instanceCount = _ref.instanceCount,\n          instanceCount = _ref$instanceCount === void 0 ? 0 : _ref$instanceCount,\n          _ref$isInstanced = _ref.isInstanced,\n          isInstanced = _ref$isInstanced === void 0 ? instanceCount > 0 : _ref$isInstanced,\n          _ref$vertexArray = _ref.vertexArray,\n          vertexArray = _ref$vertexArray === void 0 ? null : _ref$vertexArray,\n          transformFeedback = _ref.transformFeedback,\n          framebuffer = _ref.framebuffer,\n          _ref$parameters = _ref.parameters,\n          parameters = _ref$parameters === void 0 ? {} : _ref$parameters,\n          uniforms = _ref.uniforms,\n          samplers = _ref.samplers;\n\n      if (uniforms || samplers) {\n        log.deprecated('Program.draw({uniforms})', 'Program.setUniforms(uniforms)')();\n        this.setUniforms(uniforms || {});\n      }\n\n      if (log.priority >= logPriority) {\n        var fb = framebuffer ? framebuffer.id : 'default';\n        var message = \"mode=\".concat(getKey(this.gl, drawMode), \" verts=\").concat(vertexCount, \" \") + \"instances=\".concat(instanceCount, \" indexType=\").concat(getKey(this.gl, indexType), \" \") + \"isInstanced=\".concat(isInstanced, \" isIndexed=\").concat(isIndexed, \" \") + \"Framebuffer=\".concat(fb);\n        log.log(logPriority, message)();\n      }\n\n      assert(vertexArray);\n      this.gl.useProgram(this.handle);\n\n      if (!this._areTexturesRenderable() || vertexCount === 0 || isInstanced && instanceCount === 0) {\n        return false;\n      }\n\n      vertexArray.bindForDraw(vertexCount, instanceCount, function () {\n        if (framebuffer !== undefined) {\n          parameters = Object.assign({}, parameters, {\n            framebuffer: framebuffer\n          });\n        }\n\n        if (transformFeedback) {\n          var primitiveMode = getPrimitiveDrawMode(drawMode);\n          transformFeedback.begin(primitiveMode);\n        }\n\n        _this2._bindTextures();\n\n        withParameters(_this2.gl, parameters, function () {\n          if (isIndexed && isInstanced) {\n            _this2.gl2.drawElementsInstanced(drawMode, vertexCount, indexType, offset, instanceCount);\n          } else if (isIndexed && isWebGL2(_this2.gl) && !isNaN(start) && !isNaN(end)) {\n            _this2.gl2.drawRangeElements(drawMode, start, end, vertexCount, indexType, offset);\n          } else if (isIndexed) {\n            _this2.gl.drawElements(drawMode, vertexCount, indexType, offset);\n          } else if (isInstanced) {\n            _this2.gl2.drawArraysInstanced(drawMode, offset, vertexCount, instanceCount);\n          } else {\n            _this2.gl.drawArrays(drawMode, offset, vertexCount);\n          }\n        });\n\n        if (transformFeedback) {\n          transformFeedback.end();\n        }\n      });\n      return true;\n    }\n  }, {\n    key: \"setUniforms\",\n    value: function setUniforms() {\n      var uniforms = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (log.priority >= 2) {\n        checkUniformValues(uniforms, this.id, this._uniformSetters);\n      }\n\n      this.gl.useProgram(this.handle);\n\n      for (var uniformName in uniforms) {\n        var uniform = uniforms[uniformName];\n        var uniformSetter = this._uniformSetters[uniformName];\n\n        if (uniformSetter) {\n          var value = uniform;\n          var textureUpdate = false;\n\n          if (value instanceof Framebuffer) {\n            value = value.texture;\n          }\n\n          if (value instanceof Texture) {\n            textureUpdate = this.uniforms[uniformName] !== uniform;\n\n            if (textureUpdate) {\n              if (uniformSetter.textureIndex === undefined) {\n                uniformSetter.textureIndex = this._textureIndexCounter++;\n              }\n\n              var texture = value;\n              var textureIndex = uniformSetter.textureIndex;\n              texture.bind(textureIndex);\n              value = textureIndex;\n              this._textureUniforms[uniformName] = texture;\n            } else {\n              value = uniformSetter.textureIndex;\n            }\n          } else if (this._textureUniforms[uniformName]) {\n            delete this._textureUniforms[uniformName];\n          }\n\n          if (uniformSetter(value) || textureUpdate) {\n            copyUniform(this.uniforms, uniformName, uniform);\n          }\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"_areTexturesRenderable\",\n    value: function _areTexturesRenderable() {\n      var texturesRenderable = true;\n\n      for (var uniformName in this._textureUniforms) {\n        var texture = this._textureUniforms[uniformName];\n        texture.update();\n        texturesRenderable = texturesRenderable && texture.loaded;\n      }\n\n      return texturesRenderable;\n    }\n  }, {\n    key: \"_bindTextures\",\n    value: function _bindTextures() {\n      for (var uniformName in this._textureUniforms) {\n        var textureIndex = this._uniformSetters[uniformName].textureIndex;\n\n        this._textureUniforms[uniformName].bind(textureIndex);\n      }\n    }\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createProgram();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteProgram(this.handle);\n    }\n  }, {\n    key: \"_getOptionsFromHandle\",\n    value: function _getOptionsFromHandle(handle) {\n      var shaderHandles = this.gl.getAttachedShaders(handle);\n      var opts = {};\n\n      var _iterator = _createForOfIteratorHelper(shaderHandles),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var shaderHandle = _step.value;\n          var type = this.gl.getShaderParameter(this.handle, 35663);\n\n          switch (type) {\n            case 35633:\n              opts.vs = new VertexShader({\n                handle: shaderHandle\n              });\n              break;\n\n            case 35632:\n              opts.fs = new FragmentShader({\n                handle: shaderHandle\n              });\n              break;\n\n            default:\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return opts;\n    }\n  }, {\n    key: \"_getParameter\",\n    value: function _getParameter(pname) {\n      return this.gl.getProgramParameter(this.handle, pname);\n    }\n  }, {\n    key: \"_setId\",\n    value: function _setId(id) {\n      if (!id) {\n        var programName = this._getName();\n\n        this.id = uid(programName);\n      }\n    }\n  }, {\n    key: \"_getName\",\n    value: function _getName() {\n      var programName = this.vs.getName() || this.fs.getName();\n      programName = programName.replace(/shader/i, '');\n      programName = programName ? \"\".concat(programName, \"-program\") : 'program';\n      return programName;\n    }\n  }, {\n    key: \"_compileAndLink\",\n    value: function _compileAndLink() {\n      var gl = this.gl;\n      gl.attachShader(this.handle, this.vs.handle);\n      gl.attachShader(this.handle, this.fs.handle);\n      log.time(LOG_PROGRAM_PERF_PRIORITY, \"linkProgram for \".concat(this._getName()))();\n      gl.linkProgram(this.handle);\n      log.timeEnd(LOG_PROGRAM_PERF_PRIORITY, \"linkProgram for \".concat(this._getName()))();\n\n      if (gl.debug || log.level > 0) {\n        var linked = gl.getProgramParameter(this.handle, 35714);\n\n        if (!linked) {\n          throw new Error(\"Error linking: \".concat(gl.getProgramInfoLog(this.handle)));\n        }\n\n        gl.validateProgram(this.handle);\n        var validated = gl.getProgramParameter(this.handle, 35715);\n\n        if (!validated) {\n          throw new Error(\"Error validating: \".concat(gl.getProgramInfoLog(this.handle)));\n        }\n      }\n    }\n  }, {\n    key: \"_readUniformLocationsFromLinkedProgram\",\n    value: function _readUniformLocationsFromLinkedProgram() {\n      var gl = this.gl;\n      this._uniformSetters = {};\n      this._uniformCount = this._getParameter(35718);\n\n      for (var i = 0; i < this._uniformCount; i++) {\n        var info = this.gl.getActiveUniform(this.handle, i);\n\n        var _parseUniformName = parseUniformName(info.name),\n            name = _parseUniformName.name;\n\n        var location = gl.getUniformLocation(this.handle, name);\n        this._uniformSetters[name] = getUniformSetter(gl, location, info);\n\n        if (info.size > 1) {\n          for (var l = 0; l < info.size; l++) {\n            location = gl.getUniformLocation(this.handle, \"\".concat(name, \"[\").concat(l, \"]\"));\n            this._uniformSetters[\"\".concat(name, \"[\").concat(l, \"]\")] = getUniformSetter(gl, location, info);\n          }\n        }\n      }\n\n      this._textureIndexCounter = 0;\n    }\n  }, {\n    key: \"getActiveUniforms\",\n    value: function getActiveUniforms(uniformIndices, pname) {\n      return this.gl2.getActiveUniforms(this.handle, uniformIndices, pname);\n    }\n  }, {\n    key: \"getUniformBlockIndex\",\n    value: function getUniformBlockIndex(blockName) {\n      return this.gl2.getUniformBlockIndex(this.handle, blockName);\n    }\n  }, {\n    key: \"getActiveUniformBlockParameter\",\n    value: function getActiveUniformBlockParameter(blockIndex, pname) {\n      return this.gl2.getActiveUniformBlockParameter(this.handle, blockIndex, pname);\n    }\n  }, {\n    key: \"uniformBlockBinding\",\n    value: function uniformBlockBinding(blockIndex, blockBinding) {\n      this.gl2.uniformBlockBinding(this.handle, blockIndex, blockBinding);\n    }\n  }]);\n\n  return Program;\n}(Resource);\n\nexport { Program as default };\n//# sourceMappingURL=program.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { assembleShaders } from '@luma.gl/shadertools';\nimport { Program } from '@luma.gl/webgl';\n\nvar ProgramManager = function () {\n  _createClass(ProgramManager, null, [{\n    key: \"getDefaultProgramManager\",\n    value: function getDefaultProgramManager(gl) {\n      gl.luma = gl.luma || {};\n      gl.luma.defaultProgramManager = gl.luma.defaultProgramManager || new ProgramManager(gl);\n      return gl.luma.defaultProgramManager;\n    }\n  }]);\n\n  function ProgramManager(gl) {\n    _classCallCheck(this, ProgramManager);\n\n    this.gl = gl;\n    this._programCache = {};\n    this._getUniforms = {};\n    this._registeredModules = {};\n    this._hookFunctions = [];\n    this._defaultModules = [];\n    this._hashes = {};\n    this._hashCounter = 0;\n    this.stateHash = 0;\n    this._useCounts = {};\n  }\n\n  _createClass(ProgramManager, [{\n    key: \"addDefaultModule\",\n    value: function addDefaultModule(module) {\n      if (!this._defaultModules.find(function (m) {\n        return m.name === module.name;\n      })) {\n        this._defaultModules.push(module);\n      }\n\n      this.stateHash++;\n    }\n  }, {\n    key: \"removeDefaultModule\",\n    value: function removeDefaultModule(module) {\n      var moduleName = typeof module === 'string' ? module : module.name;\n      this._defaultModules = this._defaultModules.filter(function (m) {\n        return m.name !== moduleName;\n      });\n      this.stateHash++;\n    }\n  }, {\n    key: \"addShaderHook\",\n    value: function addShaderHook(hook, opts) {\n      if (opts) {\n        hook = Object.assign(opts, {\n          hook: hook\n        });\n      }\n\n      this._hookFunctions.push(hook);\n\n      this.stateHash++;\n    }\n  }, {\n    key: \"get\",\n    value: function get() {\n      var _this = this;\n\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _props$vs = props.vs,\n          vs = _props$vs === void 0 ? '' : _props$vs,\n          _props$fs = props.fs,\n          fs = _props$fs === void 0 ? '' : _props$fs,\n          _props$defines = props.defines,\n          defines = _props$defines === void 0 ? {} : _props$defines,\n          _props$inject = props.inject,\n          inject = _props$inject === void 0 ? {} : _props$inject,\n          _props$varyings = props.varyings,\n          varyings = _props$varyings === void 0 ? [] : _props$varyings,\n          _props$bufferMode = props.bufferMode,\n          bufferMode = _props$bufferMode === void 0 ? 0x8c8d : _props$bufferMode,\n          _props$transpileToGLS = props.transpileToGLSL100,\n          transpileToGLSL100 = _props$transpileToGLS === void 0 ? false : _props$transpileToGLS;\n\n      var modules = this._getModuleList(props.modules);\n\n      var vsHash = this._getHash(vs);\n\n      var fsHash = this._getHash(fs);\n\n      var moduleHashes = modules.map(function (m) {\n        return _this._getHash(m.name);\n      }).sort();\n      var varyingHashes = varyings.map(function (v) {\n        return _this._getHash(v);\n      });\n      var defineKeys = Object.keys(defines).sort();\n      var injectKeys = Object.keys(inject).sort();\n      var defineHashes = [];\n      var injectHashes = [];\n\n      var _iterator = _createForOfIteratorHelper(defineKeys),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var key = _step.value;\n          defineHashes.push(this._getHash(key));\n          defineHashes.push(this._getHash(defines[key]));\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      var _iterator2 = _createForOfIteratorHelper(injectKeys),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var _key = _step2.value;\n          injectHashes.push(this._getHash(_key));\n          injectHashes.push(this._getHash(inject[_key]));\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      var hash = \"\".concat(vsHash, \"/\").concat(fsHash, \"D\").concat(defineHashes.join('/'), \"M\").concat(moduleHashes.join('/'), \"I\").concat(injectHashes.join('/'), \"V\").concat(varyingHashes.join('/'), \"H\").concat(this.stateHash, \"B\").concat(bufferMode).concat(transpileToGLSL100 ? 'T' : '');\n\n      if (!this._programCache[hash]) {\n        var assembled = assembleShaders(this.gl, {\n          vs: vs,\n          fs: fs,\n          modules: modules,\n          inject: inject,\n          defines: defines,\n          hookFunctions: this._hookFunctions,\n          transpileToGLSL100: transpileToGLSL100\n        });\n        this._programCache[hash] = new Program(this.gl, {\n          hash: hash,\n          vs: assembled.vs,\n          fs: assembled.fs,\n          varyings: varyings,\n          bufferMode: bufferMode\n        });\n\n        this._getUniforms[hash] = assembled.getUniforms || function (x) {};\n\n        this._useCounts[hash] = 0;\n      }\n\n      this._useCounts[hash]++;\n      return this._programCache[hash];\n    }\n  }, {\n    key: \"getUniforms\",\n    value: function getUniforms(program) {\n      return this._getUniforms[program.hash] || null;\n    }\n  }, {\n    key: \"release\",\n    value: function release(program) {\n      var hash = program.hash;\n      this._useCounts[hash]--;\n\n      if (this._useCounts[hash] === 0) {\n        this._programCache[hash][\"delete\"]();\n\n        delete this._programCache[hash];\n        delete this._getUniforms[hash];\n        delete this._useCounts[hash];\n      }\n    }\n  }, {\n    key: \"_getHash\",\n    value: function _getHash(key) {\n      if (this._hashes[key] === undefined) {\n        this._hashes[key] = this._hashCounter++;\n      }\n\n      return this._hashes[key];\n    }\n  }, {\n    key: \"_getModuleList\",\n    value: function _getModuleList() {\n      var appModules = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var modules = new Array(this._defaultModules.length + appModules.length);\n      var seen = {};\n      var count = 0;\n\n      for (var i = 0, len = this._defaultModules.length; i < len; ++i) {\n        var module = this._defaultModules[i];\n        var name = module.name;\n        modules[count++] = module;\n        seen[name] = true;\n      }\n\n      for (var _i = 0, _len = appModules.length; _i < _len; ++_i) {\n        var _module = appModules[_i];\n        var _name = _module.name;\n\n        if (!seen[_name]) {\n          modules[count++] = _module;\n          seen[_name] = true;\n        }\n      }\n\n      modules.length = count;\n      return modules;\n    }\n  }]);\n\n  return ProgramManager;\n}();\n\nexport { ProgramManager as default };\n//# sourceMappingURL=program-manager.js.map","var arrayBuffer = null;\nexport function getScratchArrayBuffer(byteLength) {\n  if (!arrayBuffer || arrayBuffer.byteLength < byteLength) {\n    arrayBuffer = new ArrayBuffer(byteLength);\n  }\n\n  return arrayBuffer;\n}\nexport function getScratchArray(Type, length) {\n  var scratchArrayBuffer = getScratchArrayBuffer(Type.BYTES_PER_ELEMENT * length);\n  return new Type(scratchArrayBuffer, 0, length);\n}\nexport function fillArray(_ref) {\n  var target = _ref.target,\n      source = _ref.source,\n      _ref$start = _ref.start,\n      start = _ref$start === void 0 ? 0 : _ref$start,\n      _ref$count = _ref.count,\n      count = _ref$count === void 0 ? 1 : _ref$count;\n  var length = source.length;\n  var total = count * length;\n  var copied = 0;\n\n  for (var i = start; copied < length; copied++) {\n    target[i++] = source[copied];\n  }\n\n  while (copied < total) {\n    if (copied < total - copied) {\n      target.copyWithin(start + copied, start, start + copied);\n      copied *= 2;\n    } else {\n      target.copyWithin(start + copied, start, start + total - copied);\n      copied = total;\n    }\n  }\n\n  return target;\n}\n//# sourceMappingURL=array-utils-flat.js.map","import { window } from './globals';\nimport isBrowser from './is-browser';\nimport isElectron from './is-electron';\nexport function isMobile() {\n  return typeof window.orientation !== 'undefined';\n}\nexport default function getBrowser(mockUserAgent) {\n  if (!mockUserAgent && !isBrowser()) {\n    return 'Node';\n  }\n\n  if (isElectron(mockUserAgent)) {\n    return 'Electron';\n  }\n\n  var navigator_ = typeof navigator !== 'undefined' ? navigator : {};\n  var userAgent = mockUserAgent || navigator_.userAgent || '';\n\n  if (userAgent.indexOf('Edge') > -1) {\n    return 'Edge';\n  }\n\n  var isMSIE = userAgent.indexOf('MSIE ') !== -1;\n  var isTrident = userAgent.indexOf('Trident/') !== -1;\n\n  if (isMSIE || isTrident) {\n    return 'IE';\n  }\n\n  if (window.chrome) {\n    return 'Chrome';\n  }\n\n  if (window.safari) {\n    return 'Safari';\n  }\n\n  if (window.mozInnerScreenX) {\n    return 'Firefox';\n  }\n\n  return 'Unknown';\n}\n//# sourceMappingURL=get-browser.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport Resource from './resource';\nimport Buffer from './buffer';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { getScratchArray, fillArray } from '../utils/array-utils-flat';\nimport { assert } from '../utils';\nimport { getBrowser } from 'probe.gl';\nvar ERR_ELEMENTS = 'elements must be GL.ELEMENT_ARRAY_BUFFER';\n\nvar VertexArrayObject = function (_Resource) {\n  _inherits(VertexArrayObject, _Resource);\n\n  var _super = _createSuper(VertexArrayObject);\n\n  _createClass(VertexArrayObject, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (options.constantAttributeZero) {\n        return isWebGL2(gl) || getBrowser() === 'Chrome';\n      }\n\n      return true;\n    }\n  }, {\n    key: \"getDefaultArray\",\n    value: function getDefaultArray(gl) {\n      gl.luma = gl.luma || {};\n\n      if (!gl.luma.defaultVertexArray) {\n        gl.luma.defaultVertexArray = new VertexArrayObject(gl, {\n          handle: null,\n          isDefaultArray: true\n        });\n      }\n\n      return gl.luma.defaultVertexArray;\n    }\n  }, {\n    key: \"getMaxAttributes\",\n    value: function getMaxAttributes(gl) {\n      VertexArrayObject.MAX_ATTRIBUTES = VertexArrayObject.MAX_ATTRIBUTES || gl.getParameter(34921);\n      return VertexArrayObject.MAX_ATTRIBUTES;\n    }\n  }, {\n    key: \"setConstant\",\n    value: function setConstant(gl, location, array) {\n      switch (array.constructor) {\n        case Float32Array:\n          VertexArrayObject._setConstantFloatArray(gl, location, array);\n\n          break;\n\n        case Int32Array:\n          VertexArrayObject._setConstantIntArray(gl, location, array);\n\n          break;\n\n        case Uint32Array:\n          VertexArrayObject._setConstantUintArray(gl, location, array);\n\n          break;\n\n        default:\n          assert(false);\n      }\n    }\n  }]);\n\n  function VertexArrayObject(gl) {\n    var _this;\n\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, VertexArrayObject);\n\n    var id = opts.id || opts.program && opts.program.id;\n    _this = _super.call(this, gl, Object.assign({}, opts, {\n      id: id\n    }));\n    _this.buffer = null;\n    _this.bufferValue = null;\n    _this.isDefaultArray = opts.isDefaultArray || false;\n    _this.gl2 = gl;\n\n    _this.initialize(opts);\n\n    Object.seal(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(VertexArrayObject, [{\n    key: \"delete\",\n    value: function _delete() {\n      _get(_getPrototypeOf(VertexArrayObject.prototype), \"delete\", this).call(this);\n\n      if (this.buffer) {\n        this.buffer[\"delete\"]();\n      }\n\n      return this;\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return this.setProps(props);\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      return this;\n    }\n  }, {\n    key: \"setElementBuffer\",\n    value: function setElementBuffer() {\n      var _this2 = this;\n\n      var elementBuffer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      assert(!elementBuffer || elementBuffer.target === 34963, ERR_ELEMENTS);\n      this.bind(function () {\n        _this2.gl.bindBuffer(34963, elementBuffer ? elementBuffer.handle : null);\n      });\n      return this;\n    }\n  }, {\n    key: \"setBuffer\",\n    value: function setBuffer(location, buffer, accessor) {\n      if (buffer.target === 34963) {\n        return this.setElementBuffer(buffer, accessor);\n      }\n\n      var size = accessor.size,\n          type = accessor.type,\n          stride = accessor.stride,\n          offset = accessor.offset,\n          normalized = accessor.normalized,\n          integer = accessor.integer,\n          divisor = accessor.divisor;\n      var gl = this.gl,\n          gl2 = this.gl2;\n      location = Number(location);\n      this.bind(function () {\n        gl.bindBuffer(34962, buffer.handle);\n\n        if (integer) {\n          assert(isWebGL2(gl));\n          gl2.vertexAttribIPointer(location, size, type, stride, offset);\n        } else {\n          gl.vertexAttribPointer(location, size, type, normalized, stride, offset);\n        }\n\n        gl.enableVertexAttribArray(location);\n        gl2.vertexAttribDivisor(location, divisor || 0);\n      });\n      return this;\n    }\n  }, {\n    key: \"enable\",\n    value: function enable(location) {\n      var _this3 = this;\n\n      var _enable = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      var disablingAttributeZero = !_enable && location === 0 && !VertexArrayObject.isSupported(this.gl, {\n        constantAttributeZero: true\n      });\n\n      if (!disablingAttributeZero) {\n        location = Number(location);\n        this.bind(function () {\n          return _enable ? _this3.gl.enableVertexAttribArray(location) : _this3.gl.disableVertexAttribArray(location);\n        });\n      }\n\n      return this;\n    }\n  }, {\n    key: \"getConstantBuffer\",\n    value: function getConstantBuffer(elementCount, value) {\n      var constantValue = this._normalizeConstantArrayValue(value);\n\n      var byteLength = constantValue.byteLength * elementCount;\n      var length = constantValue.length * elementCount;\n      var updateNeeded = !this.buffer;\n      this.buffer = this.buffer || new Buffer(this.gl, byteLength);\n      updateNeeded = updateNeeded || this.buffer.reallocate(byteLength);\n      updateNeeded = updateNeeded || !this._compareConstantArrayValues(constantValue, this.bufferValue);\n\n      if (updateNeeded) {\n        var typedArray = getScratchArray(value.constructor, length);\n        fillArray({\n          target: typedArray,\n          source: constantValue,\n          start: 0,\n          count: length\n        });\n        this.buffer.subData(typedArray);\n        this.bufferValue = value;\n      }\n\n      return this.buffer;\n    }\n  }, {\n    key: \"_normalizeConstantArrayValue\",\n    value: function _normalizeConstantArrayValue(arrayValue) {\n      if (Array.isArray(arrayValue)) {\n        return new Float32Array(arrayValue);\n      }\n\n      return arrayValue;\n    }\n  }, {\n    key: \"_compareConstantArrayValues\",\n    value: function _compareConstantArrayValues(v1, v2) {\n      if (!v1 || !v2 || v1.length !== v2.length || v1.constructor !== v2.constructor) {\n        return false;\n      }\n\n      for (var i = 0; i < v1.length; ++i) {\n        if (v1[i] !== v2[i]) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      var gl2 = this.gl;\n      return gl2.createVertexArray();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle(handle) {\n      this.gl2.deleteVertexArray(handle);\n      return [this.elements];\n    }\n  }, {\n    key: \"_bindHandle\",\n    value: function _bindHandle(handle) {\n      this.gl2.bindVertexArray(handle);\n    }\n  }, {\n    key: \"_getParameter\",\n    value: function _getParameter(pname, _ref) {\n      var _this4 = this;\n\n      var location = _ref.location;\n      assert(Number.isFinite(location));\n      return this.bind(function () {\n        switch (pname) {\n          case 34373:\n            return _this4.gl.getVertexAttribOffset(location, pname);\n\n          default:\n            return _this4.gl.getVertexAttrib(location, pname);\n        }\n      });\n    }\n  }, {\n    key: \"MAX_ATTRIBUTES\",\n    get: function get() {\n      return VertexArrayObject.getMaxAttributes(this.gl);\n    }\n  }], [{\n    key: \"_setConstantFloatArray\",\n    value: function _setConstantFloatArray(gl, location, array) {\n      switch (array.length) {\n        case 1:\n          gl.vertexAttrib1fv(location, array);\n          break;\n\n        case 2:\n          gl.vertexAttrib2fv(location, array);\n          break;\n\n        case 3:\n          gl.vertexAttrib3fv(location, array);\n          break;\n\n        case 4:\n          gl.vertexAttrib4fv(location, array);\n          break;\n\n        default:\n          assert(false);\n      }\n    }\n  }, {\n    key: \"_setConstantIntArray\",\n    value: function _setConstantIntArray(gl, location, array) {\n      assert(isWebGL2(gl));\n\n      switch (array.length) {\n        case 1:\n          gl.vertexAttribI1iv(location, array);\n          break;\n\n        case 2:\n          gl.vertexAttribI2iv(location, array);\n          break;\n\n        case 3:\n          gl.vertexAttribI3iv(location, array);\n          break;\n\n        case 4:\n          gl.vertexAttribI4iv(location, array);\n          break;\n\n        default:\n          assert(false);\n      }\n    }\n  }, {\n    key: \"_setConstantUintArray\",\n    value: function _setConstantUintArray(gl, location, array) {\n      assert(isWebGL2(gl));\n\n      switch (array.length) {\n        case 1:\n          gl.vertexAttribI1uiv(location, array);\n          break;\n\n        case 2:\n          gl.vertexAttribI2uiv(location, array);\n          break;\n\n        case 3:\n          gl.vertexAttribI3uiv(location, array);\n          break;\n\n        case 4:\n          gl.vertexAttribI4uiv(location, array);\n          break;\n\n        default:\n          assert(false);\n      }\n    }\n  }]);\n\n  return VertexArrayObject;\n}(Resource);\n\nexport { VertexArrayObject as default };\n//# sourceMappingURL=vertex-array-object.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { log } from '@luma.gl/gltools';\nimport Accessor from './accessor';\nimport Buffer from './buffer';\nimport VertexArrayObject from './vertex-array-object';\nimport { assert, stubRemovedMethods } from '../utils';\nvar ERR_ATTRIBUTE_TYPE = 'VertexArray: attributes must be Buffers or constants (i.e. typed array)';\nvar MULTI_LOCATION_ATTRIBUTE_REGEXP = /^(.+)__LOCATION_([0-9]+)$/;\nvar DEPRECATIONS_V6 = ['setBuffers', 'setGeneric', 'clearBindings', 'setLocations', 'setGenericValues', 'setDivisor', 'enable', 'disable'];\n\nvar VertexArray = function () {\n  function VertexArray(gl) {\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, VertexArray);\n\n    var id = opts.id || opts.program && opts.program.id;\n    this.id = id;\n    this.gl = gl;\n    this.configuration = null;\n    this.elements = null;\n    this.elementsAccessor = null;\n    this.values = null;\n    this.accessors = null;\n    this.unused = null;\n    this.drawParams = null;\n    this.buffer = null;\n    this.attributes = {};\n    this.vertexArrayObject = new VertexArrayObject(gl);\n    stubRemovedMethods(this, 'VertexArray', 'v6.0', DEPRECATIONS_V6);\n    this.initialize(opts);\n    Object.seal(this);\n  }\n\n  _createClass(VertexArray, [{\n    key: \"delete\",\n    value: function _delete() {\n      if (this.buffer) {\n        this.buffer[\"delete\"]();\n      }\n\n      this.vertexArrayObject[\"delete\"]();\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.reset();\n      this.configuration = null;\n      this.bindOnUse = false;\n      return this.setProps(props);\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.elements = null;\n      this.elementsAccessor = null;\n      var MAX_ATTRIBUTES = this.vertexArrayObject.MAX_ATTRIBUTES;\n      this.values = new Array(MAX_ATTRIBUTES).fill(null);\n      this.accessors = new Array(MAX_ATTRIBUTES).fill(null);\n      this.unused = {};\n      this.drawParams = null;\n      return this;\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('program' in props) {\n        this.configuration = props.program && props.program.configuration;\n      }\n\n      if ('configuration' in props) {\n        this.configuration = props.configuration;\n      }\n\n      if ('attributes' in props) {\n        this.setAttributes(props.attributes);\n      }\n\n      if ('elements' in props) {\n        this.setElementBuffer(props.elements);\n      }\n\n      if ('bindOnUse' in props) {\n        props = props.bindOnUse;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"clearDrawParams\",\n    value: function clearDrawParams() {\n      this.drawParams = null;\n    }\n  }, {\n    key: \"getDrawParams\",\n    value: function getDrawParams() {\n      this.drawParams = this.drawParams || this._updateDrawParams();\n      return this.drawParams;\n    }\n  }, {\n    key: \"setAttributes\",\n    value: function setAttributes(attributes) {\n      var _this = this;\n\n      Object.assign(this.attributes, attributes);\n      this.vertexArrayObject.bind(function () {\n        for (var locationOrName in attributes) {\n          var value = attributes[locationOrName];\n\n          _this._setAttribute(locationOrName, value);\n        }\n\n        _this.gl.bindBuffer(34962, null);\n      });\n      return this;\n    }\n  }, {\n    key: \"setElementBuffer\",\n    value: function setElementBuffer() {\n      var elementBuffer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var accessor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this.elements = elementBuffer;\n      this.elementsAccessor = accessor;\n      this.clearDrawParams();\n      this.vertexArrayObject.setElementBuffer(elementBuffer, accessor);\n      return this;\n    }\n  }, {\n    key: \"setBuffer\",\n    value: function setBuffer(locationOrName, buffer) {\n      var appAccessor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      if (buffer.target === 34963) {\n        return this.setElementBuffer(buffer, appAccessor);\n      }\n\n      var _this$_resolveLocatio = this._resolveLocationAndAccessor(locationOrName, buffer, buffer.accessor, appAccessor),\n          location = _this$_resolveLocatio.location,\n          accessor = _this$_resolveLocatio.accessor;\n\n      if (location >= 0) {\n        this.values[location] = buffer;\n        this.accessors[location] = accessor;\n        this.clearDrawParams();\n        this.vertexArrayObject.setBuffer(location, buffer, accessor);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"setConstant\",\n    value: function setConstant(locationOrName, arrayValue) {\n      var appAccessor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      var _this$_resolveLocatio2 = this._resolveLocationAndAccessor(locationOrName, arrayValue, Object.assign({\n        size: arrayValue.length\n      }, appAccessor)),\n          location = _this$_resolveLocatio2.location,\n          accessor = _this$_resolveLocatio2.accessor;\n\n      if (location >= 0) {\n        arrayValue = this.vertexArrayObject._normalizeConstantArrayValue(arrayValue);\n        this.values[location] = arrayValue;\n        this.accessors[location] = accessor;\n        this.clearDrawParams();\n        this.vertexArrayObject.enable(location, false);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"unbindBuffers\",\n    value: function unbindBuffers() {\n      var _this2 = this;\n\n      this.vertexArrayObject.bind(function () {\n        if (_this2.elements) {\n          _this2.vertexArrayObject.setElementBuffer(null);\n        }\n\n        _this2.buffer = _this2.buffer || new Buffer(_this2.gl, {\n          accessor: {\n            size: 4\n          }\n        });\n\n        for (var location = 0; location < _this2.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n          if (_this2.values[location] instanceof Buffer) {\n            _this2.gl.disableVertexAttribArray(location);\n\n            _this2.gl.bindBuffer(34962, _this2.buffer.handle);\n\n            _this2.gl.vertexAttribPointer(location, 1, 5126, false, 0, 0);\n          }\n        }\n      });\n      return this;\n    }\n  }, {\n    key: \"bindBuffers\",\n    value: function bindBuffers() {\n      var _this3 = this;\n\n      this.vertexArrayObject.bind(function () {\n        if (_this3.elements) {\n          _this3.setElementBuffer(_this3.elements);\n        }\n\n        for (var location = 0; location < _this3.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n          var buffer = _this3.values[location];\n\n          if (buffer instanceof Buffer) {\n            _this3.setBuffer(location, buffer);\n          }\n        }\n      });\n      return this;\n    }\n  }, {\n    key: \"bindForDraw\",\n    value: function bindForDraw(vertexCount, instanceCount, func) {\n      var _this4 = this;\n\n      var value;\n      this.vertexArrayObject.bind(function () {\n        _this4._setConstantAttributes(vertexCount, instanceCount);\n\n        value = func();\n      });\n      return value;\n    }\n  }, {\n    key: \"_resolveLocationAndAccessor\",\n    value: function _resolveLocationAndAccessor(locationOrName, value, valueAccessor, appAccessor) {\n      var _this5 = this;\n\n      var INVALID_RESULT = {\n        location: -1,\n        accessor: null\n      };\n\n      var _this$_getAttributeIn = this._getAttributeIndex(locationOrName),\n          location = _this$_getAttributeIn.location,\n          name = _this$_getAttributeIn.name;\n\n      if (!Number.isFinite(location) || location < 0) {\n        this.unused[locationOrName] = value;\n        log.once(3, function () {\n          return \"unused value \".concat(locationOrName, \" in \").concat(_this5.id);\n        })();\n        return INVALID_RESULT;\n      }\n\n      var accessInfo = this._getAttributeInfo(name || location);\n\n      if (!accessInfo) {\n        return INVALID_RESULT;\n      }\n\n      var currentAccessor = this.accessors[location] || {};\n      var accessor = Accessor.resolve(accessInfo.accessor, currentAccessor, valueAccessor, appAccessor);\n      var size = accessor.size,\n          type = accessor.type;\n      assert(Number.isFinite(size) && Number.isFinite(type));\n      return {\n        location: location,\n        accessor: accessor\n      };\n    }\n  }, {\n    key: \"_getAttributeInfo\",\n    value: function _getAttributeInfo(attributeName) {\n      return this.configuration && this.configuration.getAttributeInfo(attributeName);\n    }\n  }, {\n    key: \"_getAttributeIndex\",\n    value: function _getAttributeIndex(locationOrName) {\n      var location = Number(locationOrName);\n\n      if (Number.isFinite(location)) {\n        return {\n          location: location\n        };\n      }\n\n      var multiLocation = MULTI_LOCATION_ATTRIBUTE_REGEXP.exec(locationOrName);\n      var name = multiLocation ? multiLocation[1] : locationOrName;\n      var locationOffset = multiLocation ? Number(multiLocation[2]) : 0;\n\n      if (this.configuration) {\n        return {\n          location: this.configuration.getAttributeLocation(name) + locationOffset,\n          name: name\n        };\n      }\n\n      return {\n        location: -1\n      };\n    }\n  }, {\n    key: \"_setAttribute\",\n    value: function _setAttribute(locationOrName, value) {\n      if (value instanceof Buffer) {\n        this.setBuffer(locationOrName, value);\n      } else if (Array.isArray(value) && value.length && value[0] instanceof Buffer) {\n        var buffer = value[0];\n        var accessor = value[1];\n        this.setBuffer(locationOrName, buffer, accessor);\n      } else if (ArrayBuffer.isView(value) || Array.isArray(value)) {\n        var constant = value;\n        this.setConstant(locationOrName, constant);\n      } else if (value.buffer instanceof Buffer) {\n        var _accessor = value;\n        this.setBuffer(locationOrName, _accessor.buffer, _accessor);\n      } else {\n        throw new Error(ERR_ATTRIBUTE_TYPE);\n      }\n    }\n  }, {\n    key: \"_setConstantAttributes\",\n    value: function _setConstantAttributes(vertexCount, instanceCount) {\n      var elementCount = Math.max(vertexCount | 0, instanceCount | 0);\n      var constant = this.values[0];\n\n      if (ArrayBuffer.isView(constant)) {\n        this._setConstantAttributeZero(constant, elementCount);\n      }\n\n      for (var location = 1; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n        constant = this.values[location];\n\n        if (ArrayBuffer.isView(constant)) {\n          this._setConstantAttribute(location, constant);\n        }\n      }\n    }\n  }, {\n    key: \"_setConstantAttributeZero\",\n    value: function _setConstantAttributeZero(constant, elementCount) {\n      if (VertexArrayObject.isSupported(this.gl, {\n        constantAttributeZero: true\n      })) {\n        this._setConstantAttribute(0, constant);\n\n        return;\n      }\n\n      var buffer = this.vertexArrayObject.getConstantBuffer(elementCount, constant);\n      this.vertexArrayObject.setBuffer(0, buffer, this.accessors[0]);\n    }\n  }, {\n    key: \"_setConstantAttribute\",\n    value: function _setConstantAttribute(location, constant) {\n      VertexArrayObject.setConstant(this.gl, location, constant);\n    }\n  }, {\n    key: \"_updateDrawParams\",\n    value: function _updateDrawParams() {\n      var drawParams = {\n        isIndexed: false,\n        isInstanced: false,\n        indexCount: Infinity,\n        vertexCount: Infinity,\n        instanceCount: Infinity\n      };\n\n      for (var location = 0; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n        this._updateDrawParamsForLocation(drawParams, location);\n      }\n\n      if (this.elements) {\n        drawParams.elementCount = this.elements.getElementCount(this.elements.accessor);\n        drawParams.isIndexed = true;\n        drawParams.indexType = this.elementsAccessor.type || this.elements.accessor.type;\n        drawParams.indexOffset = this.elementsAccessor.offset || 0;\n      }\n\n      if (drawParams.indexCount === Infinity) {\n        drawParams.indexCount = 0;\n      }\n\n      if (drawParams.vertexCount === Infinity) {\n        drawParams.vertexCount = 0;\n      }\n\n      if (drawParams.instanceCount === Infinity) {\n        drawParams.instanceCount = 0;\n      }\n\n      return drawParams;\n    }\n  }, {\n    key: \"_updateDrawParamsForLocation\",\n    value: function _updateDrawParamsForLocation(drawParams, location) {\n      var value = this.values[location];\n      var accessor = this.accessors[location];\n\n      if (!value) {\n        return;\n      }\n\n      var divisor = accessor.divisor;\n      var isInstanced = divisor > 0;\n      drawParams.isInstanced = drawParams.isInstanced || isInstanced;\n\n      if (value instanceof Buffer) {\n        var buffer = value;\n\n        if (isInstanced) {\n          var instanceCount = buffer.getVertexCount(accessor);\n          drawParams.instanceCount = Math.min(drawParams.instanceCount, instanceCount);\n        } else {\n          var vertexCount = buffer.getVertexCount(accessor);\n          drawParams.vertexCount = Math.min(drawParams.vertexCount, vertexCount);\n        }\n      }\n    }\n  }, {\n    key: \"setElements\",\n    value: function setElements() {\n      var elementBuffer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var accessor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      log.deprecated('setElements', 'setElementBuffer')();\n      return this.setElementBuffer(elementBuffer, accessor);\n    }\n  }]);\n\n  return VertexArray;\n}();\n\nexport { VertexArray as default };\n//# sourceMappingURL=vertex-array.js.map","function formatArrayValue(v, opts) {\n  var _opts$maxElts = opts.maxElts,\n      maxElts = _opts$maxElts === void 0 ? 16 : _opts$maxElts,\n      _opts$size = opts.size,\n      size = _opts$size === void 0 ? 1 : _opts$size;\n  var string = '[';\n\n  for (var i = 0; i < v.length && i < maxElts; ++i) {\n    if (i > 0) {\n      string += \",\".concat(i % size === 0 ? ' ' : '');\n    }\n\n    string += formatValue(v[i], opts);\n  }\n\n  var terminator = v.length > maxElts ? '...' : ']';\n  return \"\".concat(string).concat(terminator);\n}\n\nexport function formatValue(v) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var EPSILON = 1e-16;\n  var _opts$isInteger = opts.isInteger,\n      isInteger = _opts$isInteger === void 0 ? false : _opts$isInteger;\n\n  if (Array.isArray(v) || ArrayBuffer.isView(v)) {\n    return formatArrayValue(v, opts);\n  }\n\n  if (!Number.isFinite(v)) {\n    return String(v);\n  }\n\n  if (Math.abs(v) < EPSILON) {\n    return isInteger ? '0' : '0.';\n  }\n\n  if (isInteger) {\n    return v.toFixed(0);\n  }\n\n  if (Math.abs(v) > 100 && Math.abs(v) < 10000) {\n    return v.toFixed(0);\n  }\n\n  var string = v.toPrecision(2);\n  var decimal = string.indexOf('.0');\n  return decimal === string.length - 2 ? string.slice(0, -1) : string;\n}\n//# sourceMappingURL=format-value.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Buffer from '../classes/buffer';\nimport { getKey } from '../webgl-utils';\nimport { getCompositeGLType } from '../webgl-utils/attribute-utils';\nimport { formatValue } from '../utils';\nexport function getDebugTableForVertexArray(_ref) {\n  var vertexArray = _ref.vertexArray,\n      _ref$header = _ref.header,\n      header = _ref$header === void 0 ? 'Attributes' : _ref$header;\n\n  if (!vertexArray.configuration) {\n    return {};\n  }\n\n  var table = {};\n\n  if (vertexArray.elements) {\n    table.ELEMENT_ARRAY_BUFFER = getDebugTableRow(vertexArray, vertexArray.elements, null, header);\n  }\n\n  var attributes = vertexArray.values;\n\n  for (var attributeLocation in attributes) {\n    var info = vertexArray._getAttributeInfo(attributeLocation);\n\n    if (info) {\n      var rowHeader = \"\".concat(attributeLocation, \": \").concat(info.name);\n      var accessor = vertexArray.accessors[info.location];\n\n      if (accessor) {\n        rowHeader = \"\".concat(attributeLocation, \": \").concat(getGLSLDeclaration(info.name, accessor));\n      }\n\n      table[rowHeader] = getDebugTableRow(vertexArray, attributes[attributeLocation], accessor, header);\n    }\n  }\n\n  return table;\n}\n\nfunction getDebugTableRow(vertexArray, attribute, accessor, header) {\n  var _ref4;\n\n  var gl = vertexArray.gl;\n\n  if (!attribute) {\n    var _ref2;\n\n    return _ref2 = {}, _defineProperty(_ref2, header, 'null'), _defineProperty(_ref2, 'Format ', 'N/A'), _ref2;\n  }\n\n  var type = 'NOT PROVIDED';\n  var size = 1;\n  var verts = 0;\n  var bytes = 0;\n  var isInteger;\n  var marker;\n  var value;\n\n  if (accessor) {\n    type = accessor.type;\n    size = accessor.size;\n    type = String(type).replace('Array', '');\n    isInteger = type.indexOf('nt') !== -1;\n  }\n\n  if (attribute instanceof Buffer) {\n    var _ref3;\n\n    var buffer = attribute;\n\n    var _buffer$getDebugData = buffer.getDebugData(),\n        data = _buffer$getDebugData.data,\n        changed = _buffer$getDebugData.changed;\n\n    marker = changed ? '*' : '';\n    value = data;\n    bytes = buffer.byteLength;\n    verts = bytes / data.BYTES_PER_ELEMENT / size;\n    var format;\n\n    if (accessor) {\n      var instanced = accessor.divisor > 0;\n      format = \"\".concat(instanced ? 'I ' : 'P ', \" \").concat(verts, \" (x\").concat(size, \"=\").concat(bytes, \" bytes \").concat(getKey(gl, type), \")\");\n    } else {\n      isInteger = true;\n      format = \"\".concat(bytes, \" bytes\");\n    }\n\n    return _ref3 = {}, _defineProperty(_ref3, header, \"\".concat(marker).concat(formatValue(value, {\n      size: size,\n      isInteger: isInteger\n    }))), _defineProperty(_ref3, 'Format ', format), _ref3;\n  }\n\n  value = attribute;\n  size = attribute.length;\n  type = String(attribute.constructor.name).replace('Array', '');\n  isInteger = type.indexOf('nt') !== -1;\n  return _ref4 = {}, _defineProperty(_ref4, header, \"\".concat(formatValue(value, {\n    size: size,\n    isInteger: isInteger\n  }), \" (constant)\")), _defineProperty(_ref4, 'Format ', \"\".concat(size, \"x\").concat(type, \" (constant)\")), _ref4;\n}\n\nfunction getGLSLDeclaration(name, accessor) {\n  var type = accessor.type,\n      size = accessor.size;\n  var typeAndName = getCompositeGLType(type, size);\n  return typeAndName ? \"\".concat(name, \" (\").concat(typeAndName.name, \")\") : name;\n}\n//# sourceMappingURL=debug-vertex-array.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { formatValue, assert } from '../utils';\nexport function getDebugTableForUniforms(_ref) {\n  var _ref$header = _ref.header,\n      header = _ref$header === void 0 ? 'Uniforms' : _ref$header,\n      program = _ref.program,\n      uniforms = _ref.uniforms,\n      _ref$undefinedOnly = _ref.undefinedOnly,\n      undefinedOnly = _ref$undefinedOnly === void 0 ? false : _ref$undefinedOnly;\n  assert(program);\n  var SHADER_MODULE_UNIFORM_REGEXP = '.*_.*';\n  var PROJECT_MODULE_UNIFORM_REGEXP = '.*Matrix';\n  var uniformLocations = program._uniformSetters;\n  var table = {};\n  var uniformNames = Object.keys(uniformLocations).sort();\n  var count = 0;\n\n  var _iterator = _createForOfIteratorHelper(uniformNames),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _uniformName = _step.value;\n\n      if (!_uniformName.match(SHADER_MODULE_UNIFORM_REGEXP) && !_uniformName.match(PROJECT_MODULE_UNIFORM_REGEXP)) {\n        if (addUniformToTable({\n          table: table,\n          header: header,\n          uniforms: uniforms,\n          uniformName: _uniformName,\n          undefinedOnly: undefinedOnly\n        })) {\n          count++;\n        }\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  var _iterator2 = _createForOfIteratorHelper(uniformNames),\n      _step2;\n\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var _uniformName2 = _step2.value;\n\n      if (_uniformName2.match(PROJECT_MODULE_UNIFORM_REGEXP)) {\n        if (addUniformToTable({\n          table: table,\n          header: header,\n          uniforms: uniforms,\n          uniformName: _uniformName2,\n          undefinedOnly: undefinedOnly\n        })) {\n          count++;\n        }\n      }\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n\n  var _iterator3 = _createForOfIteratorHelper(uniformNames),\n      _step3;\n\n  try {\n    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n      var _uniformName3 = _step3.value;\n\n      if (!table[_uniformName3]) {\n        if (addUniformToTable({\n          table: table,\n          header: header,\n          uniforms: uniforms,\n          uniformName: _uniformName3,\n          undefinedOnly: undefinedOnly\n        })) {\n          count++;\n        }\n      }\n    }\n  } catch (err) {\n    _iterator3.e(err);\n  } finally {\n    _iterator3.f();\n  }\n\n  var unusedCount = 0;\n  var unusedTable = {};\n\n  if (!undefinedOnly) {\n    for (var uniformName in uniforms) {\n      var uniform = uniforms[uniformName];\n\n      if (!table[uniformName]) {\n        unusedCount++;\n        unusedTable[uniformName] = _defineProperty({\n          Type: \"NOT USED: \".concat(uniform)\n        }, header, formatValue(uniform));\n      }\n    }\n  }\n\n  return {\n    table: table,\n    count: count,\n    unusedTable: unusedTable,\n    unusedCount: unusedCount\n  };\n}\n\nfunction addUniformToTable(_ref2) {\n  var table = _ref2.table,\n      header = _ref2.header,\n      uniforms = _ref2.uniforms,\n      uniformName = _ref2.uniformName,\n      undefinedOnly = _ref2.undefinedOnly;\n  var value = uniforms[uniformName];\n  var isDefined = isUniformDefined(value);\n\n  if (!undefinedOnly || !isDefined) {\n    var _table$uniformName;\n\n    table[uniformName] = (_table$uniformName = {}, _defineProperty(_table$uniformName, header, isDefined ? formatValue(value) : 'N/A'), _defineProperty(_table$uniformName, 'Uniform Type', isDefined ? value : 'NOT PROVIDED'), _table$uniformName);\n    return true;\n  }\n\n  return false;\n}\n\nfunction isUniformDefined(value) {\n  return value !== undefined && value !== null;\n}\n//# sourceMappingURL=debug-uniforms.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { getCompositeGLType } from '../webgl-utils/attribute-utils';\nexport function getDebugTableForProgramConfiguration(config) {\n  var table = {};\n  var header = \"Accessors for \".concat(config.id);\n\n  var _iterator = _createForOfIteratorHelper(config.attributeInfos),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var attributeInfo = _step.value;\n\n      if (attributeInfo) {\n        var glslDeclaration = getGLSLDeclaration(attributeInfo);\n        table[\"in \".concat(glslDeclaration)] = _defineProperty({}, header, JSON.stringify(attributeInfo.accessor));\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  var _iterator2 = _createForOfIteratorHelper(config.varyingInfos),\n      _step2;\n\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var varyingInfo = _step2.value;\n\n      if (varyingInfo) {\n        var _glslDeclaration = getGLSLDeclaration(varyingInfo);\n\n        table[\"out \".concat(_glslDeclaration)] = _defineProperty({}, header, JSON.stringify(varyingInfo.accessor));\n      }\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n\n  return table;\n}\n\nfunction getGLSLDeclaration(attributeInfo) {\n  var _attributeInfo$access = attributeInfo.accessor,\n      type = _attributeInfo$access.type,\n      size = _attributeInfo$access.size;\n  var typeAndName = getCompositeGLType(type, size);\n\n  if (typeAndName) {\n    return \"\".concat(typeAndName.name, \" \").concat(attributeInfo.name);\n  }\n\n  return attributeInfo.name;\n}\n//# sourceMappingURL=debug-program-configuration.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Buffer, assert } from '@luma.gl/webgl';\nvar GLTF_TO_LUMA_ATTRIBUTE_MAP = {\n  POSITION: 'positions',\n  NORMAL: 'normals',\n  COLOR_0: 'colors',\n  TEXCOORD_0: 'texCoords',\n  TEXCOORD_1: 'texCoords1',\n  TEXCOORD_2: 'texCoords2'\n};\nexport function getBuffersFromGeometry(gl, geometry, options) {\n  var buffers = {};\n  var indices = geometry.indices;\n\n  for (var name in geometry.attributes) {\n    var attribute = geometry.attributes[name];\n    var remappedName = mapAttributeName(name, options);\n\n    if (name === 'indices') {\n      indices = attribute;\n    } else if (attribute.constant) {\n      buffers[remappedName] = attribute.value;\n    } else {\n      var typedArray = attribute.value;\n\n      var accessor = _objectSpread({}, attribute);\n\n      delete accessor.value;\n      buffers[remappedName] = [new Buffer(gl, typedArray), accessor];\n      inferAttributeAccessor(name, accessor);\n    }\n  }\n\n  if (indices) {\n    var data = indices.value || indices;\n    assert(data instanceof Uint16Array || data instanceof Uint32Array, 'attribute array for \"indices\" must be of integer type');\n    var _accessor = {\n      size: 1,\n      isIndexed: indices.isIndexed === undefined ? true : indices.isIndexed\n    };\n    buffers.indices = [new Buffer(gl, {\n      data: data,\n      target: 34963\n    }), _accessor];\n  }\n\n  return buffers;\n}\n\nfunction mapAttributeName(name, options) {\n  var _ref = options || {},\n      _ref$attributeMap = _ref.attributeMap,\n      attributeMap = _ref$attributeMap === void 0 ? GLTF_TO_LUMA_ATTRIBUTE_MAP : _ref$attributeMap;\n\n  return attributeMap && attributeMap[name] || name;\n}\n\nexport function inferAttributeAccessor(attributeName, attribute) {\n  var category;\n\n  switch (attributeName) {\n    case 'texCoords':\n    case 'texCoord1':\n    case 'texCoord2':\n    case 'texCoord3':\n      category = 'uvs';\n      break;\n\n    case 'vertices':\n    case 'positions':\n    case 'normals':\n    case 'pickingColors':\n      category = 'vectors';\n      break;\n\n    default:\n  }\n\n  switch (category) {\n    case 'vectors':\n      attribute.size = attribute.size || 3;\n      break;\n\n    case 'uvs':\n      attribute.size = attribute.size || 2;\n      break;\n\n    default:\n  }\n\n  assert(Number.isFinite(attribute.size), \"attribute \".concat(attributeName, \" needs size\"));\n}\n//# sourceMappingURL=model-utils.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { isWebGL } from '@luma.gl/gltools';\nimport ProgramManager from './program-manager';\nimport { Program, VertexArray, clear as _clear, TransformFeedback, Buffer, log, isObjectEmpty, uid, assert } from '@luma.gl/webgl';\nimport { getDebugTableForUniforms, getDebugTableForVertexArray, getDebugTableForProgramConfiguration } from '@luma.gl/webgl';\nimport { getBuffersFromGeometry } from './model-utils';\nvar LOG_DRAW_PRIORITY = 2;\nvar LOG_DRAW_TIMEOUT = 10000;\nvar ERR_MODEL_PARAMS = 'Model needs drawMode and vertexCount';\n\nvar NOOP = function NOOP() {};\n\nvar DRAW_PARAMS = {};\n\nvar Model = function () {\n  function Model(gl) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Model);\n\n    var _props$id = props.id,\n        id = _props$id === void 0 ? uid('model') : _props$id;\n    assert(isWebGL(gl));\n    this.id = id;\n    this.gl = gl;\n    this.id = props.id || uid('Model');\n    this.lastLogTime = 0;\n    this.animated = false;\n    this.initialize(props);\n  }\n\n  _createClass(Model, [{\n    key: \"initialize\",\n    value: function initialize(props) {\n      this.props = {};\n      this.programManager = props.programManager || ProgramManager.getDefaultProgramManager(this.gl);\n      this._programManagerState = -1;\n      this._managedProgram = false;\n      var _props$program = props.program,\n          program = _props$program === void 0 ? null : _props$program,\n          vs = props.vs,\n          fs = props.fs,\n          modules = props.modules,\n          defines = props.defines,\n          inject = props.inject,\n          varyings = props.varyings,\n          bufferMode = props.bufferMode,\n          transpileToGLSL100 = props.transpileToGLSL100;\n      this.programProps = {\n        program: program,\n        vs: vs,\n        fs: fs,\n        modules: modules,\n        defines: defines,\n        inject: inject,\n        varyings: varyings,\n        bufferMode: bufferMode,\n        transpileToGLSL100: transpileToGLSL100\n      };\n      this.program = null;\n      this.vertexArray = null;\n      this._programDirty = true;\n      this.userData = {};\n      this.needsRedraw = true;\n      this._attributes = {};\n      this.attributes = {};\n      this.uniforms = {};\n      this.pickable = true;\n\n      this._checkProgram();\n\n      this.setUniforms(Object.assign({}, this.getModuleUniforms(props.moduleSettings)));\n      this.drawMode = props.drawMode !== undefined ? props.drawMode : 4;\n      this.vertexCount = props.vertexCount || 0;\n      this.geometryBuffers = {};\n      this.isInstanced = props.isInstanced || props.instanced || props.instanceCount > 0;\n\n      this._setModelProps(props);\n\n      this.geometry = {};\n      assert(this.drawMode !== undefined && Number.isFinite(this.vertexCount), ERR_MODEL_PARAMS);\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      this._setModelProps(props);\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      for (var key in this._attributes) {\n        if (this._attributes[key] !== this.attributes[key]) {\n          this._attributes[key][\"delete\"]();\n        }\n      }\n\n      if (this._managedProgram) {\n        this.programManager.release(this.program);\n        this._managedProgram = false;\n      }\n\n      this.vertexArray[\"delete\"]();\n\n      this._deleteGeometryBuffers();\n    }\n  }, {\n    key: \"getDrawMode\",\n    value: function getDrawMode() {\n      return this.drawMode;\n    }\n  }, {\n    key: \"getVertexCount\",\n    value: function getVertexCount() {\n      return this.vertexCount;\n    }\n  }, {\n    key: \"getInstanceCount\",\n    value: function getInstanceCount() {\n      return this.instanceCount;\n    }\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes() {\n      return this.attributes;\n    }\n  }, {\n    key: \"getProgram\",\n    value: function getProgram() {\n      return this.program;\n    }\n  }, {\n    key: \"setProgram\",\n    value: function setProgram(props) {\n      var program = props.program,\n          vs = props.vs,\n          fs = props.fs,\n          modules = props.modules,\n          defines = props.defines,\n          inject = props.inject,\n          varyings = props.varyings,\n          bufferMode = props.bufferMode,\n          transpileToGLSL100 = props.transpileToGLSL100;\n      this.programProps = {\n        program: program,\n        vs: vs,\n        fs: fs,\n        modules: modules,\n        defines: defines,\n        inject: inject,\n        varyings: varyings,\n        bufferMode: bufferMode,\n        transpileToGLSL100: transpileToGLSL100\n      };\n      this._programDirty = true;\n    }\n  }, {\n    key: \"getUniforms\",\n    value: function getUniforms() {\n      return this.uniforms;\n    }\n  }, {\n    key: \"setDrawMode\",\n    value: function setDrawMode(drawMode) {\n      this.drawMode = drawMode;\n      return this;\n    }\n  }, {\n    key: \"setVertexCount\",\n    value: function setVertexCount(vertexCount) {\n      assert(Number.isFinite(vertexCount));\n      this.vertexCount = vertexCount;\n      return this;\n    }\n  }, {\n    key: \"setInstanceCount\",\n    value: function setInstanceCount(instanceCount) {\n      assert(Number.isFinite(instanceCount));\n      this.instanceCount = instanceCount;\n      return this;\n    }\n  }, {\n    key: \"setGeometry\",\n    value: function setGeometry(geometry) {\n      this.drawMode = geometry.drawMode;\n      this.vertexCount = geometry.getVertexCount();\n\n      this._deleteGeometryBuffers();\n\n      this.geometryBuffers = getBuffersFromGeometry(this.gl, geometry);\n      this.vertexArray.setAttributes(this.geometryBuffers);\n      return this;\n    }\n  }, {\n    key: \"setAttributes\",\n    value: function setAttributes() {\n      var attributes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (isObjectEmpty(attributes)) {\n        return this;\n      }\n\n      var normalizedAttributes = {};\n\n      for (var name in attributes) {\n        var attribute = attributes[name];\n        normalizedAttributes[name] = attribute.getValue ? attribute.getValue() : attribute;\n      }\n\n      this.vertexArray.setAttributes(normalizedAttributes);\n      return this;\n    }\n  }, {\n    key: \"setUniforms\",\n    value: function setUniforms() {\n      var uniforms = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      Object.assign(this.uniforms, uniforms);\n      return this;\n    }\n  }, {\n    key: \"getModuleUniforms\",\n    value: function getModuleUniforms(opts) {\n      this._checkProgram();\n\n      var getUniforms = this.programManager.getUniforms(this.program);\n\n      if (getUniforms) {\n        return getUniforms(opts);\n      }\n\n      return {};\n    }\n  }, {\n    key: \"updateModuleSettings\",\n    value: function updateModuleSettings(opts) {\n      var uniforms = this.getModuleUniforms(opts || {});\n      return this.setUniforms(uniforms);\n    }\n  }, {\n    key: \"clear\",\n    value: function clear(opts) {\n      _clear(this.program.gl, opts);\n\n      return this;\n    }\n  }, {\n    key: \"draw\",\n    value: function draw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this._checkProgram();\n\n      var _opts$moduleSettings = opts.moduleSettings,\n          moduleSettings = _opts$moduleSettings === void 0 ? null : _opts$moduleSettings,\n          framebuffer = opts.framebuffer,\n          _opts$uniforms = opts.uniforms,\n          uniforms = _opts$uniforms === void 0 ? {} : _opts$uniforms,\n          _opts$attributes = opts.attributes,\n          attributes = _opts$attributes === void 0 ? {} : _opts$attributes,\n          _opts$transformFeedba = opts.transformFeedback,\n          transformFeedback = _opts$transformFeedba === void 0 ? this.transformFeedback : _opts$transformFeedba,\n          _opts$parameters = opts.parameters,\n          parameters = _opts$parameters === void 0 ? {} : _opts$parameters,\n          _opts$vertexArray = opts.vertexArray,\n          vertexArray = _opts$vertexArray === void 0 ? this.vertexArray : _opts$vertexArray;\n      this.setAttributes(attributes);\n      this.updateModuleSettings(moduleSettings);\n      this.setUniforms(uniforms);\n      var logPriority;\n\n      if (log.priority >= LOG_DRAW_PRIORITY) {\n        logPriority = this._logDrawCallStart(LOG_DRAW_PRIORITY);\n      }\n\n      var drawParams = this.vertexArray.getDrawParams();\n      var _this$props = this.props,\n          _this$props$isIndexed = _this$props.isIndexed,\n          isIndexed = _this$props$isIndexed === void 0 ? drawParams.isIndexed : _this$props$isIndexed,\n          _this$props$indexType = _this$props.indexType,\n          indexType = _this$props$indexType === void 0 ? drawParams.indexType : _this$props$indexType,\n          _this$props$indexOffs = _this$props.indexOffset,\n          indexOffset = _this$props$indexOffs === void 0 ? drawParams.indexOffset : _this$props$indexOffs,\n          _this$props$vertexArr = _this$props.vertexArrayInstanced,\n          vertexArrayInstanced = _this$props$vertexArr === void 0 ? drawParams.isInstanced : _this$props$vertexArr;\n\n      if (vertexArrayInstanced && !this.isInstanced) {\n        log.warn('Found instanced attributes on non-instanced model', this.id)();\n      }\n\n      var isInstanced = this.isInstanced,\n          instanceCount = this.instanceCount;\n      var _this$props2 = this.props,\n          _this$props2$onBefore = _this$props2.onBeforeRender,\n          onBeforeRender = _this$props2$onBefore === void 0 ? NOOP : _this$props2$onBefore,\n          _this$props2$onAfterR = _this$props2.onAfterRender,\n          onAfterRender = _this$props2$onAfterR === void 0 ? NOOP : _this$props2$onAfterR;\n      onBeforeRender();\n      this.program.setUniforms(this.uniforms);\n      var didDraw = this.program.draw(Object.assign(DRAW_PARAMS, opts, {\n        logPriority: logPriority,\n        uniforms: null,\n        framebuffer: framebuffer,\n        parameters: parameters,\n        drawMode: this.getDrawMode(),\n        vertexCount: this.getVertexCount(),\n        vertexArray: vertexArray,\n        transformFeedback: transformFeedback,\n        isIndexed: isIndexed,\n        indexType: indexType,\n        isInstanced: isInstanced,\n        instanceCount: instanceCount,\n        offset: isIndexed ? indexOffset : 0\n      }));\n      onAfterRender();\n\n      if (log.priority >= LOG_DRAW_PRIORITY) {\n        this._logDrawCallEnd(logPriority, vertexArray, framebuffer);\n      }\n\n      return didDraw;\n    }\n  }, {\n    key: \"transform\",\n    value: function transform() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _opts$discard = opts.discard,\n          discard = _opts$discard === void 0 ? true : _opts$discard,\n          feedbackBuffers = opts.feedbackBuffers,\n          _opts$unbindModels = opts.unbindModels,\n          unbindModels = _opts$unbindModels === void 0 ? [] : _opts$unbindModels;\n      var parameters = opts.parameters;\n\n      if (feedbackBuffers) {\n        this._setFeedbackBuffers(feedbackBuffers);\n      }\n\n      if (discard) {\n        parameters = Object.assign({}, parameters, _defineProperty({}, 35977, discard));\n      }\n\n      unbindModels.forEach(function (model) {\n        return model.vertexArray.unbindBuffers();\n      });\n\n      try {\n        this.draw(Object.assign({}, opts, {\n          parameters: parameters\n        }));\n      } finally {\n        unbindModels.forEach(function (model) {\n          return model.vertexArray.bindBuffers();\n        });\n      }\n\n      return this;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var uniforms = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      log.warn('Model.render() is deprecated. Use Model.setUniforms() and Model.draw()')();\n      return this.setUniforms(uniforms).draw();\n    }\n  }, {\n    key: \"_setModelProps\",\n    value: function _setModelProps(props) {\n      Object.assign(this.props, props);\n\n      if ('uniforms' in props) {\n        this.setUniforms(props.uniforms);\n      }\n\n      if ('pickable' in props) {\n        this.pickable = props.pickable;\n      }\n\n      if ('instanceCount' in props) {\n        this.instanceCount = props.instanceCount;\n      }\n\n      if ('geometry' in props) {\n        this.setGeometry(props.geometry);\n      }\n\n      if ('attributes' in props) {\n        this.setAttributes(props.attributes);\n      }\n\n      if ('_feedbackBuffers' in props) {\n        this._setFeedbackBuffers(props._feedbackBuffers);\n      }\n    }\n  }, {\n    key: \"_checkProgram\",\n    value: function _checkProgram() {\n      var needsUpdate = this._programDirty || this.programManager.stateHash !== this._programManagerState;\n\n      if (!needsUpdate) {\n        return;\n      }\n\n      var program = this.programProps.program;\n\n      if (program) {\n        this._managedProgram = false;\n      } else {\n        var _this$programProps = this.programProps,\n            vs = _this$programProps.vs,\n            fs = _this$programProps.fs,\n            modules = _this$programProps.modules,\n            inject = _this$programProps.inject,\n            defines = _this$programProps.defines,\n            varyings = _this$programProps.varyings,\n            bufferMode = _this$programProps.bufferMode,\n            transpileToGLSL100 = _this$programProps.transpileToGLSL100;\n        program = this.programManager.get({\n          vs: vs,\n          fs: fs,\n          modules: modules,\n          inject: inject,\n          defines: defines,\n          varyings: varyings,\n          bufferMode: bufferMode,\n          transpileToGLSL100: transpileToGLSL100\n        });\n\n        if (this.program && this._managedProgram) {\n          this.programManager.release(this.program);\n        }\n\n        this._programManagerState = this.programManager.stateHash;\n        this._managedProgram = true;\n      }\n\n      assert(program instanceof Program, 'Model needs a program');\n      this._programDirty = false;\n\n      if (program === this.program) {\n        return;\n      }\n\n      this.program = program;\n\n      if (this.vertexArray) {\n        this.vertexArray.setProps({\n          program: this.program,\n          attributes: this.vertexArray.attributes\n        });\n      } else {\n        this.vertexArray = new VertexArray(this.gl, {\n          program: this.program\n        });\n      }\n\n      this.setUniforms(Object.assign({}, this.getModuleUniforms()));\n    }\n  }, {\n    key: \"_deleteGeometryBuffers\",\n    value: function _deleteGeometryBuffers() {\n      for (var name in this.geometryBuffers) {\n        var buffer = this.geometryBuffers[name][0] || this.geometryBuffers[name];\n\n        if (buffer instanceof Buffer) {\n          buffer[\"delete\"]();\n        }\n      }\n    }\n  }, {\n    key: \"_setAnimationProps\",\n    value: function _setAnimationProps(animationProps) {\n      if (this.animated) {\n        assert(animationProps, 'Model.draw(): animated uniforms but no animationProps');\n      }\n    }\n  }, {\n    key: \"_setFeedbackBuffers\",\n    value: function _setFeedbackBuffers() {\n      var feedbackBuffers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (isObjectEmpty(feedbackBuffers)) {\n        return this;\n      }\n\n      var gl = this.program.gl;\n      this.transformFeedback = this.transformFeedback || new TransformFeedback(gl, {\n        program: this.program\n      });\n      this.transformFeedback.setBuffers(feedbackBuffers);\n      return this;\n    }\n  }, {\n    key: \"_logDrawCallStart\",\n    value: function _logDrawCallStart(logLevel) {\n      var logDrawTimeout = logLevel > 3 ? 0 : LOG_DRAW_TIMEOUT;\n\n      if (Date.now() - this.lastLogTime < logDrawTimeout) {\n        return undefined;\n      }\n\n      this.lastLogTime = Date.now();\n      log.group(LOG_DRAW_PRIORITY, \">>> DRAWING MODEL \".concat(this.id), {\n        collapsed: log.level <= 2\n      })();\n      return logLevel;\n    }\n  }, {\n    key: \"_logDrawCallEnd\",\n    value: function _logDrawCallEnd(logLevel, vertexArray, uniforms, framebuffer) {\n      if (logLevel === undefined) {\n        return;\n      }\n\n      var attributeTable = getDebugTableForVertexArray({\n        vertexArray: vertexArray,\n        header: \"\".concat(this.id, \" attributes\"),\n        attributes: this._attributes\n      });\n\n      var _getDebugTableForUnif = getDebugTableForUniforms({\n        header: \"\".concat(this.id, \" uniforms\"),\n        program: this.program,\n        uniforms: Object.assign({}, this.program.uniforms, uniforms)\n      }),\n          uniformTable = _getDebugTableForUnif.table,\n          unusedTable = _getDebugTableForUnif.unusedTable,\n          unusedCount = _getDebugTableForUnif.unusedCount;\n\n      var _getDebugTableForUnif2 = getDebugTableForUniforms({\n        header: \"\".concat(this.id, \" uniforms\"),\n        program: this.program,\n        uniforms: Object.assign({}, this.program.uniforms, uniforms),\n        undefinedOnly: true\n      }),\n          missingTable = _getDebugTableForUnif2.table,\n          missingCount = _getDebugTableForUnif2.count;\n\n      if (missingCount > 0) {\n        log.log('MISSING UNIFORMS', Object.keys(missingTable))();\n      }\n\n      if (unusedCount > 0) {\n        log.log('UNUSED UNIFORMS', Object.keys(unusedTable))();\n      }\n\n      var configTable = getDebugTableForProgramConfiguration(this.vertexArray.configuration);\n      log.table(logLevel, attributeTable)();\n      log.table(logLevel, uniformTable)();\n      log.table(logLevel + 1, configTable)();\n\n      if (framebuffer) {\n        framebuffer.log({\n          logLevel: LOG_DRAW_PRIORITY,\n          message: \"Rendered to \".concat(framebuffer.id)\n        });\n      }\n\n      log.groupEnd(LOG_DRAW_PRIORITY, \">>> DRAWING MODEL \".concat(this.id))();\n    }\n  }]);\n\n  return Model;\n}();\n\nexport { Model as default };\n//# sourceMappingURL=model.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { getPassthroughFS } from '@luma.gl/shadertools';\nimport BufferTransform from './buffer-transform';\nimport TextureTransform from './texture-transform';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { assert, isObjectEmpty, getShaderVersion } from '@luma.gl/webgl';\nimport Model from '../lib/model';\n\nvar Transform = function () {\n  _createClass(Transform, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      return isWebGL2(gl);\n    }\n  }]);\n\n  function Transform(gl) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Transform);\n\n    this.gl = gl;\n    this.model = null;\n    this.elementCount = 0;\n    this.bufferTransform = null;\n    this.textureTransform = null;\n    this.elementIDBuffer = null;\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  _createClass(Transform, [{\n    key: \"delete\",\n    value: function _delete() {\n      var model = this.model,\n          bufferTransform = this.bufferTransform,\n          textureTransform = this.textureTransform;\n\n      if (model) {\n        model[\"delete\"]();\n      }\n\n      if (bufferTransform) {\n        bufferTransform[\"delete\"]();\n      }\n\n      if (textureTransform) {\n        textureTransform[\"delete\"]();\n      }\n    }\n  }, {\n    key: \"run\",\n    value: function run() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _opts$clearRenderTarg = opts.clearRenderTarget,\n          clearRenderTarget = _opts$clearRenderTarg === void 0 ? true : _opts$clearRenderTarg;\n\n      var updatedOpts = this._updateDrawOptions(opts);\n\n      if (clearRenderTarget && updatedOpts.framebuffer) {\n        updatedOpts.framebuffer.clear({\n          color: true\n        });\n      }\n\n      this.model.transform(updatedOpts);\n    }\n  }, {\n    key: \"swap\",\n    value: function swap() {\n      var swapped = false;\n      var resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n      var _iterator = _createForOfIteratorHelper(resourceTransforms),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var resourceTransform = _step.value;\n          swapped = swapped || resourceTransform.swap();\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      assert(swapped, 'Nothing to swap');\n    }\n  }, {\n    key: \"getBuffer\",\n    value: function getBuffer() {\n      var varyingName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      return this.bufferTransform && this.bufferTransform.getBuffer(varyingName);\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n      var _iterator2 = _createForOfIteratorHelper(resourceTransforms),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var resourceTransform = _step2.value;\n          var data = resourceTransform.getData(opts);\n\n          if (data) {\n            return data;\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      return null;\n    }\n  }, {\n    key: \"getFramebuffer\",\n    value: function getFramebuffer() {\n      return this.textureTransform && this.textureTransform.getFramebuffer();\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if ('elementCount' in opts) {\n        this.model.setVertexCount(opts.elementCount);\n      }\n\n      var resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n      var _iterator3 = _createForOfIteratorHelper(resourceTransforms),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var resourceTransform = _step3.value;\n          resourceTransform.update(opts);\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  }, {\n    key: \"_initialize\",\n    value: function _initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var gl = this.gl;\n\n      this._buildResourceTransforms(gl, props);\n\n      props = this._updateModelProps(props);\n      this.model = new Model(gl, Object.assign({}, props, {\n        fs: props.fs || getPassthroughFS({\n          version: getShaderVersion(props.vs)\n        }),\n        id: props.id || 'transform-model',\n        drawMode: props.drawMode || 0,\n        vertexCount: props.elementCount\n      }));\n      this.bufferTransform && this.bufferTransform.setupResources({\n        model: this.model\n      });\n    }\n  }, {\n    key: \"_updateModelProps\",\n    value: function _updateModelProps(props) {\n      var updatedProps = Object.assign({}, props);\n      var resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n      var _iterator4 = _createForOfIteratorHelper(resourceTransforms),\n          _step4;\n\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var resourceTransform = _step4.value;\n          updatedProps = resourceTransform.updateModelProps(updatedProps);\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n\n      return updatedProps;\n    }\n  }, {\n    key: \"_buildResourceTransforms\",\n    value: function _buildResourceTransforms(gl, props) {\n      if (canCreateBufferTransform(props)) {\n        this.bufferTransform = new BufferTransform(gl, props);\n      }\n\n      if (canCreateTextureTransform(props)) {\n        this.textureTransform = new TextureTransform(gl, props);\n      }\n\n      assert(this.bufferTransform || this.textureTransform, 'must provide source/feedback buffers or source/target textures');\n    }\n  }, {\n    key: \"_updateDrawOptions\",\n    value: function _updateDrawOptions(opts) {\n      var updatedOpts = Object.assign({}, opts);\n      var resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n      var _iterator5 = _createForOfIteratorHelper(resourceTransforms),\n          _step5;\n\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var resourceTransform = _step5.value;\n          updatedOpts = Object.assign(updatedOpts, resourceTransform.getDrawOptions(updatedOpts));\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n\n      return updatedOpts;\n    }\n  }]);\n\n  return Transform;\n}();\n\nexport { Transform as default };\n\nfunction canCreateBufferTransform(props) {\n  if (!isObjectEmpty(props.feedbackBuffers) || !isObjectEmpty(props.feedbackMap) || props.varyings && props.varyings.length > 0) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction canCreateTextureTransform(props) {\n  if (!isObjectEmpty(props._sourceTextures) || props._targetTexture || props._targetTextureVarying) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=transform.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction noop() {}\n\nvar DEFAULT_SETTINGS = {\n  onStart: noop,\n  onUpdate: noop,\n  onInterrupt: noop,\n  onEnd: noop\n};\n\nvar Transition = function () {\n  function Transition(timeline) {\n    _classCallCheck(this, Transition);\n\n    this._inProgress = false;\n    this._handle = null;\n    this.timeline = timeline;\n    this.settings = {};\n  }\n\n  _createClass(Transition, [{\n    key: \"start\",\n    value: function start(props) {\n      this.cancel();\n      this.settings = Object.assign({}, DEFAULT_SETTINGS, props);\n      this._inProgress = true;\n      this.settings.onStart(this);\n    }\n  }, {\n    key: \"end\",\n    value: function end() {\n      if (this._inProgress) {\n        this.timeline.removeChannel(this._handle);\n        this._handle = null;\n        this._inProgress = false;\n        this.settings.onEnd(this);\n      }\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      if (this._inProgress) {\n        this.settings.onInterrupt(this);\n        this.timeline.removeChannel(this._handle);\n        this._handle = null;\n        this._inProgress = false;\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      if (!this._inProgress) {\n        return false;\n      }\n\n      if (this._handle === null) {\n        var timeline = this.timeline,\n            settings = this.settings;\n        this._handle = timeline.addChannel({\n          delay: timeline.getTime(),\n          duration: settings.duration\n        });\n      }\n\n      this.time = this.timeline.getTime(this._handle);\n\n      this._onUpdate();\n\n      this.settings.onUpdate(this);\n\n      if (this.timeline.isFinished(this._handle)) {\n        this.end();\n      }\n\n      return true;\n    }\n  }, {\n    key: \"_onUpdate\",\n    value: function _onUpdate() {}\n  }, {\n    key: \"inProgress\",\n    get: function get() {\n      return this._inProgress;\n    }\n  }]);\n\n  return Transition;\n}();\n\nexport { Transition as default };\n//# sourceMappingURL=transition.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { Buffer, Transform } from '@luma.gl/core';\nimport Attribute from '../lib/attribute/attribute';\nimport { padBuffer, getAttributeTypeFromSize, getSourceBufferAttribute, getAttributeBufferLength, cycleBuffers } from '../lib/attribute/attribute-transition-utils';\nimport Transition from './transition';\n\nvar GPUInterpolationTransition = function () {\n  function GPUInterpolationTransition(_ref) {\n    var gl = _ref.gl,\n        attribute = _ref.attribute,\n        timeline = _ref.timeline;\n\n    _classCallCheck(this, GPUInterpolationTransition);\n\n    this.gl = gl;\n    this.type = 'interpolation';\n    this.transition = new Transition(timeline);\n    this.attribute = attribute;\n    this.attributeInTransition = new Attribute(gl, attribute.settings);\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = 0;\n    this.transform = getTransform(gl, attribute);\n    var bufferOpts = {\n      byteLength: 0,\n      usage: 35050\n    };\n    this.buffers = [new Buffer(gl, bufferOpts), new Buffer(gl, bufferOpts)];\n  }\n\n  _createClass(GPUInterpolationTransition, [{\n    key: \"start\",\n    value: function start(transitionSettings, numInstances) {\n      if (transitionSettings.duration <= 0) {\n        this.transition.cancel();\n        return;\n      }\n\n      var gl = this.gl,\n          buffers = this.buffers,\n          attribute = this.attribute;\n      cycleBuffers(buffers);\n      var padBufferOpts = {\n        numInstances: numInstances,\n        attribute: attribute,\n        fromLength: this.currentLength,\n        fromStartIndices: this.currentStartIndices,\n        getData: transitionSettings.enter\n      };\n\n      var _iterator = _createForOfIteratorHelper(buffers),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var buffer = _step.value;\n          padBuffer(_objectSpread({\n            buffer: buffer\n          }, padBufferOpts));\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      this.currentStartIndices = attribute.startIndices;\n      this.currentLength = getAttributeBufferLength(attribute, numInstances);\n      this.attributeInTransition.update({\n        buffer: buffers[1],\n        value: attribute.value\n      });\n      this.transition.start(transitionSettings);\n      this.transform.update({\n        elementCount: Math.floor(this.currentLength / attribute.size),\n        sourceBuffers: {\n          aFrom: buffers[0],\n          aTo: getSourceBufferAttribute(gl, attribute)\n        },\n        feedbackBuffers: {\n          vCurrent: buffers[1]\n        }\n      });\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var updated = this.transition.update();\n\n      if (updated) {\n        var _this$transition = this.transition,\n            time = _this$transition.time,\n            _this$transition$sett = _this$transition.settings,\n            duration = _this$transition$sett.duration,\n            easing = _this$transition$sett.easing;\n        var t = easing(time / duration);\n        this.transform.run({\n          uniforms: {\n            time: t\n          }\n        });\n      }\n\n      return updated;\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      this.transition.cancel();\n      this.transform[\"delete\"]();\n\n      while (this.buffers.length) {\n        this.buffers.pop()[\"delete\"]();\n      }\n    }\n  }, {\n    key: \"inProgress\",\n    get: function get() {\n      return this.transition.inProgress;\n    }\n  }]);\n\n  return GPUInterpolationTransition;\n}();\n\nexport { GPUInterpolationTransition as default };\nvar vs = \"\\n#define SHADER_NAME interpolation-transition-vertex-shader\\n\\nuniform float time;\\nattribute ATTRIBUTE_TYPE aFrom;\\nattribute ATTRIBUTE_TYPE aTo;\\nvarying ATTRIBUTE_TYPE vCurrent;\\n\\nvoid main(void) {\\n  vCurrent = mix(aFrom, aTo, time);\\n  gl_Position = vec4(0.0);\\n}\\n\";\n\nfunction getTransform(gl, attribute) {\n  var attributeType = getAttributeTypeFromSize(attribute.size);\n  return new Transform(gl, {\n    vs: vs,\n    defines: {\n      ATTRIBUTE_TYPE: attributeType\n    },\n    varyings: ['vCurrent']\n  });\n}\n//# sourceMappingURL=gpu-interpolation-transition.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { Buffer, Transform, Framebuffer, Texture2D, readPixelsToArray } from '@luma.gl/core';\nimport { padBuffer, getAttributeTypeFromSize, getSourceBufferAttribute, getAttributeBufferLength, cycleBuffers } from '../lib/attribute/attribute-transition-utils';\nimport Attribute from '../lib/attribute/attribute';\nimport Transition from './transition';\n\nvar GPUSpringTransition = function () {\n  function GPUSpringTransition(_ref) {\n    var gl = _ref.gl,\n        attribute = _ref.attribute,\n        timeline = _ref.timeline;\n\n    _classCallCheck(this, GPUSpringTransition);\n\n    this.gl = gl;\n    this.type = 'spring';\n    this.transition = new Transition(timeline);\n    this.attribute = attribute;\n    this.attributeInTransition = new Attribute(gl, Object.assign({}, attribute.settings, {\n      normalized: false\n    }));\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = 0;\n    this.texture = getTexture(gl);\n    this.framebuffer = getFramebuffer(gl, this.texture);\n    this.transform = getTransform(gl, attribute, this.framebuffer);\n    var bufferOpts = {\n      byteLength: 0,\n      usage: 35050\n    };\n    this.buffers = [new Buffer(gl, bufferOpts), new Buffer(gl, bufferOpts), new Buffer(gl, bufferOpts)];\n  }\n\n  _createClass(GPUSpringTransition, [{\n    key: \"start\",\n    value: function start(transitionSettings, numInstances) {\n      var gl = this.gl,\n          buffers = this.buffers,\n          attribute = this.attribute;\n      var padBufferOpts = {\n        numInstances: numInstances,\n        attribute: attribute,\n        fromLength: this.currentLength,\n        fromStartIndices: this.currentStartIndices,\n        getData: transitionSettings.enter\n      };\n\n      var _iterator = _createForOfIteratorHelper(buffers),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var buffer = _step.value;\n          padBuffer(_objectSpread({\n            buffer: buffer\n          }, padBufferOpts));\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      this.currentStartIndices = attribute.startIndices;\n      this.currentLength = getAttributeBufferLength(attribute, numInstances);\n      this.attributeInTransition.update({\n        buffer: buffers[1],\n        value: attribute.value\n      });\n      this.transition.start(transitionSettings);\n      this.transform.update({\n        elementCount: Math.floor(this.currentLength / attribute.size),\n        sourceBuffers: {\n          aTo: getSourceBufferAttribute(gl, attribute)\n        }\n      });\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var buffers = this.buffers,\n          transform = this.transform,\n          framebuffer = this.framebuffer,\n          transition = this.transition;\n      var updated = transition.update();\n\n      if (!updated) {\n        return false;\n      }\n\n      transform.update({\n        sourceBuffers: {\n          aPrev: buffers[0],\n          aCur: buffers[1]\n        },\n        feedbackBuffers: {\n          vNext: buffers[2]\n        }\n      });\n      transform.run({\n        framebuffer: framebuffer,\n        discard: false,\n        clearRenderTarget: true,\n        uniforms: {\n          stiffness: transition.settings.stiffness,\n          damping: transition.settings.damping\n        },\n        parameters: {\n          depthTest: false,\n          blend: true,\n          viewport: [0, 0, 1, 1],\n          blendFunc: [1, 1],\n          blendEquation: [32776, 32776]\n        }\n      });\n      cycleBuffers(buffers);\n      this.attributeInTransition.update({\n        buffer: buffers[1],\n        value: this.attribute.value\n      });\n      var isTransitioning = readPixelsToArray(framebuffer)[0] > 0;\n\n      if (!isTransitioning) {\n        transition.end();\n      }\n\n      return true;\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      this.transition.cancel();\n      this.transform[\"delete\"]();\n\n      while (this.buffers.length) {\n        this.buffers.pop()[\"delete\"]();\n      }\n\n      this.texture[\"delete\"]();\n      this.texture = null;\n      this.framebuffer[\"delete\"]();\n      this.framebuffer = null;\n    }\n  }, {\n    key: \"inProgress\",\n    get: function get() {\n      return this.transition.inProgress;\n    }\n  }]);\n\n  return GPUSpringTransition;\n}();\n\nexport { GPUSpringTransition as default };\n\nfunction getTransform(gl, attribute, framebuffer) {\n  var attributeType = getAttributeTypeFromSize(attribute.size);\n  return new Transform(gl, {\n    framebuffer: framebuffer,\n    vs: \"\\n#define SHADER_NAME spring-transition-vertex-shader\\n\\n#define EPSILON 0.00001\\n\\nuniform float stiffness;\\nuniform float damping;\\nattribute ATTRIBUTE_TYPE aPrev;\\nattribute ATTRIBUTE_TYPE aCur;\\nattribute ATTRIBUTE_TYPE aTo;\\nvarying ATTRIBUTE_TYPE vNext;\\nvarying float vIsTransitioningFlag;\\n\\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\\n  ATTRIBUTE_TYPE velocity = cur - prev;\\n  ATTRIBUTE_TYPE delta = dest - cur;\\n  ATTRIBUTE_TYPE spring = delta * stiffness;\\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\\n  return spring + damper + velocity + cur;\\n}\\n\\nvoid main(void) {\\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\\n\\n  vNext = getNextValue(aCur, aPrev, aTo);\\n  gl_Position = vec4(0, 0, 0, 1);\\n  gl_PointSize = 100.0;\\n}\\n\",\n    fs: \"\\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\\n\\nvarying float vIsTransitioningFlag;\\n\\nvoid main(void) {\\n  if (vIsTransitioningFlag == 0.0) {\\n    discard;\\n  }\\n  gl_FragColor = vec4(1.0);\\n}\",\n    defines: {\n      ATTRIBUTE_TYPE: attributeType\n    },\n    varyings: ['vNext']\n  });\n}\n\nfunction getTexture(gl) {\n  return new Texture2D(gl, {\n    data: new Uint8Array(4),\n    format: 6408,\n    type: 5121,\n    border: 0,\n    mipmaps: false,\n    dataFormat: 6408,\n    width: 1,\n    height: 1\n  });\n}\n\nfunction getFramebuffer(gl, texture) {\n  return new Framebuffer(gl, {\n    id: 'spring-transition-is-transitioning-framebuffer',\n    width: 1,\n    height: 1,\n    attachments: _defineProperty({}, 36064, texture)\n  });\n}\n//# sourceMappingURL=gpu-spring-transition.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { Transform } from '@luma.gl/core';\nimport GPUInterpolationTransition from '../../transitions/gpu-interpolation-transition';\nimport GPUSpringTransition from '../../transitions/gpu-spring-transition';\nimport log from '../../utils/log';\nvar TRANSITION_TYPES = {\n  interpolation: GPUInterpolationTransition,\n  spring: GPUSpringTransition\n};\n\nvar AttributeTransitionManager = function () {\n  function AttributeTransitionManager(gl, _ref) {\n    var id = _ref.id,\n        timeline = _ref.timeline;\n\n    _classCallCheck(this, AttributeTransitionManager);\n\n    this.id = id;\n    this.gl = gl;\n    this.timeline = timeline;\n    this.transitions = {};\n    this.needsRedraw = false;\n    this.numInstances = 1;\n    this.isSupported = Transform.isSupported(gl);\n  }\n\n  _createClass(AttributeTransitionManager, [{\n    key: \"finalize\",\n    value: function finalize() {\n      for (var attributeName in this.transitions) {\n        this._removeTransition(attributeName);\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update(_ref2) {\n      var attributes = _ref2.attributes,\n          transitions = _ref2.transitions,\n          numInstances = _ref2.numInstances;\n      this.numInstances = numInstances || 1;\n\n      for (var attributeName in attributes) {\n        var attribute = attributes[attributeName];\n        var settings = attribute.getTransitionSetting(transitions);\n        if (!settings) continue;\n\n        this._updateAttribute(attributeName, attribute, settings);\n      }\n\n      for (var _attributeName in this.transitions) {\n        var _attribute = attributes[_attributeName];\n\n        if (!_attribute || !_attribute.getTransitionSetting(transitions)) {\n          this._removeTransition(_attributeName);\n        }\n      }\n    }\n  }, {\n    key: \"hasAttribute\",\n    value: function hasAttribute(attributeName) {\n      var transition = this.transitions[attributeName];\n      return transition && transition.inProgress;\n    }\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes() {\n      var animatedAttributes = {};\n\n      for (var attributeName in this.transitions) {\n        var transition = this.transitions[attributeName];\n\n        if (transition.inProgress) {\n          animatedAttributes[attributeName] = transition.attributeInTransition;\n        }\n      }\n\n      return animatedAttributes;\n    }\n  }, {\n    key: \"run\",\n    value: function run() {\n      if (!this.isSupported || this.numInstances === 0) {\n        return false;\n      }\n\n      for (var attributeName in this.transitions) {\n        var updated = this.transitions[attributeName].update();\n\n        if (updated) {\n          this.needsRedraw = true;\n        }\n      }\n\n      var needsRedraw = this.needsRedraw;\n      this.needsRedraw = false;\n      return needsRedraw;\n    }\n  }, {\n    key: \"_removeTransition\",\n    value: function _removeTransition(attributeName) {\n      this.transitions[attributeName].cancel();\n      delete this.transitions[attributeName];\n    }\n  }, {\n    key: \"_updateAttribute\",\n    value: function _updateAttribute(attributeName, attribute, settings) {\n      var transition = this.transitions[attributeName];\n      var isNew = !transition || transition.type !== settings.type;\n\n      if (isNew) {\n        if (!this.isSupported) {\n          log.warn(\"WebGL2 not supported by this browser. Transition for \".concat(attributeName, \" is disabled.\"))();\n          return;\n        }\n\n        if (transition) {\n          this._removeTransition(attributeName);\n        }\n\n        var TransitionType = TRANSITION_TYPES[settings.type];\n\n        if (TransitionType) {\n          this.transitions[attributeName] = new TransitionType({\n            attribute: attribute,\n            timeline: this.timeline,\n            gl: this.gl\n          });\n        } else {\n          log.error(\"unsupported transition type '\".concat(settings.type, \"'\"))();\n          isNew = false;\n        }\n      }\n\n      if (isNew || attribute.needsRedraw()) {\n        this.needsRedraw = true;\n        this.transitions[attributeName].start(settings, this.numInstances);\n      }\n    }\n  }]);\n\n  return AttributeTransitionManager;\n}();\n\nexport { AttributeTransitionManager as default };\n//# sourceMappingURL=attribute-transition-manager.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport Attribute from './attribute';\nimport log from '../../utils/log';\nimport debug from '../../debug';\nimport AttributeTransitionManager from './attribute-transition-manager';\nvar TRACE_INVALIDATE = 'attributeManager.invalidate';\nvar TRACE_UPDATE_START = 'attributeManager.updateStart';\nvar TRACE_UPDATE_END = 'attributeManager.updateEnd';\nvar TRACE_ATTRIBUTE_UPDATE_START = 'attribute.updateStart';\nvar TRACE_ATTRIBUTE_ALLOCATE = 'attribute.allocate';\nvar TRACE_ATTRIBUTE_UPDATE_END = 'attribute.updateEnd';\n\nvar AttributeManager = function () {\n  function AttributeManager(gl) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref$id = _ref.id,\n        id = _ref$id === void 0 ? 'attribute-manager' : _ref$id,\n        stats = _ref.stats,\n        timeline = _ref.timeline;\n\n    _classCallCheck(this, AttributeManager);\n\n    this.id = id;\n    this.gl = gl;\n    this.attributes = {};\n    this.updateTriggers = {};\n    this.accessors = {};\n    this.needsRedraw = true;\n    this.userData = {};\n    this.stats = stats;\n    this.attributeTransitionManager = new AttributeTransitionManager(gl, {\n      id: \"\".concat(id, \"-transitions\"),\n      timeline: timeline\n    });\n    Object.seal(this);\n  }\n\n  _createClass(AttributeManager, [{\n    key: \"finalize\",\n    value: function finalize() {\n      for (var attributeName in this.attributes) {\n        this.attributes[attributeName][\"delete\"]();\n      }\n\n      this.attributeTransitionManager.finalize();\n    }\n  }, {\n    key: \"getNeedsRedraw\",\n    value: function getNeedsRedraw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        clearRedrawFlags: false\n      };\n      var redraw = this.needsRedraw;\n      this.needsRedraw = this.needsRedraw && !opts.clearRedrawFlags;\n      return redraw && this.id;\n    }\n  }, {\n    key: \"setNeedsRedraw\",\n    value: function setNeedsRedraw() {\n      var redraw = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      this.needsRedraw = true;\n      return this;\n    }\n  }, {\n    key: \"add\",\n    value: function add(attributes, updaters) {\n      this._add(attributes, updaters);\n    }\n  }, {\n    key: \"addInstanced\",\n    value: function addInstanced(attributes, updaters) {\n      this._add(attributes, updaters, {\n        instanced: 1\n      });\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(attributeNameArray) {\n      for (var i = 0; i < attributeNameArray.length; i++) {\n        var name = attributeNameArray[i];\n\n        if (this.attributes[name] !== undefined) {\n          this.attributes[name][\"delete\"]();\n          delete this.attributes[name];\n        }\n      }\n    }\n  }, {\n    key: \"invalidate\",\n    value: function invalidate(triggerName, dataRange) {\n      var invalidatedAttributes = this._invalidateTrigger(triggerName, dataRange);\n\n      debug(TRACE_INVALIDATE, this, triggerName, invalidatedAttributes);\n    }\n  }, {\n    key: \"invalidateAll\",\n    value: function invalidateAll(dataRange) {\n      for (var attributeName in this.attributes) {\n        this.attributes[attributeName].setNeedsUpdate(attributeName, dataRange);\n      }\n\n      debug(TRACE_INVALIDATE, this, 'all');\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          data = _ref2.data,\n          numInstances = _ref2.numInstances,\n          _ref2$startIndices = _ref2.startIndices,\n          startIndices = _ref2$startIndices === void 0 ? null : _ref2$startIndices,\n          transitions = _ref2.transitions,\n          _ref2$props = _ref2.props,\n          props = _ref2$props === void 0 ? {} : _ref2$props,\n          _ref2$buffers = _ref2.buffers,\n          buffers = _ref2$buffers === void 0 ? {} : _ref2$buffers,\n          _ref2$context = _ref2.context,\n          context = _ref2$context === void 0 ? {} : _ref2$context;\n\n      var updated = false;\n      debug(TRACE_UPDATE_START, this);\n\n      if (this.stats) {\n        this.stats.get('Update Attributes').timeStart();\n      }\n\n      for (var attributeName in this.attributes) {\n        var attribute = this.attributes[attributeName];\n        var accessorName = attribute.settings.accessor;\n        attribute.startIndices = startIndices;\n\n        if (props[attributeName]) {\n          log.removed(\"props.\".concat(attributeName), \"data.attributes.\".concat(attributeName))();\n        }\n\n        if (attribute.setExternalBuffer(buffers[attributeName])) {} else if (attribute.setBinaryValue(buffers[accessorName], data.startIndices)) {} else if (!buffers[accessorName] && attribute.setConstantValue(props[accessorName])) {} else if (attribute.needsUpdate()) {\n          updated = true;\n\n          this._updateAttribute({\n            attribute: attribute,\n            numInstances: numInstances,\n            data: data,\n            props: props,\n            context: context\n          });\n        }\n\n        this.needsRedraw |= attribute.needsRedraw();\n      }\n\n      if (updated) {\n        debug(TRACE_UPDATE_END, this, numInstances);\n      }\n\n      if (this.stats) {\n        this.stats.get('Update Attributes').timeEnd();\n      }\n\n      this.attributeTransitionManager.update({\n        attributes: this.attributes,\n        numInstances: numInstances,\n        transitions: transitions\n      });\n    }\n  }, {\n    key: \"updateTransition\",\n    value: function updateTransition() {\n      var attributeTransitionManager = this.attributeTransitionManager;\n      var transitionUpdated = attributeTransitionManager.run();\n      this.needsRedraw = this.needsRedraw || transitionUpdated;\n      return transitionUpdated;\n    }\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes() {\n      return this.attributes;\n    }\n  }, {\n    key: \"getChangedAttributes\",\n    value: function getChangedAttributes() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        clearChangedFlags: false\n      };\n      var attributes = this.attributes,\n          attributeTransitionManager = this.attributeTransitionManager;\n      var changedAttributes = Object.assign({}, attributeTransitionManager.getAttributes());\n\n      for (var attributeName in attributes) {\n        var attribute = attributes[attributeName];\n\n        if (attribute.needsRedraw(opts) && !attributeTransitionManager.hasAttribute(attributeName)) {\n          changedAttributes[attributeName] = attribute;\n        }\n      }\n\n      return changedAttributes;\n    }\n  }, {\n    key: \"getShaderAttributes\",\n    value: function getShaderAttributes(attributes) {\n      var excludeAttributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (!attributes) {\n        attributes = this.getAttributes();\n      }\n\n      var shaderAttributes = {};\n\n      for (var attributeName in attributes) {\n        if (!excludeAttributes[attributeName]) {\n          Object.assign(shaderAttributes, attributes[attributeName].getShaderAttributes());\n        }\n      }\n\n      return shaderAttributes;\n    }\n  }, {\n    key: \"getAccessors\",\n    value: function getAccessors() {\n      return this.updateTriggers;\n    }\n  }, {\n    key: \"_add\",\n    value: function _add(attributes, updaters) {\n      var extraProps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      if (updaters) {\n        log.warn('AttributeManager.add({updaters}) - updater map no longer supported')();\n      }\n\n      var newAttributes = {};\n\n      for (var attributeName in attributes) {\n        var attribute = attributes[attributeName];\n\n        var newAttribute = this._createAttribute(attributeName, attribute, extraProps);\n\n        newAttributes[attributeName] = newAttribute;\n      }\n\n      Object.assign(this.attributes, newAttributes);\n\n      this._mapUpdateTriggersToAttributes();\n    }\n  }, {\n    key: \"_createAttribute\",\n    value: function _createAttribute(name, attribute, extraProps) {\n      var props = {\n        id: name,\n        constant: attribute.constant || false,\n        isIndexed: attribute.isIndexed || attribute.elements,\n        size: attribute.elements && 1 || attribute.size,\n        value: attribute.value || null,\n        divisor: attribute.instanced || extraProps.instanced ? 1 : attribute.divisor\n      };\n      return new Attribute(this.gl, Object.assign({}, attribute, props));\n    }\n  }, {\n    key: \"_mapUpdateTriggersToAttributes\",\n    value: function _mapUpdateTriggersToAttributes() {\n      var _this = this;\n\n      var triggers = {};\n\n      var _loop = function _loop(attributeName) {\n        var attribute = _this.attributes[attributeName];\n        attribute.getUpdateTriggers().forEach(function (triggerName) {\n          if (!triggers[triggerName]) {\n            triggers[triggerName] = [];\n          }\n\n          triggers[triggerName].push(attributeName);\n        });\n      };\n\n      for (var attributeName in this.attributes) {\n        _loop(attributeName);\n      }\n\n      this.updateTriggers = triggers;\n    }\n  }, {\n    key: \"_invalidateTrigger\",\n    value: function _invalidateTrigger(triggerName, dataRange) {\n      var attributes = this.attributes,\n          updateTriggers = this.updateTriggers;\n      var invalidatedAttributes = updateTriggers[triggerName];\n\n      if (invalidatedAttributes) {\n        invalidatedAttributes.forEach(function (name) {\n          var attribute = attributes[name];\n\n          if (attribute) {\n            attribute.setNeedsUpdate(attribute.id, dataRange);\n          }\n        });\n      }\n\n      return invalidatedAttributes;\n    }\n  }, {\n    key: \"_updateAttribute\",\n    value: function _updateAttribute(opts) {\n      var attribute = opts.attribute,\n          numInstances = opts.numInstances;\n      debug(TRACE_ATTRIBUTE_UPDATE_START, attribute);\n\n      if (attribute.allocate(numInstances)) {\n        debug(TRACE_ATTRIBUTE_ALLOCATE, attribute, numInstances);\n      }\n\n      var updated = attribute.updateBuffer(opts);\n\n      if (updated) {\n        this.needsRedraw = true;\n        debug(TRACE_ATTRIBUTE_UPDATE_END, attribute, numInstances);\n      }\n    }\n  }]);\n\n  return AttributeManager;\n}();\n\nexport { AttributeManager as default };\n//# sourceMappingURL=attribute-manager.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { lerp } from 'math.gl';\nimport Transition from './transition';\n\nvar CPUInterpolationTransition = function (_Transition) {\n  _inherits(CPUInterpolationTransition, _Transition);\n\n  var _super = _createSuper(CPUInterpolationTransition);\n\n  function CPUInterpolationTransition() {\n    _classCallCheck(this, CPUInterpolationTransition);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(CPUInterpolationTransition, [{\n    key: \"_onUpdate\",\n    value: function _onUpdate() {\n      var time = this.time,\n          _this$settings = this.settings,\n          fromValue = _this$settings.fromValue,\n          toValue = _this$settings.toValue,\n          duration = _this$settings.duration,\n          easing = _this$settings.easing;\n      var t = easing(time / duration);\n      this._value = lerp(fromValue, toValue, t);\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this._value;\n    }\n  }]);\n\n  return CPUInterpolationTransition;\n}(Transition);\n\nexport { CPUInterpolationTransition as default };\n//# sourceMappingURL=cpu-interpolation-transition.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport Transition from './transition';\nvar EPSILON = 1e-5;\n\nfunction updateSpringElement(prev, cur, dest, damping, stiffness) {\n  var velocity = cur - prev;\n  var delta = dest - cur;\n  var spring = delta * stiffness;\n  var damper = -velocity * damping;\n  return spring + damper + velocity + cur;\n}\n\nfunction updateSpring(prev, cur, dest, damping, stiffness) {\n  if (Array.isArray(dest)) {\n    var next = [];\n\n    for (var i = 0; i < dest.length; i++) {\n      next[i] = updateSpringElement(prev[i], cur[i], dest[i], damping, stiffness);\n    }\n\n    return next;\n  }\n\n  return updateSpringElement(prev, cur, dest, damping, stiffness);\n}\n\nfunction distance(value1, value2) {\n  if (Array.isArray(value1)) {\n    var distanceSquare = 0;\n\n    for (var i = 0; i < value1.length; i++) {\n      var d = value1[i] - value2[i];\n      distanceSquare += d * d;\n    }\n\n    return Math.sqrt(distanceSquare);\n  }\n\n  return Math.abs(value1 - value2);\n}\n\nvar CPUSpringTransition = function (_Transition) {\n  _inherits(CPUSpringTransition, _Transition);\n\n  var _super = _createSuper(CPUSpringTransition);\n\n  function CPUSpringTransition() {\n    _classCallCheck(this, CPUSpringTransition);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(CPUSpringTransition, [{\n    key: \"_onUpdate\",\n    value: function _onUpdate() {\n      var _this$settings = this.settings,\n          fromValue = _this$settings.fromValue,\n          toValue = _this$settings.toValue,\n          damping = _this$settings.damping,\n          stiffness = _this$settings.stiffness;\n\n      var _this$_prevValue = this._prevValue,\n          _prevValue = _this$_prevValue === void 0 ? fromValue : _this$_prevValue,\n          _this$_currValue = this._currValue,\n          _currValue = _this$_currValue === void 0 ? fromValue : _this$_currValue;\n\n      var nextValue = updateSpring(_prevValue, _currValue, toValue, damping, stiffness);\n      var delta = distance(nextValue, toValue);\n      var velocity = distance(nextValue, _currValue);\n\n      if (delta < EPSILON && velocity < EPSILON) {\n        nextValue = toValue;\n        this.end();\n      }\n\n      this._prevValue = _currValue;\n      this._currValue = nextValue;\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this._currValue;\n    }\n  }]);\n\n  return CPUSpringTransition;\n}(Transition);\n\nexport { CPUSpringTransition as default };\n//# sourceMappingURL=cpu-spring-transition.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { normalizeTransitionSettings } from './attribute/attribute-transition-utils';\nimport CPUInterpolationTransition from '../transitions/cpu-interpolation-transition';\nimport CPUSpringTransition from '../transitions/cpu-spring-transition';\nimport log from '../utils/log';\nvar TRANSITION_TYPES = {\n  interpolation: CPUInterpolationTransition,\n  spring: CPUSpringTransition\n};\n\nvar UniformTransitionManager = function () {\n  function UniformTransitionManager(timeline) {\n    _classCallCheck(this, UniformTransitionManager);\n\n    this.transitions = new Map();\n    this.timeline = timeline;\n  }\n\n  _createClass(UniformTransitionManager, [{\n    key: \"add\",\n    value: function add(key, fromValue, toValue, settings) {\n      var transitions = this.transitions;\n\n      if (transitions.has(key)) {\n        var _transition = transitions.get(key);\n\n        var _transition$value = _transition.value,\n            value = _transition$value === void 0 ? _transition.settings.fromValue : _transition$value;\n        fromValue = value;\n        this.remove(key);\n      }\n\n      settings = normalizeTransitionSettings(settings);\n\n      if (!settings) {\n        return;\n      }\n\n      var TransitionType = TRANSITION_TYPES[settings.type];\n\n      if (!TransitionType) {\n        log.error(\"unsupported transition type '\".concat(settings.type, \"'\"))();\n        return;\n      }\n\n      var transition = new TransitionType(this.timeline);\n      transition.start(_objectSpread(_objectSpread({}, settings), {}, {\n        fromValue: fromValue,\n        toValue: toValue\n      }));\n      transitions.set(key, transition);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(key) {\n      var transitions = this.transitions;\n\n      if (transitions.has(key)) {\n        transitions.get(key).cancel();\n        transitions[\"delete\"](key);\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var propsInTransition = {};\n\n      var _iterator = _createForOfIteratorHelper(this.transitions),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _step$value = _slicedToArray(_step.value, 2),\n              key = _step$value[0],\n              transition = _step$value[1];\n\n          transition.update();\n          propsInTransition[key] = transition.value;\n\n          if (!transition.inProgress) {\n            this.remove(key);\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return propsInTransition;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      var _iterator2 = _createForOfIteratorHelper(this.transitions.keys()),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var key = _step2.value;\n          this.remove(key);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n  }, {\n    key: \"active\",\n    get: function get() {\n      return this.transitions.size > 0;\n    }\n  }]);\n\n  return UniformTransitionManager;\n}();\n\nexport { UniformTransitionManager as default };\n//# sourceMappingURL=uniform-transition-manager.js.map","export var LIFECYCLE = {\n  NO_STATE: 'Awaiting state',\n  MATCHED: 'Matched. State transferred from previous layer',\n  INITIALIZED: 'Initialized',\n  AWAITING_GC: 'Discarded. Awaiting garbage collection',\n  AWAITING_FINALIZATION: 'No longer matched. Awaiting garbage collection',\n  FINALIZED: 'Finalized! Awaiting garbage collection'\n};\nexport var PROP_SYMBOLS = {\n  COMPONENT: Symbol[\"for\"]('component'),\n  ASYNC_DEFAULTS: Symbol[\"for\"]('asyncPropDefaults'),\n  ASYNC_ORIGINAL: Symbol[\"for\"]('asyncPropOriginal'),\n  ASYNC_RESOLVED: Symbol[\"for\"]('asyncPropResolved')\n};\n//# sourceMappingURL=constants.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport { PROP_SYMBOLS } from './constants';\nvar COMPONENT = PROP_SYMBOLS.COMPONENT;\nexport function validateProps(props) {\n  var propTypes = getPropTypes(props);\n\n  for (var propName in propTypes) {\n    var propType = propTypes[propName];\n    var validate = propType.validate;\n\n    if (validate && !validate(props[propName], propType)) {\n      throw new Error(\"Invalid prop \".concat(propName, \": \").concat(props[propName]));\n    }\n  }\n}\nexport function diffProps(props, oldProps) {\n  var propsChangedReason = compareProps({\n    newProps: props,\n    oldProps: oldProps,\n    propTypes: getPropTypes(props),\n    ignoreProps: {\n      data: null,\n      updateTriggers: null,\n      extensions: null,\n      transitions: null\n    }\n  });\n  var dataChangedReason = diffDataProps(props, oldProps);\n  var updateTriggersChangedReason = false;\n\n  if (!dataChangedReason) {\n    updateTriggersChangedReason = diffUpdateTriggers(props, oldProps);\n  }\n\n  return {\n    dataChanged: dataChangedReason,\n    propsChanged: propsChangedReason,\n    updateTriggersChanged: updateTriggersChangedReason,\n    extensionsChanged: diffExtensions(props, oldProps),\n    transitionsChanged: diffTransitions(props, oldProps)\n  };\n}\n\nfunction diffTransitions(props, oldProps) {\n  if (!props.transitions) {\n    return null;\n  }\n\n  var result = {};\n  var propTypes = getPropTypes(props);\n\n  for (var key in props.transitions) {\n    var propType = propTypes[key];\n    var type = propType && propType.type;\n    var isTransitionable = type === 'number' || type === 'color' || type === 'array';\n\n    if (isTransitionable && comparePropValues(props[key], oldProps[key], propType)) {\n      result[key] = true;\n    }\n  }\n\n  return result;\n}\n\nexport function compareProps() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      newProps = _ref.newProps,\n      oldProps = _ref.oldProps,\n      _ref$ignoreProps = _ref.ignoreProps,\n      ignoreProps = _ref$ignoreProps === void 0 ? {} : _ref$ignoreProps,\n      _ref$propTypes = _ref.propTypes,\n      propTypes = _ref$propTypes === void 0 ? {} : _ref$propTypes,\n      _ref$triggerName = _ref.triggerName,\n      triggerName = _ref$triggerName === void 0 ? 'props' : _ref$triggerName;\n\n  if (oldProps === newProps) {\n    return null;\n  }\n\n  if (_typeof(newProps) !== 'object' || newProps === null) {\n    return \"\".concat(triggerName, \" changed shallowly\");\n  }\n\n  if (_typeof(oldProps) !== 'object' || oldProps === null) {\n    return \"\".concat(triggerName, \" changed shallowly\");\n  }\n\n  for (var _i = 0, _Object$keys = Object.keys(newProps); _i < _Object$keys.length; _i++) {\n    var key = _Object$keys[_i];\n\n    if (!(key in ignoreProps)) {\n      if (!(key in oldProps)) {\n        return \"\".concat(triggerName, \".\").concat(key, \" added\");\n      }\n\n      var changed = comparePropValues(newProps[key], oldProps[key], propTypes[key]);\n\n      if (changed) {\n        return \"\".concat(triggerName, \".\").concat(key, \" \").concat(changed);\n      }\n    }\n  }\n\n  for (var _i2 = 0, _Object$keys2 = Object.keys(oldProps); _i2 < _Object$keys2.length; _i2++) {\n    var _key = _Object$keys2[_i2];\n\n    if (!(_key in ignoreProps)) {\n      if (!(_key in newProps)) {\n        return \"\".concat(triggerName, \".\").concat(_key, \" dropped\");\n      }\n\n      if (!Object.hasOwnProperty.call(newProps, _key)) {\n        var _changed = comparePropValues(newProps[_key], oldProps[_key], propTypes[_key]);\n\n        if (_changed) {\n          return \"\".concat(triggerName, \".\").concat(_key, \" \").concat(_changed);\n        }\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction comparePropValues(newProp, oldProp, propType) {\n  var equal = propType && propType.equal;\n\n  if (equal && !equal(newProp, oldProp, propType)) {\n    return 'changed deeply';\n  }\n\n  if (!equal) {\n    equal = newProp && oldProp && newProp.equals;\n\n    if (equal && !equal.call(newProp, oldProp)) {\n      return 'changed deeply';\n    }\n  }\n\n  if (!equal && oldProp !== newProp) {\n    return 'changed shallowly';\n  }\n\n  return null;\n}\n\nfunction diffDataProps(props, oldProps) {\n  if (oldProps === null) {\n    return 'oldProps is null, initial diff';\n  }\n\n  var dataChanged = null;\n  var dataComparator = props.dataComparator,\n      _dataDiff = props._dataDiff;\n\n  if (dataComparator) {\n    if (!dataComparator(props.data, oldProps.data)) {\n      dataChanged = 'Data comparator detected a change';\n    }\n  } else if (props.data !== oldProps.data) {\n    dataChanged = 'A new data container was supplied';\n  }\n\n  if (dataChanged && _dataDiff) {\n    dataChanged = _dataDiff(props.data, oldProps.data) || dataChanged;\n  }\n\n  return dataChanged;\n}\n\nfunction diffUpdateTriggers(props, oldProps) {\n  if (oldProps === null) {\n    return 'oldProps is null, initial diff';\n  }\n\n  if ('all' in props.updateTriggers) {\n    var diffReason = diffUpdateTrigger(props, oldProps, 'all');\n\n    if (diffReason) {\n      return {\n        all: true\n      };\n    }\n  }\n\n  var triggerChanged = {};\n  var reason = false;\n\n  for (var triggerName in props.updateTriggers) {\n    if (triggerName !== 'all') {\n      var _diffReason = diffUpdateTrigger(props, oldProps, triggerName);\n\n      if (_diffReason) {\n        triggerChanged[triggerName] = true;\n        reason = triggerChanged;\n      }\n    }\n  }\n\n  return reason;\n}\n\nfunction diffExtensions(props, oldProps) {\n  if (oldProps === null) {\n    return 'oldProps is null, initial diff';\n  }\n\n  var oldExtensions = oldProps.extensions;\n  var extensions = props.extensions;\n\n  if (extensions === oldExtensions) {\n    return false;\n  }\n\n  if (extensions.length !== oldExtensions.length) {\n    return true;\n  }\n\n  for (var i = 0; i < extensions.length; i++) {\n    if (!extensions[i].equals(oldExtensions[i])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction diffUpdateTrigger(props, oldProps, triggerName) {\n  var newTriggers = props.updateTriggers[triggerName];\n  newTriggers = newTriggers === undefined || newTriggers === null ? {} : newTriggers;\n  var oldTriggers = oldProps.updateTriggers[triggerName];\n  oldTriggers = oldTriggers === undefined || oldTriggers === null ? {} : oldTriggers;\n  var diffReason = compareProps({\n    oldProps: oldTriggers,\n    newProps: newTriggers,\n    triggerName: triggerName\n  });\n  return diffReason;\n}\n\nfunction getPropTypes(props) {\n  var layer = props[COMPONENT];\n  var LayerType = layer && layer.constructor;\n  return LayerType ? LayerType._propTypes : {};\n}\n//# sourceMappingURL=props.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar ERR_NOT_OBJECT = 'count(): argument not an object';\nvar ERR_NOT_CONTAINER = 'count(): argument not a container';\nexport function count(container) {\n  if (!isObject(container)) {\n    throw new Error(ERR_NOT_OBJECT);\n  }\n\n  if (typeof container.count === 'function') {\n    return container.count();\n  }\n\n  if (Number.isFinite(container.size)) {\n    return container.size;\n  }\n\n  if (Number.isFinite(container.length)) {\n    return container.length;\n  }\n\n  if (isPlainObject(container)) {\n    return Object.keys(container).length;\n  }\n\n  throw new Error(ERR_NOT_CONTAINER);\n}\n\nfunction isPlainObject(value) {\n  return value !== null && _typeof(value) === 'object' && value.constructor === Object;\n}\n\nfunction isObject(value) {\n  return value !== null && _typeof(value) === 'object';\n}\n//# sourceMappingURL=count.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nexport function mergeShaders(target, source) {\n  if (!source) {\n    return target;\n  }\n\n  var result = Object.assign({}, target, source);\n\n  if ('defines' in source) {\n    result.defines = Object.assign({}, target.defines, source.defines);\n  }\n\n  if ('modules' in source) {\n    result.modules = (target.modules || []).concat(source.modules);\n\n    if (source.modules.some(function (module) {\n      return module.name === 'project64';\n    })) {\n      var index = result.modules.findIndex(function (module) {\n        return module.name === 'project32';\n      });\n\n      if (index >= 0) {\n        result.modules.splice(index, 1);\n      }\n    }\n  }\n\n  if ('inject' in source) {\n    if (!target.inject) {\n      result.inject = source.inject;\n    } else {\n      var mergedInjection = _objectSpread({}, target.inject);\n\n      for (var key in source.inject) {\n        mergedInjection[key] = (mergedInjection[key] || '') + source.inject[key];\n      }\n\n      result.inject = mergedInjection;\n    }\n  }\n\n  return result;\n}\n//# sourceMappingURL=shader.js.map","import * as vec4 from 'gl-matrix/vec4';\nexport function createMat4() {\n  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\nexport function transformVector(matrix, vector) {\n  var result = vec4.transformMat4([], vector, matrix);\n  vec4.scale(result, result, 1 / result[3]);\n  return result;\n}\nexport function mod(value, divisor) {\n  var modulus = value % divisor;\n  return modulus < 0 ? divisor + modulus : modulus;\n}\nexport function lerp(start, end, step) {\n  return step * end + (1 - step) * start;\n}\n//# sourceMappingURL=math-utils.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || '@math.gl/web-mercator: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { createMat4, transformVector } from './math-utils';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nimport assert from './assert';\nvar PI = Math.PI;\nvar PI_4 = PI / 4;\nvar DEGREES_TO_RADIANS = PI / 180;\nvar RADIANS_TO_DEGREES = 180 / PI;\nvar TILE_SIZE = 512;\nvar EARTH_CIRCUMFERENCE = 40.03e6;\nvar DEFAULT_ALTITUDE = 1.5;\nexport function zoomToScale(zoom) {\n  return Math.pow(2, zoom);\n}\nexport function scaleToZoom(scale) {\n  return Math.log2(scale);\n}\nexport function lngLatToWorld(_ref) {\n  var _ref2 = _slicedToArray(_ref, 2),\n      lng = _ref2[0],\n      lat = _ref2[1];\n\n  assert(Number.isFinite(lng));\n  assert(Number.isFinite(lat) && lat >= -90 && lat <= 90, 'invalid latitude');\n  var lambda2 = lng * DEGREES_TO_RADIANS;\n  var phi2 = lat * DEGREES_TO_RADIANS;\n  var x = TILE_SIZE * (lambda2 + PI) / (2 * PI);\n  var y = TILE_SIZE * (PI + Math.log(Math.tan(PI_4 + phi2 * 0.5))) / (2 * PI);\n  return [x, y];\n}\nexport function worldToLngLat(_ref3) {\n  var _ref4 = _slicedToArray(_ref3, 2),\n      x = _ref4[0],\n      y = _ref4[1];\n\n  var lambda2 = x / TILE_SIZE * (2 * PI) - PI;\n  var phi2 = 2 * (Math.atan(Math.exp(y / TILE_SIZE * (2 * PI) - PI)) - PI_4);\n  return [lambda2 * RADIANS_TO_DEGREES, phi2 * RADIANS_TO_DEGREES];\n}\nexport function getMeterZoom(_ref5) {\n  var latitude = _ref5.latitude;\n  assert(Number.isFinite(latitude));\n  var latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n  return scaleToZoom(EARTH_CIRCUMFERENCE * latCosine) - 9;\n}\nexport function getDistanceScales(_ref6) {\n  var latitude = _ref6.latitude,\n      longitude = _ref6.longitude,\n      _ref6$highPrecision = _ref6.highPrecision,\n      highPrecision = _ref6$highPrecision === void 0 ? false : _ref6$highPrecision;\n  assert(Number.isFinite(latitude) && Number.isFinite(longitude));\n  var result = {};\n  var worldSize = TILE_SIZE;\n  var latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n  var unitsPerDegreeX = worldSize / 360;\n  var unitsPerDegreeY = unitsPerDegreeX / latCosine;\n  var altUnitsPerMeter = worldSize / EARTH_CIRCUMFERENCE / latCosine;\n  result.unitsPerMeter = [altUnitsPerMeter, altUnitsPerMeter, altUnitsPerMeter];\n  result.metersPerUnit = [1 / altUnitsPerMeter, 1 / altUnitsPerMeter, 1 / altUnitsPerMeter];\n  result.unitsPerDegree = [unitsPerDegreeX, unitsPerDegreeY, altUnitsPerMeter];\n  result.degreesPerUnit = [1 / unitsPerDegreeX, 1 / unitsPerDegreeY, 1 / altUnitsPerMeter];\n\n  if (highPrecision) {\n    var latCosine2 = DEGREES_TO_RADIANS * Math.tan(latitude * DEGREES_TO_RADIANS) / latCosine;\n    var unitsPerDegreeY2 = unitsPerDegreeX * latCosine2 / 2;\n    var altUnitsPerDegree2 = worldSize / EARTH_CIRCUMFERENCE * latCosine2;\n    var altUnitsPerMeter2 = altUnitsPerDegree2 / unitsPerDegreeY * altUnitsPerMeter;\n    result.unitsPerDegree2 = [0, unitsPerDegreeY2, altUnitsPerDegree2];\n    result.unitsPerMeter2 = [altUnitsPerMeter2, 0, altUnitsPerMeter2];\n  }\n\n  return result;\n}\nexport function addMetersToLngLat(lngLatZ, xyz) {\n  var _lngLatZ = _slicedToArray(lngLatZ, 3),\n      longitude = _lngLatZ[0],\n      latitude = _lngLatZ[1],\n      z0 = _lngLatZ[2];\n\n  var _xyz = _slicedToArray(xyz, 3),\n      x = _xyz[0],\n      y = _xyz[1],\n      z = _xyz[2];\n\n  var _getDistanceScales = getDistanceScales({\n    longitude: longitude,\n    latitude: latitude,\n    highPrecision: true\n  }),\n      unitsPerMeter = _getDistanceScales.unitsPerMeter,\n      unitsPerMeter2 = _getDistanceScales.unitsPerMeter2;\n\n  var worldspace = lngLatToWorld(lngLatZ);\n  worldspace[0] += x * (unitsPerMeter[0] + unitsPerMeter2[0] * y);\n  worldspace[1] += y * (unitsPerMeter[1] + unitsPerMeter2[1] * y);\n  var newLngLat = worldToLngLat(worldspace);\n  var newZ = (z0 || 0) + (z || 0);\n  return Number.isFinite(z0) || Number.isFinite(z) ? [newLngLat[0], newLngLat[1], newZ] : newLngLat;\n}\nexport function getViewMatrix(_ref7) {\n  var height = _ref7.height,\n      pitch = _ref7.pitch,\n      bearing = _ref7.bearing,\n      altitude = _ref7.altitude,\n      scale = _ref7.scale,\n      _ref7$center = _ref7.center,\n      center = _ref7$center === void 0 ? null : _ref7$center;\n  var vm = createMat4();\n  mat4.translate(vm, vm, [0, 0, -altitude]);\n  mat4.rotateX(vm, vm, -pitch * DEGREES_TO_RADIANS);\n  mat4.rotateZ(vm, vm, bearing * DEGREES_TO_RADIANS);\n  scale /= height;\n  mat4.scale(vm, vm, [scale, scale, scale]);\n\n  if (center) {\n    mat4.translate(vm, vm, vec3.negate([], center));\n  }\n\n  return vm;\n}\nexport function getProjectionParameters(_ref8) {\n  var width = _ref8.width,\n      height = _ref8.height,\n      _ref8$altitude = _ref8.altitude,\n      altitude = _ref8$altitude === void 0 ? DEFAULT_ALTITUDE : _ref8$altitude,\n      _ref8$pitch = _ref8.pitch,\n      pitch = _ref8$pitch === void 0 ? 0 : _ref8$pitch,\n      _ref8$nearZMultiplier = _ref8.nearZMultiplier,\n      nearZMultiplier = _ref8$nearZMultiplier === void 0 ? 1 : _ref8$nearZMultiplier,\n      _ref8$farZMultiplier = _ref8.farZMultiplier,\n      farZMultiplier = _ref8$farZMultiplier === void 0 ? 1 : _ref8$farZMultiplier;\n  var pitchRadians = pitch * DEGREES_TO_RADIANS;\n  var halfFov = Math.atan(0.5 / altitude);\n  var topHalfSurfaceDistance = Math.sin(halfFov) * altitude / Math.sin(Math.min(Math.max(Math.PI / 2 - pitchRadians - halfFov, 0.01), Math.PI - 0.01));\n  var farZ = Math.sin(pitchRadians) * topHalfSurfaceDistance + altitude;\n  return {\n    fov: 2 * halfFov,\n    aspect: width / height,\n    focalDistance: altitude,\n    near: nearZMultiplier,\n    far: farZ * farZMultiplier\n  };\n}\nexport function getProjectionMatrix(_ref9) {\n  var width = _ref9.width,\n      height = _ref9.height,\n      pitch = _ref9.pitch,\n      altitude = _ref9.altitude,\n      nearZMultiplier = _ref9.nearZMultiplier,\n      farZMultiplier = _ref9.farZMultiplier;\n\n  var _getProjectionParamet = getProjectionParameters({\n    width: width,\n    height: height,\n    altitude: altitude,\n    pitch: pitch,\n    nearZMultiplier: nearZMultiplier,\n    farZMultiplier: farZMultiplier\n  }),\n      fov = _getProjectionParamet.fov,\n      aspect = _getProjectionParamet.aspect,\n      near = _getProjectionParamet.near,\n      far = _getProjectionParamet.far;\n\n  var projectionMatrix = mat4.perspective([], fov, aspect, near, far);\n  return projectionMatrix;\n}\nexport function worldToPixels(xyz, pixelProjectionMatrix) {\n  var _xyz2 = _slicedToArray(xyz, 3),\n      x = _xyz2[0],\n      y = _xyz2[1],\n      _xyz2$ = _xyz2[2],\n      z = _xyz2$ === void 0 ? 0 : _xyz2$;\n\n  assert(Number.isFinite(x) && Number.isFinite(y) && Number.isFinite(z));\n  return transformVector(pixelProjectionMatrix, [x, y, z, 1]);\n}\nexport function pixelsToWorld(xyz, pixelUnprojectionMatrix) {\n  var targetZ = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n  var _xyz3 = _slicedToArray(xyz, 3),\n      x = _xyz3[0],\n      y = _xyz3[1],\n      z = _xyz3[2];\n\n  assert(Number.isFinite(x) && Number.isFinite(y), 'invalid pixel coordinate');\n\n  if (Number.isFinite(z)) {\n    var coord = transformVector(pixelUnprojectionMatrix, [x, y, z, 1]);\n    return coord;\n  }\n\n  var coord0 = transformVector(pixelUnprojectionMatrix, [x, y, 0, 1]);\n  var coord1 = transformVector(pixelUnprojectionMatrix, [x, y, 1, 1]);\n  var z0 = coord0[2];\n  var z1 = coord1[2];\n  var t = z0 === z1 ? 0 : ((targetZ || 0) - z0) / (z1 - z0);\n  return vec2.lerp([], coord0, coord1, t);\n}\n//# sourceMappingURL=web-mercator-utils.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport WebMercatorViewport from './web-mercator-viewport';\nimport assert from './assert';\nexport default function fitBounds(_ref) {\n  var width = _ref.width,\n      height = _ref.height,\n      bounds = _ref.bounds,\n      _ref$minExtent = _ref.minExtent,\n      minExtent = _ref$minExtent === void 0 ? 0 : _ref$minExtent,\n      _ref$maxZoom = _ref.maxZoom,\n      maxZoom = _ref$maxZoom === void 0 ? 24 : _ref$maxZoom,\n      _ref$padding = _ref.padding,\n      padding = _ref$padding === void 0 ? 0 : _ref$padding,\n      _ref$offset = _ref.offset,\n      offset = _ref$offset === void 0 ? [0, 0] : _ref$offset;\n\n  var _bounds = _slicedToArray(bounds, 2),\n      _bounds$ = _slicedToArray(_bounds[0], 2),\n      west = _bounds$[0],\n      south = _bounds$[1],\n      _bounds$2 = _slicedToArray(_bounds[1], 2),\n      east = _bounds$2[0],\n      north = _bounds$2[1];\n\n  if (Number.isFinite(padding)) {\n    var p = padding;\n    padding = {\n      top: p,\n      bottom: p,\n      left: p,\n      right: p\n    };\n  } else {\n    assert(Number.isFinite(padding.top) && Number.isFinite(padding.bottom) && Number.isFinite(padding.left) && Number.isFinite(padding.right));\n  }\n\n  var viewport = new WebMercatorViewport({\n    width: width,\n    height: height,\n    longitude: 0,\n    latitude: 0,\n    zoom: 0\n  });\n  var nw = viewport.project([west, north]);\n  var se = viewport.project([east, south]);\n  var size = [Math.max(Math.abs(se[0] - nw[0]), minExtent), Math.max(Math.abs(se[1] - nw[1]), minExtent)];\n  var targetSize = [width - padding.left - padding.right - Math.abs(offset[0]) * 2, height - padding.top - padding.bottom - Math.abs(offset[1]) * 2];\n  assert(targetSize[0] > 0 && targetSize[1] > 0);\n  var scaleX = targetSize[0] / size[0];\n  var scaleY = targetSize[1] / size[1];\n  var offsetX = (padding.right - padding.left) / 2 / scaleX;\n  var offsetY = (padding.bottom - padding.top) / 2 / scaleY;\n  var center = [(se[0] + nw[0]) / 2 + offsetX, (se[1] + nw[1]) / 2 + offsetY];\n  var centerLngLat = viewport.unproject(center);\n  var zoom = Math.min(maxZoom, viewport.zoom + Math.log2(Math.abs(Math.min(scaleX, scaleY))));\n  assert(Number.isFinite(zoom));\n  return {\n    longitude: centerLngLat[0],\n    latitude: centerLngLat[1],\n    zoom: zoom\n  };\n}\n//# sourceMappingURL=fit-bounds.js.map","import { worldToLngLat } from './web-mercator-utils';\nimport * as vec2 from 'gl-matrix/vec2';\nimport { transformVector } from './math-utils';\nvar DEGREES_TO_RADIANS = Math.PI / 180;\nexport default function getBounds(viewport) {\n  var z = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var width = viewport.width,\n      height = viewport.height,\n      unproject = viewport.unproject;\n  var unprojectOps = {\n    targetZ: z\n  };\n  var bottomLeft = unproject([0, height], unprojectOps);\n  var bottomRight = unproject([width, height], unprojectOps);\n  var topLeft;\n  var topRight;\n  var halfFov = Math.atan(0.5 / viewport.altitude);\n  var angleToGround = (90 - viewport.pitch) * DEGREES_TO_RADIANS;\n\n  if (halfFov > angleToGround - 0.01) {\n    topLeft = unprojectOnFarPlane(viewport, 0, z);\n    topRight = unprojectOnFarPlane(viewport, width, z);\n  } else {\n    topLeft = unproject([0, 0], unprojectOps);\n    topRight = unproject([width, 0], unprojectOps);\n  }\n\n  return [bottomLeft, bottomRight, topRight, topLeft];\n}\n\nfunction unprojectOnFarPlane(viewport, x, targetZ) {\n  var pixelUnprojectionMatrix = viewport.pixelUnprojectionMatrix;\n  var coord0 = transformVector(pixelUnprojectionMatrix, [x, 0, 1, 1]);\n  var coord1 = transformVector(pixelUnprojectionMatrix, [x, viewport.height, 1, 1]);\n  var z = targetZ * viewport.distanceScales.unitsPerMeter[2];\n  var t = (z - coord0[2]) / (coord1[2] - coord0[2]);\n  var coord = vec2.lerp([], coord0, coord1, t);\n  var result = worldToLngLat(coord);\n  result[2] = targetZ;\n  return result;\n}\n//# sourceMappingURL=get-bounds.js.map","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { createMat4 } from './math-utils';\nimport { zoomToScale, pixelsToWorld, lngLatToWorld, worldToLngLat, worldToPixels, getProjectionMatrix, getDistanceScales, getViewMatrix } from './web-mercator-utils';\nimport _fitBounds from './fit-bounds';\nimport getBounds from './get-bounds';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\n\nvar WebMercatorViewport = function () {\n  function WebMercatorViewport() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      width: 1,\n      height: 1\n    },\n        width = _ref.width,\n        height = _ref.height,\n        _ref$latitude = _ref.latitude,\n        latitude = _ref$latitude === void 0 ? 0 : _ref$latitude,\n        _ref$longitude = _ref.longitude,\n        longitude = _ref$longitude === void 0 ? 0 : _ref$longitude,\n        _ref$zoom = _ref.zoom,\n        zoom = _ref$zoom === void 0 ? 0 : _ref$zoom,\n        _ref$pitch = _ref.pitch,\n        pitch = _ref$pitch === void 0 ? 0 : _ref$pitch,\n        _ref$bearing = _ref.bearing,\n        bearing = _ref$bearing === void 0 ? 0 : _ref$bearing,\n        _ref$altitude = _ref.altitude,\n        altitude = _ref$altitude === void 0 ? 1.5 : _ref$altitude,\n        _ref$nearZMultiplier = _ref.nearZMultiplier,\n        nearZMultiplier = _ref$nearZMultiplier === void 0 ? 0.02 : _ref$nearZMultiplier,\n        _ref$farZMultiplier = _ref.farZMultiplier,\n        farZMultiplier = _ref$farZMultiplier === void 0 ? 1.01 : _ref$farZMultiplier;\n\n    _classCallCheck(this, WebMercatorViewport);\n\n    width = width || 1;\n    height = height || 1;\n    var scale = zoomToScale(zoom);\n    altitude = Math.max(0.75, altitude);\n    var center = lngLatToWorld([longitude, latitude]);\n    center[2] = 0;\n    this.projectionMatrix = getProjectionMatrix({\n      width: width,\n      height: height,\n      pitch: pitch,\n      altitude: altitude,\n      nearZMultiplier: nearZMultiplier,\n      farZMultiplier: farZMultiplier\n    });\n    this.viewMatrix = getViewMatrix({\n      height: height,\n      scale: scale,\n      center: center,\n      pitch: pitch,\n      bearing: bearing,\n      altitude: altitude\n    });\n    this.width = width;\n    this.height = height;\n    this.scale = scale;\n    this.latitude = latitude;\n    this.longitude = longitude;\n    this.zoom = zoom;\n    this.pitch = pitch;\n    this.bearing = bearing;\n    this.altitude = altitude;\n    this.center = center;\n    this.distanceScales = getDistanceScales(this);\n\n    this._initMatrices();\n\n    this.equals = this.equals.bind(this);\n    this.project = this.project.bind(this);\n    this.unproject = this.unproject.bind(this);\n    this.projectPosition = this.projectPosition.bind(this);\n    this.unprojectPosition = this.unprojectPosition.bind(this);\n    Object.freeze(this);\n  }\n\n  _createClass(WebMercatorViewport, [{\n    key: \"_initMatrices\",\n    value: function _initMatrices() {\n      var width = this.width,\n          height = this.height,\n          projectionMatrix = this.projectionMatrix,\n          viewMatrix = this.viewMatrix;\n      var vpm = createMat4();\n      mat4.multiply(vpm, vpm, projectionMatrix);\n      mat4.multiply(vpm, vpm, viewMatrix);\n      this.viewProjectionMatrix = vpm;\n      var m = createMat4();\n      mat4.scale(m, m, [width / 2, -height / 2, 1]);\n      mat4.translate(m, m, [1, -1, 0]);\n      mat4.multiply(m, m, vpm);\n      var mInverse = mat4.invert(createMat4(), m);\n\n      if (!mInverse) {\n        throw new Error('Pixel project matrix not invertible');\n      }\n\n      this.pixelProjectionMatrix = m;\n      this.pixelUnprojectionMatrix = mInverse;\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(viewport) {\n      if (!(viewport instanceof WebMercatorViewport)) {\n        return false;\n      }\n\n      return viewport.width === this.width && viewport.height === this.height && mat4.equals(viewport.projectionMatrix, this.projectionMatrix) && mat4.equals(viewport.viewMatrix, this.viewMatrix);\n    }\n  }, {\n    key: \"project\",\n    value: function project(xyz) {\n      var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref2$topLeft = _ref2.topLeft,\n          topLeft = _ref2$topLeft === void 0 ? true : _ref2$topLeft;\n\n      var worldPosition = this.projectPosition(xyz);\n      var coord = worldToPixels(worldPosition, this.pixelProjectionMatrix);\n\n      var _coord = _slicedToArray(coord, 2),\n          x = _coord[0],\n          y = _coord[1];\n\n      var y2 = topLeft ? y : this.height - y;\n      return xyz.length === 2 ? [x, y2] : [x, y2, coord[2]];\n    }\n  }, {\n    key: \"unproject\",\n    value: function unproject(xyz) {\n      var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref3$topLeft = _ref3.topLeft,\n          topLeft = _ref3$topLeft === void 0 ? true : _ref3$topLeft,\n          _ref3$targetZ = _ref3.targetZ,\n          targetZ = _ref3$targetZ === void 0 ? undefined : _ref3$targetZ;\n\n      var _xyz = _slicedToArray(xyz, 3),\n          x = _xyz[0],\n          y = _xyz[1],\n          z = _xyz[2];\n\n      var y2 = topLeft ? y : this.height - y;\n      var targetZWorld = targetZ && targetZ * this.distanceScales.unitsPerMeter[2];\n      var coord = pixelsToWorld([x, y2, z], this.pixelUnprojectionMatrix, targetZWorld);\n\n      var _this$unprojectPositi = this.unprojectPosition(coord),\n          _this$unprojectPositi2 = _slicedToArray(_this$unprojectPositi, 3),\n          X = _this$unprojectPositi2[0],\n          Y = _this$unprojectPositi2[1],\n          Z = _this$unprojectPositi2[2];\n\n      if (Number.isFinite(z)) {\n        return [X, Y, Z];\n      }\n\n      return Number.isFinite(targetZ) ? [X, Y, targetZ] : [X, Y];\n    }\n  }, {\n    key: \"projectPosition\",\n    value: function projectPosition(xyz) {\n      var _lngLatToWorld = lngLatToWorld(xyz),\n          _lngLatToWorld2 = _slicedToArray(_lngLatToWorld, 2),\n          X = _lngLatToWorld2[0],\n          Y = _lngLatToWorld2[1];\n\n      var Z = (xyz[2] || 0) * this.distanceScales.unitsPerMeter[2];\n      return [X, Y, Z];\n    }\n  }, {\n    key: \"unprojectPosition\",\n    value: function unprojectPosition(xyz) {\n      var _worldToLngLat = worldToLngLat(xyz),\n          _worldToLngLat2 = _slicedToArray(_worldToLngLat, 2),\n          X = _worldToLngLat2[0],\n          Y = _worldToLngLat2[1];\n\n      var Z = (xyz[2] || 0) * this.distanceScales.metersPerUnit[2];\n      return [X, Y, Z];\n    }\n  }, {\n    key: \"projectFlat\",\n    value: function projectFlat(lngLat) {\n      return lngLatToWorld(lngLat);\n    }\n  }, {\n    key: \"unprojectFlat\",\n    value: function unprojectFlat(xy) {\n      return worldToLngLat(xy);\n    }\n  }, {\n    key: \"getMapCenterByLngLatPosition\",\n    value: function getMapCenterByLngLatPosition(_ref4) {\n      var lngLat = _ref4.lngLat,\n          pos = _ref4.pos;\n      var fromLocation = pixelsToWorld(pos, this.pixelUnprojectionMatrix);\n      var toLocation = lngLatToWorld(lngLat);\n      var translate = vec2.add([], toLocation, vec2.negate([], fromLocation));\n      var newCenter = vec2.add([], this.center, translate);\n      return worldToLngLat(newCenter);\n    }\n  }, {\n    key: \"getLocationAtPoint\",\n    value: function getLocationAtPoint(_ref5) {\n      var lngLat = _ref5.lngLat,\n          pos = _ref5.pos;\n      return this.getMapCenterByLngLatPosition({\n        lngLat: lngLat,\n        pos: pos\n      });\n    }\n  }, {\n    key: \"fitBounds\",\n    value: function fitBounds(bounds) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var width = this.width,\n          height = this.height;\n\n      var _fitBounds2 = _fitBounds(Object.assign({\n        width: width,\n        height: height,\n        bounds: bounds\n      }, options)),\n          longitude = _fitBounds2.longitude,\n          latitude = _fitBounds2.latitude,\n          zoom = _fitBounds2.zoom;\n\n      return new WebMercatorViewport({\n        width: width,\n        height: height,\n        longitude: longitude,\n        latitude: latitude,\n        zoom: zoom\n      });\n    }\n  }, {\n    key: \"getBounds\",\n    value: function getBounds(options) {\n      var corners = this.getBoundingRegion(options);\n      var west = Math.min.apply(Math, _toConsumableArray(corners.map(function (p) {\n        return p[0];\n      })));\n      var east = Math.max.apply(Math, _toConsumableArray(corners.map(function (p) {\n        return p[0];\n      })));\n      var south = Math.min.apply(Math, _toConsumableArray(corners.map(function (p) {\n        return p[1];\n      })));\n      var north = Math.max.apply(Math, _toConsumableArray(corners.map(function (p) {\n        return p[1];\n      })));\n      return [[west, south], [east, north]];\n    }\n  }, {\n    key: \"getBoundingRegion\",\n    value: function getBoundingRegion() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return getBounds(this, options.z || 0);\n    }\n  }]);\n\n  return WebMercatorViewport;\n}();\n\nexport { WebMercatorViewport as default };\n//# sourceMappingURL=web-mercator-viewport.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport log from '../utils/log';\nimport { createMat4, getCameraPosition, getFrustumPlanes as _getFrustumPlanes } from '../utils/math-utils';\nimport { Matrix4, Vector3, equals as _equals } from 'math.gl';\nimport * as mat4 from 'gl-matrix/mat4';\nimport { getDistanceScales as _getDistanceScales, getMeterZoom, lngLatToWorld, worldToLngLat, worldToPixels, pixelsToWorld } from '@math.gl/web-mercator';\nimport { PROJECTION_MODE } from '../lib/constants';\nvar DEGREES_TO_RADIANS = Math.PI / 180;\nvar IDENTITY = createMat4();\nvar ZERO_VECTOR = [0, 0, 0];\nvar DEFAULT_ZOOM = 0;\nvar DEFAULT_DISTANCE_SCALES = {\n  unitsPerMeter: [1, 1, 1],\n  metersPerUnit: [1, 1, 1]\n};\n\nvar Viewport = function () {\n  function Viewport() {\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Viewport);\n\n    var _opts$id = opts.id,\n        id = _opts$id === void 0 ? null : _opts$id,\n        _opts$x = opts.x,\n        x = _opts$x === void 0 ? 0 : _opts$x,\n        _opts$y = opts.y,\n        y = _opts$y === void 0 ? 0 : _opts$y,\n        _opts$width = opts.width,\n        width = _opts$width === void 0 ? 1 : _opts$width,\n        _opts$height = opts.height,\n        height = _opts$height === void 0 ? 1 : _opts$height;\n    this.id = id || this.constructor.displayName || 'viewport';\n    this.x = x;\n    this.y = y;\n    this.width = width || 1;\n    this.height = height || 1;\n    this._frustumPlanes = {};\n\n    this._initViewMatrix(opts);\n\n    this._initProjectionMatrix(opts);\n\n    this._initPixelMatrices();\n\n    this.equals = this.equals.bind(this);\n    this.project = this.project.bind(this);\n    this.unproject = this.unproject.bind(this);\n    this.projectPosition = this.projectPosition.bind(this);\n    this.unprojectPosition = this.unprojectPosition.bind(this);\n    this.projectFlat = this.projectFlat.bind(this);\n    this.unprojectFlat = this.unprojectFlat.bind(this);\n  }\n\n  _createClass(Viewport, [{\n    key: \"equals\",\n    value: function equals(viewport) {\n      if (!(viewport instanceof Viewport)) {\n        return false;\n      }\n\n      if (this === viewport) {\n        return true;\n      }\n\n      return viewport.width === this.width && viewport.height === this.height && viewport.scale === this.scale && _equals(viewport.projectionMatrix, this.projectionMatrix) && _equals(viewport.viewMatrix, this.viewMatrix);\n    }\n  }, {\n    key: \"project\",\n    value: function project(xyz) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref$topLeft = _ref.topLeft,\n          topLeft = _ref$topLeft === void 0 ? true : _ref$topLeft;\n\n      var worldPosition = this.projectPosition(xyz);\n      var coord = worldToPixels(worldPosition, this.pixelProjectionMatrix);\n\n      var _coord = _slicedToArray(coord, 2),\n          x = _coord[0],\n          y = _coord[1];\n\n      var y2 = topLeft ? y : this.height - y;\n      return xyz.length === 2 ? [x, y2] : [x, y2, coord[2]];\n    }\n  }, {\n    key: \"unproject\",\n    value: function unproject(xyz) {\n      var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref2$topLeft = _ref2.topLeft,\n          topLeft = _ref2$topLeft === void 0 ? true : _ref2$topLeft,\n          targetZ = _ref2.targetZ;\n\n      var _xyz = _slicedToArray(xyz, 3),\n          x = _xyz[0],\n          y = _xyz[1],\n          z = _xyz[2];\n\n      var y2 = topLeft ? y : this.height - y;\n      var targetZWorld = targetZ && targetZ * this.distanceScales.unitsPerMeter[2];\n      var coord = pixelsToWorld([x, y2, z], this.pixelUnprojectionMatrix, targetZWorld);\n\n      var _this$unprojectPositi = this.unprojectPosition(coord),\n          _this$unprojectPositi2 = _slicedToArray(_this$unprojectPositi, 3),\n          X = _this$unprojectPositi2[0],\n          Y = _this$unprojectPositi2[1],\n          Z = _this$unprojectPositi2[2];\n\n      if (Number.isFinite(z)) {\n        return [X, Y, Z];\n      }\n\n      return Number.isFinite(targetZ) ? [X, Y, targetZ] : [X, Y];\n    }\n  }, {\n    key: \"projectPosition\",\n    value: function projectPosition(xyz) {\n      var _this$projectFlat = this.projectFlat(xyz),\n          _this$projectFlat2 = _slicedToArray(_this$projectFlat, 2),\n          X = _this$projectFlat2[0],\n          Y = _this$projectFlat2[1];\n\n      var Z = (xyz[2] || 0) * this.distanceScales.unitsPerMeter[2];\n      return [X, Y, Z];\n    }\n  }, {\n    key: \"unprojectPosition\",\n    value: function unprojectPosition(xyz) {\n      var _this$unprojectFlat = this.unprojectFlat(xyz),\n          _this$unprojectFlat2 = _slicedToArray(_this$unprojectFlat, 2),\n          X = _this$unprojectFlat2[0],\n          Y = _this$unprojectFlat2[1];\n\n      var Z = (xyz[2] || 0) * this.distanceScales.metersPerUnit[2];\n      return [X, Y, Z];\n    }\n  }, {\n    key: \"projectFlat\",\n    value: function projectFlat(xyz) {\n      if (this.isGeospatial) {\n        return lngLatToWorld(xyz);\n      }\n\n      return xyz;\n    }\n  }, {\n    key: \"unprojectFlat\",\n    value: function unprojectFlat(xyz) {\n      if (this.isGeospatial) {\n        return worldToLngLat(xyz);\n      }\n\n      return xyz;\n    }\n  }, {\n    key: \"getBounds\",\n    value: function getBounds() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var unprojectOption = {\n        targetZ: options.z || 0\n      };\n      var topLeft = this.unproject([0, 0], unprojectOption);\n      var topRight = this.unproject([this.width, 0], unprojectOption);\n      var bottomLeft = this.unproject([0, this.height], unprojectOption);\n      var bottomRight = this.unproject([this.width, this.height], unprojectOption);\n      return [Math.min(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]), Math.min(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1]), Math.max(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]), Math.max(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1])];\n    }\n  }, {\n    key: \"getDistanceScales\",\n    value: function getDistanceScales() {\n      var coordinateOrigin = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n      if (coordinateOrigin) {\n        return _getDistanceScales({\n          longitude: coordinateOrigin[0],\n          latitude: coordinateOrigin[1],\n          highPrecision: true\n        });\n      }\n\n      return this.distanceScales;\n    }\n  }, {\n    key: \"containsPixel\",\n    value: function containsPixel(_ref3) {\n      var x = _ref3.x,\n          y = _ref3.y,\n          _ref3$width = _ref3.width,\n          width = _ref3$width === void 0 ? 1 : _ref3$width,\n          _ref3$height = _ref3.height,\n          height = _ref3$height === void 0 ? 1 : _ref3$height;\n      return x < this.x + this.width && this.x < x + width && y < this.y + this.height && this.y < y + height;\n    }\n  }, {\n    key: \"getFrustumPlanes\",\n    value: function getFrustumPlanes() {\n      if (this._frustumPlanes.near) {\n        return this._frustumPlanes;\n      }\n\n      Object.assign(this._frustumPlanes, _getFrustumPlanes(this.viewProjectionMatrix));\n      return this._frustumPlanes;\n    }\n  }, {\n    key: \"getCameraPosition\",\n    value: function getCameraPosition() {\n      return this.cameraPosition;\n    }\n  }, {\n    key: \"getCameraDirection\",\n    value: function getCameraDirection() {\n      return this.cameraDirection;\n    }\n  }, {\n    key: \"getCameraUp\",\n    value: function getCameraUp() {\n      return this.cameraUp;\n    }\n  }, {\n    key: \"_createProjectionMatrix\",\n    value: function _createProjectionMatrix(_ref4) {\n      var orthographic = _ref4.orthographic,\n          fovyRadians = _ref4.fovyRadians,\n          aspect = _ref4.aspect,\n          focalDistance = _ref4.focalDistance,\n          near = _ref4.near,\n          far = _ref4.far;\n      return orthographic ? new Matrix4().orthographic({\n        fovy: fovyRadians,\n        aspect: aspect,\n        focalDistance: focalDistance,\n        near: near,\n        far: far\n      }) : new Matrix4().perspective({\n        fovy: fovyRadians,\n        aspect: aspect,\n        near: near,\n        far: far\n      });\n    }\n  }, {\n    key: \"_initViewMatrix\",\n    value: function _initViewMatrix(opts) {\n      var _opts$viewMatrix = opts.viewMatrix,\n          viewMatrix = _opts$viewMatrix === void 0 ? IDENTITY : _opts$viewMatrix,\n          _opts$longitude = opts.longitude,\n          longitude = _opts$longitude === void 0 ? null : _opts$longitude,\n          _opts$latitude = opts.latitude,\n          latitude = _opts$latitude === void 0 ? null : _opts$latitude,\n          _opts$zoom = opts.zoom,\n          zoom = _opts$zoom === void 0 ? null : _opts$zoom,\n          _opts$position = opts.position,\n          position = _opts$position === void 0 ? null : _opts$position,\n          _opts$modelMatrix = opts.modelMatrix,\n          modelMatrix = _opts$modelMatrix === void 0 ? null : _opts$modelMatrix,\n          _opts$focalDistance = opts.focalDistance,\n          focalDistance = _opts$focalDistance === void 0 ? 1 : _opts$focalDistance,\n          _opts$distanceScales = opts.distanceScales,\n          distanceScales = _opts$distanceScales === void 0 ? null : _opts$distanceScales;\n      this.isGeospatial = Number.isFinite(latitude) && Number.isFinite(longitude);\n      this.zoom = zoom;\n\n      if (!Number.isFinite(this.zoom)) {\n        this.zoom = this.isGeospatial ? getMeterZoom({\n          latitude: latitude\n        }) + Math.log2(focalDistance) : DEFAULT_ZOOM;\n      }\n\n      var scale = Math.pow(2, this.zoom);\n      this.scale = scale;\n      this.distanceScales = this.isGeospatial ? _getDistanceScales({\n        latitude: latitude,\n        longitude: longitude\n      }) : distanceScales || DEFAULT_DISTANCE_SCALES;\n      this.focalDistance = focalDistance;\n      this.distanceScales.metersPerUnit = new Vector3(this.distanceScales.metersPerUnit);\n      this.distanceScales.unitsPerMeter = new Vector3(this.distanceScales.unitsPerMeter);\n      this.position = ZERO_VECTOR;\n      this.meterOffset = ZERO_VECTOR;\n\n      if (position) {\n        this.position = position;\n        this.modelMatrix = modelMatrix;\n        this.meterOffset = modelMatrix ? modelMatrix.transformVector(position) : position;\n      }\n\n      if (this.isGeospatial) {\n        this.longitude = longitude;\n        this.latitude = latitude;\n        this.center = this._getCenterInWorld({\n          longitude: longitude,\n          latitude: latitude\n        });\n      } else {\n        this.center = position ? this.projectPosition(position) : [0, 0, 0];\n      }\n\n      this.viewMatrixUncentered = viewMatrix;\n      this.viewMatrix = new Matrix4().multiplyRight(this.viewMatrixUncentered).translate(new Vector3(this.center || ZERO_VECTOR).negate());\n    }\n  }, {\n    key: \"_getCenterInWorld\",\n    value: function _getCenterInWorld(_ref5) {\n      var longitude = _ref5.longitude,\n          latitude = _ref5.latitude;\n      var meterOffset = this.meterOffset,\n          distanceScales = this.distanceScales;\n      var center = new Vector3(this.projectPosition([longitude, latitude, 0]));\n\n      if (meterOffset) {\n        var commonPosition = new Vector3(meterOffset).scale(distanceScales.unitsPerMeter);\n        center.add(commonPosition);\n      }\n\n      return center;\n    }\n  }, {\n    key: \"_initProjectionMatrix\",\n    value: function _initProjectionMatrix(opts) {\n      var _opts$projectionMatri = opts.projectionMatrix,\n          projectionMatrix = _opts$projectionMatri === void 0 ? null : _opts$projectionMatri,\n          _opts$orthographic = opts.orthographic,\n          orthographic = _opts$orthographic === void 0 ? false : _opts$orthographic,\n          fovyRadians = opts.fovyRadians,\n          _opts$fovy = opts.fovy,\n          fovy = _opts$fovy === void 0 ? 75 : _opts$fovy,\n          _opts$near = opts.near,\n          near = _opts$near === void 0 ? 0.1 : _opts$near,\n          _opts$far = opts.far,\n          far = _opts$far === void 0 ? 1000 : _opts$far,\n          _opts$focalDistance2 = opts.focalDistance,\n          focalDistance = _opts$focalDistance2 === void 0 ? 1 : _opts$focalDistance2;\n      this.projectionMatrix = projectionMatrix || this._createProjectionMatrix({\n        orthographic: orthographic,\n        fovyRadians: fovyRadians || fovy * DEGREES_TO_RADIANS,\n        aspect: this.width / this.height,\n        focalDistance: focalDistance,\n        near: near,\n        far: far\n      });\n    }\n  }, {\n    key: \"_initPixelMatrices\",\n    value: function _initPixelMatrices() {\n      var vpm = createMat4();\n      mat4.multiply(vpm, vpm, this.projectionMatrix);\n      mat4.multiply(vpm, vpm, this.viewMatrix);\n      this.viewProjectionMatrix = vpm;\n      this.viewMatrixInverse = mat4.invert([], this.viewMatrix) || this.viewMatrix;\n      this.cameraPosition = getCameraPosition(this.viewMatrixInverse);\n      var viewportMatrix = createMat4();\n      var pixelProjectionMatrix = createMat4();\n      mat4.scale(viewportMatrix, viewportMatrix, [this.width / 2, -this.height / 2, 1]);\n      mat4.translate(viewportMatrix, viewportMatrix, [1, -1, 0]);\n      mat4.multiply(pixelProjectionMatrix, viewportMatrix, this.viewProjectionMatrix);\n      this.pixelProjectionMatrix = pixelProjectionMatrix;\n      this.viewportMatrix = viewportMatrix;\n      this.pixelUnprojectionMatrix = mat4.invert(createMat4(), this.pixelProjectionMatrix);\n\n      if (!this.pixelUnprojectionMatrix) {\n        log.warn('Pixel project matrix not invertible')();\n      }\n    }\n  }, {\n    key: \"metersPerPixel\",\n    get: function get() {\n      return this.distanceScales.metersPerUnit[2] / this.scale;\n    }\n  }, {\n    key: \"projectionMode\",\n    get: function get() {\n      if (this.isGeospatial) {\n        return this.zoom < 12 ? PROJECTION_MODE.WEB_MERCATOR : PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET;\n      }\n\n      return PROJECTION_MODE.IDENTITY;\n    }\n  }]);\n\n  return Viewport;\n}();\n\nexport { Viewport as default };\nViewport.displayName = 'Viewport';\n//# sourceMappingURL=viewport.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport Viewport from './viewport';\nimport { pixelsToWorld, getViewMatrix, addMetersToLngLat as _addMetersToLngLat, getProjectionParameters, fitBounds as _fitBounds, getBounds as _getBounds } from '@math.gl/web-mercator';\nimport * as vec2 from 'gl-matrix/vec2';\nimport { Matrix4 } from 'math.gl';\n\nvar WebMercatorViewport = function (_Viewport) {\n  _inherits(WebMercatorViewport, _Viewport);\n\n  var _super = _createSuper(WebMercatorViewport);\n\n  function WebMercatorViewport() {\n    var _this;\n\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, WebMercatorViewport);\n\n    var _opts$latitude = opts.latitude,\n        latitude = _opts$latitude === void 0 ? 0 : _opts$latitude,\n        _opts$longitude = opts.longitude,\n        longitude = _opts$longitude === void 0 ? 0 : _opts$longitude,\n        _opts$zoom = opts.zoom,\n        zoom = _opts$zoom === void 0 ? 11 : _opts$zoom,\n        _opts$pitch = opts.pitch,\n        pitch = _opts$pitch === void 0 ? 0 : _opts$pitch,\n        _opts$bearing = opts.bearing,\n        bearing = _opts$bearing === void 0 ? 0 : _opts$bearing,\n        _opts$nearZMultiplier = opts.nearZMultiplier,\n        nearZMultiplier = _opts$nearZMultiplier === void 0 ? 0.1 : _opts$nearZMultiplier,\n        _opts$farZMultiplier = opts.farZMultiplier,\n        farZMultiplier = _opts$farZMultiplier === void 0 ? 1.01 : _opts$farZMultiplier,\n        _opts$orthographic = opts.orthographic,\n        orthographic = _opts$orthographic === void 0 ? false : _opts$orthographic,\n        _opts$repeat = opts.repeat,\n        repeat = _opts$repeat === void 0 ? false : _opts$repeat,\n        _opts$worldOffset = opts.worldOffset,\n        worldOffset = _opts$worldOffset === void 0 ? 0 : _opts$worldOffset;\n    var width = opts.width,\n        height = opts.height,\n        _opts$altitude = opts.altitude,\n        altitude = _opts$altitude === void 0 ? 1.5 : _opts$altitude;\n    var scale = Math.pow(2, zoom);\n    width = width || 1;\n    height = height || 1;\n    altitude = Math.max(0.75, altitude);\n\n    var _getProjectionParamet = getProjectionParameters({\n      width: width,\n      height: height,\n      pitch: pitch,\n      altitude: altitude,\n      nearZMultiplier: nearZMultiplier,\n      farZMultiplier: farZMultiplier\n    }),\n        fov = _getProjectionParamet.fov,\n        aspect = _getProjectionParamet.aspect,\n        focalDistance = _getProjectionParamet.focalDistance,\n        near = _getProjectionParamet.near,\n        far = _getProjectionParamet.far;\n\n    var viewMatrixUncentered = getViewMatrix({\n      height: height,\n      pitch: pitch,\n      bearing: bearing,\n      scale: scale,\n      altitude: altitude\n    });\n\n    if (worldOffset) {\n      var viewOffset = new Matrix4().translate([512 * worldOffset, 0, 0]);\n      viewMatrixUncentered = viewOffset.multiplyLeft(viewMatrixUncentered);\n    }\n\n    var viewportOpts = Object.assign({}, opts, {\n      width: width,\n      height: height,\n      viewMatrix: viewMatrixUncentered,\n      longitude: longitude,\n      latitude: latitude,\n      zoom: zoom,\n      orthographic: orthographic,\n      fovyRadians: fov,\n      aspect: aspect,\n      focalDistance: orthographic ? focalDistance : 1,\n      near: near,\n      far: far\n    });\n    _this = _super.call(this, viewportOpts);\n    _this.latitude = latitude;\n    _this.longitude = longitude;\n    _this.zoom = zoom;\n    _this.pitch = pitch;\n    _this.bearing = bearing;\n    _this.altitude = altitude;\n    _this.orthographic = orthographic;\n    _this._subViewports = repeat ? [] : null;\n    Object.freeze(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(WebMercatorViewport, [{\n    key: \"addMetersToLngLat\",\n    value: function addMetersToLngLat(lngLatZ, xyz) {\n      return _addMetersToLngLat(lngLatZ, xyz);\n    }\n  }, {\n    key: \"getMapCenterByLngLatPosition\",\n    value: function getMapCenterByLngLatPosition(_ref) {\n      var lngLat = _ref.lngLat,\n          pos = _ref.pos;\n      var fromLocation = pixelsToWorld(pos, this.pixelUnprojectionMatrix);\n      var toLocation = this.projectFlat(lngLat);\n      var translate = vec2.add([], toLocation, vec2.negate([], fromLocation));\n      var newCenter = vec2.add([], this.center, translate);\n      return this.unprojectFlat(newCenter);\n    }\n  }, {\n    key: \"getBounds\",\n    value: function getBounds() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var corners = _getBounds(this, options.z || 0);\n\n      return [Math.min(corners[0][0], corners[1][0], corners[2][0], corners[3][0]), Math.min(corners[0][1], corners[1][1], corners[2][1], corners[3][1]), Math.max(corners[0][0], corners[1][0], corners[2][0], corners[3][0]), Math.max(corners[0][1], corners[1][1], corners[2][1], corners[3][1])];\n    }\n  }, {\n    key: \"fitBounds\",\n    value: function fitBounds(bounds) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var width = this.width,\n          height = this.height;\n\n      var _fitBounds2 = _fitBounds(Object.assign({\n        width: width,\n        height: height,\n        bounds: bounds\n      }, options)),\n          longitude = _fitBounds2.longitude,\n          latitude = _fitBounds2.latitude,\n          zoom = _fitBounds2.zoom;\n\n      return new WebMercatorViewport({\n        width: width,\n        height: height,\n        longitude: longitude,\n        latitude: latitude,\n        zoom: zoom\n      });\n    }\n  }, {\n    key: \"subViewports\",\n    get: function get() {\n      if (this._subViewports && !this._subViewports.length) {\n        var bounds = this.getBounds();\n        var minOffset = Math.floor((bounds[0] + 180) / 360);\n        var maxOffset = Math.ceil((bounds[2] - 180) / 360);\n\n        for (var x = minOffset; x <= maxOffset; x++) {\n          var offsetViewport = x ? new WebMercatorViewport(_objectSpread(_objectSpread({}, this), {}, {\n            worldOffset: x\n          })) : this;\n\n          this._subViewports.push(offsetViewport);\n        }\n      }\n\n      return this._subViewports;\n    }\n  }]);\n\n  return WebMercatorViewport;\n}(Viewport);\n\nexport { WebMercatorViewport as default };\nWebMercatorViewport.displayName = 'WebMercatorViewport';\n//# sourceMappingURL=web-mercator-viewport.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _DEFAULT_TEXTURE_PARA;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Texture2D } from '@luma.gl/core';\nvar DEFAULT_TEXTURE_PARAMETERS = (_DEFAULT_TEXTURE_PARA = {}, _defineProperty(_DEFAULT_TEXTURE_PARA, 10241, 9987), _defineProperty(_DEFAULT_TEXTURE_PARA, 10240, 9729), _defineProperty(_DEFAULT_TEXTURE_PARA, 10242, 33071), _defineProperty(_DEFAULT_TEXTURE_PARA, 10243, 33071), _DEFAULT_TEXTURE_PARA);\nvar internalTextures = {};\nexport function createTexture(layer, image) {\n  var gl = layer.context && layer.context.gl;\n\n  if (!gl || !image) {\n    return null;\n  }\n\n  if (image instanceof Texture2D) {\n    return image;\n  } else if (image.constructor && image.constructor.name !== 'Object') {\n    image = {\n      data: image\n    };\n  }\n\n  var specialTextureParameters = null;\n\n  if (image.compressed) {\n    specialTextureParameters = _defineProperty({}, 10241, image.data.length > 1 ? 9985 : 9729);\n  }\n\n  var texture = new Texture2D(gl, _objectSpread(_objectSpread({}, image), {}, {\n    parameters: _objectSpread(_objectSpread(_objectSpread({}, DEFAULT_TEXTURE_PARAMETERS), specialTextureParameters), layer.props.textureParameters)\n  }));\n  internalTextures[texture.id] = true;\n  return texture;\n}\nexport function destroyTexture(texture) {\n  if (!texture || !(texture instanceof Texture2D)) {\n    return;\n  }\n\n  if (internalTextures[texture.id]) {\n    texture[\"delete\"]();\n    delete internalTextures[texture.id];\n  }\n}\n//# sourceMappingURL=texture.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { COORDINATE_SYSTEM } from '../../lib/constants';\nimport { getOffsetOrigin } from './viewport-uniforms';\nimport WebMercatorViewport from '../../viewports/web-mercator-viewport';\nimport * as vec4 from 'gl-matrix/vec4';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { addMetersToLngLat } from '@math.gl/web-mercator';\n\nfunction lngLatZToWorldPosition(lngLatZ, viewport) {\n  var offsetMode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var p = viewport.projectPosition(lngLatZ);\n\n  if (offsetMode && viewport instanceof WebMercatorViewport) {\n    var _lngLatZ = _slicedToArray(lngLatZ, 3),\n        longitude = _lngLatZ[0],\n        latitude = _lngLatZ[1],\n        _lngLatZ$ = _lngLatZ[2],\n        z = _lngLatZ$ === void 0 ? 0 : _lngLatZ$;\n\n    var distanceScales = viewport.getDistanceScales([longitude, latitude]);\n    p[2] = z * distanceScales.unitsPerMeter[2];\n  }\n\n  return p;\n}\n\nfunction normalizeParameters(opts) {\n  var normalizedParams = Object.assign({}, opts);\n  var coordinateSystem = opts.coordinateSystem;\n  var viewport = opts.viewport,\n      coordinateOrigin = opts.coordinateOrigin,\n      fromCoordinateSystem = opts.fromCoordinateSystem,\n      fromCoordinateOrigin = opts.fromCoordinateOrigin;\n\n  if (coordinateSystem === COORDINATE_SYSTEM.DEFAULT) {\n    coordinateSystem = viewport.isGeospatial ? COORDINATE_SYSTEM.LNGLAT : COORDINATE_SYSTEM.CARTESIAN;\n  }\n\n  if (fromCoordinateSystem === undefined) {\n    normalizedParams.fromCoordinateSystem = coordinateSystem;\n  }\n\n  if (fromCoordinateOrigin === undefined) {\n    normalizedParams.fromCoordinateOrigin = coordinateOrigin;\n  }\n\n  normalizedParams.coordinateSystem = coordinateSystem;\n  return normalizedParams;\n}\n\nexport function getWorldPosition(position, _ref) {\n  var viewport = _ref.viewport,\n      modelMatrix = _ref.modelMatrix,\n      coordinateSystem = _ref.coordinateSystem,\n      coordinateOrigin = _ref.coordinateOrigin,\n      offsetMode = _ref.offsetMode;\n\n  var _position = _slicedToArray(position, 3),\n      x = _position[0],\n      y = _position[1],\n      _position$ = _position[2],\n      z = _position$ === void 0 ? 0 : _position$;\n\n  if (modelMatrix) {\n    var _vec4$transformMat = vec4.transformMat4([], [x, y, z, 1.0], modelMatrix);\n\n    var _vec4$transformMat2 = _slicedToArray(_vec4$transformMat, 3);\n\n    x = _vec4$transformMat2[0];\n    y = _vec4$transformMat2[1];\n    z = _vec4$transformMat2[2];\n  }\n\n  switch (coordinateSystem) {\n    case COORDINATE_SYSTEM.LNGLAT:\n      return lngLatZToWorldPosition([x, y, z], viewport, offsetMode);\n\n    case COORDINATE_SYSTEM.LNGLAT_OFFSETS:\n      return lngLatZToWorldPosition([x + coordinateOrigin[0], y + coordinateOrigin[1], z + (coordinateOrigin[2] || 0)], viewport, offsetMode);\n\n    case COORDINATE_SYSTEM.METER_OFFSETS:\n      return lngLatZToWorldPosition(addMetersToLngLat(coordinateOrigin, [x, y, z]), viewport, offsetMode);\n\n    case COORDINATE_SYSTEM.CARTESIAN:\n    default:\n      return viewport.isGeospatial ? [x + coordinateOrigin[0], y + coordinateOrigin[1], z + coordinateOrigin[2]] : viewport.projectPosition([x, y, z]);\n  }\n}\nexport function projectPosition(position, params) {\n  var _normalizeParameters = normalizeParameters(params),\n      viewport = _normalizeParameters.viewport,\n      coordinateSystem = _normalizeParameters.coordinateSystem,\n      coordinateOrigin = _normalizeParameters.coordinateOrigin,\n      modelMatrix = _normalizeParameters.modelMatrix,\n      fromCoordinateSystem = _normalizeParameters.fromCoordinateSystem,\n      fromCoordinateOrigin = _normalizeParameters.fromCoordinateOrigin;\n\n  var _getOffsetOrigin = getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin),\n      geospatialOrigin = _getOffsetOrigin.geospatialOrigin,\n      shaderCoordinateOrigin = _getOffsetOrigin.shaderCoordinateOrigin,\n      offsetMode = _getOffsetOrigin.offsetMode;\n\n  var worldPosition = getWorldPosition(position, {\n    viewport: viewport,\n    modelMatrix: modelMatrix,\n    coordinateSystem: fromCoordinateSystem,\n    coordinateOrigin: fromCoordinateOrigin,\n    offsetMode: offsetMode\n  });\n\n  if (offsetMode) {\n    var positionCommonSpace = viewport.projectPosition(geospatialOrigin || shaderCoordinateOrigin);\n    vec3.sub(worldPosition, worldPosition, positionCommonSpace);\n  }\n\n  return worldPosition;\n}\n//# sourceMappingURL=project-functions.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { createTexture, destroyTexture } from '../utils/texture';\nvar TYPE_DEFINITIONS = {\n  \"boolean\": {\n    validate: function validate(value, propType) {\n      return true;\n    },\n    equal: function equal(value1, value2, propType) {\n      return Boolean(value1) === Boolean(value2);\n    }\n  },\n  number: {\n    validate: function validate(value, propType) {\n      return Number.isFinite(value) && (!('max' in propType) || value <= propType.max) && (!('min' in propType) || value >= propType.min);\n    }\n  },\n  color: {\n    validate: function validate(value, propType) {\n      return propType.optional && !value || isArray(value) && (value.length === 3 || value.length === 4);\n    },\n    equal: function equal(value1, value2, propType) {\n      return arrayEqual(value1, value2);\n    }\n  },\n  accessor: {\n    validate: function validate(value, propType) {\n      var valueType = getTypeOf(value);\n      return valueType === 'function' || valueType === getTypeOf(propType.value);\n    },\n    equal: function equal(value1, value2, propType) {\n      if (typeof value2 === 'function') {\n        return true;\n      }\n\n      return arrayEqual(value1, value2);\n    }\n  },\n  array: {\n    validate: function validate(value, propType) {\n      return propType.optional && !value || isArray(value);\n    },\n    equal: function equal(value1, value2, propType) {\n      return propType.compare ? arrayEqual(value1, value2) : value1 === value2;\n    }\n  },\n  \"function\": {\n    validate: function validate(value, propType) {\n      return propType.optional && !value || typeof value === 'function';\n    },\n    equal: function equal(value1, value2, propType) {\n      return !propType.compare || value1 === value2;\n    }\n  },\n  data: {\n    transform: function transform(value, propType, component) {\n      var _ref = component ? component.props : {},\n          dataTransform = _ref.dataTransform;\n\n      return dataTransform && value ? dataTransform(value) : value;\n    }\n  },\n  image: {\n    transform: function transform(value, propType, component) {\n      return createTexture(component, value);\n    },\n    release: function release(value) {\n      destroyTexture(value);\n    }\n  }\n};\n\nfunction arrayEqual(array1, array2) {\n  if (array1 === array2) {\n    return true;\n  }\n\n  if (!isArray(array1) || !isArray(array2)) {\n    return false;\n  }\n\n  var len = array1.length;\n\n  if (len !== array2.length) {\n    return false;\n  }\n\n  for (var i = 0; i < len; i++) {\n    if (array1[i] !== array2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function parsePropTypes(propDefs) {\n  var propTypes = {};\n  var defaultProps = {};\n  var deprecatedProps = {};\n\n  for (var _i = 0, _Object$entries = Object.entries(propDefs); _i < _Object$entries.length; _i++) {\n    var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n        propName = _Object$entries$_i[0],\n        propDef = _Object$entries$_i[1];\n\n    if (propDef && propDef.deprecatedFor) {\n      deprecatedProps[propName] = Array.isArray(propDef.deprecatedFor) ? propDef.deprecatedFor : [propDef.deprecatedFor];\n    } else {\n      var propType = parsePropType(propName, propDef);\n      propTypes[propName] = propType;\n      defaultProps[propName] = propType.value;\n    }\n  }\n\n  return {\n    propTypes: propTypes,\n    defaultProps: defaultProps,\n    deprecatedProps: deprecatedProps\n  };\n}\n\nfunction parsePropType(name, propDef) {\n  switch (getTypeOf(propDef)) {\n    case 'object':\n      return normalizePropDefinition(name, propDef);\n\n    case 'array':\n      return normalizePropDefinition(name, {\n        type: 'array',\n        value: propDef,\n        compare: false\n      });\n\n    case 'boolean':\n      return normalizePropDefinition(name, {\n        type: 'boolean',\n        value: propDef\n      });\n\n    case 'number':\n      return normalizePropDefinition(name, {\n        type: 'number',\n        value: propDef\n      });\n\n    case 'function':\n      return normalizePropDefinition(name, {\n        type: 'function',\n        value: propDef,\n        compare: true\n      });\n\n    default:\n      return {\n        name: name,\n        type: 'unknown',\n        value: propDef\n      };\n  }\n}\n\nfunction normalizePropDefinition(name, propDef) {\n  if (!('type' in propDef)) {\n    if (!('value' in propDef)) {\n      return {\n        name: name,\n        type: 'object',\n        value: propDef\n      };\n    }\n\n    return Object.assign({\n      name: name,\n      type: getTypeOf(propDef.value)\n    }, propDef);\n  }\n\n  return Object.assign({\n    name: name\n  }, TYPE_DEFINITIONS[propDef.type], propDef);\n}\n\nfunction isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value);\n}\n\nfunction getTypeOf(value) {\n  if (isArray(value)) {\n    return 'array';\n  }\n\n  if (value === null) {\n    return 'null';\n  }\n\n  return _typeof(value);\n}\n//# sourceMappingURL=prop-types.js.map","function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport log from '../utils/log';\nimport { isAsyncIterable } from '../utils/iterable-utils';\nimport { parsePropTypes } from './prop-types';\nimport { PROP_SYMBOLS } from './constants';\nvar COMPONENT = PROP_SYMBOLS.COMPONENT,\n    ASYNC_ORIGINAL = PROP_SYMBOLS.ASYNC_ORIGINAL,\n    ASYNC_RESOLVED = PROP_SYMBOLS.ASYNC_RESOLVED,\n    ASYNC_DEFAULTS = PROP_SYMBOLS.ASYNC_DEFAULTS;\nexport function createProps() {\n  var component = this;\n  var propsPrototype = getPropsPrototype(component.constructor);\n  var propsInstance = Object.create(propsPrototype);\n  propsInstance[COMPONENT] = component;\n  propsInstance[ASYNC_ORIGINAL] = {};\n  propsInstance[ASYNC_RESOLVED] = {};\n\n  for (var i = 0; i < arguments.length; ++i) {\n    var props = arguments[i];\n\n    for (var key in props) {\n      propsInstance[key] = props[key];\n    }\n  }\n\n  Object.freeze(propsInstance);\n  return propsInstance;\n}\n\nfunction getPropsPrototype(componentClass) {\n  var defaultProps = getOwnProperty(componentClass, '_mergedDefaultProps');\n\n  if (!defaultProps) {\n    createPropsPrototypeAndTypes(componentClass);\n    return componentClass._mergedDefaultProps;\n  }\n\n  return defaultProps;\n}\n\nfunction createPropsPrototypeAndTypes(componentClass) {\n  var parent = componentClass.prototype;\n\n  if (!parent) {\n    return;\n  }\n\n  var parentClass = Object.getPrototypeOf(componentClass);\n  var parentDefaultProps = getPropsPrototype(parentClass);\n  var componentDefaultProps = getOwnProperty(componentClass, 'defaultProps') || {};\n  var componentPropDefs = parsePropTypes(componentDefaultProps);\n  var defaultProps = createPropsPrototype(componentPropDefs.defaultProps, parentDefaultProps, componentClass);\n  var propTypes = Object.assign({}, parentClass._propTypes, componentPropDefs.propTypes);\n  addAsyncPropsToPropPrototype(defaultProps, propTypes);\n  var deprecatedProps = Object.assign({}, parentClass._deprecatedProps, componentPropDefs.deprecatedProps);\n  addDeprecatedPropsToPropPrototype(defaultProps, deprecatedProps);\n  componentClass._mergedDefaultProps = defaultProps;\n  componentClass._propTypes = propTypes;\n  componentClass._deprecatedProps = deprecatedProps;\n}\n\nfunction createPropsPrototype(props, parentProps, componentClass) {\n  var defaultProps = Object.create(null);\n  Object.assign(defaultProps, parentProps, props);\n  var id = getComponentName(componentClass);\n  delete props.id;\n  Object.defineProperties(defaultProps, {\n    id: {\n      writable: true,\n      value: id\n    }\n  });\n  return defaultProps;\n}\n\nfunction addDeprecatedPropsToPropPrototype(defaultProps, deprecatedProps) {\n  var _loop = function _loop(propName) {\n    Object.defineProperty(defaultProps, propName, {\n      enumerable: false,\n      set: function set(newValue) {\n        var nameStr = \"\".concat(this.id, \": \").concat(propName);\n\n        var _iterator = _createForOfIteratorHelper(deprecatedProps[propName]),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var newPropName = _step.value;\n\n            if (!hasOwnProperty(this, newPropName)) {\n              this[newPropName] = newValue;\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n\n        log.deprecated(nameStr, deprecatedProps[propName].join('/'))();\n      }\n    });\n  };\n\n  for (var propName in deprecatedProps) {\n    _loop(propName);\n  }\n}\n\nfunction addAsyncPropsToPropPrototype(defaultProps, propTypes) {\n  var defaultValues = {};\n  var descriptors = {};\n\n  for (var propName in propTypes) {\n    var propType = propTypes[propName];\n    var name = propType.name,\n        value = propType.value;\n\n    if (propType.async) {\n      defaultValues[name] = value;\n      descriptors[name] = getDescriptorForAsyncProp(name, value);\n    }\n  }\n\n  defaultProps[ASYNC_DEFAULTS] = defaultValues;\n  defaultProps[ASYNC_ORIGINAL] = {};\n  Object.defineProperties(defaultProps, descriptors);\n}\n\nfunction getDescriptorForAsyncProp(name) {\n  return {\n    enumerable: true,\n    set: function set(newValue) {\n      if (typeof newValue === 'string' || newValue instanceof Promise || isAsyncIterable(newValue)) {\n        this[ASYNC_ORIGINAL][name] = newValue;\n      } else {\n        this[ASYNC_RESOLVED][name] = newValue;\n      }\n    },\n    get: function get() {\n      if (this[ASYNC_RESOLVED]) {\n        if (name in this[ASYNC_RESOLVED]) {\n          var value = this[ASYNC_RESOLVED][name];\n          return value || this[ASYNC_DEFAULTS][name];\n        }\n\n        if (name in this[ASYNC_ORIGINAL]) {\n          var state = this[COMPONENT] && this[COMPONENT].internalState;\n\n          if (state && state.hasAsyncProp(name)) {\n            return state.getAsyncProp(name) || this[ASYNC_DEFAULTS][name];\n          }\n        }\n      }\n\n      return this[ASYNC_DEFAULTS][name];\n    }\n  };\n}\n\nfunction hasOwnProperty(object, prop) {\n  return Object.prototype.hasOwnProperty.call(object, prop);\n}\n\nfunction getOwnProperty(object, prop) {\n  return hasOwnProperty(object, prop) && object[prop];\n}\n\nfunction getComponentName(componentClass) {\n  var componentName = getOwnProperty(componentClass, 'layerName') || getOwnProperty(componentClass, 'componentName');\n\n  if (!componentName) {\n    log.once(0, \"\".concat(componentClass.name, \".componentName not specified\"))();\n  }\n\n  return componentName || componentClass.name;\n}\n//# sourceMappingURL=create-props.js.map","export default function _asyncIterator(iterable) {\n  var method;\n\n  if (typeof Symbol !== \"undefined\") {\n    if (Symbol.asyncIterator) {\n      method = iterable[Symbol.asyncIterator];\n      if (method != null) return method.call(iterable);\n    }\n\n    if (Symbol.iterator) {\n      method = iterable[Symbol.iterator];\n      if (method != null) return method.call(iterable);\n    }\n  }\n\n  throw new TypeError(\"Object is not async iterable\");\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _asyncIterator from \"@babel/runtime/helpers/esm/asyncIterator\";\nimport log from '../utils/log';\nimport { isAsyncIterable } from '../utils/iterable-utils';\nimport { PROP_SYMBOLS } from './constants';\nvar ASYNC_ORIGINAL = PROP_SYMBOLS.ASYNC_ORIGINAL,\n    ASYNC_RESOLVED = PROP_SYMBOLS.ASYNC_RESOLVED,\n    ASYNC_DEFAULTS = PROP_SYMBOLS.ASYNC_DEFAULTS;\nvar EMPTY_PROPS = Object.freeze({});\n\nvar ComponentState = function () {\n  function ComponentState() {\n    var component = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n    _classCallCheck(this, ComponentState);\n\n    this.component = component;\n    this.asyncProps = {};\n\n    this.onAsyncPropUpdated = function () {};\n\n    this.oldProps = EMPTY_PROPS;\n    this.oldAsyncProps = null;\n  }\n\n  _createClass(ComponentState, [{\n    key: \"finalize\",\n    value: function finalize() {\n      for (var propName in this.asyncProps) {\n        var asyncProp = this.asyncProps[propName];\n\n        if (asyncProp.type && asyncProp.type.release) {\n          asyncProp.type.release(asyncProp.resolvedValue, asyncProp.type, this.component);\n        }\n      }\n    }\n  }, {\n    key: \"getOldProps\",\n    value: function getOldProps() {\n      return this.oldAsyncProps || this.oldProps;\n    }\n  }, {\n    key: \"resetOldProps\",\n    value: function resetOldProps() {\n      this.oldAsyncProps = null;\n      this.oldProps = this.component.props;\n    }\n  }, {\n    key: \"freezeAsyncOldProps\",\n    value: function freezeAsyncOldProps() {\n      if (!this.oldAsyncProps) {\n        this.oldProps = this.oldProps || this.component.props;\n        this.oldAsyncProps = Object.create(this.oldProps);\n\n        for (var propName in this.asyncProps) {\n          Object.defineProperty(this.oldAsyncProps, propName, {\n            enumerable: true,\n            value: this.oldProps[propName]\n          });\n        }\n      }\n    }\n  }, {\n    key: \"hasAsyncProp\",\n    value: function hasAsyncProp(propName) {\n      return propName in this.asyncProps;\n    }\n  }, {\n    key: \"getAsyncProp\",\n    value: function getAsyncProp(propName) {\n      var asyncProp = this.asyncProps[propName];\n      return asyncProp && asyncProp.resolvedValue;\n    }\n  }, {\n    key: \"isAsyncPropLoading\",\n    value: function isAsyncPropLoading(propName) {\n      if (propName) {\n        var asyncProp = this.asyncProps[propName];\n        return Boolean(asyncProp && asyncProp.pendingLoadCount > 0 && asyncProp.pendingLoadCount !== asyncProp.resolvedLoadCount);\n      }\n\n      for (var key in this.asyncProps) {\n        if (this.isAsyncPropLoading(key)) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"reloadAsyncProp\",\n    value: function reloadAsyncProp(propName, value) {\n      this._watchPromise(propName, Promise.resolve(value));\n    }\n  }, {\n    key: \"setAsyncProps\",\n    value: function setAsyncProps(props) {\n      var resolvedValues = props[ASYNC_RESOLVED] || {};\n      var originalValues = props[ASYNC_ORIGINAL] || props;\n      var defaultValues = props[ASYNC_DEFAULTS] || {};\n\n      for (var propName in resolvedValues) {\n        var value = resolvedValues[propName];\n\n        this._createAsyncPropData(propName, defaultValues[propName]);\n\n        this._updateAsyncProp(propName, value);\n\n        resolvedValues[propName] = this.getAsyncProp(propName);\n      }\n\n      for (var _propName in originalValues) {\n        var _value2 = originalValues[_propName];\n\n        this._createAsyncPropData(_propName, defaultValues[_propName]);\n\n        this._updateAsyncProp(_propName, _value2);\n      }\n    }\n  }, {\n    key: \"_updateAsyncProp\",\n    value: function _updateAsyncProp(propName, value) {\n      if (!this._didAsyncInputValueChange(propName, value)) {\n        return;\n      }\n\n      if (typeof value === 'string') {\n        var fetch = this.layer && this.layer.props.fetch;\n        var url = value;\n\n        if (fetch) {\n          value = fetch(url, {\n            propName: propName,\n            layer: this.layer\n          });\n        }\n      }\n\n      if (value instanceof Promise) {\n        this._watchPromise(propName, value);\n\n        return;\n      }\n\n      if (isAsyncIterable(value)) {\n        this._resolveAsyncIterable(propName, value);\n\n        return;\n      }\n\n      this._setPropValue(propName, value);\n    }\n  }, {\n    key: \"_didAsyncInputValueChange\",\n    value: function _didAsyncInputValueChange(propName, value) {\n      var asyncProp = this.asyncProps[propName];\n\n      if (value === asyncProp.resolvedValue || value === asyncProp.lastValue) {\n        return false;\n      }\n\n      asyncProp.lastValue = value;\n      return true;\n    }\n  }, {\n    key: \"_setPropValue\",\n    value: function _setPropValue(propName, value) {\n      var asyncProp = this.asyncProps[propName];\n      value = this._postProcessValue(asyncProp, value);\n      asyncProp.resolvedValue = value;\n      asyncProp.pendingLoadCount++;\n      asyncProp.resolvedLoadCount = asyncProp.pendingLoadCount;\n    }\n  }, {\n    key: \"_setAsyncPropValue\",\n    value: function _setAsyncPropValue(propName, value, loadCount) {\n      var asyncProp = this.asyncProps[propName];\n\n      if (asyncProp && loadCount >= asyncProp.resolvedLoadCount && value !== undefined) {\n        this.freezeAsyncOldProps();\n        asyncProp.resolvedValue = value;\n        asyncProp.resolvedLoadCount = loadCount;\n        this.onAsyncPropUpdated(propName, value);\n      }\n    }\n  }, {\n    key: \"_watchPromise\",\n    value: function _watchPromise(propName, promise) {\n      var _this = this;\n\n      var asyncProp = this.asyncProps[propName];\n      asyncProp.pendingLoadCount++;\n      var loadCount = asyncProp.pendingLoadCount;\n      promise.then(function (data) {\n        data = _this._postProcessValue(asyncProp, data);\n\n        _this._setAsyncPropValue(propName, data, loadCount);\n\n        var onDataLoad = _this.layer && _this.layer.props.onDataLoad;\n\n        if (propName === 'data' && onDataLoad) {\n          onDataLoad(data, {\n            propName: propName,\n            layer: _this.layer\n          });\n        }\n      })[\"catch\"](function (error) {\n        return log.error(error)();\n      });\n    }\n  }, {\n    key: \"_resolveAsyncIterable\",\n    value: function () {\n      var _resolveAsyncIterable2 = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(propName, iterable) {\n        var asyncProp, loadCount, data, count, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, _value, chunk, _ref, dataTransform, onDataLoad;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (propName !== 'data') {\n                  this._setPropValue(propName, iterable);\n                }\n\n                asyncProp = this.asyncProps[propName];\n                asyncProp.pendingLoadCount++;\n                loadCount = asyncProp.pendingLoadCount;\n                data = [];\n                count = 0;\n                _iteratorNormalCompletion = true;\n                _didIteratorError = false;\n                _context.prev = 8;\n                _iterator = _asyncIterator(iterable);\n\n              case 10:\n                _context.next = 12;\n                return _iterator.next();\n\n              case 12:\n                _step = _context.sent;\n                _iteratorNormalCompletion = _step.done;\n                _context.next = 16;\n                return _step.value;\n\n              case 16:\n                _value = _context.sent;\n\n                if (_iteratorNormalCompletion) {\n                  _context.next = 27;\n                  break;\n                }\n\n                chunk = _value;\n                _ref = this.component ? this.component.props : {}, dataTransform = _ref.dataTransform;\n\n                if (dataTransform) {\n                  data = dataTransform(chunk, data);\n                } else {\n                  data = data.concat(chunk);\n                }\n\n                Object.defineProperty(data, '__diff', {\n                  enumerable: false,\n                  value: [{\n                    startRow: count,\n                    endRow: data.length\n                  }]\n                });\n                count = data.length;\n\n                this._setAsyncPropValue(propName, data, loadCount);\n\n              case 24:\n                _iteratorNormalCompletion = true;\n                _context.next = 10;\n                break;\n\n              case 27:\n                _context.next = 33;\n                break;\n\n              case 29:\n                _context.prev = 29;\n                _context.t0 = _context[\"catch\"](8);\n                _didIteratorError = true;\n                _iteratorError = _context.t0;\n\n              case 33:\n                _context.prev = 33;\n                _context.prev = 34;\n\n                if (!(!_iteratorNormalCompletion && _iterator[\"return\"] != null)) {\n                  _context.next = 38;\n                  break;\n                }\n\n                _context.next = 38;\n                return _iterator[\"return\"]();\n\n              case 38:\n                _context.prev = 38;\n\n                if (!_didIteratorError) {\n                  _context.next = 41;\n                  break;\n                }\n\n                throw _iteratorError;\n\n              case 41:\n                return _context.finish(38);\n\n              case 42:\n                return _context.finish(33);\n\n              case 43:\n                onDataLoad = this.layer && this.layer.props.onDataLoad;\n\n                if (onDataLoad) {\n                  onDataLoad(data, {\n                    propName: propName,\n                    layer: this.layer\n                  });\n                }\n\n              case 45:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[8, 29, 33, 43], [34,, 38, 42]]);\n      }));\n\n      function _resolveAsyncIterable(_x, _x2) {\n        return _resolveAsyncIterable2.apply(this, arguments);\n      }\n\n      return _resolveAsyncIterable;\n    }()\n  }, {\n    key: \"_postProcessValue\",\n    value: function _postProcessValue(asyncProp, value) {\n      var propType = asyncProp.type;\n\n      if (propType) {\n        if (propType.release) {\n          propType.release(asyncProp.resolvedValue, propType, this.component);\n        }\n\n        if (propType.transform) {\n          return propType.transform(value, propType, this.component);\n        }\n      }\n\n      return value;\n    }\n  }, {\n    key: \"_createAsyncPropData\",\n    value: function _createAsyncPropData(propName, defaultValue) {\n      var asyncProp = this.asyncProps[propName];\n\n      if (!asyncProp) {\n        var propTypes = this.component && this.component.constructor._propTypes;\n        this.asyncProps[propName] = {\n          type: propTypes && propTypes[propName],\n          lastValue: null,\n          resolvedValue: defaultValue,\n          pendingLoadCount: 0,\n          resolvedLoadCount: 0\n        };\n      }\n    }\n  }]);\n\n  return ComponentState;\n}();\n\nexport { ComponentState as default };\n//# sourceMappingURL=component-state.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { LIFECYCLE } from '../lifecycle/constants';\nimport { createProps } from './create-props';\nimport { PROP_SYMBOLS } from './constants';\nvar ASYNC_ORIGINAL = PROP_SYMBOLS.ASYNC_ORIGINAL,\n    ASYNC_RESOLVED = PROP_SYMBOLS.ASYNC_RESOLVED,\n    ASYNC_DEFAULTS = PROP_SYMBOLS.ASYNC_DEFAULTS;\nimport ComponentState from './component-state';\nvar defaultProps = {};\nvar counter = 0;\n\nvar Component = function () {\n  function Component() {\n    _classCallCheck(this, Component);\n\n    this.props = createProps.apply(this, arguments);\n    this.id = this.props.id;\n    this.count = counter++;\n    this.lifecycle = LIFECYCLE.NO_STATE;\n    this.parent = null;\n    this.context = null;\n    this.state = null;\n    this.internalState = null;\n    Object.seal(this);\n  }\n\n  _createClass(Component, [{\n    key: \"clone\",\n    value: function clone(newProps) {\n      var props = this.props;\n      var asyncProps = {};\n\n      for (var key in props[ASYNC_DEFAULTS]) {\n        if (key in props[ASYNC_RESOLVED]) {\n          asyncProps[key] = props[ASYNC_RESOLVED][key];\n        } else if (key in props[ASYNC_ORIGINAL]) {\n          asyncProps[key] = props[ASYNC_ORIGINAL][key];\n        }\n      }\n\n      return new this.constructor(Object.assign({}, props, asyncProps, newProps));\n    }\n  }, {\n    key: \"_initState\",\n    value: function _initState() {\n      this.internalState = new ComponentState({});\n    }\n  }, {\n    key: \"stats\",\n    get: function get() {\n      return this.internalState.stats;\n    }\n  }]);\n\n  return Component;\n}();\n\nexport { Component as default };\nComponent.componentName = 'Component';\nComponent.defaultProps = defaultProps;\n//# sourceMappingURL=component.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport ComponentState from '../lifecycle/component-state';\n\nvar LayerState = function (_ComponentState) {\n  _inherits(LayerState, _ComponentState);\n\n  var _super = _createSuper(LayerState);\n\n  function LayerState(_ref) {\n    var _this;\n\n    var attributeManager = _ref.attributeManager,\n        layer = _ref.layer;\n\n    _classCallCheck(this, LayerState);\n\n    _this = _super.call(this, layer);\n    _this.attributeManager = attributeManager;\n    _this.model = null;\n    _this.needsRedraw = true;\n    _this.subLayers = null;\n    _this.usesPickingColorCache = false;\n    return _this;\n  }\n\n  _createClass(LayerState, [{\n    key: \"layer\",\n    get: function get() {\n      return this.component;\n    },\n    set: function set(layer) {\n      this.component = layer;\n    }\n  }]);\n\n  return LayerState;\n}(ComponentState);\n\nexport { LayerState as default };\n//# sourceMappingURL=layer-state.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nvar isBoolean = function isBoolean(x) {\n  return typeof x === 'boolean';\n};\n\nvar isFunction = function isFunction(x) {\n  return typeof x === 'function';\n};\n\nexport var isObject = function isObject(x) {\n  return x !== null && _typeof(x) === 'object';\n};\nexport var isPureObject = function isPureObject(x) {\n  return isObject(x) && x.constructor === {}.constructor;\n};\nexport var isPromise = function isPromise(x) {\n  return isObject(x) && isFunction(x.then);\n};\nexport var isIterable = function isIterable(x) {\n  return x && typeof x[Symbol.iterator] === 'function';\n};\nexport var isAsyncIterable = function isAsyncIterable(x) {\n  return x && typeof x[Symbol.asyncIterator] === 'function';\n};\nexport var isIterator = function isIterator(x) {\n  return x && isFunction(x.next);\n};\nexport var isResponse = function isResponse(x) {\n  return typeof Response !== 'undefined' && x instanceof Response || x && x.arrayBuffer && x.text && x.json;\n};\nexport var isFile = function isFile(x) {\n  return typeof File !== 'undefined' && x instanceof File;\n};\nexport var isBlob = function isBlob(x) {\n  return typeof Blob !== 'undefined' && x instanceof Blob;\n};\nexport var isWritableDOMStream = function isWritableDOMStream(x) {\n  return isObject(x) && isFunction(x.abort) && isFunction(x.getWriter);\n};\nexport var isReadableDOMStream = function isReadableDOMStream(x) {\n  return typeof ReadableStream !== 'undefined' && x instanceof ReadableStream || isObject(x) && isFunction(x.tee) && isFunction(x.cancel) && isFunction(x.getReader);\n};\nexport var isBuffer = function isBuffer(x) {\n  return x && _typeof(x) === 'object' && x.isBuffer;\n};\nexport var isWritableNodeStream = function isWritableNodeStream(x) {\n  return isObject(x) && isFunction(x.end) && isFunction(x.write) && isBoolean(x.writable);\n};\nexport var isReadableNodeStream = function isReadableNodeStream(x) {\n  return isObject(x) && isFunction(x.read) && isFunction(x.pipe) && isBoolean(x.readable);\n};\nexport var isReadableStream = function isReadableStream(x) {\n  return isReadableDOMStream(x) || isReadableNodeStream(x);\n};\nexport var isWritableStream = function isWritableStream(x) {\n  return isWritableDOMStream(x) || isWritableNodeStream(x);\n};\n//# sourceMappingURL=is-type.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loader assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { assert } from '@loaders.gl/loader-utils';\nexport function isLoaderObject(loader) {\n  if (!loader) {\n    return false;\n  }\n\n  if (Array.isArray(loader)) {\n    loader = loader[0];\n  }\n\n  var hasParser = loader.parseTextSync || loader.parseSync || loader.parse || loader.parseStream || loader.parseInBatches;\n  var loaderOptions = loader.options && loader.options[loader.id];\n  hasParser = hasParser || loaderOptions && loaderOptions.workerUrl;\n  return hasParser;\n}\nexport function normalizeLoader(loader) {\n  assert(loader, 'null loader');\n  assert(isLoaderObject(loader), 'invalid loader');\n  var options;\n\n  if (Array.isArray(loader)) {\n    options = loader[1];\n    loader = loader[0];\n    loader = _objectSpread(_objectSpread({}, loader), {}, {\n      options: _objectSpread(_objectSpread({}, loader.options), options)\n    });\n  }\n\n  if (loader.extension) {\n    loader.extensions = loader.extensions || loader.extension;\n    delete loader.extension;\n  }\n\n  if (!Array.isArray(loader.extensions)) {\n    loader.extensions = [loader.extensions];\n  }\n\n  assert(loader.extensions && loader.extensions.length > 0 && loader.extensions[0]);\n\n  if (loader.parseTextSync || loader.parseText) {\n    loader.text = true;\n  }\n\n  if (!loader.text) {\n    loader.binary = true;\n  }\n\n  return loader;\n}\n//# sourceMappingURL=normalize-loader.js.map","var pathPrefix = '';\nvar fileAliases = {};\nexport function setPathPrefix(prefix) {\n  pathPrefix = prefix;\n}\nexport function getPathPrefix() {\n  return pathPrefix;\n}\nexport function addAliases(aliases) {\n  Object.assign(fileAliases, aliases);\n}\nexport function resolvePath(filename) {\n  for (var alias in fileAliases) {\n    if (filename.startsWith(alias)) {\n      var replacement = fileAliases[alias];\n      filename = filename.replace(alias, replacement);\n    }\n  }\n\n  if (!filename.startsWith('http://') && !filename.startsWith('https://')) {\n    filename = \"\".concat(pathPrefix).concat(filename);\n  }\n\n  return filename;\n}\n//# sourceMappingURL=file-aliases.js.map","var DATA_URL_PATTERN = /^data:([-\\w.]+\\/[-\\w.+]+)(;|,)/;\nvar MIME_TYPE_PATTERN = /^([-\\w.]+\\/[-\\w.+]+)/;\nexport function parseMIMEType(mimeString) {\n  if (typeof mimeString !== 'string') {\n    return '';\n  }\n\n  var matches = mimeString.match(MIME_TYPE_PATTERN);\n\n  if (matches) {\n    return matches[1];\n  }\n\n  return mimeString;\n}\nexport function parseMIMETypeFromURL(dataUrl) {\n  if (typeof dataUrl !== 'string') {\n    return '';\n  }\n\n  var matches = dataUrl.match(DATA_URL_PATTERN);\n\n  if (matches) {\n    return matches[1];\n  }\n\n  return '';\n}\n//# sourceMappingURL=mime-type-utils.js.map","import { isResponse, isBlob } from '../../javascript-utils/is-type';\nimport { parseMIMEType, parseMIMETypeFromURL } from './mime-type-utils';\nvar QUERY_STRING_PATTERN = /\\?.*/;\nexport function getResourceUrlAndType(resource) {\n  if (isResponse(resource)) {\n    var contentType = parseMIMEType(resource.headers.get('content-type'));\n    var urlType = parseMIMETypeFromURL(resource.url);\n    return {\n      url: stripQueryString(resource.url || ''),\n      type: contentType || urlType || null\n    };\n  }\n\n  if (isBlob(resource)) {\n    return {\n      url: stripQueryString(resource.name || ''),\n      type: resource.type || ''\n    };\n  }\n\n  if (typeof resource === 'string') {\n    return {\n      url: stripQueryString(resource),\n      type: parseMIMETypeFromURL(resource)\n    };\n  }\n\n  return {\n    url: '',\n    type: ''\n  };\n}\nexport function getResourceContentLength(resource) {\n  if (isResponse(resource)) {\n    return resource.headers['content-length'] || -1;\n  }\n\n  if (isBlob(resource)) {\n    return resource.size;\n  }\n\n  if (typeof resource === 'string') {\n    return resource.length;\n  }\n\n  if (resource instanceof ArrayBuffer) {\n    return resource.byteLength;\n  }\n\n  if (ArrayBuffer.isView(resource)) {\n    return resource.byteLength;\n  }\n\n  return -1;\n}\n\nfunction stripQueryString(url) {\n  return url.replace(QUERY_STRING_PATTERN, '');\n}\n//# sourceMappingURL=resource-utils.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { isResponse } from '../../javascript-utils/is-type';\nimport { getResourceContentLength, getResourceUrlAndType } from './resource-utils';\nexport function makeResponse(_x) {\n  return _makeResponse.apply(this, arguments);\n}\n\nfunction _makeResponse() {\n  _makeResponse = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(resource) {\n    var headers, contentLength, _getResourceUrlAndTyp, url, type, initialDataUrl, response;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!isResponse(resource)) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\", resource);\n\n          case 2:\n            headers = {};\n            contentLength = getResourceContentLength(resource);\n\n            if (contentLength >= 0) {\n              headers['content-length'] = String(contentLength);\n            }\n\n            _getResourceUrlAndTyp = getResourceUrlAndType(resource), url = _getResourceUrlAndTyp.url, type = _getResourceUrlAndTyp.type;\n\n            if (type) {\n              headers['content-type'] = type;\n            }\n\n            _context.next = 9;\n            return getInitialDataUrl(resource);\n\n          case 9:\n            initialDataUrl = _context.sent;\n\n            if (initialDataUrl) {\n              headers['x-first-bytes'] = initialDataUrl;\n            }\n\n            if (typeof resource === 'string') {\n              resource = new TextEncoder().encode(resource);\n            }\n\n            response = new Response(resource, {\n              headers: headers\n            });\n            Object.defineProperty(response, 'url', {\n              value: url\n            });\n            return _context.abrupt(\"return\", response);\n\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _makeResponse.apply(this, arguments);\n}\n\nexport function checkResponse(_x2) {\n  return _checkResponse.apply(this, arguments);\n}\n\nfunction _checkResponse() {\n  _checkResponse = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(response) {\n    var message;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (response.ok) {\n              _context2.next = 5;\n              break;\n            }\n\n            _context2.next = 3;\n            return getResponseError(response);\n\n          case 3:\n            message = _context2.sent;\n            throw new Error(message);\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _checkResponse.apply(this, arguments);\n}\n\nexport function checkResponseSync(response) {\n  if (!response.ok) {\n    var message = \"\".concat(response.status, \" \").concat(response.statusText);\n    message = message.length > 60 ? \"\".concat(message.slice(60), \"...\") : message;\n    throw new Error(message);\n  }\n}\n\nfunction getResponseError(_x3) {\n  return _getResponseError.apply(this, arguments);\n}\n\nfunction _getResponseError() {\n  _getResponseError = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3(response) {\n    var message, contentType, text;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            message = \"Failed to fetch resource \".concat(response.url, \" (\").concat(response.status, \"): \");\n            _context3.prev = 1;\n            contentType = response.headers.get('Content-Type');\n            text = response.statusText;\n\n            if (!contentType.includes('application/json')) {\n              _context3.next = 11;\n              break;\n            }\n\n            _context3.t0 = text;\n            _context3.t1 = \" \";\n            _context3.next = 9;\n            return response.text();\n\n          case 9:\n            _context3.t2 = _context3.sent;\n            text = _context3.t0 += _context3.t1.concat.call(_context3.t1, _context3.t2);\n\n          case 11:\n            message += text;\n            message = message.length > 60 ? \"\".concat(message.slice(60), \"...\") : message;\n            _context3.next = 17;\n            break;\n\n          case 15:\n            _context3.prev = 15;\n            _context3.t3 = _context3[\"catch\"](1);\n\n          case 17:\n            return _context3.abrupt(\"return\", message);\n\n          case 18:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[1, 15]]);\n  }));\n  return _getResponseError.apply(this, arguments);\n}\n\nfunction getInitialDataUrl(_x4) {\n  return _getInitialDataUrl.apply(this, arguments);\n}\n\nfunction _getInitialDataUrl() {\n  _getInitialDataUrl = _asyncToGenerator(_regeneratorRuntime.mark(function _callee4(resource) {\n    var INITIAL_DATA_LENGTH, blobSlice, slice, base64;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            INITIAL_DATA_LENGTH = 5;\n\n            if (!(typeof resource === 'string')) {\n              _context4.next = 3;\n              break;\n            }\n\n            return _context4.abrupt(\"return\", \"data:,\".concat(resource.slice(0, INITIAL_DATA_LENGTH)));\n\n          case 3:\n            if (!(resource instanceof Blob)) {\n              _context4.next = 8;\n              break;\n            }\n\n            blobSlice = resource.slice(0, 5);\n            _context4.next = 7;\n            return new Promise(function (resolve) {\n              var reader = new FileReader();\n\n              reader.onload = function (event) {\n                return resolve(event.target && event.target.result);\n              };\n\n              reader.readAsDataURL(blobSlice);\n            });\n\n          case 7:\n            return _context4.abrupt(\"return\", _context4.sent);\n\n          case 8:\n            if (!(resource instanceof ArrayBuffer)) {\n              _context4.next = 12;\n              break;\n            }\n\n            slice = resource.slice(0, INITIAL_DATA_LENGTH);\n            base64 = arrayBufferToBase64(slice);\n            return _context4.abrupt(\"return\", \"data:base64,\".concat(base64));\n\n          case 12:\n            return _context4.abrupt(\"return\", null);\n\n          case 13:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _getInitialDataUrl.apply(this, arguments);\n}\n\nfunction arrayBufferToBase64(buffer) {\n  var binary = '';\n  var bytes = new Uint8Array(buffer);\n\n  for (var i = 0; i < bytes.byteLength; i++) {\n    binary += String.fromCharCode(bytes[i]);\n  }\n\n  return btoa(binary);\n}\n//# sourceMappingURL=response-utils.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nexport function getErrorMessageFromResponseSync(response) {\n  return \"Failed to fetch resource \".concat(response.url, \"(\").concat(response.status, \"): \").concat(response.statusText, \" \");\n}\nexport function getErrorMessageFromResponse(_x) {\n  return _getErrorMessageFromResponse.apply(this, arguments);\n}\n\nfunction _getErrorMessageFromResponse() {\n  _getErrorMessageFromResponse = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(response) {\n    var message, contentType;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            message = \"Failed to fetch resource \".concat(response.url, \" (\").concat(response.status, \"): \");\n            _context.prev = 1;\n            contentType = response.headers.get('Content-Type');\n\n            if (!contentType.includes('application/json')) {\n              _context.next = 10;\n              break;\n            }\n\n            _context.t0 = message;\n            _context.next = 7;\n            return response.text();\n\n          case 7:\n            message = _context.t0 += _context.sent;\n            _context.next = 11;\n            break;\n\n          case 10:\n            message += response.statusText;\n\n          case 11:\n            _context.next = 16;\n            break;\n\n          case 13:\n            _context.prev = 13;\n            _context.t1 = _context[\"catch\"](1);\n            return _context.abrupt(\"return\", message);\n\n          case 16:\n            return _context.abrupt(\"return\", message);\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[1, 13]]);\n  }));\n  return _getErrorMessageFromResponse.apply(this, arguments);\n}\n//# sourceMappingURL=fetch-error-message.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { resolvePath } from '@loaders.gl/loader-utils';\nimport { makeResponse } from '../utils/response-utils';\nimport { getErrorMessageFromResponse } from './fetch-error-message';\nexport function fetchFile(_x) {\n  return _fetchFile.apply(this, arguments);\n}\n\nfunction _fetchFile() {\n  _fetchFile = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(url) {\n    var options,\n        response,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n\n            if (!(typeof url !== 'string')) {\n              _context.next = 5;\n              break;\n            }\n\n            _context.next = 4;\n            return makeResponse(url);\n\n          case 4:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 5:\n            url = resolvePath(url);\n            _context.next = 8;\n            return fetch(url, options);\n\n          case 8:\n            response = _context.sent;\n\n            if (!(!response.ok && options[\"throws\"])) {\n              _context.next = 15;\n              break;\n            }\n\n            _context.t0 = Error;\n            _context.next = 13;\n            return getErrorMessageFromResponse(response);\n\n          case 13:\n            _context.t1 = _context.sent;\n            throw new _context.t0(_context.t1);\n\n          case 15:\n            return _context.abrupt(\"return\", response);\n\n          case 16:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _fetchFile.apply(this, arguments);\n}\n//# sourceMappingURL=fetch-file.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nexport var NullLog = function () {\n  function NullLog() {\n    _classCallCheck(this, NullLog);\n  }\n\n  _createClass(NullLog, [{\n    key: \"log\",\n    value: function log() {\n      return function (_) {};\n    }\n  }, {\n    key: \"info\",\n    value: function info() {\n      return function (_) {};\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      return function (_) {};\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      return function (_) {};\n    }\n  }]);\n\n  return NullLog;\n}();\nexport var ConsoleLog = function () {\n  function ConsoleLog() {\n    _classCallCheck(this, ConsoleLog);\n\n    this.console = console;\n  }\n\n  _createClass(ConsoleLog, [{\n    key: \"log\",\n    value: function log() {\n      var _this$console$log;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return (_this$console$log = this.console.log).bind.apply(_this$console$log, [this.console].concat(args));\n    }\n  }, {\n    key: \"info\",\n    value: function info() {\n      var _this$console$info;\n\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return (_this$console$info = this.console.info).bind.apply(_this$console$info, [this.console].concat(args));\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      var _this$console$warn;\n\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      return (_this$console$warn = this.console.warn).bind.apply(_this$console$warn, [this.console].concat(args));\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      var _this$console$error;\n\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      return (_this$console$error = this.console.error).bind.apply(_this$console$error, [this.console].concat(args));\n    }\n  }]);\n\n  return ConsoleLog;\n}();\n//# sourceMappingURL=loggers.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { global } from '@loaders.gl/loader-utils';\nimport { isPureObject, isObject } from '../../javascript-utils/is-type';\nimport { fetchFile } from '../fetch/fetch-file';\nimport { NullLog, ConsoleLog } from './loggers';\nvar DEFAULT_LOADER_OPTIONS = {\n  baseUri: '',\n  fetch: null,\n  CDN: 'https://unpkg.com/@loaders.gl',\n  worker: true,\n  log: new ConsoleLog(),\n  metadata: false,\n  transforms: [],\n  reuseWorkers: true\n};\nvar DEPRECATED_LOADER_OPTIONS = {\n  dataType: '(no longer used)',\n  method: 'fetch.method',\n  headers: 'fetch.headers',\n  body: 'fetch.body',\n  mode: 'fetch.mode',\n  credentials: 'fetch.credentials',\n  cache: 'fetch.cache',\n  redirect: 'fetch.redirect',\n  referrer: 'fetch.referrer',\n  referrerPolicy: 'fetch.referrerPolicy',\n  integrity: 'fetch.integrity',\n  keepalive: 'fetch.keepalive',\n  signal: 'fetch.signal'\n};\nexport var getGlobalLoaderState = function getGlobalLoaderState() {\n  global.loaders = global.loaders || {};\n  var loaders = global.loaders;\n  loaders._state = loaders._state || {};\n  return loaders._state;\n};\n\nvar getGlobalLoaderOptions = function getGlobalLoaderOptions() {\n  var state = getGlobalLoaderState();\n  state.globalOptions = state.globalOptions || _objectSpread({}, DEFAULT_LOADER_OPTIONS);\n  return state.globalOptions;\n};\n\nexport function setGlobalOptions(options) {\n  var state = getGlobalLoaderState();\n  var globalOptions = getGlobalLoaderOptions();\n  state.globalOptions = normalizeOptionsInternal(globalOptions, options);\n}\nexport function normalizeOptions(options, loader, loaders, url) {\n  loaders = loaders || [];\n  loaders = Array.isArray(loaders) ? loaders : [loaders];\n  validateOptions(options, loaders);\n  return normalizeOptionsInternal(loader, options, url);\n}\nexport function getFetchFunction(options, context) {\n  var globalOptions = getGlobalLoaderOptions();\n  var fetch = options.fetch || globalOptions.fetch;\n\n  if (typeof fetch === 'function') {\n    return fetch;\n  }\n\n  if (isObject(fetch)) {\n    return function (url) {\n      return fetchFile(url, fetch);\n    };\n  }\n\n  if (context && context.fetch) {\n    return context.fetch;\n  }\n\n  return function (url) {\n    return fetchFile(url, options);\n  };\n}\n\nfunction validateOptions(options, loaders) {\n  var log = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : console;\n  validateOptionsObject(options, null, log, DEFAULT_LOADER_OPTIONS, DEPRECATED_LOADER_OPTIONS, loaders);\n\n  var _iterator = _createForOfIteratorHelper(loaders),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var loader = _step.value;\n      var idOptions = options && options[loader.id] || {};\n      var loaderOptions = loader.options && loader.options[loader.id] || {};\n      var deprecatedOptions = loader.defaultOptions && loader.defaultOptions[loader.id] || {};\n      validateOptionsObject(idOptions, loader.id, log, loaderOptions, deprecatedOptions, loaders);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\n\nfunction validateOptionsObject(options, id, log, defaultOptions, deprecatedOptions, loaders) {\n  var loaderName = id || 'Top level';\n  var prefix = id ? \"\".concat(id, \".\") : '';\n\n  for (var key in options) {\n    var isSubOptions = !id && isObject(options[key]);\n\n    if (!(key in defaultOptions)) {\n      if (key in deprecatedOptions) {\n        log.warn(\"\".concat(loaderName, \" loader option '\").concat(prefix).concat(key, \"' deprecated, use '\").concat(deprecatedOptions[key], \"'\"));\n      } else if (!isSubOptions) {\n        var suggestion = findSimilarOption(key, loaders);\n        log.warn(\"\".concat(loaderName, \" loader option '\").concat(prefix).concat(key, \"' not recognized. \").concat(suggestion));\n      }\n    }\n  }\n}\n\nfunction findSimilarOption(optionKey, loaders) {\n  var lowerCaseOptionKey = optionKey.toLowerCase();\n  var bestSuggestion = '';\n\n  var _iterator2 = _createForOfIteratorHelper(loaders),\n      _step2;\n\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var loader = _step2.value;\n\n      for (var key in loader.options) {\n        if (optionKey === key) {\n          return \"Did you mean '\".concat(loader.id, \".\").concat(key, \"'?\");\n        }\n\n        var lowerCaseKey = key.toLowerCase();\n        var isPartialMatch = lowerCaseOptionKey.startsWith(lowerCaseKey) || lowerCaseKey.startsWith(lowerCaseOptionKey);\n\n        if (isPartialMatch) {\n          bestSuggestion = bestSuggestion || \"Did you mean '\".concat(loader.id, \".\").concat(key, \"'?\");\n        }\n      }\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n\n  return bestSuggestion;\n}\n\nfunction normalizeOptionsInternal(loader, options, url) {\n  var loaderDefaultOptions = loader.options || {};\n\n  var mergedOptions = _objectSpread({}, loaderDefaultOptions);\n\n  if (mergedOptions.log === null) {\n    mergedOptions.log = new NullLog();\n  }\n\n  mergeNestedFields(mergedOptions, getGlobalLoaderOptions());\n  mergeNestedFields(mergedOptions, options);\n  addUrlOptions(mergedOptions, url);\n  return mergedOptions;\n}\n\nfunction mergeNestedFields(mergedOptions, options) {\n  for (var key in options) {\n    if (key in options) {\n      var value = options[key];\n\n      if (isPureObject(value) && isPureObject(mergedOptions[key])) {\n        mergedOptions[key] = _objectSpread(_objectSpread({}, mergedOptions[key]), options[key]);\n      } else {\n        mergedOptions[key] = options[key];\n      }\n    }\n  }\n}\n\nfunction addUrlOptions(options, url) {\n  if (url && !options.baseUri) {\n    options.baseUri = url;\n  }\n}\n//# sourceMappingURL=option-utils.js.map","import assert from '../env-utils/assert';\nvar VERSION = typeof \"2.3.13\" !== 'undefined' ? \"2.3.13\" : '';\nexport function validateLoaderVersion(loader) {\n  var coreVersion = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : VERSION;\n  assert(loader, 'no loader provided');\n  var loaderVersion = loader.version;\n\n  if (!coreVersion || !loaderVersion) {\n    return;\n  }\n\n  coreVersion = parseVersion(coreVersion);\n  loaderVersion = parseVersion(loaderVersion);\n}\n\nfunction parseVersion(version) {\n  var parts = version.split('.').map(Number);\n  return {\n    major: parts[0],\n    minor: parts[1]\n  };\n}\n//# sourceMappingURL=validate-loader-version.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport assert from '../env-utils/assert';\nimport * as node from '../node/buffer-utils.node';\nexport function toArrayBuffer(data) {\n  if (node.toArrayBuffer) {\n    data = node.toArrayBuffer(data);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return data;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return data.buffer;\n  }\n\n  if (typeof data === 'string') {\n    var text = data;\n    var uint8Array = new TextEncoder().encode(text);\n    return uint8Array.buffer;\n  }\n\n  if (data && _typeof(data) === 'object' && data._toArrayBuffer) {\n    return data._toArrayBuffer();\n  }\n\n  return assert(false);\n}\nexport function compareArrayBuffers(arrayBuffer1, arrayBuffer2, byteLength) {\n  byteLength = byteLength || arrayBuffer1.byteLength;\n\n  if (arrayBuffer1.byteLength < byteLength || arrayBuffer2.byteLength < byteLength) {\n    return false;\n  }\n\n  var array1 = new Uint8Array(arrayBuffer1);\n  var array2 = new Uint8Array(arrayBuffer2);\n\n  for (var i = 0; i < array1.length; ++i) {\n    if (array1[i] !== array2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\nexport function concatenateArrayBuffers() {\n  for (var _len = arguments.length, sources = new Array(_len), _key = 0; _key < _len; _key++) {\n    sources[_key] = arguments[_key];\n  }\n\n  var sourceArrays = sources.map(function (source2) {\n    return source2 instanceof ArrayBuffer ? new Uint8Array(source2) : source2;\n  });\n  var byteLength = sourceArrays.reduce(function (length, typedArray) {\n    return length + typedArray.byteLength;\n  }, 0);\n  var result = new Uint8Array(byteLength);\n  var offset = 0;\n\n  var _iterator = _createForOfIteratorHelper(sourceArrays),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var sourceArray = _step.value;\n      result.set(sourceArray, offset);\n      offset += sourceArray.byteLength;\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return result.buffer;\n}\nexport function sliceArrayBuffer(arrayBuffer, byteOffset, byteLength) {\n  var subArray = byteLength !== undefined ? new Uint8Array(arrayBuffer).subarray(byteOffset, byteOffset + byteLength) : new Uint8Array(arrayBuffer).subarray(byteOffset);\n  var arrayCopy = new Uint8Array(subArray);\n  return arrayCopy.buffer;\n}\n//# sourceMappingURL=array-buffer-utils.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _asyncIterator from \"@babel/runtime/helpers/esm/asyncIterator\";\nimport { concatenateArrayBuffers } from '../binary-utils/array-buffer-utils';\nimport assert from '../env-utils/assert';\nexport function forEach(_x, _x2) {\n  return _forEach.apply(this, arguments);\n}\n\nfunction _forEach() {\n  _forEach = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(iterator, visitor) {\n    var _yield$iterator$next, done, value, cancel;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!true) {\n              _context.next = 14;\n              break;\n            }\n\n            _context.next = 3;\n            return iterator.next();\n\n          case 3:\n            _yield$iterator$next = _context.sent;\n            done = _yield$iterator$next.done;\n            value = _yield$iterator$next.value;\n\n            if (!done) {\n              _context.next = 9;\n              break;\n            }\n\n            iterator[\"return\"]();\n            return _context.abrupt(\"return\");\n\n          case 9:\n            cancel = visitor(value);\n\n            if (!cancel) {\n              _context.next = 12;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 12:\n            _context.next = 0;\n            break;\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _forEach.apply(this, arguments);\n}\n\nexport function concatenateChunksAsync(_x3) {\n  return _concatenateChunksAsync.apply(this, arguments);\n}\n\nfunction _concatenateChunksAsync() {\n  _concatenateChunksAsync = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(asyncIterator) {\n    var arrayBuffers, strings, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, _value, chunk;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            arrayBuffers = [];\n            strings = [];\n            _iteratorNormalCompletion = true;\n            _didIteratorError = false;\n            _context2.prev = 4;\n            _iterator = _asyncIterator(asyncIterator);\n\n          case 6:\n            _context2.next = 8;\n            return _iterator.next();\n\n          case 8:\n            _step = _context2.sent;\n            _iteratorNormalCompletion = _step.done;\n            _context2.next = 12;\n            return _step.value;\n\n          case 12:\n            _value = _context2.sent;\n\n            if (_iteratorNormalCompletion) {\n              _context2.next = 19;\n              break;\n            }\n\n            chunk = _value;\n\n            if (typeof chunk === 'string') {\n              strings.push(chunk);\n            } else {\n              arrayBuffers.push(chunk);\n            }\n\n          case 16:\n            _iteratorNormalCompletion = true;\n            _context2.next = 6;\n            break;\n\n          case 19:\n            _context2.next = 25;\n            break;\n\n          case 21:\n            _context2.prev = 21;\n            _context2.t0 = _context2[\"catch\"](4);\n            _didIteratorError = true;\n            _iteratorError = _context2.t0;\n\n          case 25:\n            _context2.prev = 25;\n            _context2.prev = 26;\n\n            if (!(!_iteratorNormalCompletion && _iterator[\"return\"] != null)) {\n              _context2.next = 30;\n              break;\n            }\n\n            _context2.next = 30;\n            return _iterator[\"return\"]();\n\n          case 30:\n            _context2.prev = 30;\n\n            if (!_didIteratorError) {\n              _context2.next = 33;\n              break;\n            }\n\n            throw _iteratorError;\n\n          case 33:\n            return _context2.finish(30);\n\n          case 34:\n            return _context2.finish(25);\n\n          case 35:\n            if (!(strings.length > 0)) {\n              _context2.next = 38;\n              break;\n            }\n\n            assert(arrayBuffers.length === 0);\n            return _context2.abrupt(\"return\", strings.join(''));\n\n          case 38:\n            return _context2.abrupt(\"return\", concatenateArrayBuffers.apply(void 0, arrayBuffers));\n\n          case 39:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[4, 21, 25, 35], [26,, 30, 34]]);\n  }));\n  return _concatenateChunksAsync.apply(this, arguments);\n}\n//# sourceMappingURL=async-iteration.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _marked = _regeneratorRuntime.mark(makeStringIterator);\n\nexport function makeStringIterator(string) {\n  var options,\n      _options$chunkSize,\n      chunkSize,\n      offset,\n      textEncoder,\n      chunkLength,\n      chunk,\n      _args = arguments;\n\n  return _regeneratorRuntime.wrap(function makeStringIterator$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n          _options$chunkSize = options.chunkSize, chunkSize = _options$chunkSize === void 0 ? 256 * 1024 : _options$chunkSize;\n          offset = 0;\n          textEncoder = new TextEncoder();\n\n        case 4:\n          if (!(offset < string.length)) {\n            _context.next = 12;\n            break;\n          }\n\n          chunkLength = Math.min(string.length - offset, chunkSize);\n          chunk = string.slice(offset, offset + chunkLength);\n          offset += chunkLength;\n          _context.next = 10;\n          return textEncoder.encode(chunk);\n\n        case 10:\n          _context.next = 4;\n          break;\n\n        case 12:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}\n//# sourceMappingURL=string-iterator.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _marked = _regeneratorRuntime.mark(makeArrayBufferIterator);\n\nexport function makeArrayBufferIterator(arrayBuffer) {\n  var options,\n      _options$chunkSize,\n      chunkSize,\n      byteOffset,\n      chunkByteLength,\n      chunk,\n      sourceArray,\n      chunkArray,\n      _args = arguments;\n\n  return _regeneratorRuntime.wrap(function makeArrayBufferIterator$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n          _options$chunkSize = options.chunkSize, chunkSize = _options$chunkSize === void 0 ? 256 * 1024 : _options$chunkSize;\n          byteOffset = 0;\n\n        case 3:\n          if (!(byteOffset < arrayBuffer.byteLength)) {\n            _context.next = 14;\n            break;\n          }\n\n          chunkByteLength = Math.min(arrayBuffer.byteLength - byteOffset, chunkSize);\n          chunk = new ArrayBuffer(chunkByteLength);\n          sourceArray = new Uint8Array(arrayBuffer, byteOffset, chunkByteLength);\n          chunkArray = new Uint8Array(chunk);\n          chunkArray.set(sourceArray);\n          byteOffset += chunkByteLength;\n          _context.next = 12;\n          return chunk;\n\n        case 12:\n          _context.next = 3;\n          break;\n\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}\n//# sourceMappingURL=array-buffer-iterator.js.map","export default function _AwaitValue(value) {\n  this.wrapped = value;\n}","import AwaitValue from \"./AwaitValue.js\";\nexport default function _awaitAsyncGenerator(value) {\n  return new AwaitValue(value);\n}","import AwaitValue from \"./AwaitValue.js\";\nexport default function AsyncGenerator(gen) {\n  var front, back;\n\n  function send(key, arg) {\n    return new Promise(function (resolve, reject) {\n      var request = {\n        key: key,\n        arg: arg,\n        resolve: resolve,\n        reject: reject,\n        next: null\n      };\n\n      if (back) {\n        back = back.next = request;\n      } else {\n        front = back = request;\n        resume(key, arg);\n      }\n    });\n  }\n\n  function resume(key, arg) {\n    try {\n      var result = gen[key](arg);\n      var value = result.value;\n      var wrappedAwait = value instanceof AwaitValue;\n      Promise.resolve(wrappedAwait ? value.wrapped : value).then(function (arg) {\n        if (wrappedAwait) {\n          resume(key === \"return\" ? \"return\" : \"next\", arg);\n          return;\n        }\n\n        settle(result.done ? \"return\" : \"normal\", arg);\n      }, function (err) {\n        resume(\"throw\", err);\n      });\n    } catch (err) {\n      settle(\"throw\", err);\n    }\n  }\n\n  function settle(type, value) {\n    switch (type) {\n      case \"return\":\n        front.resolve({\n          value: value,\n          done: true\n        });\n        break;\n\n      case \"throw\":\n        front.reject(value);\n        break;\n\n      default:\n        front.resolve({\n          value: value,\n          done: false\n        });\n        break;\n    }\n\n    front = front.next;\n\n    if (front) {\n      resume(front.key, front.arg);\n    } else {\n      back = null;\n    }\n  }\n\n  this._invoke = send;\n\n  if (typeof gen[\"return\"] !== \"function\") {\n    this[\"return\"] = undefined;\n  }\n}\n\nif (typeof Symbol === \"function\" && Symbol.asyncIterator) {\n  AsyncGenerator.prototype[Symbol.asyncIterator] = function () {\n    return this;\n  };\n}\n\nAsyncGenerator.prototype.next = function (arg) {\n  return this._invoke(\"next\", arg);\n};\n\nAsyncGenerator.prototype[\"throw\"] = function (arg) {\n  return this._invoke(\"throw\", arg);\n};\n\nAsyncGenerator.prototype[\"return\"] = function (arg) {\n  return this._invoke(\"return\", arg);\n};","import AsyncGenerator from \"./AsyncGenerator.js\";\nexport default function _wrapAsyncGenerator(fn) {\n  return function () {\n    return new AsyncGenerator(fn.apply(this, arguments));\n  };\n}","import _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _awaitAsyncGenerator from \"@babel/runtime/helpers/esm/awaitAsyncGenerator\";\nimport _wrapAsyncGenerator from \"@babel/runtime/helpers/esm/wrapAsyncGenerator\";\nvar DEFAULT_CHUNK_SIZE = 1024 * 1024;\nexport function makeBlobIterator(_x) {\n  return _makeBlobIterator.apply(this, arguments);\n}\n\nfunction _makeBlobIterator() {\n  _makeBlobIterator = _wrapAsyncGenerator(_regeneratorRuntime.mark(function _callee(file) {\n    var options,\n        chunkSize,\n        offset,\n        end,\n        chunk,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n            chunkSize = options.chunkSize || DEFAULT_CHUNK_SIZE;\n            offset = 0;\n\n          case 3:\n            if (!(offset < file.size)) {\n              _context.next = 13;\n              break;\n            }\n\n            end = offset + chunkSize;\n            _context.next = 7;\n            return _awaitAsyncGenerator(readFileSlice(file, offset, end));\n\n          case 7:\n            chunk = _context.sent;\n            offset = end;\n            _context.next = 11;\n            return chunk;\n\n          case 11:\n            _context.next = 3;\n            break;\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _makeBlobIterator.apply(this, arguments);\n}\n\nexport function readFileSlice(_x2, _x3, _x4) {\n  return _readFileSlice.apply(this, arguments);\n}\n\nfunction _readFileSlice() {\n  _readFileSlice = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(file, offset, end) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return new Promise(function (resolve, reject) {\n              var slice = file.slice(offset, end);\n              var fileReader = new FileReader();\n\n              fileReader.onload = function (event) {\n                return resolve(event.target && event.target.result);\n              };\n\n              fileReader.onerror = function (error) {\n                return reject(error);\n              };\n\n              fileReader.readAsArrayBuffer(slice);\n            });\n\n          case 2:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _readFileSlice.apply(this, arguments);\n}\n//# sourceMappingURL=blob-iterator.js.map","import _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _awaitAsyncGenerator from \"@babel/runtime/helpers/esm/awaitAsyncGenerator\";\nimport _wrapAsyncGenerator from \"@babel/runtime/helpers/esm/wrapAsyncGenerator\";\nimport _asyncIterator from \"@babel/runtime/helpers/esm/asyncIterator\";\nimport { isBrowser, nodeVersion, toArrayBuffer } from '@loaders.gl/loader-utils';\nexport function makeStreamIterator(stream) {\n  if (isBrowser || nodeVersion >= 10) {\n    if (typeof stream[Symbol.asyncIterator] === 'function') {\n      return makeToArrayBufferIterator(stream);\n    }\n\n    if (typeof stream.getIterator === 'function') {\n      return stream.getIterator();\n    }\n  }\n\n  return isBrowser ? makeBrowserStreamIterator(stream) : makeNodeStreamIterator(stream);\n}\n\nfunction makeToArrayBufferIterator(_x) {\n  return _makeToArrayBufferIterator.apply(this, arguments);\n}\n\nfunction _makeToArrayBufferIterator() {\n  _makeToArrayBufferIterator = _wrapAsyncGenerator(_regeneratorRuntime.mark(function _callee(asyncIterator) {\n    var _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, _value, chunk;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _iteratorNormalCompletion = true;\n            _didIteratorError = false;\n            _context.prev = 2;\n            _iterator = _asyncIterator(asyncIterator);\n\n          case 4:\n            _context.next = 6;\n            return _awaitAsyncGenerator(_iterator.next());\n\n          case 6:\n            _step = _context.sent;\n            _iteratorNormalCompletion = _step.done;\n            _context.next = 10;\n            return _awaitAsyncGenerator(_step.value);\n\n          case 10:\n            _value = _context.sent;\n\n            if (_iteratorNormalCompletion) {\n              _context.next = 18;\n              break;\n            }\n\n            chunk = _value;\n            _context.next = 15;\n            return toArrayBuffer(chunk);\n\n          case 15:\n            _iteratorNormalCompletion = true;\n            _context.next = 4;\n            break;\n\n          case 18:\n            _context.next = 24;\n            break;\n\n          case 20:\n            _context.prev = 20;\n            _context.t0 = _context[\"catch\"](2);\n            _didIteratorError = true;\n            _iteratorError = _context.t0;\n\n          case 24:\n            _context.prev = 24;\n            _context.prev = 25;\n\n            if (!(!_iteratorNormalCompletion && _iterator[\"return\"] != null)) {\n              _context.next = 29;\n              break;\n            }\n\n            _context.next = 29;\n            return _awaitAsyncGenerator(_iterator[\"return\"]());\n\n          case 29:\n            _context.prev = 29;\n\n            if (!_didIteratorError) {\n              _context.next = 32;\n              break;\n            }\n\n            throw _iteratorError;\n\n          case 32:\n            return _context.finish(29);\n\n          case 33:\n            return _context.finish(24);\n\n          case 34:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[2, 20, 24, 34], [25,, 29, 33]]);\n  }));\n  return _makeToArrayBufferIterator.apply(this, arguments);\n}\n\nfunction makeBrowserStreamIterator(_x2) {\n  return _makeBrowserStreamIterator.apply(this, arguments);\n}\n\nfunction _makeBrowserStreamIterator() {\n  _makeBrowserStreamIterator = _wrapAsyncGenerator(_regeneratorRuntime.mark(function _callee2(stream) {\n    var reader, _yield$_awaitAsyncGen, done, value;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            reader = stream.getReader();\n            _context2.prev = 1;\n\n          case 2:\n            if (!true) {\n              _context2.next = 14;\n              break;\n            }\n\n            _context2.next = 5;\n            return _awaitAsyncGenerator(reader.read());\n\n          case 5:\n            _yield$_awaitAsyncGen = _context2.sent;\n            done = _yield$_awaitAsyncGen.done;\n            value = _yield$_awaitAsyncGen.value;\n\n            if (!done) {\n              _context2.next = 10;\n              break;\n            }\n\n            return _context2.abrupt(\"return\");\n\n          case 10:\n            _context2.next = 12;\n            return toArrayBuffer(value);\n\n          case 12:\n            _context2.next = 2;\n            break;\n\n          case 14:\n            _context2.next = 19;\n            break;\n\n          case 16:\n            _context2.prev = 16;\n            _context2.t0 = _context2[\"catch\"](1);\n            reader.releaseLock();\n\n          case 19:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[1, 16]]);\n  }));\n  return _makeBrowserStreamIterator.apply(this, arguments);\n}\n\nfunction makeNodeStreamIterator(_x3) {\n  return _makeNodeStreamIterator.apply(this, arguments);\n}\n\nfunction _makeNodeStreamIterator() {\n  _makeNodeStreamIterator = _wrapAsyncGenerator(_regeneratorRuntime.mark(function _callee3(stream) {\n    var data;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _awaitAsyncGenerator(stream);\n\n          case 2:\n            stream = _context3.sent;\n\n          case 3:\n            if (!true) {\n              _context3.next = 15;\n              break;\n            }\n\n            data = stream.read();\n\n            if (!(data !== null)) {\n              _context3.next = 9;\n              break;\n            }\n\n            _context3.next = 8;\n            return toArrayBuffer(data);\n\n          case 8:\n            return _context3.abrupt(\"continue\", 3);\n\n          case 9:\n            if (!stream._readableState.ended) {\n              _context3.next = 11;\n              break;\n            }\n\n            return _context3.abrupt(\"return\");\n\n          case 11:\n            _context3.next = 13;\n            return _awaitAsyncGenerator(onceReadable(stream));\n\n          case 13:\n            _context3.next = 3;\n            break;\n\n          case 15:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _makeNodeStreamIterator.apply(this, arguments);\n}\n\nfunction onceReadable(_x4) {\n  return _onceReadable.apply(this, arguments);\n}\n\nfunction _onceReadable() {\n  _onceReadable = _asyncToGenerator(_regeneratorRuntime.mark(function _callee4(stream) {\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            return _context4.abrupt(\"return\", new Promise(function (resolve) {\n              stream.once('readable', resolve);\n            }));\n\n          case 1:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _onceReadable.apply(this, arguments);\n}\n//# sourceMappingURL=stream-iterator.js.map","import { makeStringIterator } from './string-iterator';\nimport { makeArrayBufferIterator } from './array-buffer-iterator';\nimport { makeBlobIterator } from './blob-iterator';\nimport { assert } from '@loaders.gl/loader-utils';\nimport { makeStreamIterator } from './stream-iterator';\nimport { isBlob, isReadableStream, isResponse } from '../../javascript-utils/is-type';\nexport function makeIterator(data) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (typeof data === 'string') {\n    return makeStringIterator(data, options);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return makeArrayBufferIterator(data, options);\n  }\n\n  if (isBlob(data)) {\n    return makeBlobIterator(data, options);\n  }\n\n  if (isReadableStream(data)) {\n    return makeStreamIterator(data);\n  }\n\n  if (isResponse(data)) {\n    return makeStreamIterator(data.body);\n  }\n\n  return assert(false);\n}\n//# sourceMappingURL=make-iterator.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { concatenateChunksAsync } from '@loaders.gl/loader-utils';\nimport { isResponse, isReadableStream, isAsyncIterable, isIterable, isIterator, isBlob, isBuffer } from '../../javascript-utils/is-type';\nimport { makeIterator } from '../../iterator-utils/make-iterator/make-iterator';\nimport { checkResponse, makeResponse } from '../utils/response-utils';\nvar ERR_DATA = 'Cannot convert supplied data type';\nexport function getArrayBufferOrStringFromDataSync(data, loader) {\n  if (loader.text && typeof data === 'string') {\n    return data;\n  }\n\n  if (data instanceof ArrayBuffer) {\n    var arrayBuffer = data;\n\n    if (loader.text && !loader.binary) {\n      var textDecoder = new TextDecoder('utf8');\n      return textDecoder.decode(arrayBuffer);\n    }\n\n    return arrayBuffer;\n  }\n\n  if (ArrayBuffer.isView(data) || isBuffer(data)) {\n    if (loader.text && !loader.binary) {\n      var _textDecoder = new TextDecoder('utf8');\n\n      return _textDecoder.decode(data);\n    }\n\n    var _arrayBuffer = data.buffer;\n    var byteLength = data.byteLength || data.length;\n\n    if (data.byteOffset !== 0 || byteLength !== _arrayBuffer.byteLength) {\n      _arrayBuffer = _arrayBuffer.slice(data.byteOffset, data.byteOffset + byteLength);\n    }\n\n    return _arrayBuffer;\n  }\n\n  throw new Error(ERR_DATA);\n}\nexport function getArrayBufferOrStringFromData(_x, _x2) {\n  return _getArrayBufferOrStringFromData.apply(this, arguments);\n}\n\nfunction _getArrayBufferOrStringFromData() {\n  _getArrayBufferOrStringFromData = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(data, loader) {\n    var isArrayBuffer, response;\n    return _regeneratorRuntime.wrap(function _callee$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            isArrayBuffer = data instanceof ArrayBuffer || ArrayBuffer.isView(data);\n\n            if (!(typeof data === 'string' || isArrayBuffer)) {\n              _context3.next = 3;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", getArrayBufferOrStringFromDataSync(data, loader));\n\n          case 3:\n            if (!isBlob(data)) {\n              _context3.next = 7;\n              break;\n            }\n\n            _context3.next = 6;\n            return makeResponse(data);\n\n          case 6:\n            data = _context3.sent;\n\n          case 7:\n            if (!isResponse(data)) {\n              _context3.next = 21;\n              break;\n            }\n\n            response = data;\n            _context3.next = 11;\n            return checkResponse(response);\n\n          case 11:\n            if (!loader.binary) {\n              _context3.next = 17;\n              break;\n            }\n\n            _context3.next = 14;\n            return response.arrayBuffer();\n\n          case 14:\n            _context3.t0 = _context3.sent;\n            _context3.next = 20;\n            break;\n\n          case 17:\n            _context3.next = 19;\n            return response.text();\n\n          case 19:\n            _context3.t0 = _context3.sent;\n\n          case 20:\n            return _context3.abrupt(\"return\", _context3.t0);\n\n          case 21:\n            if (isReadableStream(data)) {\n              data = makeIterator(data);\n            }\n\n            if (!(isIterable(data) || isAsyncIterable(data))) {\n              _context3.next = 24;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", concatenateChunksAsync(data));\n\n          case 24:\n            throw new Error(ERR_DATA);\n\n          case 25:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _getArrayBufferOrStringFromData.apply(this, arguments);\n}\n\nexport function getAsyncIteratorFromData(_x3) {\n  return _getAsyncIteratorFromData.apply(this, arguments);\n}\n\nfunction _getAsyncIteratorFromData() {\n  _getAsyncIteratorFromData = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(data) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            if (!isIterator(data)) {\n              _context4.next = 2;\n              break;\n            }\n\n            return _context4.abrupt(\"return\", data);\n\n          case 2:\n            if (!isResponse(data)) {\n              _context4.next = 6;\n              break;\n            }\n\n            _context4.next = 5;\n            return checkResponse(data);\n\n          case 5:\n            return _context4.abrupt(\"return\", makeIterator(data.body));\n\n          case 6:\n            if (!(isBlob(data) || isReadableStream(data))) {\n              _context4.next = 8;\n              break;\n            }\n\n            return _context4.abrupt(\"return\", makeIterator(data));\n\n          case 8:\n            if (!isAsyncIterable(data)) {\n              _context4.next = 10;\n              break;\n            }\n\n            return _context4.abrupt(\"return\", data[Symbol.asyncIterator]());\n\n          case 10:\n            return _context4.abrupt(\"return\", getIteratorFromData(data));\n\n          case 11:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _getAsyncIteratorFromData.apply(this, arguments);\n}\n\nfunction getIteratorFromData(data) {\n  if (ArrayBuffer.isView(data)) {\n    return _regeneratorRuntime.mark(function oneChunk() {\n      return _regeneratorRuntime.wrap(function oneChunk$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return data.buffer;\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, oneChunk);\n    })();\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return _regeneratorRuntime.mark(function oneChunk() {\n      return _regeneratorRuntime.wrap(function oneChunk$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return data;\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, oneChunk);\n    })();\n  }\n\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isIterable(data)) {\n    return data[Symbol.iterator]();\n  }\n\n  throw new Error(ERR_DATA);\n}\n\nexport function getReadableStream(_x4) {\n  return _getReadableStream.apply(this, arguments);\n}\n\nfunction _getReadableStream() {\n  _getReadableStream = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3(data) {\n    var response;\n    return _regeneratorRuntime.wrap(function _callee3$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            if (!isReadableStream(data)) {\n              _context5.next = 2;\n              break;\n            }\n\n            return _context5.abrupt(\"return\", data);\n\n          case 2:\n            if (!isResponse(data)) {\n              _context5.next = 4;\n              break;\n            }\n\n            return _context5.abrupt(\"return\", data.body);\n\n          case 4:\n            _context5.next = 6;\n            return makeResponse(data);\n\n          case 6:\n            response = _context5.sent;\n            return _context5.abrupt(\"return\", response.body);\n\n          case 8:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _getReadableStream.apply(this, arguments);\n}\n//# sourceMappingURL=get-data.js.map","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { getFetchFunction } from './option-utils';\nexport function getLoaderContext(context, options) {\n  var previousContext = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n  if (previousContext) {\n    return previousContext;\n  }\n\n  context = _objectSpread({\n    fetch: getFetchFunction(options || {}, context)\n  }, context);\n\n  if (!Array.isArray(context.loaders)) {\n    context.loaders = null;\n  }\n\n  return context;\n}\nexport function getLoaders(loaders, context) {\n  if (!context && loaders && !Array.isArray(loaders)) {\n    return loaders;\n  }\n\n  var candidateLoaders;\n\n  if (loaders) {\n    candidateLoaders = Array.isArray(loaders) ? loaders : [loaders];\n  }\n\n  if (context && context.loaders) {\n    var contextLoaders = Array.isArray(context.loaders) ? context.loaders : [context.loaders];\n    candidateLoaders = candidateLoaders ? [].concat(_toConsumableArray(candidateLoaders), _toConsumableArray(contextLoaders)) : contextLoaders;\n  }\n\n  return candidateLoaders && candidateLoaders.length ? candidateLoaders : null;\n}\n//# sourceMappingURL=context-utils.js.map","import assert from '../env-utils/assert';\nvar workerURLCache = new Map();\nexport function getWorkerURL(workerSource) {\n  var workerName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'Worker';\n  assert(typeof workerSource === 'string', 'worker source');\n\n  if (workerSource.startsWith('url(') && workerSource.endsWith(')')) {\n    var workerUrl = workerSource.match(/^url\\((.*)\\)$/)[1];\n\n    if (workerUrl && !workerUrl.startsWith('http')) {\n      return workerUrl;\n    }\n\n    workerSource = buildScript(workerUrl);\n  }\n\n  var workerURL = workerURLCache.get(workerSource);\n\n  if (!workerURL) {\n    var blob = new Blob([workerSource], {\n      type: 'application/javascript'\n    });\n    workerURL = URL.createObjectURL(blob);\n    workerURLCache.set(workerSource, workerURL);\n  }\n\n  return workerURL;\n}\n\nfunction buildScript(workerUrl) {\n  return \"try {\\n  importScripts('\".concat(workerUrl, \"');\\n} catch (error) {\\n  console.error(error);\\n}\");\n}\n//# sourceMappingURL=get-worker-url.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nexport function getTransferList(object) {\n  var recursive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var transfers = arguments.length > 2 ? arguments[2] : undefined;\n  var transfersSet = transfers || new Set();\n\n  if (!object) {} else if (isTransferable(object)) {\n    transfersSet.add(object);\n  } else if (isTransferable(object.buffer)) {\n    transfersSet.add(object.buffer);\n  } else if (ArrayBuffer.isView(object)) {} else if (recursive && _typeof(object) === 'object') {\n    for (var key in object) {\n      getTransferList(object[key], recursive, transfersSet);\n    }\n  }\n\n  return transfers === undefined ? Array.from(transfersSet) : [];\n}\n\nfunction isTransferable(object) {\n  if (!object) {\n    return false;\n  }\n\n  if (object instanceof ArrayBuffer) {\n    return true;\n  }\n\n  if (typeof MessagePort !== 'undefined' && object instanceof MessagePort) {\n    return true;\n  }\n\n  if (typeof ImageBitmap !== 'undefined' && object instanceof ImageBitmap) {\n    return true;\n  }\n\n  if (typeof OffscreenCanvas !== 'undefined' && object instanceof OffscreenCanvas) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=get-transfer-list.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { getWorkerURL } from './get-worker-url';\nimport { getTransferList } from './get-transfer-list';\nvar count = 0;\n\nfunction defaultOnMessage(_ref) {\n  var data = _ref.data,\n      resolve = _ref.resolve;\n  resolve(data);\n}\n\nvar WorkerThread = function () {\n  function WorkerThread(_ref2) {\n    var source = _ref2.source,\n        _ref2$name = _ref2.name,\n        name = _ref2$name === void 0 ? \"web-worker-\".concat(count++) : _ref2$name,\n        onMessage = _ref2.onMessage;\n\n    _classCallCheck(this, WorkerThread);\n\n    var url = getWorkerURL(source, name);\n    this.worker = new Worker(url, {\n      name: name\n    });\n    this.name = name;\n    this.onMessage = onMessage || defaultOnMessage;\n  }\n\n  _createClass(WorkerThread, [{\n    key: \"process\",\n    value: function () {\n      var _process = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(data) {\n        var _this = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  _this.worker.onmessage = function (event) {\n                    _this.onMessage({\n                      worker: _this.worker,\n                      data: event.data,\n                      resolve: resolve,\n                      reject: reject\n                    });\n                  };\n\n                  _this.worker.onerror = function (error) {\n                    var message = \"\".concat(_this.name, \": WorkerThread.process() failed\");\n\n                    if (error.message) {\n                      message += \" \".concat(error.message, \" \").concat(error.filename, \":\").concat(error.lineno, \":\").concat(error.colno);\n                    }\n\n                    var betterError = new Error(message);\n                    console.error(error);\n                    reject(betterError);\n                  };\n\n                  var transferList = getTransferList(data);\n\n                  _this.worker.postMessage(data, transferList);\n                }));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function process(_x) {\n        return _process.apply(this, arguments);\n      }\n\n      return process;\n    }()\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.worker.terminate();\n      this.worker = null;\n    }\n  }]);\n\n  return WorkerThread;\n}();\n\nexport { WorkerThread as default };\n//# sourceMappingURL=worker-thread.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport WorkerThread from './worker-thread';\n\nvar WorkerPool = function () {\n  function WorkerPool(_ref) {\n    var source = _ref.source,\n        _ref$name = _ref.name,\n        name = _ref$name === void 0 ? 'unnamed' : _ref$name,\n        _ref$maxConcurrency = _ref.maxConcurrency,\n        maxConcurrency = _ref$maxConcurrency === void 0 ? 1 : _ref$maxConcurrency,\n        onMessage = _ref.onMessage,\n        _ref$onDebug = _ref.onDebug,\n        onDebug = _ref$onDebug === void 0 ? function () {} : _ref$onDebug,\n        _ref$reuseWorkers = _ref.reuseWorkers,\n        reuseWorkers = _ref$reuseWorkers === void 0 ? true : _ref$reuseWorkers;\n\n    _classCallCheck(this, WorkerPool);\n\n    this.source = source;\n    this.name = name;\n    this.maxConcurrency = maxConcurrency;\n    this.onMessage = onMessage;\n    this.onDebug = onDebug;\n    this.jobQueue = [];\n    this.idleQueue = [];\n    this.count = 0;\n    this.isDestroyed = false;\n    this.reuseWorkers = reuseWorkers;\n  }\n\n  _createClass(WorkerPool, [{\n    key: \"destroy\",\n    value: function destroy() {\n      this.idleQueue.forEach(function (worker) {\n        return worker.destroy();\n      });\n      this.isDestroyed = true;\n    }\n  }, {\n    key: \"process\",\n    value: function process(data, jobName) {\n      var _this = this;\n\n      return new Promise(function (resolve, reject) {\n        _this.jobQueue.push({\n          data: data,\n          jobName: jobName,\n          resolve: resolve,\n          reject: reject\n        });\n\n        _this._startQueuedJob();\n      });\n    }\n  }, {\n    key: \"_startQueuedJob\",\n    value: function () {\n      var _startQueuedJob2 = _asyncToGenerator(_regeneratorRuntime.mark(function _callee() {\n        var worker, job;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (this.jobQueue.length) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                worker = this._getAvailableWorker();\n\n                if (worker) {\n                  _context.next = 5;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 5:\n                job = this.jobQueue.shift();\n                this.onDebug({\n                  message: 'processing',\n                  worker: worker.name,\n                  job: job.jobName,\n                  backlog: this.jobQueue.length\n                });\n                _context.prev = 7;\n                _context.t0 = job;\n                _context.next = 11;\n                return worker.process(job.data);\n\n              case 11:\n                _context.t1 = _context.sent;\n\n                _context.t0.resolve.call(_context.t0, _context.t1);\n\n                _context.next = 18;\n                break;\n\n              case 15:\n                _context.prev = 15;\n                _context.t2 = _context[\"catch\"](7);\n                job.reject(_context.t2);\n\n              case 18:\n                _context.prev = 18;\n\n                this._onWorkerDone(worker);\n\n                return _context.finish(18);\n\n              case 21:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[7, 15, 18, 21]]);\n      }));\n\n      function _startQueuedJob() {\n        return _startQueuedJob2.apply(this, arguments);\n      }\n\n      return _startQueuedJob;\n    }()\n  }, {\n    key: \"_onWorkerDone\",\n    value: function _onWorkerDone(worker) {\n      if (this.isDestroyed) {\n        worker.destroy();\n        return;\n      }\n\n      if (this.reuseWorkers) {\n        this.idleQueue.push(worker);\n      } else {\n        worker.destroy();\n        this.count--;\n      }\n\n      this._startQueuedJob();\n    }\n  }, {\n    key: \"_getAvailableWorker\",\n    value: function _getAvailableWorker() {\n      if (this.idleQueue.length > 0) {\n        return this.idleQueue.shift();\n      }\n\n      if (this.count < this.maxConcurrency) {\n        this.count++;\n        var name = \"\".concat(this.name.toLowerCase(), \" (#\").concat(this.count, \" of \").concat(this.maxConcurrency, \")\");\n        return new WorkerThread({\n          source: this.source,\n          onMessage: this.onMessage,\n          name: name\n        });\n      }\n\n      return null;\n    }\n  }]);\n\n  return WorkerPool;\n}();\n\nexport { WorkerPool as default };\n//# sourceMappingURL=worker-pool.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport WorkerPool from './worker-pool';\nvar DEFAULT_MAX_CONCURRENCY = 5;\n\nvar WorkerFarm = function () {\n  _createClass(WorkerFarm, null, [{\n    key: \"isSupported\",\n    value: function isSupported() {\n      return typeof Worker !== 'undefined';\n    }\n  }]);\n\n  function WorkerFarm(_ref) {\n    var _ref$maxConcurrency = _ref.maxConcurrency,\n        maxConcurrency = _ref$maxConcurrency === void 0 ? DEFAULT_MAX_CONCURRENCY : _ref$maxConcurrency,\n        _ref$onMessage = _ref.onMessage,\n        onMessage = _ref$onMessage === void 0 ? null : _ref$onMessage,\n        _ref$onDebug = _ref.onDebug,\n        onDebug = _ref$onDebug === void 0 ? function () {} : _ref$onDebug,\n        _ref$reuseWorkers = _ref.reuseWorkers,\n        reuseWorkers = _ref$reuseWorkers === void 0 ? true : _ref$reuseWorkers;\n\n    _classCallCheck(this, WorkerFarm);\n\n    this.maxConcurrency = maxConcurrency;\n    this.onMessage = onMessage;\n    this.onDebug = onDebug;\n    this.workerPools = new Map();\n    this.reuseWorkers = reuseWorkers;\n  }\n\n  _createClass(WorkerFarm, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('maxConcurrency' in props) {\n        this.maxConcurrency = props.maxConcurrency;\n      }\n\n      if ('onDebug' in props) {\n        this.onDebug = props.onDebug;\n      }\n\n      if ('reuseWorkers' in props) {\n        this.reuseWorkers = props.reuseWorkers;\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.workerPools.forEach(function (workerPool) {\n        return workerPool.destroy();\n      });\n    }\n  }, {\n    key: \"process\",\n    value: function () {\n      var _process = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(workerSource, workerName, data) {\n        var workerPool;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                workerPool = this._getWorkerPool(workerSource, workerName);\n                return _context.abrupt(\"return\", workerPool.process(data));\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function process(_x, _x2, _x3) {\n        return _process.apply(this, arguments);\n      }\n\n      return process;\n    }()\n  }, {\n    key: \"_getWorkerPool\",\n    value: function _getWorkerPool(workerSource, workerName) {\n      var workerPool = this.workerPools.get(workerName);\n\n      if (!workerPool) {\n        workerPool = new WorkerPool({\n          source: workerSource,\n          name: workerName,\n          onMessage: onWorkerMessage.bind(null, this.onMessage),\n          maxConcurrency: this.maxConcurrency,\n          onDebug: this.onDebug,\n          reuseWorkers: this.reuseWorkers\n        });\n        this.workerPools.set(workerName, workerPool);\n      }\n\n      return workerPool;\n    }\n  }]);\n\n  return WorkerFarm;\n}();\n\nexport { WorkerFarm as default };\n\nfunction onWorkerMessage(onMessage, _ref2) {\n  var worker = _ref2.worker,\n      data = _ref2.data,\n      resolve = _ref2.resolve,\n      reject = _ref2.reject;\n\n  if (onMessage) {\n    onMessage({\n      worker: worker,\n      data: data,\n      resolve: resolve,\n      reject: reject\n    });\n    return;\n  }\n\n  switch (data.type) {\n    case 'done':\n      resolve(data.result);\n      break;\n\n    case 'error':\n      reject(data.message);\n      break;\n\n    default:\n  }\n}\n//# sourceMappingURL=worker-farm.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { _WorkerFarm as WorkerFarm, toArrayBuffer, getTransferList } from '@loaders.gl/loader-utils';\nimport { parse } from '../api/parse';\nvar VERSION = typeof \"2.3.13\" !== 'undefined' ? \"2.3.13\" : 'latest';\nexport function canParseWithWorker(loader, data, options, context) {\n  if (!WorkerFarm.isSupported()) {\n    return false;\n  }\n\n  var loaderOptions = options && options[loader.id];\n\n  if (options.worker === 'local' && loaderOptions && loaderOptions.localWorkerUrl || options.worker && loaderOptions && loaderOptions.workerUrl) {\n    return loader.useWorker ? loader.useWorker(options) : true;\n  }\n\n  return false;\n}\nexport default function parseWithWorker(loader, data, options, context) {\n  var _ref = options || {},\n      worker = _ref.worker;\n\n  var loaderOptions = options && options[loader.id] || {};\n  var workerUrl = worker === 'local' ? loaderOptions.localWorkerUrl : loaderOptions.workerUrl;\n  var workerSource = \"url(\".concat(workerUrl, \")\");\n  var workerName = loader.name;\n  var workerFarm = getWorkerFarm(options);\n  options = JSON.parse(JSON.stringify(options));\n  var warning = loader.version !== VERSION ? \"(core version \".concat(VERSION, \")\") : '';\n  return workerFarm.process(workerSource, \"\".concat(workerName, \"-worker@\").concat(loader.version).concat(warning), {\n    arraybuffer: toArrayBuffer(data),\n    options: options,\n    source: \"loaders.gl@\".concat(VERSION),\n    type: 'parse'\n  });\n}\nvar _workerFarm = null;\n\nfunction getWorkerFarm() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var props = {};\n\n  if (options.maxConcurrency) {\n    props.maxConcurrency = options.maxConcurrency;\n  }\n\n  if (options.onDebug) {\n    props.onDebug = options.onDebug;\n  }\n\n  if ('reuseWorkers' in options) {\n    props.reuseWorkers = options.reuseWorkers;\n  }\n\n  if (!_workerFarm) {\n    _workerFarm = new WorkerFarm({\n      onMessage: onWorkerMessage\n    });\n  }\n\n  _workerFarm.setProps(props);\n\n  return _workerFarm;\n}\n\nfunction onWorkerMessage(_x) {\n  return _onWorkerMessage.apply(this, arguments);\n}\n\nfunction _onWorkerMessage() {\n  _onWorkerMessage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(_ref2) {\n    var worker, data, resolve, reject, result;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            worker = _ref2.worker, data = _ref2.data, resolve = _ref2.resolve, reject = _ref2.reject;\n            _context.t0 = data.type;\n            _context.next = _context.t0 === 'done' ? 4 : _context.t0 === 'parse' ? 6 : _context.t0 === 'error' ? 17 : 19;\n            break;\n\n          case 4:\n            resolve(data.result);\n            return _context.abrupt(\"break\", 19);\n\n          case 6:\n            _context.prev = 6;\n            _context.next = 9;\n            return parse(data.arraybuffer, data.options, data.url);\n\n          case 9:\n            result = _context.sent;\n            worker.postMessage({\n              type: 'parse-done',\n              id: data.id,\n              result: result\n            }, getTransferList(result));\n            _context.next = 16;\n            break;\n\n          case 13:\n            _context.prev = 13;\n            _context.t1 = _context[\"catch\"](6);\n            worker.postMessage({\n              type: 'parse-error',\n              id: data.id,\n              message: _context.t1.message\n            });\n\n          case 16:\n            return _context.abrupt(\"break\", 19);\n\n          case 17:\n            reject(data.message);\n            return _context.abrupt(\"break\", 19);\n\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[6, 13]]);\n  }));\n  return _onWorkerMessage.apply(this, arguments);\n}\n//# sourceMappingURL=parse-with-worker.js.map","function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { normalizeLoader } from '../loader-utils/normalize-loader';\nimport { getGlobalLoaderState } from '../loader-utils/option-utils';\n\nvar getGlobalLoaderRegistry = function getGlobalLoaderRegistry() {\n  var state = getGlobalLoaderState();\n  state.loaderRegistry = state.loaderRegistry || [];\n  return state.loaderRegistry;\n};\n\nexport function registerLoaders(loaders) {\n  var loaderRegistry = getGlobalLoaderRegistry();\n  loaders = Array.isArray(loaders) ? loaders : [loaders];\n\n  var _iterator = _createForOfIteratorHelper(loaders),\n      _step;\n\n  try {\n    var _loop = function _loop() {\n      var loader = _step.value;\n      var normalizedLoader = normalizeLoader(loader);\n\n      if (!loaderRegistry.find(function (registeredLoader) {\n        return normalizedLoader === registeredLoader;\n      })) {\n        loaderRegistry.unshift(normalizedLoader);\n      }\n    };\n\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      _loop();\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\nexport function getRegisteredLoaders() {\n  return getGlobalLoaderRegistry();\n}\nexport function _unregisterLoaders() {\n  var state = getGlobalLoaderState();\n  state.loaderRegistry = [];\n}\n//# sourceMappingURL=register-loaders.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { compareArrayBuffers } from '@loaders.gl/loader-utils';\nimport { normalizeLoader } from '../loader-utils/normalize-loader';\nimport { getResourceUrlAndType } from '../utils/resource-utils';\nimport { getRegisteredLoaders } from './register-loaders';\nimport { readFileSlice } from '../../iterator-utils/make-iterator/blob-iterator';\nimport { isBlob } from '../../javascript-utils/is-type';\nvar EXT_PATTERN = /\\.([^.]+)$/;\nexport function selectLoader(_x) {\n  return _selectLoader.apply(this, arguments);\n}\n\nfunction _selectLoader() {\n  _selectLoader = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(data) {\n    var loaders,\n        options,\n        context,\n        loader,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            loaders = _args.length > 1 && _args[1] !== undefined ? _args[1] : [];\n            options = _args.length > 2 && _args[2] !== undefined ? _args[2] : {};\n            context = _args.length > 3 && _args[3] !== undefined ? _args[3] : {};\n            loader = selectLoaderSync(data, loaders, _objectSpread(_objectSpread({}, options), {}, {\n              nothrow: true\n            }), context);\n\n            if (!loader) {\n              _context.next = 6;\n              break;\n            }\n\n            return _context.abrupt(\"return\", loader);\n\n          case 6:\n            if (!isBlob(data)) {\n              _context.next = 11;\n              break;\n            }\n\n            _context.next = 9;\n            return readFileSlice(data, 0, 10);\n\n          case 9:\n            data = _context.sent;\n            loader = selectLoaderSync(data, loaders, options, context);\n\n          case 11:\n            if (!(!loader && !options.nothrow)) {\n              _context.next = 13;\n              break;\n            }\n\n            throw new Error(getNoValidLoaderMessage(data));\n\n          case 13:\n            return _context.abrupt(\"return\", loader);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _selectLoader.apply(this, arguments);\n}\n\nexport function selectLoaderSync(data) {\n  var loaders = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var context = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n  if (loaders && !Array.isArray(loaders)) {\n    return normalizeLoader(loaders);\n  }\n\n  loaders = [].concat(_toConsumableArray(loaders || []), _toConsumableArray(getRegisteredLoaders()));\n  normalizeLoaders(loaders);\n\n  var _getResourceUrlAndTyp = getResourceUrlAndType(data),\n      url = _getResourceUrlAndTyp.url,\n      type = _getResourceUrlAndTyp.type;\n\n  var loader = findLoaderByUrl(loaders, url || context.url);\n  loader = loader || findLoaderByContentType(loaders, type);\n  loader = loader || findLoaderByExamingInitialData(loaders, data);\n\n  if (!loader && !options.nothrow) {\n    throw new Error(getNoValidLoaderMessage(data));\n  }\n\n  return loader;\n}\n\nfunction getNoValidLoaderMessage(data) {\n  var _getResourceUrlAndTyp2 = getResourceUrlAndType(data),\n      url = _getResourceUrlAndTyp2.url,\n      type = _getResourceUrlAndTyp2.type;\n\n  var message = 'No valid loader found';\n\n  if (data) {\n    message += \" data: \\\"\".concat(getFirstCharacters(data), \"\\\", contentType: \\\"\").concat(type, \"\\\"\");\n  }\n\n  if (url) {\n    message += \" url: \".concat(url);\n  }\n\n  return message;\n}\n\nfunction normalizeLoaders(loaders) {\n  var _iterator = _createForOfIteratorHelper(loaders),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var loader = _step.value;\n      normalizeLoader(loader);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\n\nfunction findLoaderByUrl(loaders, url) {\n  var match = url && url.match(EXT_PATTERN);\n  var extension = match && match[1];\n  return extension && findLoaderByExtension(loaders, extension);\n}\n\nfunction findLoaderByExtension(loaders, extension) {\n  extension = extension.toLowerCase();\n\n  var _iterator2 = _createForOfIteratorHelper(loaders),\n      _step2;\n\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var loader = _step2.value;\n\n      var _iterator3 = _createForOfIteratorHelper(loader.extensions),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var loaderExtension = _step3.value;\n\n          if (loaderExtension.toLowerCase() === extension) {\n            return loader;\n          }\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n\n  return null;\n}\n\nfunction findLoaderByContentType(loaders, mimeType) {\n  var _iterator4 = _createForOfIteratorHelper(loaders),\n      _step4;\n\n  try {\n    for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n      var loader = _step4.value;\n\n      if (loader.mimeTypes && loader.mimeTypes.includes(mimeType)) {\n        return loader;\n      }\n\n      if (mimeType === \"application/x.\".concat(loader.id)) {\n        return loader;\n      }\n    }\n  } catch (err) {\n    _iterator4.e(err);\n  } finally {\n    _iterator4.f();\n  }\n\n  return null;\n}\n\nfunction findLoaderByExamingInitialData(loaders, data) {\n  if (!data) {\n    return null;\n  }\n\n  var _iterator5 = _createForOfIteratorHelper(loaders),\n      _step5;\n\n  try {\n    for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n      var loader = _step5.value;\n\n      if (typeof data === 'string') {\n        if (testDataAgainstText(data, loader)) {\n          return loader;\n        }\n      } else if (ArrayBuffer.isView(data)) {\n        if (testDataAgainstBinary(data.buffer, data.byteOffset, loader)) {\n          return loader;\n        }\n      } else if (data instanceof ArrayBuffer) {\n        var byteOffset = 0;\n\n        if (testDataAgainstBinary(data, byteOffset, loader)) {\n          return loader;\n        }\n      }\n    }\n  } catch (err) {\n    _iterator5.e(err);\n  } finally {\n    _iterator5.f();\n  }\n\n  return null;\n}\n\nfunction testDataAgainstText(data, loader) {\n  return loader.testText && loader.testText(data);\n}\n\nfunction testDataAgainstBinary(data, byteOffset, loader) {\n  var tests = Array.isArray(loader.tests) ? loader.tests : [loader.tests];\n  return tests.some(function (test) {\n    return testBinary(data, byteOffset, loader, test);\n  });\n}\n\nfunction testBinary(data, byteOffset, loader, test) {\n  if (test instanceof ArrayBuffer) {\n    return compareArrayBuffers(test, data, test.byteLength);\n  }\n\n  switch (_typeof(test)) {\n    case 'function':\n      return test(data, loader);\n\n    case 'string':\n      var magic = getMagicString(data, byteOffset, test.length);\n      return test === magic;\n\n    default:\n      return false;\n  }\n}\n\nfunction getFirstCharacters(data) {\n  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n\n  if (typeof data === 'string') {\n    return data.slice(0, length);\n  } else if (ArrayBuffer.isView(data)) {\n    return getMagicString(data.buffer, data.byteOffset, length);\n  } else if (data instanceof ArrayBuffer) {\n    var byteOffset = 0;\n    return getMagicString(data, byteOffset, length);\n  }\n\n  return '';\n}\n\nfunction getMagicString(arrayBuffer, byteOffset, length) {\n  if (arrayBuffer.byteLength < byteOffset + length) {\n    return '';\n  }\n\n  var dataView = new DataView(arrayBuffer);\n  var magic = '';\n\n  for (var i = 0; i < length; i++) {\n    magic += String.fromCharCode(dataView.getUint8(byteOffset + i));\n  }\n\n  return magic;\n}\n//# sourceMappingURL=select-loader.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { assert, validateLoaderVersion } from '@loaders.gl/loader-utils';\nimport { isLoaderObject } from '../loader-utils/normalize-loader';\nimport { normalizeOptions } from '../loader-utils/option-utils';\nimport { getArrayBufferOrStringFromData } from '../loader-utils/get-data';\nimport { getLoaders, getLoaderContext } from '../loader-utils/context-utils';\nimport parseWithWorker, { canParseWithWorker } from '../loader-utils/parse-with-worker';\nimport { getResourceUrlAndType } from '../utils/resource-utils';\nimport { selectLoader } from './select-loader';\nexport function parse(_x, _x2, _x3, _x4) {\n  return _parse.apply(this, arguments);\n}\n\nfunction _parse() {\n  _parse = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(data, loaders, options, context) {\n    var _getResourceUrlAndTyp, url, candidateLoaders, loader;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            assert(!context || typeof context !== 'string', 'parse no longer accepts final url');\n\n            if (loaders && !Array.isArray(loaders) && !isLoaderObject(loaders)) {\n              context = options;\n              options = loaders;\n              loaders = null;\n            }\n\n            _context.next = 4;\n            return data;\n\n          case 4:\n            data = _context.sent;\n            options = options || {};\n            _getResourceUrlAndTyp = getResourceUrlAndType(data), url = _getResourceUrlAndTyp.url;\n            candidateLoaders = getLoaders(loaders, context);\n            _context.next = 10;\n            return selectLoader(data, candidateLoaders, options);\n\n          case 10:\n            loader = _context.sent;\n\n            if (loader) {\n              _context.next = 13;\n              break;\n            }\n\n            return _context.abrupt(\"return\", null);\n\n          case 13:\n            options = normalizeOptions(options, loader, candidateLoaders, url);\n            context = getLoaderContext({\n              url: url,\n              parse: parse,\n              loaders: candidateLoaders\n            }, options, context);\n            _context.next = 17;\n            return parseWithLoader(loader, data, options, context);\n\n          case 17:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 18:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parse.apply(this, arguments);\n}\n\nfunction parseWithLoader(_x5, _x6, _x7, _x8) {\n  return _parseWithLoader.apply(this, arguments);\n}\n\nfunction _parseWithLoader() {\n  _parseWithLoader = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(loader, data, options, context) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            validateLoaderVersion(loader);\n            _context2.next = 3;\n            return getArrayBufferOrStringFromData(data, loader);\n\n          case 3:\n            data = _context2.sent;\n\n            if (!(loader.parseTextSync && typeof data === 'string')) {\n              _context2.next = 7;\n              break;\n            }\n\n            options.dataType = 'text';\n            return _context2.abrupt(\"return\", loader.parseTextSync(data, options, context, loader));\n\n          case 7:\n            if (!canParseWithWorker(loader, data, options, context)) {\n              _context2.next = 11;\n              break;\n            }\n\n            _context2.next = 10;\n            return parseWithWorker(loader, data, options, context);\n\n          case 10:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 11:\n            if (!(loader.parseText && typeof data === 'string')) {\n              _context2.next = 15;\n              break;\n            }\n\n            _context2.next = 14;\n            return loader.parseText(data, options, context, loader);\n\n          case 14:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 15:\n            if (!loader.parse) {\n              _context2.next = 19;\n              break;\n            }\n\n            _context2.next = 18;\n            return loader.parse(data, options, context, loader);\n\n          case 18:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 19:\n            assert(!loader.parseSync);\n            return _context2.abrupt(\"return\", assert(false));\n\n          case 21:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _parseWithLoader.apply(this, arguments);\n}\n//# sourceMappingURL=parse.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { isBlob } from '../../javascript-utils/is-type';\nimport { isLoaderObject } from '../loader-utils/normalize-loader';\nimport { getFetchFunction } from '../loader-utils/option-utils';\nimport { parse } from './parse';\nexport function load(_x, _x2, _x3) {\n  return _load.apply(this, arguments);\n}\n\nfunction _load() {\n  _load = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(url, loaders, options) {\n    var fetch, data;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!Array.isArray(loaders) && !isLoaderObject(loaders)) {\n              options = loaders;\n              loaders = null;\n            }\n\n            fetch = getFetchFunction(options || {});\n            data = url;\n\n            if (!(typeof url === 'string')) {\n              _context.next = 9;\n              break;\n            }\n\n            _context.next = 6;\n            return fetch(url);\n\n          case 6:\n            data = _context.sent;\n            _context.next = 10;\n            break;\n\n          case 9:\n            url = null;\n\n          case 10:\n            if (!isBlob(url)) {\n              _context.next = 15;\n              break;\n            }\n\n            _context.next = 13;\n            return fetch(url);\n\n          case 13:\n            data = _context.sent;\n            url = null;\n\n          case 15:\n            _context.next = 17;\n            return parse(data, loaders, options);\n\n          case 17:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 18:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _load.apply(this, arguments);\n}\n//# sourceMappingURL=load.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { COORDINATE_SYSTEM } from './constants';\nimport AttributeManager from './attribute/attribute-manager';\nimport UniformTransitionManager from './uniform-transition-manager';\nimport { diffProps as _diffProps, validateProps as _validateProps } from '../lifecycle/props';\nimport { count } from '../utils/count';\nimport log from '../utils/log';\nimport debug from '../debug';\nimport { withParameters, setParameters } from '@luma.gl/core';\nimport assert from '../utils/assert';\nimport memoize from '../utils/memoize';\nimport { mergeShaders } from '../utils/shader';\nimport { projectPosition as _projectPosition, getWorldPosition } from '../shaderlib/project/project-functions';\nimport typedArrayManager from '../utils/typed-array-manager';\nimport Component from '../lifecycle/component';\nimport LayerState from './layer-state';\nimport { worldToPixels } from '@math.gl/web-mercator';\nimport { load } from '@loaders.gl/core';\nvar TRACE_CHANGE_FLAG = 'layer.changeFlag';\nvar TRACE_INITIALIZE = 'layer.initialize';\nvar TRACE_UPDATE = 'layer.update';\nvar TRACE_FINALIZE = 'layer.finalize';\nvar TRACE_MATCHED = 'layer.matched';\nvar MAX_PICKING_COLOR_CACHE_SIZE = Math.pow(2, 24) - 1;\nvar EMPTY_ARRAY = Object.freeze([]);\nvar areViewportsEqual = memoize(function (_ref) {\n  var oldViewport = _ref.oldViewport,\n      viewport = _ref.viewport;\n  return oldViewport.equals(viewport);\n});\nvar pickingColorCache = new Uint8ClampedArray(0);\nvar defaultProps = {\n  data: {\n    type: 'data',\n    value: EMPTY_ARRAY,\n    async: true\n  },\n  dataComparator: null,\n  _dataDiff: {\n    type: 'function',\n    value: function value(data) {\n      return data && data.__diff;\n    },\n    compare: false,\n    optional: true\n  },\n  dataTransform: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDataLoad: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  fetch: {\n    type: 'function',\n    value: function value(url, _ref2) {\n      var propName = _ref2.propName,\n          layer = _ref2.layer;\n      var resourceManager = layer.context.resourceManager;\n      var loadOptions = layer.getLoadOptions();\n      var loaders = layer.props.loaders;\n      var inResourceManager = resourceManager.contains(url);\n\n      if (!inResourceManager && !loadOptions) {\n        resourceManager.add({\n          resourceId: url,\n          data: load(url, loaders),\n          persistent: false\n        });\n        inResourceManager = true;\n      }\n\n      if (inResourceManager) {\n        return resourceManager.subscribe({\n          resourceId: url,\n          onChange: function onChange(data) {\n            return layer.internalState.reloadAsyncProp(propName, data);\n          },\n          consumerId: layer.id,\n          requestId: propName\n        });\n      }\n\n      return load(url, loaders, loadOptions);\n    },\n    compare: false\n  },\n  updateTriggers: {},\n  visible: true,\n  pickable: false,\n  opacity: {\n    type: 'number',\n    min: 0,\n    max: 1,\n    value: 1\n  },\n  onHover: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onClick: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDragStart: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDrag: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDragEnd: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  coordinateSystem: COORDINATE_SYSTEM.DEFAULT,\n  coordinateOrigin: {\n    type: 'array',\n    value: [0, 0, 0],\n    compare: true\n  },\n  modelMatrix: {\n    type: 'array',\n    value: null,\n    compare: true,\n    optional: true\n  },\n  wrapLongitude: false,\n  positionFormat: 'XYZ',\n  colorFormat: 'RGBA',\n  parameters: {},\n  transitions: null,\n  extensions: [],\n  loaders: {\n    type: 'array',\n    value: [],\n    optional: true,\n    compare: true\n  },\n  getPolygonOffset: {\n    type: 'function',\n    value: function value(_ref3) {\n      var layerIndex = _ref3.layerIndex;\n      return [0, -layerIndex * 100];\n    },\n    compare: false\n  },\n  highlightedObjectIndex: -1,\n  autoHighlight: false,\n  highlightColor: {\n    type: 'accessor',\n    value: [0, 0, 128, 128]\n  }\n};\n\nvar Layer = function (_Component) {\n  _inherits(Layer, _Component);\n\n  var _super = _createSuper(Layer);\n\n  function Layer() {\n    _classCallCheck(this, Layer);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Layer, [{\n    key: \"toString\",\n    value: function toString() {\n      var className = this.constructor.layerName || this.constructor.name;\n      return \"\".concat(className, \"({id: '\").concat(this.props.id, \"'})\");\n    }\n  }, {\n    key: \"setState\",\n    value: function setState(updateObject) {\n      this.setChangeFlags({\n        stateChanged: true\n      });\n      Object.assign(this.state, updateObject);\n      this.setNeedsRedraw();\n    }\n  }, {\n    key: \"setNeedsRedraw\",\n    value: function setNeedsRedraw() {\n      var redraw = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      if (this.internalState) {\n        this.internalState.needsRedraw = redraw;\n      }\n    }\n  }, {\n    key: \"setNeedsUpdate\",\n    value: function setNeedsUpdate() {\n      this.context.layerManager.setNeedsUpdate(String(this));\n      this.internalState.needsUpdate = true;\n    }\n  }, {\n    key: \"getNeedsRedraw\",\n    value: function getNeedsRedraw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        clearRedrawFlags: false\n      };\n      return this._getNeedsRedraw(opts);\n    }\n  }, {\n    key: \"needsUpdate\",\n    value: function needsUpdate() {\n      return this.internalState.needsUpdate || this.hasUniformTransition() || this.shouldUpdateState(this._getUpdateParams());\n    }\n  }, {\n    key: \"hasUniformTransition\",\n    value: function hasUniformTransition() {\n      return this.internalState.uniformTransitions.active;\n    }\n  }, {\n    key: \"isPickable\",\n    value: function isPickable() {\n      return this.props.pickable && this.props.visible;\n    }\n  }, {\n    key: \"getModels\",\n    value: function getModels() {\n      return this.state && (this.state.models || (this.state.model ? [this.state.model] : []));\n    }\n  }, {\n    key: \"getAttributeManager\",\n    value: function getAttributeManager() {\n      return this.internalState && this.internalState.attributeManager;\n    }\n  }, {\n    key: \"getCurrentLayer\",\n    value: function getCurrentLayer() {\n      return this.internalState && this.internalState.layer;\n    }\n  }, {\n    key: \"getLoadOptions\",\n    value: function getLoadOptions() {\n      return this.props.loadOptions;\n    }\n  }, {\n    key: \"project\",\n    value: function project(xyz) {\n      var viewport = this.context.viewport;\n      var worldPosition = getWorldPosition(xyz, {\n        viewport: viewport,\n        modelMatrix: this.props.modelMatrix,\n        coordinateOrigin: this.props.coordinateOrigin,\n        coordinateSystem: this.props.coordinateSystem\n      });\n\n      var _worldToPixels = worldToPixels(worldPosition, viewport.pixelProjectionMatrix),\n          _worldToPixels2 = _slicedToArray(_worldToPixels, 3),\n          x = _worldToPixels2[0],\n          y = _worldToPixels2[1],\n          z = _worldToPixels2[2];\n\n      return xyz.length === 2 ? [x, y] : [x, y, z];\n    }\n  }, {\n    key: \"unproject\",\n    value: function unproject(xy) {\n      var viewport = this.context.viewport;\n      return viewport.unproject(xy);\n    }\n  }, {\n    key: \"projectPosition\",\n    value: function projectPosition(xyz) {\n      return _projectPosition(xyz, {\n        viewport: this.context.viewport,\n        modelMatrix: this.props.modelMatrix,\n        coordinateOrigin: this.props.coordinateOrigin,\n        coordinateSystem: this.props.coordinateSystem\n      });\n    }\n  }, {\n    key: \"use64bitPositions\",\n    value: function use64bitPositions() {\n      var coordinateSystem = this.props.coordinateSystem;\n      return coordinateSystem === COORDINATE_SYSTEM.DEFAULT || coordinateSystem === COORDINATE_SYSTEM.LNGLAT || coordinateSystem === COORDINATE_SYSTEM.CARTESIAN;\n    }\n  }, {\n    key: \"onHover\",\n    value: function onHover(info, pickingEvent) {\n      if (this.props.onHover) {\n        return this.props.onHover(info, pickingEvent);\n      }\n\n      return false;\n    }\n  }, {\n    key: \"onClick\",\n    value: function onClick(info, pickingEvent) {\n      if (this.props.onClick) {\n        return this.props.onClick(info, pickingEvent);\n      }\n\n      return false;\n    }\n  }, {\n    key: \"nullPickingColor\",\n    value: function nullPickingColor() {\n      return [0, 0, 0];\n    }\n  }, {\n    key: \"encodePickingColor\",\n    value: function encodePickingColor(i) {\n      var target = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      target[0] = i + 1 & 255;\n      target[1] = i + 1 >> 8 & 255;\n      target[2] = i + 1 >> 8 >> 8 & 255;\n      return target;\n    }\n  }, {\n    key: \"decodePickingColor\",\n    value: function decodePickingColor(color) {\n      assert(color instanceof Uint8Array);\n\n      var _color = _slicedToArray(color, 3),\n          i1 = _color[0],\n          i2 = _color[1],\n          i3 = _color[2];\n\n      var index = i1 + i2 * 256 + i3 * 65536 - 1;\n      return index;\n    }\n  }, {\n    key: \"initializeState\",\n    value: function initializeState() {\n      throw new Error(\"Layer \".concat(this, \" has not defined initializeState\"));\n    }\n  }, {\n    key: \"getShaders\",\n    value: function getShaders(shaders) {\n      var _iterator = _createForOfIteratorHelper(this.props.extensions),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var extension = _step.value;\n          shaders = mergeShaders(shaders, extension.getShaders.call(this, extension));\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return shaders;\n    }\n  }, {\n    key: \"shouldUpdateState\",\n    value: function shouldUpdateState(_ref4) {\n      var oldProps = _ref4.oldProps,\n          props = _ref4.props,\n          context = _ref4.context,\n          changeFlags = _ref4.changeFlags;\n      return changeFlags.propsOrDataChanged;\n    }\n  }, {\n    key: \"updateState\",\n    value: function updateState(_ref5) {\n      var oldProps = _ref5.oldProps,\n          props = _ref5.props,\n          context = _ref5.context,\n          changeFlags = _ref5.changeFlags;\n      var attributeManager = this.getAttributeManager();\n\n      if (changeFlags.dataChanged && attributeManager) {\n        var dataChanged = changeFlags.dataChanged;\n\n        if (Array.isArray(dataChanged)) {\n          var _iterator2 = _createForOfIteratorHelper(dataChanged),\n              _step2;\n\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var dataRange = _step2.value;\n              attributeManager.invalidateAll(dataRange);\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n        } else {\n          attributeManager.invalidateAll();\n        }\n      }\n\n      var neededPickingBuffer = oldProps.highlightedObjectIndex >= 0 || oldProps.pickable;\n      var needPickingBuffer = props.highlightedObjectIndex >= 0 || props.pickable;\n\n      if (neededPickingBuffer !== needPickingBuffer && attributeManager) {\n        var _attributeManager$att = attributeManager.attributes,\n            pickingColors = _attributeManager$att.pickingColors,\n            instancePickingColors = _attributeManager$att.instancePickingColors;\n        var pickingColorsAttribute = pickingColors || instancePickingColors;\n\n        if (pickingColorsAttribute) {\n          if (needPickingBuffer && pickingColorsAttribute.constant) {\n            pickingColorsAttribute.constant = false;\n            attributeManager.invalidate(pickingColorsAttribute.id);\n          }\n\n          if (!pickingColorsAttribute.value && !needPickingBuffer) {\n            pickingColorsAttribute.constant = true;\n            pickingColorsAttribute.value = [0, 0, 0];\n          }\n        }\n      }\n    }\n  }, {\n    key: \"finalizeState\",\n    value: function finalizeState() {\n      var _iterator3 = _createForOfIteratorHelper(this.getModels()),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var model = _step3.value;\n          model[\"delete\"]();\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n\n      var attributeManager = this.getAttributeManager();\n\n      if (attributeManager) {\n        attributeManager.finalize();\n      }\n\n      this.context.resourceManager.unsubscribe({\n        consumerId: this.id\n      });\n      this.internalState.uniformTransitions.clear();\n      this.internalState.finalize();\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(opts) {\n      var _iterator4 = _createForOfIteratorHelper(this.getModels()),\n          _step4;\n\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var model = _step4.value;\n          model.draw(opts);\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n    }\n  }, {\n    key: \"getPickingInfo\",\n    value: function getPickingInfo(_ref6) {\n      var info = _ref6.info,\n          mode = _ref6.mode;\n      var index = info.index;\n\n      if (index >= 0) {\n        if (Array.isArray(this.props.data)) {\n          info.object = this.props.data[index];\n        }\n      }\n\n      return info;\n    }\n  }, {\n    key: \"activateViewport\",\n    value: function activateViewport(viewport) {\n      var oldViewport = this.internalState.viewport;\n      this.internalState.viewport = viewport;\n\n      if (!oldViewport || !areViewportsEqual({\n        oldViewport: oldViewport,\n        viewport: viewport\n      })) {\n        this.setChangeFlags({\n          viewportChanged: true\n        });\n\n        if (this.isComposite) {\n          if (this.needsUpdate()) {\n            this.setNeedsUpdate();\n          }\n        } else {\n          this._update();\n        }\n      }\n    }\n  }, {\n    key: \"invalidateAttribute\",\n    value: function invalidateAttribute() {\n      var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'all';\n      var diffReason = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      var attributeManager = this.getAttributeManager();\n\n      if (!attributeManager) {\n        return;\n      }\n\n      if (name === 'all') {\n        attributeManager.invalidateAll();\n      } else {\n        attributeManager.invalidate(name);\n      }\n    }\n  }, {\n    key: \"updateAttributes\",\n    value: function updateAttributes(changedAttributes) {\n      var _iterator5 = _createForOfIteratorHelper(this.getModels()),\n          _step5;\n\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var model = _step5.value;\n\n          this._setModelAttributes(model, changedAttributes);\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n    }\n  }, {\n    key: \"_updateAttributes\",\n    value: function _updateAttributes(props) {\n      var attributeManager = this.getAttributeManager();\n\n      if (!attributeManager) {\n        return;\n      }\n\n      var numInstances = this.getNumInstances(props);\n      var startIndices = this.getStartIndices(props);\n      attributeManager.update({\n        data: props.data,\n        numInstances: numInstances,\n        startIndices: startIndices,\n        props: props,\n        transitions: props.transitions,\n        buffers: props.data.attributes,\n        context: this,\n        ignoreUnknownAttributes: true\n      });\n      var changedAttributes = attributeManager.getChangedAttributes({\n        clearChangedFlags: true\n      });\n      this.updateAttributes(changedAttributes);\n    }\n  }, {\n    key: \"_updateAttributeTransition\",\n    value: function _updateAttributeTransition() {\n      var attributeManager = this.getAttributeManager();\n\n      if (attributeManager) {\n        attributeManager.updateTransition();\n      }\n    }\n  }, {\n    key: \"_updateUniformTransition\",\n    value: function _updateUniformTransition() {\n      var uniformTransitions = this.internalState.uniformTransitions;\n\n      if (uniformTransitions.active) {\n        var propsInTransition = uniformTransitions.update();\n        var props = Object.create(this.props);\n\n        for (var key in propsInTransition) {\n          Object.defineProperty(props, key, {\n            value: propsInTransition[key]\n          });\n        }\n\n        return props;\n      }\n\n      return this.props;\n    }\n  }, {\n    key: \"calculateInstancePickingColors\",\n    value: function calculateInstancePickingColors(attribute, _ref7) {\n      var numInstances = _ref7.numInstances;\n\n      if (attribute.constant) {\n        return;\n      }\n\n      var cacheSize = pickingColorCache.length / 3;\n      this.internalState.usesPickingColorCache = true;\n\n      if (cacheSize < numInstances) {\n        if (numInstances > MAX_PICKING_COLOR_CACHE_SIZE) {\n          log.warn('Layer has too many data objects. Picking might not be able to distinguish all objects.')();\n        }\n\n        pickingColorCache = typedArrayManager.allocate(pickingColorCache, numInstances, {\n          size: 3,\n          copy: true,\n          maxCount: Math.max(numInstances, MAX_PICKING_COLOR_CACHE_SIZE)\n        });\n        var newCacheSize = pickingColorCache.length / 3;\n        var pickingColor = [];\n\n        for (var i = cacheSize; i < newCacheSize; i++) {\n          this.encodePickingColor(i, pickingColor);\n          pickingColorCache[i * 3 + 0] = pickingColor[0];\n          pickingColorCache[i * 3 + 1] = pickingColor[1];\n          pickingColorCache[i * 3 + 2] = pickingColor[2];\n        }\n      }\n\n      attribute.value = pickingColorCache.subarray(0, numInstances * 3);\n    }\n  }, {\n    key: \"_setModelAttributes\",\n    value: function _setModelAttributes(model, changedAttributes) {\n      var attributeManager = this.getAttributeManager();\n      var excludeAttributes = model.userData.excludeAttributes || {};\n      var shaderAttributes = attributeManager.getShaderAttributes(changedAttributes, excludeAttributes);\n      model.setAttributes(shaderAttributes);\n    }\n  }, {\n    key: \"disablePickingIndex\",\n    value: function disablePickingIndex(objectIndex) {\n      this._disablePickingIndex(objectIndex);\n    }\n  }, {\n    key: \"_disablePickingIndex\",\n    value: function _disablePickingIndex(objectIndex) {\n      var _this$getAttributeMan = this.getAttributeManager().attributes,\n          pickingColors = _this$getAttributeMan.pickingColors,\n          instancePickingColors = _this$getAttributeMan.instancePickingColors;\n      var colors = pickingColors || instancePickingColors;\n      var start = colors.getVertexOffset(objectIndex);\n      var end = colors.getVertexOffset(objectIndex + 1);\n      colors.buffer.subData({\n        data: new Uint8Array(end - start),\n        offset: start\n      });\n    }\n  }, {\n    key: \"restorePickingColors\",\n    value: function restorePickingColors() {\n      var _this$getAttributeMan2 = this.getAttributeManager().attributes,\n          pickingColors = _this$getAttributeMan2.pickingColors,\n          instancePickingColors = _this$getAttributeMan2.instancePickingColors;\n      var colors = pickingColors || instancePickingColors;\n\n      if (this.internalState.usesPickingColorCache && colors.value.buffer !== pickingColorCache.buffer) {\n        colors.value = pickingColorCache.subarray(0, colors.value.length);\n      }\n\n      colors.updateSubBuffer({\n        startOffset: 0\n      });\n    }\n  }, {\n    key: \"getNumInstances\",\n    value: function getNumInstances(props) {\n      props = props || this.props;\n\n      if (props.numInstances !== undefined) {\n        return props.numInstances;\n      }\n\n      if (this.state && this.state.numInstances !== undefined) {\n        return this.state.numInstances;\n      }\n\n      return count(props.data);\n    }\n  }, {\n    key: \"getStartIndices\",\n    value: function getStartIndices(props) {\n      props = props || this.props;\n\n      if (props.startIndices !== undefined) {\n        return props.startIndices;\n      }\n\n      if (this.state && this.state.startIndices) {\n        return this.state.startIndices;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"_initialize\",\n    value: function _initialize() {\n      debug(TRACE_INITIALIZE, this);\n\n      this._initState();\n\n      this.initializeState(this.context);\n\n      var _iterator6 = _createForOfIteratorHelper(this.props.extensions),\n          _step6;\n\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var extension = _step6.value;\n          extension.initializeState.call(this, this.context, extension);\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n\n      this.setChangeFlags({\n        dataChanged: true,\n        propsChanged: true,\n        viewportChanged: true,\n        extensionsChanged: true\n      });\n\n      this._updateState();\n    }\n  }, {\n    key: \"_update\",\n    value: function _update() {\n      var stateNeedsUpdate = this.needsUpdate();\n      debug(TRACE_UPDATE, this, stateNeedsUpdate);\n\n      if (stateNeedsUpdate) {\n        this._updateState();\n      }\n    }\n  }, {\n    key: \"_updateState\",\n    value: function _updateState() {\n      var currentProps = this.props;\n      var currentViewport = this.context.viewport;\n\n      var propsInTransition = this._updateUniformTransition();\n\n      this.internalState.propsInTransition = propsInTransition;\n      this.context.viewport = this.internalState.viewport || currentViewport;\n      this.props = propsInTransition;\n\n      try {\n        var updateParams = this._getUpdateParams();\n\n        var oldModels = this.getModels();\n\n        if (this.context.gl) {\n          this.updateState(updateParams);\n        } else {\n          try {\n            this.updateState(updateParams);\n          } catch (error) {}\n        }\n\n        var _iterator7 = _createForOfIteratorHelper(this.props.extensions),\n            _step7;\n\n        try {\n          for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n            var extension = _step7.value;\n            extension.updateState.call(this, updateParams, extension);\n          }\n        } catch (err) {\n          _iterator7.e(err);\n        } finally {\n          _iterator7.f();\n        }\n\n        var modelChanged = this.getModels()[0] !== oldModels[0];\n\n        this._updateModules(updateParams, modelChanged);\n\n        if (this.isComposite) {\n          this._renderLayers(updateParams);\n        } else {\n          this.setNeedsRedraw();\n\n          this._updateAttributes(this.props);\n\n          if (this.state.model) {\n            this.state.model.setInstanceCount(this.getNumInstances());\n          }\n        }\n      } finally {\n        this.context.viewport = currentViewport;\n        this.props = currentProps;\n        this.clearChangeFlags();\n        this.internalState.needsUpdate = false;\n        this.internalState.resetOldProps();\n      }\n    }\n  }, {\n    key: \"_finalize\",\n    value: function _finalize() {\n      debug(TRACE_FINALIZE, this);\n      assert(this.internalState && this.state);\n      this.finalizeState(this.context);\n\n      var _iterator8 = _createForOfIteratorHelper(this.props.extensions),\n          _step8;\n\n      try {\n        for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n          var extension = _step8.value;\n          extension.finalizeState.call(this, extension);\n        }\n      } catch (err) {\n        _iterator8.e(err);\n      } finally {\n        _iterator8.f();\n      }\n    }\n  }, {\n    key: \"drawLayer\",\n    value: function drawLayer(_ref8) {\n      var _this = this;\n\n      var _ref8$moduleParameter = _ref8.moduleParameters,\n          moduleParameters = _ref8$moduleParameter === void 0 ? null : _ref8$moduleParameter,\n          _ref8$uniforms = _ref8.uniforms,\n          uniforms = _ref8$uniforms === void 0 ? {} : _ref8$uniforms,\n          _ref8$parameters = _ref8.parameters,\n          parameters = _ref8$parameters === void 0 ? {} : _ref8$parameters;\n\n      this._updateAttributeTransition();\n\n      var currentProps = this.props;\n      this.props = this.internalState.propsInTransition || currentProps;\n      var opacity = this.props.opacity;\n      uniforms.opacity = Math.pow(opacity, 1 / 2.2);\n\n      try {\n        if (moduleParameters) {\n          this.setModuleParameters(moduleParameters);\n        }\n\n        var getPolygonOffset = this.props.getPolygonOffset;\n        var offsets = getPolygonOffset && getPolygonOffset(uniforms) || [0, 0];\n        setParameters(this.context.gl, {\n          polygonOffset: offsets\n        });\n        withParameters(this.context.gl, parameters, function () {\n          var opts = {\n            moduleParameters: moduleParameters,\n            uniforms: uniforms,\n            parameters: parameters,\n            context: _this.context\n          };\n\n          var _iterator9 = _createForOfIteratorHelper(_this.props.extensions),\n              _step9;\n\n          try {\n            for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n              var extension = _step9.value;\n              extension.draw.call(_this, opts, extension);\n            }\n          } catch (err) {\n            _iterator9.e(err);\n          } finally {\n            _iterator9.f();\n          }\n\n          _this.draw(opts);\n        });\n      } finally {\n        this.props = currentProps;\n      }\n    }\n  }, {\n    key: \"getChangeFlags\",\n    value: function getChangeFlags() {\n      return this.internalState.changeFlags;\n    }\n  }, {\n    key: \"setChangeFlags\",\n    value: function setChangeFlags(flags) {\n      var changeFlags = this.internalState.changeFlags;\n\n      for (var key in flags) {\n        if (flags[key]) {\n          var flagChanged = false;\n\n          switch (key) {\n            case 'dataChanged':\n              if (Array.isArray(changeFlags[key])) {\n                changeFlags[key] = Array.isArray(flags[key]) ? changeFlags[key].concat(flags[key]) : flags[key];\n                flagChanged = true;\n              }\n\n            default:\n              if (!changeFlags[key]) {\n                changeFlags[key] = flags[key];\n                flagChanged = true;\n              }\n\n          }\n\n          if (flagChanged) {\n            debug(TRACE_CHANGE_FLAG, this, key, flags);\n          }\n        }\n      }\n\n      var propsOrDataChanged = changeFlags.dataChanged || changeFlags.updateTriggersChanged || changeFlags.propsChanged || changeFlags.extensionsChanged;\n      changeFlags.propsOrDataChanged = propsOrDataChanged;\n      changeFlags.somethingChanged = propsOrDataChanged || flags.viewportChanged || flags.stateChanged;\n    }\n  }, {\n    key: \"clearChangeFlags\",\n    value: function clearChangeFlags() {\n      this.internalState.changeFlags = {\n        dataChanged: false,\n        propsChanged: false,\n        updateTriggersChanged: false,\n        viewportChanged: false,\n        stateChanged: false,\n        extensionsChanged: false,\n        propsOrDataChanged: false,\n        somethingChanged: false\n      };\n    }\n  }, {\n    key: \"diffProps\",\n    value: function diffProps(newProps, oldProps) {\n      var changeFlags = _diffProps(newProps, oldProps);\n\n      if (changeFlags.updateTriggersChanged) {\n        for (var key in changeFlags.updateTriggersChanged) {\n          if (changeFlags.updateTriggersChanged[key]) {\n            this.invalidateAttribute(key);\n          }\n        }\n      }\n\n      if (changeFlags.transitionsChanged) {\n        for (var _key in changeFlags.transitionsChanged) {\n          this.internalState.uniformTransitions.add(_key, oldProps[_key], newProps[_key], newProps.transitions[_key]);\n        }\n      }\n\n      return this.setChangeFlags(changeFlags);\n    }\n  }, {\n    key: \"validateProps\",\n    value: function validateProps() {\n      _validateProps(this.props);\n    }\n  }, {\n    key: \"setModuleParameters\",\n    value: function setModuleParameters(moduleParameters) {\n      var _iterator10 = _createForOfIteratorHelper(this.getModels()),\n          _step10;\n\n      try {\n        for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n          var model = _step10.value;\n          model.updateModuleSettings(moduleParameters);\n        }\n      } catch (err) {\n        _iterator10.e(err);\n      } finally {\n        _iterator10.f();\n      }\n    }\n  }, {\n    key: \"_updateModules\",\n    value: function _updateModules(_ref9, forceUpdate) {\n      var props = _ref9.props,\n          oldProps = _ref9.oldProps;\n      var autoHighlight = props.autoHighlight,\n          highlightedObjectIndex = props.highlightedObjectIndex,\n          highlightColor = props.highlightColor;\n\n      if (forceUpdate || oldProps.autoHighlight !== autoHighlight || oldProps.highlightedObjectIndex !== highlightedObjectIndex || oldProps.highlightColor !== highlightColor) {\n        var parameters = {};\n\n        if (!autoHighlight) {\n          parameters.pickingSelectedColor = null;\n        }\n\n        if (Array.isArray(highlightColor)) {\n          parameters.pickingHighlightColor = highlightColor;\n        }\n\n        if (Number.isInteger(highlightedObjectIndex)) {\n          parameters.pickingSelectedColor = highlightedObjectIndex >= 0 ? this.encodePickingColor(highlightedObjectIndex) : null;\n        }\n\n        this.setModuleParameters(parameters);\n      }\n    }\n  }, {\n    key: \"_getUpdateParams\",\n    value: function _getUpdateParams() {\n      return {\n        props: this.props,\n        oldProps: this.internalState.getOldProps(),\n        context: this.context,\n        changeFlags: this.internalState.changeFlags\n      };\n    }\n  }, {\n    key: \"_getNeedsRedraw\",\n    value: function _getNeedsRedraw(opts) {\n      if (!this.internalState) {\n        return false;\n      }\n\n      var redraw = false;\n      redraw = redraw || this.internalState.needsRedraw && this.id;\n      this.internalState.needsRedraw = this.internalState.needsRedraw && !opts.clearRedrawFlags;\n      var attributeManager = this.getAttributeManager();\n      var attributeManagerNeedsRedraw = attributeManager && attributeManager.getNeedsRedraw(opts);\n      redraw = redraw || attributeManagerNeedsRedraw;\n      return redraw;\n    }\n  }, {\n    key: \"_getAttributeManager\",\n    value: function _getAttributeManager() {\n      return new AttributeManager(this.context.gl, {\n        id: this.props.id,\n        stats: this.context.stats,\n        timeline: this.context.timeline\n      });\n    }\n  }, {\n    key: \"_initState\",\n    value: function _initState() {\n      assert(!this.internalState && !this.state);\n      assert(isFinite(this.props.coordinateSystem), \"\".concat(this.id, \": invalid coordinateSystem\"));\n\n      var attributeManager = this._getAttributeManager();\n\n      if (attributeManager) {\n        attributeManager.addInstanced({\n          instancePickingColors: {\n            type: 5121,\n            size: 3,\n            noAlloc: true,\n            update: this.calculateInstancePickingColors\n          }\n        });\n      }\n\n      this.internalState = new LayerState({\n        attributeManager: attributeManager,\n        layer: this\n      });\n      this.clearChangeFlags();\n      this.state = {};\n      Object.defineProperty(this.state, 'attributeManager', {\n        get: function get() {\n          log.deprecated('layer.state.attributeManager', 'layer.getAttributeManager()');\n          return attributeManager;\n        }\n      });\n      this.internalState.layer = this;\n      this.internalState.uniformTransitions = new UniformTransitionManager(this.context.timeline);\n      this.internalState.onAsyncPropUpdated = this._onAsyncPropUpdated.bind(this);\n      this.internalState.setAsyncProps(this.props);\n    }\n  }, {\n    key: \"_transferState\",\n    value: function _transferState(oldLayer) {\n      debug(TRACE_MATCHED, this, this === oldLayer);\n      var state = oldLayer.state,\n          internalState = oldLayer.internalState;\n      assert(state && internalState);\n\n      if (this === oldLayer) {\n        return;\n      }\n\n      this.internalState = internalState;\n      this.internalState.layer = this;\n      this.state = state;\n      this.internalState.setAsyncProps(this.props);\n      this.diffProps(this.props, this.internalState.getOldProps());\n    }\n  }, {\n    key: \"_onAsyncPropUpdated\",\n    value: function _onAsyncPropUpdated() {\n      this.diffProps(this.props, this.internalState.getOldProps());\n      this.setNeedsUpdate();\n    }\n  }, {\n    key: \"isLoaded\",\n    get: function get() {\n      return this.internalState && !this.internalState.isAsyncPropLoading();\n    }\n  }, {\n    key: \"wrapLongitude\",\n    get: function get() {\n      return this.props.wrapLongitude;\n    }\n  }]);\n\n  return Layer;\n}(Component);\n\nexport { Layer as default };\nLayer.layerName = 'Layer';\nLayer.defaultProps = defaultProps;\n//# sourceMappingURL=layer.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { uid, assert } from '@luma.gl/webgl';\nexport var DRAW_MODE = {\n  POINTS: 0x0000,\n  LINES: 0x0001,\n  LINE_LOOP: 0x0002,\n  LINE_STRIP: 0x0003,\n  TRIANGLES: 0x0004,\n  TRIANGLE_STRIP: 0x0005,\n  TRIANGLE_FAN: 0x0006\n};\n\nvar Geometry = function () {\n  _createClass(Geometry, null, [{\n    key: \"DRAW_MODE\",\n    get: function get() {\n      return DRAW_MODE;\n    }\n  }]);\n\n  function Geometry() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Geometry);\n\n    var _props$id = props.id,\n        id = _props$id === void 0 ? uid('geometry') : _props$id,\n        _props$drawMode = props.drawMode,\n        drawMode = _props$drawMode === void 0 ? DRAW_MODE.TRIANGLES : _props$drawMode,\n        _props$attributes = props.attributes,\n        attributes = _props$attributes === void 0 ? {} : _props$attributes,\n        _props$indices = props.indices,\n        indices = _props$indices === void 0 ? null : _props$indices,\n        _props$vertexCount = props.vertexCount,\n        vertexCount = _props$vertexCount === void 0 ? null : _props$vertexCount;\n    this.id = id;\n    this.drawMode = drawMode | 0;\n    this.attributes = {};\n    this.userData = {};\n\n    this._setAttributes(attributes, indices);\n\n    this.vertexCount = vertexCount || this._calculateVertexCount(this.attributes, this.indices);\n  }\n\n  _createClass(Geometry, [{\n    key: \"getVertexCount\",\n    value: function getVertexCount() {\n      return this.vertexCount;\n    }\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes() {\n      return this.indices ? _objectSpread({\n        indices: this.indices\n      }, this.attributes) : this.attributes;\n    }\n  }, {\n    key: \"_print\",\n    value: function _print(attributeName) {\n      return \"Geometry \".concat(this.id, \" attribute \").concat(attributeName);\n    }\n  }, {\n    key: \"_setAttributes\",\n    value: function _setAttributes(attributes, indices) {\n      if (indices) {\n        this.indices = ArrayBuffer.isView(indices) ? {\n          value: indices,\n          size: 1\n        } : indices;\n      }\n\n      for (var attributeName in attributes) {\n        var attribute = attributes[attributeName];\n        attribute = ArrayBuffer.isView(attribute) ? {\n          value: attribute\n        } : attribute;\n        assert(ArrayBuffer.isView(attribute.value), \"\".concat(this._print(attributeName), \": must be typed array or object with value as typed array\"));\n\n        if ((attributeName === 'POSITION' || attributeName === 'positions') && !attribute.size) {\n          attribute.size = 3;\n        }\n\n        if (attributeName === 'indices') {\n          assert(!this.indices);\n          this.indices = attribute;\n        } else {\n          this.attributes[attributeName] = attribute;\n        }\n      }\n\n      if (this.indices && this.indices.isIndexed !== undefined) {\n        this.indices = Object.assign({}, this.indices);\n        delete this.indices.isIndexed;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"_calculateVertexCount\",\n    value: function _calculateVertexCount(attributes, indices) {\n      if (indices) {\n        return indices.value.length;\n      }\n\n      var vertexCount = Infinity;\n\n      for (var attributeName in attributes) {\n        var attribute = attributes[attributeName];\n        var value = attribute.value,\n            size = attribute.size,\n            constant = attribute.constant;\n\n        if (!constant && value && size >= 1) {\n          vertexCount = Math.min(vertexCount, value.length / size);\n        }\n      }\n\n      assert(Number.isFinite(vertexCount));\n      return vertexCount;\n    }\n  }, {\n    key: \"mode\",\n    get: function get() {\n      return this.drawMode;\n    }\n  }]);\n\n  return Geometry;\n}();\n\nexport { Geometry as default };\n//# sourceMappingURL=geometry.js.map","import { equals } from '@math.gl/core';\nexport var WINDING = {\n  CLOCKWISE: 1,\n  COUNTER_CLOCKWISE: -1\n};\nexport function modifyPolygonWindingDirection(points, direction) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var windingDirection = getPolygonWindingDirection(points, options);\n\n  if (windingDirection !== direction) {\n    reversePolygon(points, options);\n    return true;\n  }\n\n  return false;\n}\nexport function getPolygonWindingDirection(points) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return Math.sign(getPolygonSignedArea(points, options));\n}\nexport function getPolygonSignedArea(points) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var area = 0;\n  forEachSegmentInPolygon(points, function (p1x, p1y, p2x, p2y) {\n    area += areaCalcCallback(p1x, p1y, p2x, p2y);\n  }, options);\n  return area / 2;\n}\nexport function forEachSegmentInPolygon(points, visitor) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var _options$start = options.start,\n      start = _options$start === void 0 ? 0 : _options$start,\n      _options$end = options.end,\n      end = _options$end === void 0 ? points.length : _options$end,\n      _options$size = options.size,\n      size = _options$size === void 0 ? 2 : _options$size,\n      isClosed = options.isClosed;\n  var numPoints = (end - start) / size;\n\n  for (var i = 0; i < numPoints - 1; ++i) {\n    visitor(points[start + i * size], points[start + i * size + 1], points[start + (i + 1) * size], points[start + (i + 1) * size + 1], i, i + 1);\n  }\n\n  var endPointIndex = start + (numPoints - 1) * size;\n  var isClosedEx = isClosed || equals(points[start], points[endPointIndex]) && equals(points[start + 1], points[endPointIndex + 1]);\n\n  if (!isClosedEx) {\n    visitor(points[endPointIndex], points[endPointIndex + 1], points[start], points[start + 1], numPoints - 1, 0);\n  }\n}\n\nfunction reversePolygon(points, options) {\n  var _options$start2 = options.start,\n      start = _options$start2 === void 0 ? 0 : _options$start2,\n      _options$end2 = options.end,\n      end = _options$end2 === void 0 ? points.length : _options$end2,\n      _options$size2 = options.size,\n      size = _options$size2 === void 0 ? 2 : _options$size2;\n  var numPoints = (end - start) / size;\n  var numSwaps = Math.floor(numPoints / 2);\n\n  for (var i = 0; i < numSwaps; ++i) {\n    var b1 = start + i * size;\n    var b2 = start + (numPoints - 1 - i) * size;\n\n    for (var j = 0; j < size; ++j) {\n      var tmp = points[b1 + j];\n      points[b1 + j] = points[b2 + j];\n      points[b2 + j] = tmp;\n    }\n  }\n}\n\nexport function modifyPolygonWindingDirectionPoints(points, direction) {\n  var params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var currentDirection = getPolygonWindingDirectionPoints(points, params);\n\n  if (currentDirection !== direction) {\n    points.reverse();\n    return true;\n  }\n\n  return false;\n}\nexport function getPolygonWindingDirectionPoints(points) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return Math.sign(getPolygonSignedAreaPoints(points, params));\n}\nexport function getPolygonSignedAreaPoints(points) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var area = 0;\n  forEachSegmentInPolygonPoints(points, function (p1, p2) {\n    area += areaCalcCallback(p1[0], p1[1], p2[0], p2[1]);\n  }, params);\n  return area / 2;\n}\nexport function forEachSegmentInPolygonPoints(points, visitor) {\n  var params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var _params$start = params.start,\n      start = _params$start === void 0 ? 0 : _params$start,\n      _params$end = params.end,\n      end = _params$end === void 0 ? points.length : _params$end,\n      isClosed = params.isClosed;\n\n  for (var i = start; i < end - 1; ++i) {\n    visitor(points[i], points[i + 1], i, i + 1);\n  }\n\n  var isClosedEx = isClosed || equals(points[end - 1], points[0]);\n\n  if (!isClosedEx) {\n    visitor(points[end - 1], points[0], end - 1, 0);\n  }\n}\n\nfunction areaCalcCallback(p1x, p1y, p2x, p2y) {\n  return (p1x + p2x) * (p1y - p2y);\n}\n//# sourceMappingURL=polygon-utils.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { isArray } from '@math.gl/core';\nimport { getPolygonSignedArea, forEachSegmentInPolygon, modifyPolygonWindingDirection, getPolygonSignedAreaPoints, forEachSegmentInPolygonPoints, modifyPolygonWindingDirectionPoints } from './polygon-utils';\n\nvar Polygon = function () {\n  function Polygon(points) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Polygon);\n\n    this.points = points;\n    this.isFlatArray = !isArray(points[0]);\n    this.options = {\n      start: options.start || 0,\n      end: options.end || points.length,\n      size: options.size || 2,\n      isClosed: options.isClosed\n    };\n    Object.freeze(this);\n  }\n\n  _createClass(Polygon, [{\n    key: \"getSignedArea\",\n    value: function getSignedArea() {\n      if (this.isFlatArray) return getPolygonSignedArea(this.points, this.options);\n      return getPolygonSignedAreaPoints(this.points, this.options);\n    }\n  }, {\n    key: \"getArea\",\n    value: function getArea() {\n      return Math.abs(this.getSignedArea());\n    }\n  }, {\n    key: \"getWindingDirection\",\n    value: function getWindingDirection() {\n      return Math.sign(this.getSignedArea());\n    }\n  }, {\n    key: \"forEachSegment\",\n    value: function forEachSegment(visitor) {\n      if (this.isFlatArray) {\n        forEachSegmentInPolygon(this.points, function (x1, y1, x2, y2, i1, i2) {\n          visitor([x1, y1], [x2, y2], i1, i2);\n        }, this.options);\n      } else {\n        forEachSegmentInPolygonPoints(this.points, visitor, this.options);\n      }\n    }\n  }, {\n    key: \"modifyWindingDirection\",\n    value: function modifyWindingDirection(direction) {\n      if (this.isFlatArray) {\n        return modifyPolygonWindingDirection(this.points, direction, this.options);\n      }\n\n      return modifyPolygonWindingDirectionPoints(this.points, direction, this.options);\n    }\n  }]);\n\n  return Polygon;\n}();\n\nexport { Polygon as default };\n//# sourceMappingURL=polygon.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { log } from '@deck.gl/core';\nimport { Geometry, uid } from '@luma.gl/core';\nimport { modifyPolygonWindingDirection, WINDING } from '@math.gl/polygon';\n\nvar ColumnGeometry = function (_Geometry) {\n  _inherits(ColumnGeometry, _Geometry);\n\n  var _super = _createSuper(ColumnGeometry);\n\n  function ColumnGeometry() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, ColumnGeometry);\n\n    var _props$id = props.id,\n        id = _props$id === void 0 ? uid('column-geometry') : _props$id;\n\n    var _tesselateColumn = tesselateColumn(props),\n        indices = _tesselateColumn.indices,\n        attributes = _tesselateColumn.attributes;\n\n    return _super.call(this, _objectSpread(_objectSpread({}, props), {}, {\n      id: id,\n      indices: indices,\n      attributes: attributes\n    }));\n  }\n\n  return ColumnGeometry;\n}(Geometry);\n\nexport { ColumnGeometry as default };\n\nfunction tesselateColumn(props) {\n  var radius = props.radius,\n      _props$height = props.height,\n      height = _props$height === void 0 ? 1 : _props$height,\n      _props$nradial = props.nradial,\n      nradial = _props$nradial === void 0 ? 10 : _props$nradial;\n  var vertices = props.vertices;\n\n  if (vertices) {\n    log.assert(vertices.length >= nradial);\n    vertices = vertices.flatMap(function (v) {\n      return [v[0], v[1]];\n    });\n    modifyPolygonWindingDirection(vertices, WINDING.COUNTER_CLOCKWISE);\n  }\n\n  var isExtruded = height > 0;\n  var vertsAroundEdge = nradial + 1;\n  var numVertices = isExtruded ? vertsAroundEdge * 3 + 1 : nradial;\n  var stepAngle = Math.PI * 2 / nradial;\n  var indices = new Uint16Array(isExtruded ? nradial * 3 * 2 : 0);\n  var positions = new Float32Array(numVertices * 3);\n  var normals = new Float32Array(numVertices * 3);\n  var i = 0;\n\n  if (isExtruded) {\n    for (var j = 0; j < vertsAroundEdge; j++) {\n      var a = j * stepAngle;\n      var vertexIndex = j % nradial;\n      var sin = Math.sin(a);\n      var cos = Math.cos(a);\n\n      for (var k = 0; k < 2; k++) {\n        positions[i + 0] = vertices ? vertices[vertexIndex * 2] : cos * radius;\n        positions[i + 1] = vertices ? vertices[vertexIndex * 2 + 1] : sin * radius;\n        positions[i + 2] = (1 / 2 - k) * height;\n        normals[i + 0] = vertices ? vertices[vertexIndex * 2] : cos;\n        normals[i + 1] = vertices ? vertices[vertexIndex * 2 + 1] : sin;\n        i += 3;\n      }\n    }\n\n    positions[i + 0] = positions[i - 3];\n    positions[i + 1] = positions[i - 2];\n    positions[i + 2] = positions[i - 1];\n    i += 3;\n  }\n\n  for (var _j = isExtruded ? 0 : 1; _j < vertsAroundEdge; _j++) {\n    var v = Math.floor(_j / 2) * Math.sign(0.5 - _j % 2);\n\n    var _a = v * stepAngle;\n\n    var _vertexIndex = (v + nradial) % nradial;\n\n    var _sin = Math.sin(_a);\n\n    var _cos = Math.cos(_a);\n\n    positions[i + 0] = vertices ? vertices[_vertexIndex * 2] : _cos * radius;\n    positions[i + 1] = vertices ? vertices[_vertexIndex * 2 + 1] : _sin * radius;\n    positions[i + 2] = height / 2;\n    normals[i + 2] = 1;\n    i += 3;\n  }\n\n  if (isExtruded) {\n    var index = 0;\n\n    for (var _j2 = 0; _j2 < nradial; _j2++) {\n      indices[index++] = _j2 * 2 + 0;\n      indices[index++] = _j2 * 2 + 2;\n      indices[index++] = _j2 * 2 + 0;\n      indices[index++] = _j2 * 2 + 1;\n      indices[index++] = _j2 * 2 + 1;\n      indices[index++] = _j2 * 2 + 3;\n    }\n  }\n\n  return {\n    indices: indices,\n    attributes: {\n      POSITION: {\n        size: 3,\n        value: positions\n      },\n      NORMAL: {\n        size: 3,\n        value: normals\n      }\n    }\n  };\n}\n//# sourceMappingURL=column-geometry.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { Layer, project32, gouraudLighting, picking } from '@deck.gl/core';\nimport { Model } from '@luma.gl/core';\nimport ColumnGeometry from './column-geometry';\nimport vs from './column-layer-vertex.glsl';\nimport fs from './column-layer-fragment.glsl';\nvar DEFAULT_COLOR = [0, 0, 0, 255];\nvar defaultProps = {\n  diskResolution: {\n    type: 'number',\n    min: 4,\n    value: 20\n  },\n  vertices: null,\n  radius: {\n    type: 'number',\n    min: 0,\n    value: 1000\n  },\n  angle: {\n    type: 'number',\n    value: 0\n  },\n  offset: {\n    type: 'array',\n    value: [0, 0]\n  },\n  coverage: {\n    type: 'number',\n    min: 0,\n    max: 1,\n    value: 1\n  },\n  elevationScale: {\n    type: 'number',\n    min: 0,\n    value: 1\n  },\n  lineWidthUnits: 'meters',\n  lineWidthScale: 1,\n  lineWidthMinPixels: 0,\n  lineWidthMaxPixels: Number.MAX_SAFE_INTEGER,\n  extruded: true,\n  wireframe: false,\n  filled: true,\n  stroked: false,\n  getPosition: {\n    type: 'accessor',\n    value: function value(x) {\n      return x.position;\n    }\n  },\n  getFillColor: {\n    type: 'accessor',\n    value: DEFAULT_COLOR\n  },\n  getLineColor: {\n    type: 'accessor',\n    value: DEFAULT_COLOR\n  },\n  getLineWidth: {\n    type: 'accessor',\n    value: 1\n  },\n  getElevation: {\n    type: 'accessor',\n    value: 1000\n  },\n  material: true,\n  getColor: {\n    deprecatedFor: ['getFillColor', 'getLineColor']\n  }\n};\n\nvar ColumnLayer = function (_Layer) {\n  _inherits(ColumnLayer, _Layer);\n\n  var _super = _createSuper(ColumnLayer);\n\n  function ColumnLayer() {\n    _classCallCheck(this, ColumnLayer);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(ColumnLayer, [{\n    key: \"getShaders\",\n    value: function getShaders() {\n      return _get(_getPrototypeOf(ColumnLayer.prototype), \"getShaders\", this).call(this, {\n        vs: vs,\n        fs: fs,\n        modules: [project32, gouraudLighting, picking]\n      });\n    }\n  }, {\n    key: \"initializeState\",\n    value: function initializeState() {\n      var attributeManager = this.getAttributeManager();\n      attributeManager.addInstanced({\n        instancePositions: {\n          size: 3,\n          type: 5130,\n          fp64: this.use64bitPositions(),\n          transition: true,\n          accessor: 'getPosition'\n        },\n        instanceElevations: {\n          size: 1,\n          transition: true,\n          accessor: 'getElevation'\n        },\n        instanceFillColors: {\n          size: this.props.colorFormat.length,\n          type: 5121,\n          normalized: true,\n          transition: true,\n          accessor: 'getFillColor',\n          defaultValue: DEFAULT_COLOR\n        },\n        instanceLineColors: {\n          size: this.props.colorFormat.length,\n          type: 5121,\n          normalized: true,\n          transition: true,\n          accessor: 'getLineColor',\n          defaultValue: DEFAULT_COLOR\n        },\n        instanceStrokeWidths: {\n          size: 1,\n          accessor: 'getLineWidth',\n          transition: true\n        }\n      });\n    }\n  }, {\n    key: \"updateState\",\n    value: function updateState(_ref) {\n      var props = _ref.props,\n          oldProps = _ref.oldProps,\n          changeFlags = _ref.changeFlags;\n\n      _get(_getPrototypeOf(ColumnLayer.prototype), \"updateState\", this).call(this, {\n        props: props,\n        oldProps: oldProps,\n        changeFlags: changeFlags\n      });\n\n      var regenerateModels = changeFlags.extensionsChanged;\n\n      if (regenerateModels) {\n        var gl = this.context.gl;\n\n        if (this.state.model) {\n          this.state.model[\"delete\"]();\n        }\n\n        this.setState({\n          model: this._getModel(gl)\n        });\n        this.getAttributeManager().invalidateAll();\n      }\n\n      if (regenerateModels || props.diskResolution !== oldProps.diskResolution || props.vertices !== oldProps.vertices || (props.extruded || props.stroked) !== (oldProps.extruded || oldProps.stroked)) {\n        this._updateGeometry(props);\n      }\n    }\n  }, {\n    key: \"getGeometry\",\n    value: function getGeometry(diskResolution, vertices, hasThinkness) {\n      var geometry = new ColumnGeometry({\n        radius: 1,\n        height: hasThinkness ? 2 : 0,\n        vertices: vertices,\n        nradial: diskResolution\n      });\n      var meanVertexDistance = 0;\n\n      if (vertices) {\n        for (var i = 0; i < diskResolution; i++) {\n          var p = vertices[i];\n          var d = Math.sqrt(p[0] * p[0] + p[1] * p[1]);\n          meanVertexDistance += d / diskResolution;\n        }\n      } else {\n        meanVertexDistance = 1;\n      }\n\n      this.setState({\n        edgeDistance: Math.cos(Math.PI / diskResolution) * meanVertexDistance\n      });\n      return geometry;\n    }\n  }, {\n    key: \"_getModel\",\n    value: function _getModel(gl) {\n      return new Model(gl, Object.assign({}, this.getShaders(), {\n        id: this.props.id,\n        isInstanced: true\n      }));\n    }\n  }, {\n    key: \"_updateGeometry\",\n    value: function _updateGeometry(_ref2) {\n      var diskResolution = _ref2.diskResolution,\n          vertices = _ref2.vertices,\n          extruded = _ref2.extruded,\n          stroked = _ref2.stroked;\n      var geometry = this.getGeometry(diskResolution, vertices, extruded || stroked);\n      this.setState({\n        fillVertexCount: geometry.attributes.POSITION.value.length / 3,\n        wireframeVertexCount: geometry.indices.value.length\n      });\n      this.state.model.setProps({\n        geometry: geometry\n      });\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(_ref3) {\n      var uniforms = _ref3.uniforms;\n      var viewport = this.context.viewport;\n      var _this$props = this.props,\n          lineWidthUnits = _this$props.lineWidthUnits,\n          lineWidthScale = _this$props.lineWidthScale,\n          lineWidthMinPixels = _this$props.lineWidthMinPixels,\n          lineWidthMaxPixels = _this$props.lineWidthMaxPixels,\n          elevationScale = _this$props.elevationScale,\n          extruded = _this$props.extruded,\n          filled = _this$props.filled,\n          stroked = _this$props.stroked,\n          wireframe = _this$props.wireframe,\n          offset = _this$props.offset,\n          coverage = _this$props.coverage,\n          radius = _this$props.radius,\n          angle = _this$props.angle;\n      var _this$state = this.state,\n          model = _this$state.model,\n          fillVertexCount = _this$state.fillVertexCount,\n          wireframeVertexCount = _this$state.wireframeVertexCount,\n          edgeDistance = _this$state.edgeDistance;\n      var widthMultiplier = lineWidthUnits === 'pixels' ? viewport.metersPerPixel : 1;\n      model.setUniforms(Object.assign({}, uniforms, {\n        radius: radius,\n        angle: angle / 180 * Math.PI,\n        offset: offset,\n        extruded: extruded,\n        coverage: coverage,\n        elevationScale: elevationScale,\n        edgeDistance: edgeDistance,\n        widthScale: lineWidthScale * widthMultiplier,\n        widthMinPixels: lineWidthMinPixels,\n        widthMaxPixels: lineWidthMaxPixels\n      }));\n\n      if (extruded && wireframe) {\n        model.setProps({\n          isIndexed: true\n        });\n        model.setVertexCount(wireframeVertexCount).setDrawMode(1).setUniforms({\n          isStroke: true\n        }).draw();\n      }\n\n      if (filled) {\n        model.setProps({\n          isIndexed: false\n        });\n        model.setVertexCount(fillVertexCount).setDrawMode(5).setUniforms({\n          isStroke: false\n        }).draw();\n      }\n\n      if (!extruded && stroked) {\n        model.setProps({\n          isIndexed: false\n        });\n        model.setVertexCount(fillVertexCount * 2 / 3).setDrawMode(5).setUniforms({\n          isStroke: true\n        }).draw();\n      }\n    }\n  }]);\n\n  return ColumnLayer;\n}(Layer);\n\nexport { ColumnLayer as default };\nColumnLayer.layerName = 'ColumnLayer';\nColumnLayer.defaultProps = defaultProps;\n//# sourceMappingURL=column-layer.js.map","export default \"\\n#define SHADER_NAME column-layer-vertex-shader\\n\\nattribute vec3 positions;\\nattribute vec3 normals;\\n\\nattribute vec3 instancePositions;\\nattribute float instanceElevations;\\nattribute vec3 instancePositions64Low;\\nattribute vec4 instanceFillColors;\\nattribute vec4 instanceLineColors;\\nattribute float instanceStrokeWidths;\\n\\nattribute vec3 instancePickingColors;\\nuniform float opacity;\\nuniform float radius;\\nuniform float angle;\\nuniform vec2 offset;\\nuniform bool extruded;\\nuniform bool isStroke;\\nuniform float coverage;\\nuniform float elevationScale;\\nuniform float edgeDistance;\\nuniform float widthScale;\\nuniform float widthMinPixels;\\nuniform float widthMaxPixels;\\nvarying vec4 vColor;\\n\\nvoid main(void) {\\n  geometry.worldPosition = instancePositions;\\n\\n  vec4 color = isStroke ? instanceLineColors : instanceFillColors;\\n  mat2 rotationMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\\n  float elevation = 0.0;\\n  float strokeOffsetRatio = 1.0;\\n\\n  if (extruded) {\\n    elevation = instanceElevations * (positions.z + 1.0) / 2.0 * elevationScale;\\n  } else if (isStroke) {\\n    float widthPixels = clamp(project_size_to_pixel(instanceStrokeWidths * widthScale),\\n      widthMinPixels, widthMaxPixels) / 2.0;\\n    strokeOffsetRatio -= sign(positions.z) * project_pixel_size(widthPixels) / project_size(edgeDistance * coverage * radius);\\n  }\\n  float shouldRender = float(color.a > 0.0 && instanceElevations >= 0.0);\\n  float dotRadius = radius * coverage * shouldRender;\\n\\n  geometry.normal = project_normal(vec3(rotationMatrix * normals.xy, normals.z));\\n  geometry.pickingColor = instancePickingColors;\\n  vec3 centroidPosition = vec3(instancePositions.xy, instancePositions.z + elevation);\\n  vec3 centroidPosition64Low = instancePositions64Low;\\n  vec3 pos = vec3(project_size(rotationMatrix * positions.xy * strokeOffsetRatio + offset) * dotRadius, 0.);\\n  DECKGL_FILTER_SIZE(pos, geometry);\\n\\n  gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64Low, pos, geometry.position);\\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\\n  if (extruded && !isStroke) {\\n    vec3 lightColor = lighting_getLightColor(color.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);\\n    vColor = vec4(lightColor, color.a * opacity);\\n  } else {\\n    vColor = vec4(color.rgb, color.a * opacity);\\n  }\\n  DECKGL_FILTER_COLOR(vColor, geometry);\\n}\\n\";\n//# sourceMappingURL=column-layer-vertex.glsl.js.map","export default \"#define SHADER_NAME column-layer-fragment-shader\\n\\nprecision highp float;\\n\\nvarying vec4 vColor;\\n\\nvoid main(void) {\\n  gl_FragColor = vColor;\\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\\n}\\n\";\n//# sourceMappingURL=column-layer-fragment.glsl.js.map","var thirdPi = Math.PI / 3,\n    angles = [0, thirdPi, 2 * thirdPi, 3 * thirdPi, 4 * thirdPi, 5 * thirdPi];\n\nfunction pointX(d) {\n  return d[0];\n}\n\nfunction pointY(d) {\n  return d[1];\n}\n\nexport default function() {\n  var x0 = 0,\n      y0 = 0,\n      x1 = 1,\n      y1 = 1,\n      x = pointX,\n      y = pointY,\n      r,\n      dx,\n      dy;\n\n  function hexbin(points) {\n    var binsById = {}, bins = [], i, n = points.length;\n\n    for (i = 0; i < n; ++i) {\n      if (isNaN(px = +x.call(null, point = points[i], i, points))\n          || isNaN(py = +y.call(null, point, i, points))) continue;\n\n      var point,\n          px,\n          py,\n          pj = Math.round(py = py / dy),\n          pi = Math.round(px = px / dx - (pj & 1) / 2),\n          py1 = py - pj;\n\n      if (Math.abs(py1) * 3 > 1) {\n        var px1 = px - pi,\n            pi2 = pi + (px < pi ? -1 : 1) / 2,\n            pj2 = pj + (py < pj ? -1 : 1),\n            px2 = px - pi2,\n            py2 = py - pj2;\n        if (px1 * px1 + py1 * py1 > px2 * px2 + py2 * py2) pi = pi2 + (pj & 1 ? 1 : -1) / 2, pj = pj2;\n      }\n\n      var id = pi + \"-\" + pj, bin = binsById[id];\n      if (bin) bin.push(point);\n      else {\n        bins.push(bin = binsById[id] = [point]);\n        bin.x = (pi + (pj & 1) / 2) * dx;\n        bin.y = pj * dy;\n      }\n    }\n\n    return bins;\n  }\n\n  function hexagon(radius) {\n    var x0 = 0, y0 = 0;\n    return angles.map(function(angle) {\n      var x1 = Math.sin(angle) * radius,\n          y1 = -Math.cos(angle) * radius,\n          dx = x1 - x0,\n          dy = y1 - y0;\n      x0 = x1, y0 = y1;\n      return [dx, dy];\n    });\n  }\n\n  hexbin.hexagon = function(radius) {\n    return \"m\" + hexagon(radius == null ? r : +radius).join(\"l\") + \"z\";\n  };\n\n  hexbin.centers = function() {\n    var centers = [],\n        j = Math.round(y0 / dy),\n        i = Math.round(x0 / dx);\n    for (var y = j * dy; y < y1 + r; y += dy, ++j) {\n      for (var x = i * dx + (j & 1) * dx / 2; x < x1 + dx / 2; x += dx) {\n        centers.push([x, y]);\n      }\n    }\n    return centers;\n  };\n\n  hexbin.mesh = function() {\n    var fragment = hexagon(r).slice(0, 4).join(\"l\");\n    return hexbin.centers().map(function(p) { return \"M\" + p + \"m\" + fragment; }).join(\"\");\n  };\n\n  hexbin.x = function(_) {\n    return arguments.length ? (x = _, hexbin) : x;\n  };\n\n  hexbin.y = function(_) {\n    return arguments.length ? (y = _, hexbin) : y;\n  };\n\n  hexbin.radius = function(_) {\n    return arguments.length ? (r = +_, dx = r * 2 * Math.sin(thirdPi), dy = r * 1.5, hexbin) : r;\n  };\n\n  hexbin.size = function(_) {\n    return arguments.length ? (x0 = y0 = 0, x1 = +_[0], y1 = +_[1], hexbin) : [x1 - x0, y1 - y0];\n  };\n\n  hexbin.extent = function(_) {\n    return arguments.length ? (x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1], hexbin) : [[x0, y0], [x1, y1]];\n  };\n\n  return hexbin.radius(1);\n}\n","function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { hexbin } from 'd3-hexbin';\nimport { createIterable, log } from '@deck.gl/core';\nexport function pointToHexbin(props, aggregationParams) {\n  var data = props.data,\n      radius = props.radius;\n  var viewport = aggregationParams.viewport,\n      attributes = aggregationParams.attributes;\n  var centerLngLat = data.length ? getPointsCenter(data, aggregationParams) : null;\n  var radiusCommon = getRadiusInCommon(radius, viewport, centerLngLat);\n  var screenPoints = [];\n\n  var _createIterable = createIterable(data),\n      iterable = _createIterable.iterable,\n      objectInfo = _createIterable.objectInfo;\n\n  var positions = attributes.positions.value;\n\n  var _attributes$positions = attributes.positions.getAccessor(),\n      size = _attributes$positions.size;\n\n  var _iterator = _createForOfIteratorHelper(iterable),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var object = _step.value;\n      objectInfo.index++;\n      var posIndex = objectInfo.index * size;\n      var position = [positions[posIndex], positions[posIndex + 1]];\n      var arrayIsFinite = Number.isFinite(position[0]) && Number.isFinite(position[1]);\n\n      if (arrayIsFinite) {\n        screenPoints.push({\n          screenCoord: viewport.projectFlat(position),\n          source: object,\n          index: objectInfo.index\n        });\n      } else {\n        log.warn('HexagonLayer: invalid position')();\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  var newHexbin = hexbin().radius(radiusCommon).x(function (d) {\n    return d.screenCoord[0];\n  }).y(function (d) {\n    return d.screenCoord[1];\n  });\n  var hexagonBins = newHexbin(screenPoints);\n  return {\n    hexagons: hexagonBins.map(function (hex, index) {\n      return {\n        position: viewport.unprojectFlat([hex.x, hex.y]),\n        points: hex,\n        index: index\n      };\n    }),\n    radiusCommon: radiusCommon\n  };\n}\nexport function getPointsCenter(data, aggregationParams) {\n  var attributes = aggregationParams.attributes;\n  var positions = attributes.positions.value;\n\n  var _attributes$positions2 = attributes.positions.getAccessor(),\n      size = _attributes$positions2.size;\n\n  var minX = Infinity;\n  var minY = Infinity;\n  var maxX = -Infinity;\n  var maxY = -Infinity;\n  var i;\n\n  for (i = 0; i < size * data.length; i += size) {\n    var x = positions[i];\n    var y = positions[i + 1];\n    var arrayIsFinite = Number.isFinite(x) && Number.isFinite(y);\n\n    if (arrayIsFinite) {\n      minX = Math.min(x, minX);\n      maxX = Math.max(x, maxX);\n      minY = Math.min(y, minY);\n      maxY = Math.max(y, maxY);\n    }\n  }\n\n  return [minX, minY, maxX, maxY].every(Number.isFinite) ? [(minX + maxX) / 2, (minY + maxY) / 2] : null;\n}\nexport function getRadiusInCommon(radius, viewport, center) {\n  var _viewport$getDistance = viewport.getDistanceScales(center),\n      unitsPerMeter = _viewport$getDistance.unitsPerMeter;\n\n  return radius * unitsPerMeter[0];\n}\n//# sourceMappingURL=hexagon-aggregator.js.map","function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { log } from '@deck.gl/core';\nexport function getScale(domain, range, scaleFunction) {\n  var scale = scaleFunction;\n\n  scale.domain = function () {\n    return domain;\n  };\n\n  scale.range = function () {\n    return range;\n  };\n\n  return scale;\n}\nexport function getQuantizeScale(domain, range) {\n  var scaleFunction = function scaleFunction(value) {\n    return quantizeScale(domain, range, value);\n  };\n\n  return getScale(domain, range, scaleFunction);\n}\nexport function getLinearScale(domain, range) {\n  var scaleFunction = function scaleFunction(value) {\n    return linearScale(domain, range, value);\n  };\n\n  return getScale(domain, range, scaleFunction);\n}\nexport function getQuantileScale(domain, range) {\n  var sortedDomain = domain.sort(ascending);\n  var i = 0;\n  var n = Math.max(1, range.length);\n  var thresholds = new Array(n - 1);\n\n  while (++i < n) {\n    thresholds[i - 1] = threshold(sortedDomain, i / n);\n  }\n\n  var scaleFunction = function scaleFunction(value) {\n    return thresholdsScale(thresholds, range, value);\n  };\n\n  scaleFunction.thresholds = function () {\n    return thresholds;\n  };\n\n  return getScale(domain, range, scaleFunction);\n}\n\nfunction ascending(a, b) {\n  return a - b;\n}\n\nfunction threshold(domain, fraction) {\n  var domainLength = domain.length;\n\n  if (fraction <= 0 || domainLength < 2) {\n    return domain[0];\n  }\n\n  if (fraction >= 1) {\n    return domain[domainLength - 1];\n  }\n\n  var domainFraction = (domainLength - 1) * fraction;\n  var lowIndex = Math.floor(domainFraction);\n  var low = domain[lowIndex];\n  var high = domain[lowIndex + 1];\n  return low + (high - low) * (domainFraction - lowIndex);\n}\n\nfunction bisectRight(a, x) {\n  var lo = 0;\n  var hi = a.length;\n\n  while (lo < hi) {\n    var mid = lo + hi >>> 1;\n\n    if (ascending(a[mid], x) > 0) {\n      hi = mid;\n    } else {\n      lo = mid + 1;\n    }\n  }\n\n  return lo;\n}\n\nfunction thresholdsScale(thresholds, range, value) {\n  return range[bisectRight(thresholds, value)];\n}\n\nfunction ordinalScale(domain, domainMap, range, value) {\n  var key = \"\".concat(value);\n  var d = domainMap.get(key);\n\n  if (d === undefined) {\n    d = domain.push(value);\n    domainMap.set(key, d);\n  }\n\n  return range[(d - 1) % range.length];\n}\n\nexport function getOrdinalScale(domain, range) {\n  var domainMap = new Map();\n  var uniqueDomain = [];\n\n  var _iterator = _createForOfIteratorHelper(domain),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var d = _step.value;\n      var key = \"\".concat(d);\n\n      if (!domainMap.has(key)) {\n        domainMap.set(key, uniqueDomain.push(d));\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  var scaleFunction = function scaleFunction(value) {\n    return ordinalScale(uniqueDomain, domainMap, range, value);\n  };\n\n  return getScale(domain, range, scaleFunction);\n}\nexport function quantizeScale(domain, range, value) {\n  var domainRange = domain[1] - domain[0];\n\n  if (domainRange <= 0) {\n    log.warn('quantizeScale: invalid domain, returning range[0]')();\n    return range[0];\n  }\n\n  var step = domainRange / range.length;\n  var idx = Math.floor((value - domain[0]) / step);\n  var clampIdx = Math.max(Math.min(idx, range.length - 1), 0);\n  return range[clampIdx];\n}\nexport function linearScale(domain, range, value) {\n  return (value - domain[0]) / (domain[1] - domain[0]) * (range[1] - range[0]) + range[0];\n}\n\nfunction notNullOrUndefined(d) {\n  return d !== undefined && d !== null;\n}\n\nexport function unique(values) {\n  var results = [];\n  values.forEach(function (v) {\n    if (!results.includes(v) && notNullOrUndefined(v)) {\n      results.push(v);\n    }\n  });\n  return results;\n}\n\nfunction getTruthyValues(data, valueAccessor) {\n  var values = typeof valueAccessor === 'function' ? data.map(valueAccessor) : data;\n  return values.filter(notNullOrUndefined);\n}\n\nexport function getLinearDomain(data, valueAccessor) {\n  var sorted = getTruthyValues(data, valueAccessor).sort();\n  return sorted.length ? [sorted[0], sorted[sorted.length - 1]] : [0, 0];\n}\nexport function getQuantileDomain(data, valueAccessor) {\n  return getTruthyValues(data, valueAccessor);\n}\nexport function getOrdinalDomain(data, valueAccessor) {\n  return unique(getTruthyValues(data, valueAccessor));\n}\nexport function getScaleDomain(scaleType, data, valueAccessor) {\n  switch (scaleType) {\n    case 'quantize':\n    case 'linear':\n      return getLinearDomain(data, valueAccessor);\n\n    case 'quantile':\n      return getQuantileDomain(data, valueAccessor);\n\n    case 'ordinal':\n      return getOrdinalDomain(data, valueAccessor);\n\n    default:\n      return getLinearDomain(data, valueAccessor);\n  }\n}\nexport function clamp(value, min, max) {\n  return Math.max(min, Math.min(max, value));\n}\nexport function getScaleFunctionByScaleType(scaleType) {\n  switch (scaleType) {\n    case 'quantize':\n      return getQuantizeScale;\n\n    case 'linear':\n      return getLinearScale;\n\n    case 'quantile':\n      return getQuantileScale;\n\n    case 'ordinal':\n      return getOrdinalScale;\n\n    default:\n      return getQuantizeScale;\n  }\n}\n//# sourceMappingURL=scale-utils.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar defaultGetValue = function defaultGetValue(points) {\n  return points.length;\n};\n\nimport { clamp, getQuantileDomain, getOrdinalDomain } from './scale-utils';\nvar MAX_32_BIT_FLOAT = 3.402823466e38;\n\nvar defaultGetPoints = function defaultGetPoints(bin) {\n  return bin.points;\n};\n\nvar defaultGetIndex = function defaultGetIndex(bin) {\n  return bin.index;\n};\n\nvar ascending = function ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n};\n\nvar defaultProps = {\n  getValue: defaultGetValue,\n  getPoints: defaultGetPoints,\n  getIndex: defaultGetIndex,\n  filterData: null\n};\n\nvar BinSorter = function () {\n  function BinSorter() {\n    var bins = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultProps;\n\n    _classCallCheck(this, BinSorter);\n\n    this.aggregatedBins = this.getAggregatedBins(bins, props);\n\n    this._updateMinMaxValues();\n\n    this.binMap = this.getBinMap();\n  }\n\n  _createClass(BinSorter, [{\n    key: \"getAggregatedBins\",\n    value: function getAggregatedBins(bins, props) {\n      var _props$getValue = props.getValue,\n          getValue = _props$getValue === void 0 ? defaultGetValue : _props$getValue,\n          _props$getPoints = props.getPoints,\n          getPoints = _props$getPoints === void 0 ? defaultGetPoints : _props$getPoints,\n          _props$getIndex = props.getIndex,\n          getIndex = _props$getIndex === void 0 ? defaultGetIndex : _props$getIndex,\n          filterData = props.filterData;\n      var hasFilter = typeof filterData === 'function';\n      var binCount = bins.length;\n      var aggregatedBins = [];\n      var index = 0;\n\n      for (var binIndex = 0; binIndex < binCount; binIndex++) {\n        var bin = bins[binIndex];\n        var points = getPoints(bin);\n        var i = getIndex(bin);\n        var filteredPoints = hasFilter ? points.filter(filterData) : points;\n        bin.filteredPoints = hasFilter ? filteredPoints : null;\n        var value = filteredPoints.length ? getValue(filteredPoints) : null;\n\n        if (value !== null && value !== undefined) {\n          aggregatedBins[index] = {\n            i: Number.isFinite(i) ? i : binIndex,\n            value: value,\n            counts: filteredPoints.length\n          };\n          index++;\n        }\n      }\n\n      return aggregatedBins;\n    }\n  }, {\n    key: \"_percentileToIndex\",\n    value: function _percentileToIndex(percentileRange) {\n      var len = this.sortedBins.length;\n\n      if (len < 2) {\n        return [0, 0];\n      }\n\n      var _percentileRange$map = percentileRange.map(function (n) {\n        return clamp(n, 0, 100);\n      }),\n          _percentileRange$map2 = _slicedToArray(_percentileRange$map, 2),\n          lower = _percentileRange$map2[0],\n          upper = _percentileRange$map2[1];\n\n      var lowerIdx = Math.ceil(lower / 100 * (len - 1));\n      var upperIdx = Math.floor(upper / 100 * (len - 1));\n      return [lowerIdx, upperIdx];\n    }\n  }, {\n    key: \"getBinMap\",\n    value: function getBinMap() {\n      var binMap = {};\n\n      var _iterator = _createForOfIteratorHelper(this.aggregatedBins),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var bin = _step.value;\n          binMap[bin.i] = bin;\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return binMap;\n    }\n  }, {\n    key: \"_updateMinMaxValues\",\n    value: function _updateMinMaxValues() {\n      var maxCount = 0;\n      var maxValue = 0;\n      var minValue = MAX_32_BIT_FLOAT;\n      var totalCount = 0;\n\n      var _iterator2 = _createForOfIteratorHelper(this.aggregatedBins),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var x = _step2.value;\n          maxCount = maxCount > x.counts ? maxCount : x.counts;\n          maxValue = maxValue > x.value ? maxValue : x.value;\n          minValue = minValue < x.value ? minValue : x.value;\n          totalCount += x.counts;\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      this.maxCount = maxCount;\n      this.maxValue = maxValue;\n      this.minValue = minValue;\n      this.totalCount = totalCount;\n    }\n  }, {\n    key: \"getValueRange\",\n    value: function getValueRange(percentileRange) {\n      if (!this.sortedBins) {\n        this.sortedBins = this.aggregatedBins.sort(function (a, b) {\n          return ascending(a.value, b.value);\n        });\n      }\n\n      if (!this.sortedBins.length) {\n        return [];\n      }\n\n      var lowerIdx = 0;\n      var upperIdx = this.sortedBins.length - 1;\n\n      if (Array.isArray(percentileRange)) {\n        var idxRange = this._percentileToIndex(percentileRange);\n\n        lowerIdx = idxRange[0];\n        upperIdx = idxRange[1];\n      }\n\n      return [this.sortedBins[lowerIdx].value, this.sortedBins[upperIdx].value];\n    }\n  }, {\n    key: \"getValueDomainByScale\",\n    value: function getValueDomainByScale(scale) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [],\n          _ref2 = _slicedToArray(_ref, 2),\n          _ref2$ = _ref2[0],\n          lower = _ref2$ === void 0 ? 0 : _ref2$,\n          _ref2$2 = _ref2[1],\n          upper = _ref2$2 === void 0 ? 100 : _ref2$2;\n\n      if (!this.sortedBins) {\n        this.sortedBins = this.aggregatedBins.sort(function (a, b) {\n          return ascending(a.value, b.value);\n        });\n      }\n\n      if (!this.sortedBins.length) {\n        return [];\n      }\n\n      var indexEdge = this._percentileToIndex([lower, upper]);\n\n      return this._getScaleDomain(scale, indexEdge);\n    }\n  }, {\n    key: \"_getScaleDomain\",\n    value: function _getScaleDomain(scaleType, _ref3) {\n      var _ref4 = _slicedToArray(_ref3, 2),\n          lowerIdx = _ref4[0],\n          upperIdx = _ref4[1];\n\n      var bins = this.sortedBins;\n\n      switch (scaleType) {\n        case 'quantize':\n        case 'linear':\n          return [bins[lowerIdx].value, bins[upperIdx].value];\n\n        case 'quantile':\n          return getQuantileDomain(bins.slice(lowerIdx, upperIdx + 1), function (d) {\n            return d.value;\n          });\n\n        case 'ordinal':\n          return getOrdinalDomain(bins, function (d) {\n            return d.value;\n          });\n\n        default:\n          return [bins[lowerIdx].value, bins[upperIdx].value];\n      }\n    }\n  }]);\n\n  return BinSorter;\n}();\n\nexport { BinSorter as default };\n//# sourceMappingURL=bin-sorter.js.map","export var AGGREGATION_OPERATION = {\n  SUM: 1,\n  MEAN: 2,\n  MIN: 3,\n  MAX: 4\n};\n\nfunction sumReducer(accu, cur) {\n  return accu + cur;\n}\n\nfunction maxReducer(accu, cur) {\n  return cur > accu ? cur : accu;\n}\n\nfunction minReducer(accu, cur) {\n  return cur < accu ? cur : accu;\n}\n\nexport function getMean(pts, accessor) {\n  if (Number.isFinite(accessor)) {\n    return pts.length ? accessor : null;\n  }\n\n  var filtered = pts.map(accessor).filter(Number.isFinite);\n  return filtered.length ? filtered.reduce(sumReducer, 0) / filtered.length : null;\n}\nexport function getSum(pts, accessor) {\n  if (Number.isFinite(accessor)) {\n    return pts.length ? pts.length * accessor : null;\n  }\n\n  var filtered = pts.map(accessor).filter(Number.isFinite);\n  return filtered.length ? filtered.reduce(sumReducer, 0) : null;\n}\nexport function getMax(pts, accessor) {\n  if (Number.isFinite(accessor)) {\n    return pts.length ? accessor : null;\n  }\n\n  var filtered = pts.map(accessor).filter(Number.isFinite);\n  return filtered.length ? filtered.reduce(maxReducer, -Infinity) : null;\n}\nexport function getMin(pts, accessor) {\n  if (Number.isFinite(accessor)) {\n    return pts.length ? accessor : null;\n  }\n\n  var filtered = pts.map(accessor).filter(Number.isFinite);\n  return filtered.length ? filtered.reduce(minReducer, Infinity) : null;\n}\nexport function getValueFunc(aggregation, accessor, context) {\n  var op = AGGREGATION_OPERATION[aggregation] || AGGREGATION_OPERATION.SUM;\n  accessor = wrapAccessor(accessor, context);\n\n  switch (op) {\n    case AGGREGATION_OPERATION.MIN:\n      return function (pts) {\n        return getMin(pts, accessor);\n      };\n\n    case AGGREGATION_OPERATION.SUM:\n      return function (pts) {\n        return getSum(pts, accessor);\n      };\n\n    case AGGREGATION_OPERATION.MEAN:\n      return function (pts) {\n        return getMean(pts, accessor);\n      };\n\n    case AGGREGATION_OPERATION.MAX:\n      return function (pts) {\n        return getMax(pts, accessor);\n      };\n\n    default:\n      return null;\n  }\n}\n\nfunction wrapAccessor(accessor) {\n  var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (Number.isFinite(accessor)) {\n    return accessor;\n  }\n\n  return function (pt) {\n    context.index = pt.index;\n    return accessor(pt.source, context);\n  };\n}\n\nexport function wrapGetValueFunc(getValue) {\n  var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return function (pts) {\n    context.indices = pts.map(function (pt) {\n      return pt.index;\n    });\n    return getValue(pts.map(function (pt) {\n      return pt.source;\n    }), context);\n  };\n}\n//# sourceMappingURL=aggregation-operation-utils.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport BinSorter from './bin-sorter';\nimport { getScaleFunctionByScaleType } from './scale-utils';\nimport { getValueFunc, wrapGetValueFunc } from './aggregation-operation-utils';\n\nfunction nop() {}\n\nvar dimensionSteps = ['getBins', 'getDomain', 'getScaleFunc'];\nvar _defaultDimensions = [{\n  key: 'fillColor',\n  accessor: 'getFillColor',\n  pickingInfo: 'colorValue',\n  getBins: {\n    triggers: {\n      value: {\n        prop: 'getColorValue',\n        updateTrigger: 'getColorValue'\n      },\n      weight: {\n        prop: 'getColorWeight',\n        updateTrigger: 'getColorWeight'\n      },\n      aggregation: {\n        prop: 'colorAggregation'\n      },\n      filterData: {\n        prop: '_filterData',\n        updateTrigger: '_filterData'\n      }\n    }\n  },\n  getDomain: {\n    triggers: {\n      lowerPercentile: {\n        prop: 'lowerPercentile'\n      },\n      upperPercentile: {\n        prop: 'upperPercentile'\n      },\n      scaleType: {\n        prop: 'colorScaleType'\n      }\n    }\n  },\n  getScaleFunc: {\n    triggers: {\n      domain: {\n        prop: 'colorDomain'\n      },\n      range: {\n        prop: 'colorRange'\n      }\n    },\n    onSet: {\n      props: 'onSetColorDomain'\n    }\n  },\n  nullValue: [0, 0, 0, 0]\n}, {\n  key: 'elevation',\n  accessor: 'getElevation',\n  pickingInfo: 'elevationValue',\n  getBins: {\n    triggers: {\n      value: {\n        prop: 'getElevationValue',\n        updateTrigger: 'getElevationValue'\n      },\n      weight: {\n        prop: 'getElevationWeight',\n        updateTrigger: 'getElevationWeight'\n      },\n      aggregation: {\n        prop: 'elevationAggregation'\n      },\n      filterData: {\n        prop: '_filterData',\n        updateTrigger: '_filterData'\n      }\n    }\n  },\n  getDomain: {\n    triggers: {\n      lowerPercentile: {\n        prop: 'elevationLowerPercentile'\n      },\n      upperPercentile: {\n        prop: 'elevationUpperPercentile'\n      },\n      scaleType: {\n        prop: 'elevationScaleType'\n      }\n    }\n  },\n  getScaleFunc: {\n    triggers: {\n      domain: {\n        prop: 'elevationDomain'\n      },\n      range: {\n        prop: 'elevationRange'\n      }\n    },\n    onSet: {\n      props: 'onSetElevationDomain'\n    }\n  },\n  nullValue: -1\n}];\n\nvar defaultGetCellSize = function defaultGetCellSize(props) {\n  return props.cellSize;\n};\n\nvar CPUAggregator = function () {\n  function CPUAggregator(opts) {\n    _classCallCheck(this, CPUAggregator);\n\n    this.state = {\n      layerData: {},\n      dimensions: {}\n    };\n    this.changeFlags = {};\n    this.dimensionUpdaters = {};\n    this._getCellSize = opts.getCellSize || defaultGetCellSize;\n    this._getAggregator = opts.getAggregator;\n\n    this._addDimension(opts.dimensions || _defaultDimensions);\n  }\n\n  _createClass(CPUAggregator, [{\n    key: \"updateState\",\n    value: function updateState(opts, aggregationParams) {\n      var oldProps = opts.oldProps,\n          props = opts.props,\n          changeFlags = opts.changeFlags;\n      this.updateGetValueFuncs(oldProps, props, changeFlags);\n      var reprojectNeeded = this.needsReProjectPoints(oldProps, props, changeFlags);\n      var aggregationDirty = false;\n\n      if (changeFlags.dataChanged || reprojectNeeded) {\n        this.getAggregatedData(props, aggregationParams);\n        aggregationDirty = true;\n      } else {\n        var dimensionChanges = this.getDimensionChanges(oldProps, props, changeFlags) || [];\n        dimensionChanges.forEach(function (f) {\n          return typeof f === 'function' && f();\n        });\n        aggregationDirty = true;\n      }\n\n      this.setState({\n        aggregationDirty: aggregationDirty\n      });\n      return this.state;\n    }\n  }, {\n    key: \"setState\",\n    value: function setState(updateObject) {\n      this.state = Object.assign({}, this.state, updateObject);\n    }\n  }, {\n    key: \"setDimensionState\",\n    value: function setDimensionState(key, updateObject) {\n      this.setState({\n        dimensions: Object.assign({}, this.state.dimensions, _defineProperty({}, key, Object.assign({}, this.state.dimensions[key], updateObject)))\n      });\n    }\n  }, {\n    key: \"normalizeResult\",\n    value: function normalizeResult() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (result.hexagons) {\n        return Object.assign({\n          data: result.hexagons\n        }, result);\n      } else if (result.layerData) {\n        return Object.assign({\n          data: result.layerData\n        }, result);\n      }\n\n      return result;\n    }\n  }, {\n    key: \"getAggregatedData\",\n    value: function getAggregatedData(props, aggregationParams) {\n      var aggregator = this._getAggregator(props);\n\n      var result = aggregator(props, aggregationParams);\n      this.setState({\n        layerData: this.normalizeResult(result)\n      });\n      this.changeFlags = {\n        layerData: true\n      };\n      this.getSortedBins(props);\n    }\n  }, {\n    key: \"updateGetValueFuncs\",\n    value: function updateGetValueFuncs(oldProps, props, changeFlags) {\n      for (var key in this.dimensionUpdaters) {\n        var _this$dimensionUpdate = this.dimensionUpdaters[key].getBins.triggers,\n            value = _this$dimensionUpdate.value,\n            weight = _this$dimensionUpdate.weight,\n            aggregation = _this$dimensionUpdate.aggregation;\n        var getValue = props[value.prop];\n        var getValueChanged = this.needUpdateDimensionStep(this.dimensionUpdaters[key].getBins, oldProps, props, changeFlags);\n\n        if (getValueChanged) {\n          if (getValue) {\n            getValue = wrapGetValueFunc(getValue, {\n              data: props.data\n            });\n          } else {\n            getValue = getValueFunc(props[aggregation.prop], props[weight.prop], {\n              data: props.data\n            });\n          }\n        }\n\n        if (getValue) {\n          this.setDimensionState(key, {\n            getValue: getValue\n          });\n        }\n      }\n    }\n  }, {\n    key: \"needsReProjectPoints\",\n    value: function needsReProjectPoints(oldProps, props, changeFlags) {\n      return this._getCellSize(oldProps) !== this._getCellSize(props) || this._getAggregator(oldProps) !== this._getAggregator(props) || changeFlags.updateTriggersChanged && (changeFlags.updateTriggersChanged.all || changeFlags.updateTriggersChanged.getPosition);\n    }\n  }, {\n    key: \"addDimension\",\n    value: function addDimension(dimensions) {\n      this._addDimension(dimensions);\n    }\n  }, {\n    key: \"_addDimension\",\n    value: function _addDimension() {\n      var _this = this;\n\n      var dimensions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      dimensions.forEach(function (dimension) {\n        var key = dimension.key;\n        _this.dimensionUpdaters[key] = _this.getDimensionUpdaters(dimension);\n        _this.state.dimensions[key] = {\n          getValue: null,\n          domain: null,\n          sortedBins: null,\n          scaleFunc: nop\n        };\n      });\n    }\n  }, {\n    key: \"getDimensionUpdaters\",\n    value: function getDimensionUpdaters(_ref) {\n      var key = _ref.key,\n          accessor = _ref.accessor,\n          pickingInfo = _ref.pickingInfo,\n          getBins = _ref.getBins,\n          getDomain = _ref.getDomain,\n          getScaleFunc = _ref.getScaleFunc,\n          nullValue = _ref.nullValue;\n      return {\n        key: key,\n        accessor: accessor,\n        pickingInfo: pickingInfo,\n        getBins: Object.assign({\n          updater: this.getDimensionSortedBins\n        }, getBins),\n        getDomain: Object.assign({\n          updater: this.getDimensionValueDomain\n        }, getDomain),\n        getScaleFunc: Object.assign({\n          updater: this.getDimensionScale\n        }, getScaleFunc),\n        attributeAccessor: this.getSubLayerDimensionAttribute(key, nullValue)\n      };\n    }\n  }, {\n    key: \"needUpdateDimensionStep\",\n    value: function needUpdateDimensionStep(dimensionStep, oldProps, props, changeFlags) {\n      return Object.values(dimensionStep.triggers).some(function (item) {\n        if (item.updateTrigger) {\n          return changeFlags.dataChanged || changeFlags.updateTriggersChanged && (changeFlags.updateTriggersChanged.all || changeFlags.updateTriggersChanged[item.updateTrigger]);\n        }\n\n        return oldProps[item.prop] !== props[item.prop];\n      });\n    }\n  }, {\n    key: \"getDimensionChanges\",\n    value: function getDimensionChanges(oldProps, props, changeFlags) {\n      var _this2 = this;\n\n      var updaters = [];\n\n      var _loop = function _loop(key) {\n        var needUpdate = dimensionSteps.find(function (step) {\n          return _this2.needUpdateDimensionStep(_this2.dimensionUpdaters[key][step], oldProps, props, changeFlags);\n        });\n\n        if (needUpdate) {\n          updaters.push(_this2.dimensionUpdaters[key][needUpdate].updater.bind(_this2, props, _this2.dimensionUpdaters[key]));\n        }\n      };\n\n      for (var key in this.dimensionUpdaters) {\n        _loop(key);\n      }\n\n      return updaters.length ? updaters : null;\n    }\n  }, {\n    key: \"getUpdateTriggers\",\n    value: function getUpdateTriggers(props) {\n      var _this3 = this;\n\n      var _updateTriggers = props.updateTriggers || {};\n\n      var updateTriggers = {};\n\n      var _loop2 = function _loop2(key) {\n        var accessor = _this3.dimensionUpdaters[key].accessor;\n        updateTriggers[accessor] = {};\n        dimensionSteps.forEach(function (step) {\n          Object.values(_this3.dimensionUpdaters[key][step].triggers).forEach(function (_ref2) {\n            var prop = _ref2.prop,\n                updateTrigger = _ref2.updateTrigger;\n\n            if (updateTrigger) {\n              var fromProp = _updateTriggers[updateTrigger];\n\n              if (_typeof(fromProp) === 'object' && !Array.isArray(fromProp)) {\n                Object.assign(updateTriggers[accessor], fromProp);\n              } else if (fromProp !== undefined) {\n                updateTriggers[accessor][prop] = fromProp;\n              }\n            } else {\n              updateTriggers[accessor][prop] = props[prop];\n            }\n          });\n        });\n      };\n\n      for (var key in this.dimensionUpdaters) {\n        _loop2(key);\n      }\n\n      return updateTriggers;\n    }\n  }, {\n    key: \"getSortedBins\",\n    value: function getSortedBins(props) {\n      for (var key in this.dimensionUpdaters) {\n        this.getDimensionSortedBins(props, this.dimensionUpdaters[key]);\n      }\n    }\n  }, {\n    key: \"getDimensionSortedBins\",\n    value: function getDimensionSortedBins(props, dimensionUpdater) {\n      var key = dimensionUpdater.key;\n      var getValue = this.state.dimensions[key].getValue;\n      var sortedBins = new BinSorter(this.state.layerData.data || [], {\n        getValue: getValue,\n        filterData: props._filterData\n      });\n      this.setDimensionState(key, {\n        sortedBins: sortedBins\n      });\n      this.getDimensionValueDomain(props, dimensionUpdater);\n    }\n  }, {\n    key: \"getDimensionValueDomain\",\n    value: function getDimensionValueDomain(props, dimensionUpdater) {\n      var getDomain = dimensionUpdater.getDomain,\n          key = dimensionUpdater.key;\n      var _getDomain$triggers = getDomain.triggers,\n          lowerPercentile = _getDomain$triggers.lowerPercentile,\n          upperPercentile = _getDomain$triggers.upperPercentile,\n          scaleType = _getDomain$triggers.scaleType;\n      var valueDomain = this.state.dimensions[key].sortedBins.getValueDomainByScale(props[scaleType.prop], [props[lowerPercentile.prop], props[upperPercentile.prop]]);\n      this.setDimensionState(key, {\n        valueDomain: valueDomain\n      });\n      this.getDimensionScale(props, dimensionUpdater);\n    }\n  }, {\n    key: \"getDimensionScale\",\n    value: function getDimensionScale(props, dimensionUpdater) {\n      var key = dimensionUpdater.key,\n          getScaleFunc = dimensionUpdater.getScaleFunc,\n          getDomain = dimensionUpdater.getDomain;\n      var _getScaleFunc$trigger = getScaleFunc.triggers,\n          domain = _getScaleFunc$trigger.domain,\n          range = _getScaleFunc$trigger.range;\n      var scaleType = getDomain.triggers.scaleType;\n      var onSet = getScaleFunc.onSet;\n      var dimensionRange = props[range.prop];\n      var dimensionDomain = props[domain.prop] || this.state.dimensions[key].valueDomain;\n      var getScaleFunction = getScaleFunctionByScaleType(scaleType && props[scaleType.prop]);\n      var scaleFunc = getScaleFunction(dimensionDomain, dimensionRange);\n\n      if (_typeof(onSet) === 'object' && typeof props[onSet.props] === 'function') {\n        props[onSet.props](scaleFunc.domain());\n      }\n\n      this.setDimensionState(key, {\n        scaleFunc: scaleFunc\n      });\n    }\n  }, {\n    key: \"getSubLayerDimensionAttribute\",\n    value: function getSubLayerDimensionAttribute(key, nullValue) {\n      var _this4 = this;\n\n      return function (cell) {\n        var _this4$state$dimensio = _this4.state.dimensions[key],\n            sortedBins = _this4$state$dimensio.sortedBins,\n            scaleFunc = _this4$state$dimensio.scaleFunc;\n        var bin = sortedBins.binMap[cell.index];\n\n        if (bin && bin.counts === 0) {\n          return nullValue;\n        }\n\n        var cv = bin && bin.value;\n        var domain = scaleFunc.domain();\n        var isValueInDomain = cv >= domain[0] && cv <= domain[domain.length - 1];\n        return isValueInDomain ? scaleFunc(cv) : nullValue;\n      };\n    }\n  }, {\n    key: \"getSubLayerAccessors\",\n    value: function getSubLayerAccessors(props) {\n      var accessors = {};\n\n      for (var key in this.dimensionUpdaters) {\n        var accessor = this.dimensionUpdaters[key].accessor;\n        accessors[accessor] = this.getSubLayerDimensionAttribute(props, key);\n      }\n\n      return accessors;\n    }\n  }, {\n    key: \"getPickingInfo\",\n    value: function getPickingInfo(_ref3) {\n      var info = _ref3.info;\n      var isPicked = info.picked && info.index > -1;\n      var object = null;\n\n      if (isPicked) {\n        var cell = this.state.layerData.data[info.index];\n        var binInfo = {};\n\n        for (var key in this.dimensionUpdaters) {\n          var pickingInfo = this.dimensionUpdaters[key].pickingInfo;\n          var sortedBins = this.state.dimensions[key].sortedBins;\n          var value = sortedBins.binMap[cell.index] && sortedBins.binMap[cell.index].value;\n          binInfo[pickingInfo] = value;\n        }\n\n        object = Object.assign(binInfo, cell, {\n          points: cell.filteredPoints || cell.points\n        });\n      }\n\n      return Object.assign(info, {\n        picked: Boolean(object),\n        object: object\n      });\n    }\n  }, {\n    key: \"getAccessor\",\n    value: function getAccessor(dimensionKey) {\n      if (!this.dimensionUpdaters.hasOwnProperty(dimensionKey)) {\n        return nop;\n      }\n\n      return this.dimensionUpdaters[dimensionKey].attributeAccessor;\n    }\n  }], [{\n    key: \"defaultDimensions\",\n    value: function defaultDimensions() {\n      return _defaultDimensions;\n    }\n  }]);\n\n  return CPUAggregator;\n}();\n\nexport { CPUAggregator as default };\n//# sourceMappingURL=cpu-aggregator.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport Layer from './layer';\nimport debug from '../debug';\nimport { flatten } from '../utils/flatten';\nvar TRACE_RENDER_LAYERS = 'compositeLayer.renderLayers';\n\nvar CompositeLayer = function (_Layer) {\n  _inherits(CompositeLayer, _Layer);\n\n  var _super = _createSuper(CompositeLayer);\n\n  function CompositeLayer() {\n    _classCallCheck(this, CompositeLayer);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(CompositeLayer, [{\n    key: \"getSubLayers\",\n    value: function getSubLayers() {\n      return this.internalState && this.internalState.subLayers || [];\n    }\n  }, {\n    key: \"initializeState\",\n    value: function initializeState() {}\n  }, {\n    key: \"setState\",\n    value: function setState(updateObject) {\n      _get(_getPrototypeOf(CompositeLayer.prototype), \"setState\", this).call(this, updateObject);\n\n      this.setNeedsUpdate();\n    }\n  }, {\n    key: \"getPickingInfo\",\n    value: function getPickingInfo(_ref) {\n      var info = _ref.info;\n      var object = info.object;\n      var isDataWrapped = object && object.__source && object.__source.parent && object.__source.parent.id === this.id;\n\n      if (!isDataWrapped) {\n        return info;\n      }\n\n      return Object.assign(info, {\n        object: object.__source.object,\n        index: object.__source.index\n      });\n    }\n  }, {\n    key: \"renderLayers\",\n    value: function renderLayers() {\n      return null;\n    }\n  }, {\n    key: \"shouldRenderSubLayer\",\n    value: function shouldRenderSubLayer(id, data) {\n      var overridingProps = this.props._subLayerProps;\n      return data && data.length || overridingProps && overridingProps[id];\n    }\n  }, {\n    key: \"getSubLayerClass\",\n    value: function getSubLayerClass(id, DefaultLayerClass) {\n      var overridingProps = this.props._subLayerProps;\n      return overridingProps && overridingProps[id] && overridingProps[id].type || DefaultLayerClass;\n    }\n  }, {\n    key: \"getSubLayerRow\",\n    value: function getSubLayerRow(row, sourceObject, sourceObjectIndex) {\n      row.__source = {\n        parent: this,\n        object: sourceObject,\n        index: sourceObjectIndex\n      };\n      return row;\n    }\n  }, {\n    key: \"getSubLayerAccessor\",\n    value: function getSubLayerAccessor(accessor) {\n      if (typeof accessor === 'function') {\n        var objectInfo = {\n          data: this.props.data,\n          target: []\n        };\n        return function (x, i) {\n          if (x && x.__source) {\n            objectInfo.index = x.__source.index;\n            return accessor(x.__source.object, objectInfo);\n          }\n\n          return accessor(x, i);\n        };\n      }\n\n      return accessor;\n    }\n  }, {\n    key: \"getSubLayerProps\",\n    value: function getSubLayerProps() {\n      var sublayerProps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _this$props = this.props,\n          opacity = _this$props.opacity,\n          pickable = _this$props.pickable,\n          visible = _this$props.visible,\n          parameters = _this$props.parameters,\n          getPolygonOffset = _this$props.getPolygonOffset,\n          highlightedObjectIndex = _this$props.highlightedObjectIndex,\n          autoHighlight = _this$props.autoHighlight,\n          highlightColor = _this$props.highlightColor,\n          coordinateSystem = _this$props.coordinateSystem,\n          coordinateOrigin = _this$props.coordinateOrigin,\n          wrapLongitude = _this$props.wrapLongitude,\n          positionFormat = _this$props.positionFormat,\n          modelMatrix = _this$props.modelMatrix,\n          extensions = _this$props.extensions,\n          overridingProps = _this$props._subLayerProps;\n      var newProps = {\n        opacity: opacity,\n        pickable: pickable,\n        visible: visible,\n        parameters: parameters,\n        getPolygonOffset: getPolygonOffset,\n        highlightedObjectIndex: highlightedObjectIndex,\n        autoHighlight: autoHighlight,\n        highlightColor: highlightColor,\n        coordinateSystem: coordinateSystem,\n        coordinateOrigin: coordinateOrigin,\n        wrapLongitude: wrapLongitude,\n        positionFormat: positionFormat,\n        modelMatrix: modelMatrix,\n        extensions: extensions\n      };\n      var overridingSublayerProps = overridingProps && overridingProps[sublayerProps.id];\n      var overridingSublayerTriggers = overridingSublayerProps && overridingSublayerProps.updateTriggers;\n      var sublayerId = sublayerProps.id || 'sublayer';\n\n      if (overridingSublayerProps) {\n        var propTypes = this.constructor._propTypes;\n\n        for (var key in overridingSublayerProps) {\n          var propType = propTypes[key];\n\n          if (propType && propType.type === 'accessor') {\n            overridingSublayerProps[key] = this.getSubLayerAccessor(overridingSublayerProps[key]);\n          }\n        }\n      }\n\n      Object.assign(newProps, sublayerProps, overridingSublayerProps, {\n        id: \"\".concat(this.props.id, \"-\").concat(sublayerId),\n        updateTriggers: Object.assign({\n          all: this.props.updateTriggers.all\n        }, sublayerProps.updateTriggers, overridingSublayerTriggers)\n      });\n\n      var _iterator = _createForOfIteratorHelper(extensions),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var extension = _step.value;\n          var passThroughProps = extension.getSubLayerProps.call(this, extension);\n\n          if (passThroughProps) {\n            Object.assign(newProps, passThroughProps, {\n              updateTriggers: Object.assign(newProps.updateTriggers, passThroughProps.updateTriggers)\n            });\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return newProps;\n    }\n  }, {\n    key: \"_getAttributeManager\",\n    value: function _getAttributeManager() {\n      return null;\n    }\n  }, {\n    key: \"_renderLayers\",\n    value: function _renderLayers() {\n      var subLayers = this.internalState.subLayers;\n      var shouldUpdate = !subLayers || this.needsUpdate();\n\n      if (shouldUpdate) {\n        subLayers = this.renderLayers();\n        subLayers = flatten(subLayers, Boolean);\n        this.internalState.subLayers = subLayers;\n      }\n\n      debug(TRACE_RENDER_LAYERS, this, shouldUpdate, subLayers);\n\n      var _iterator2 = _createForOfIteratorHelper(subLayers),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var layer = _step2.value;\n          layer.parent = this;\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n  }, {\n    key: \"isComposite\",\n    get: function get() {\n      return true;\n    }\n  }, {\n    key: \"isLoaded\",\n    get: function get() {\n      return _get(_getPrototypeOf(CompositeLayer.prototype), \"isLoaded\", this) && this.getSubLayers().every(function (layer) {\n        return layer.isLoaded;\n      });\n    }\n  }]);\n\n  return CompositeLayer;\n}(Layer);\n\nexport { CompositeLayer as default };\nCompositeLayer.layerName = 'CompositeLayer';\n//# sourceMappingURL=composite-layer.js.map","export function filterProps(props, filterKeys) {\n  var filteredProps = {};\n\n  for (var key in props) {\n    if (!filterKeys.includes(key)) {\n      filteredProps[key] = props[key];\n    }\n  }\n\n  return filteredProps;\n}\n//# sourceMappingURL=prop-utils.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { CompositeLayer, AttributeManager, _compareProps as compareProps } from '@deck.gl/core';\nimport { cssToDeviceRatio } from '@luma.gl/core';\nimport { filterProps } from './utils/prop-utils';\n\nvar AggregationLayer = function (_CompositeLayer) {\n  _inherits(AggregationLayer, _CompositeLayer);\n\n  var _super = _createSuper(AggregationLayer);\n\n  function AggregationLayer() {\n    _classCallCheck(this, AggregationLayer);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(AggregationLayer, [{\n    key: \"initializeState\",\n    value: function initializeState(dimensions) {\n      _get(_getPrototypeOf(AggregationLayer.prototype), \"initializeState\", this).call(this);\n\n      this.setState({\n        ignoreProps: filterProps(this.constructor._propTypes, dimensions.data.props),\n        dimensions: dimensions\n      });\n    }\n  }, {\n    key: \"updateState\",\n    value: function updateState(opts) {\n      _get(_getPrototypeOf(AggregationLayer.prototype), \"updateState\", this).call(this, opts);\n\n      var changeFlags = opts.changeFlags;\n\n      if (changeFlags.extensionsChanged) {\n        var shaders = this.getShaders({});\n\n        if (shaders && shaders.defines) {\n          shaders.defines.NON_INSTANCED_MODEL = 1;\n        }\n\n        this.updateShaders(shaders);\n      }\n\n      this._updateAttributes(opts.props);\n    }\n  }, {\n    key: \"updateAttributes\",\n    value: function updateAttributes(changedAttributes) {\n      this.setState({\n        changedAttributes: changedAttributes\n      });\n    }\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes() {\n      return this.getAttributeManager().getShaderAttributes();\n    }\n  }, {\n    key: \"getModuleSettings\",\n    value: function getModuleSettings() {\n      var _this$context = this.context,\n          viewport = _this$context.viewport,\n          mousePosition = _this$context.mousePosition,\n          gl = _this$context.gl;\n      var moduleSettings = Object.assign(Object.create(this.props), {\n        viewport: viewport,\n        mousePosition: mousePosition,\n        pickingActive: 0,\n        devicePixelRatio: cssToDeviceRatio(gl)\n      });\n      return moduleSettings;\n    }\n  }, {\n    key: \"updateShaders\",\n    value: function updateShaders(shaders) {}\n  }, {\n    key: \"isAggregationDirty\",\n    value: function isAggregationDirty(updateOpts) {\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var props = updateOpts.props,\n          oldProps = updateOpts.oldProps,\n          changeFlags = updateOpts.changeFlags;\n      var _params$compareAll = params.compareAll,\n          compareAll = _params$compareAll === void 0 ? false : _params$compareAll,\n          dimension = params.dimension;\n      var ignoreProps = this.state.ignoreProps;\n      var dataProps = dimension.props,\n          _dimension$accessors = dimension.accessors,\n          accessors = _dimension$accessors === void 0 ? [] : _dimension$accessors;\n      var updateTriggersChanged = changeFlags.updateTriggersChanged;\n\n      if (changeFlags.dataChanged) {\n        return true;\n      }\n\n      if (updateTriggersChanged) {\n        if (updateTriggersChanged.all) {\n          return true;\n        }\n\n        var _iterator = _createForOfIteratorHelper(accessors),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var accessor = _step.value;\n\n            if (updateTriggersChanged[accessor]) {\n              return true;\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      }\n\n      if (compareAll) {\n        if (changeFlags.extensionsChanged) {\n          return true;\n        }\n\n        return compareProps({\n          oldProps: oldProps,\n          newProps: props,\n          ignoreProps: ignoreProps,\n          propTypes: this.constructor._propTypes\n        });\n      }\n\n      var _iterator2 = _createForOfIteratorHelper(dataProps),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var name = _step2.value;\n\n          if (props[name] !== oldProps[name]) {\n            return true;\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      return false;\n    }\n  }, {\n    key: \"isAttributeChanged\",\n    value: function isAttributeChanged(name) {\n      var changedAttributes = this.state.changedAttributes;\n\n      if (!name) {\n        return !isObjectEmpty(changedAttributes);\n      }\n\n      return changedAttributes && changedAttributes[name] !== undefined;\n    }\n  }, {\n    key: \"_getAttributeManager\",\n    value: function _getAttributeManager() {\n      return new AttributeManager(this.context.gl, {\n        id: this.props.id,\n        stats: this.context.stats\n      });\n    }\n  }]);\n\n  return AggregationLayer;\n}(CompositeLayer);\n\nexport { AggregationLayer as default };\n\nfunction isObjectEmpty(obj) {\n  var isEmpty = true;\n\n  for (var key in obj) {\n    isEmpty = false;\n    break;\n  }\n\n  return isEmpty;\n}\n\nAggregationLayer.layerName = 'AggregationLayer';\n//# sourceMappingURL=aggregation-layer.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { log } from '@deck.gl/core';\nimport { ColumnLayer } from '@deck.gl/layers';\nimport { defaultColorRange } from '../utils/color-utils';\nimport { pointToHexbin } from './hexagon-aggregator';\nimport CPUAggregator from '../utils/cpu-aggregator';\nimport AggregationLayer from '../aggregation-layer';\n\nfunction nop() {}\n\nvar defaultProps = {\n  colorDomain: null,\n  colorRange: defaultColorRange,\n  getColorValue: {\n    type: 'accessor',\n    value: null\n  },\n  getColorWeight: {\n    type: 'accessor',\n    value: 1\n  },\n  colorAggregation: 'SUM',\n  lowerPercentile: {\n    type: 'number',\n    value: 0,\n    min: 0,\n    max: 100\n  },\n  upperPercentile: {\n    type: 'number',\n    value: 100,\n    min: 0,\n    max: 100\n  },\n  colorScaleType: 'quantize',\n  onSetColorDomain: nop,\n  elevationDomain: null,\n  elevationRange: [0, 1000],\n  getElevationValue: {\n    type: 'accessor',\n    value: null\n  },\n  getElevationWeight: {\n    type: 'accessor',\n    value: 1\n  },\n  elevationAggregation: 'SUM',\n  elevationLowerPercentile: {\n    type: 'number',\n    value: 0,\n    min: 0,\n    max: 100\n  },\n  elevationUpperPercentile: {\n    type: 'number',\n    value: 100,\n    min: 0,\n    max: 100\n  },\n  elevationScale: {\n    type: 'number',\n    min: 0,\n    value: 1\n  },\n  elevationScaleType: 'linear',\n  onSetElevationDomain: nop,\n  radius: {\n    type: 'number',\n    value: 1000,\n    min: 1\n  },\n  coverage: {\n    type: 'number',\n    min: 0,\n    max: 1,\n    value: 1\n  },\n  extruded: false,\n  hexagonAggregator: pointToHexbin,\n  getPosition: {\n    type: 'accessor',\n    value: function value(x) {\n      return x.position;\n    }\n  },\n  material: true,\n  _filterData: {\n    type: 'function',\n    value: null,\n    optional: true\n  }\n};\n\nvar HexagonLayer = function (_AggregationLayer) {\n  _inherits(HexagonLayer, _AggregationLayer);\n\n  var _super = _createSuper(HexagonLayer);\n\n  function HexagonLayer() {\n    _classCallCheck(this, HexagonLayer);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(HexagonLayer, [{\n    key: \"shouldUpdateState\",\n    value: function shouldUpdateState(_ref) {\n      var changeFlags = _ref.changeFlags;\n      return changeFlags.somethingChanged;\n    }\n  }, {\n    key: \"initializeState\",\n    value: function initializeState() {\n      var cpuAggregator = new CPUAggregator({\n        getAggregator: function getAggregator(props) {\n          return props.hexagonAggregator;\n        },\n        getCellSize: function getCellSize(props) {\n          return props.radius;\n        }\n      });\n      this.state = {\n        cpuAggregator: cpuAggregator,\n        aggregatorState: cpuAggregator.state,\n        hexagonVertices: null\n      };\n      var attributeManager = this.getAttributeManager();\n      attributeManager.add({\n        positions: {\n          size: 3,\n          accessor: 'getPosition'\n        }\n      });\n    }\n  }, {\n    key: \"updateState\",\n    value: function updateState(opts) {\n      _get(_getPrototypeOf(HexagonLayer.prototype), \"updateState\", this).call(this, opts);\n\n      var _this$state = this.state,\n          cpuAggregator = _this$state.cpuAggregator,\n          oldVertices = _this$state.hexagonVertices;\n\n      if (opts.changeFlags.propsOrDataChanged) {\n        this.setState({\n          aggregatorState: cpuAggregator.updateState(opts, {\n            viewport: this.context.viewport,\n            attributes: this.getAttributes()\n          })\n        });\n      }\n\n      var _ref2 = cpuAggregator.state.layerData || {},\n          hexagonVertices = _ref2.hexagonVertices;\n\n      if (hexagonVertices && oldVertices !== hexagonVertices) {\n        var vertices = this.convertLatLngToMeterOffset(hexagonVertices);\n\n        if (vertices) {\n          this.setState({\n            hexagonVertices: hexagonVertices,\n            vertices: vertices\n          });\n        }\n      } else {\n        this.updateRadiusAngle();\n      }\n    }\n  }, {\n    key: \"updateRadiusAngle\",\n    value: function updateRadiusAngle(vertices) {\n      var viewport = this.context.viewport;\n\n      var _viewport$getDistance = viewport.getDistanceScales(),\n          unitsPerMeter = _viewport$getDistance.unitsPerMeter;\n\n      var cpuAggregator = this.state.cpuAggregator;\n\n      if (cpuAggregator.state.layerData && cpuAggregator.state.layerData.radiusCommon) {\n        var radiusCommon = cpuAggregator.state.layerData.radiusCommon;\n        var radius = radiusCommon / unitsPerMeter[0];\n        this.setState({\n          angle: 90,\n          radius: radius\n        });\n      }\n    }\n  }, {\n    key: \"convertLatLngToMeterOffset\",\n    value: function convertLatLngToMeterOffset(hexagonVertices) {\n      var viewport = this.context.viewport;\n\n      if (Array.isArray(hexagonVertices) && hexagonVertices.length === 6) {\n        var vertex0 = hexagonVertices[0];\n        var vertex3 = hexagonVertices[3];\n        var centroid = [(vertex0[0] + vertex3[0]) / 2, (vertex0[1] + vertex3[1]) / 2];\n        var centroidFlat = viewport.projectFlat(centroid);\n\n        var _viewport$getDistance2 = viewport.getDistanceScales(centroid),\n            metersPerUnit = _viewport$getDistance2.metersPerUnit;\n\n        var vertices = hexagonVertices.map(function (vt) {\n          var vtFlat = viewport.projectFlat(vt);\n          return [(vtFlat[0] - centroidFlat[0]) * metersPerUnit[0], (vtFlat[1] - centroidFlat[1]) * metersPerUnit[1]];\n        });\n        return vertices;\n      }\n\n      log.error('HexagonLayer: hexagonVertices needs to be an array of 6 points')();\n      return null;\n    }\n  }, {\n    key: \"getPickingInfo\",\n    value: function getPickingInfo(_ref3) {\n      var info = _ref3.info;\n      return this.state.cpuAggregator.getPickingInfo({\n        info: info\n      });\n    }\n  }, {\n    key: \"_onGetSublayerColor\",\n    value: function _onGetSublayerColor(cell) {\n      return this.state.cpuAggregator.getAccessor('fillColor')(cell);\n    }\n  }, {\n    key: \"_onGetSublayerElevation\",\n    value: function _onGetSublayerElevation(cell) {\n      return this.state.cpuAggregator.getAccessor('elevation')(cell);\n    }\n  }, {\n    key: \"_getSublayerUpdateTriggers\",\n    value: function _getSublayerUpdateTriggers() {\n      return this.state.cpuAggregator.getUpdateTriggers(this.props);\n    }\n  }, {\n    key: \"renderLayers\",\n    value: function renderLayers() {\n      var _this$props = this.props,\n          elevationScale = _this$props.elevationScale,\n          extruded = _this$props.extruded,\n          coverage = _this$props.coverage,\n          material = _this$props.material,\n          transitions = _this$props.transitions;\n      var _this$state2 = this.state,\n          angle = _this$state2.angle,\n          radius = _this$state2.radius,\n          cpuAggregator = _this$state2.cpuAggregator,\n          vertices = _this$state2.vertices;\n      var SubLayerClass = this.getSubLayerClass('hexagon-cell', ColumnLayer);\n\n      var updateTriggers = this._getSublayerUpdateTriggers();\n\n      var geometry = vertices && vertices.length ? {\n        vertices: vertices,\n        radius: 1\n      } : {\n        radius: radius,\n        angle: angle\n      };\n      return new SubLayerClass(_objectSpread(_objectSpread({}, geometry), {}, {\n        diskResolution: 6,\n        elevationScale: elevationScale,\n        extruded: extruded,\n        coverage: coverage,\n        material: material,\n        getFillColor: this._onGetSublayerColor.bind(this),\n        getElevation: this._onGetSublayerElevation.bind(this),\n        transitions: transitions && {\n          getFillColor: transitions.getColorValue || transitions.getColorWeight,\n          getElevation: transitions.getElevationValue || transitions.getElevationWeight\n        }\n      }), this.getSubLayerProps({\n        id: 'hexagon-cell',\n        updateTriggers: updateTriggers\n      }), {\n        data: cpuAggregator.state.layerData.data\n      });\n    }\n  }]);\n\n  return HexagonLayer;\n}(AggregationLayer);\n\nexport { HexagonLayer as default };\nHexagonLayer.layerName = 'HexagonLayer';\nHexagonLayer.defaultProps = defaultProps;\n//# sourceMappingURL=hexagon-layer.js.map","export var defaultColorRange = [[255, 255, 178], [254, 217, 118], [254, 178, 76], [253, 141, 60], [240, 59, 32], [189, 0, 38]];\nexport function colorRangeToFlatArray(colorRange) {\n  var normalize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var ArrayType = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Float32Array;\n  var flatArray;\n\n  if (Number.isFinite(colorRange[0])) {\n    flatArray = new ArrayType(colorRange);\n  } else {\n    flatArray = new ArrayType(colorRange.length * 4);\n    var index = 0;\n\n    for (var i = 0; i < colorRange.length; i++) {\n      var color = colorRange[i];\n      flatArray[index++] = color[0];\n      flatArray[index++] = color[1];\n      flatArray[index++] = color[2];\n      flatArray[index++] = Number.isFinite(color[3]) ? color[3] : 255;\n    }\n  }\n\n  if (normalize) {\n    for (var _i = 0; _i < flatArray.length; _i++) {\n      flatArray[_i] /= 255;\n    }\n  }\n\n  return flatArray;\n}\n//# sourceMappingURL=color-utils.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar channelHandles = 1;\nvar animationHandles = 1;\nexport var Timeline = function () {\n  function Timeline() {\n    _classCallCheck(this, Timeline);\n\n    this.time = 0;\n    this.channels = new Map();\n    this.animations = new Map();\n    this.playing = false;\n    this.lastEngineTime = -1;\n  }\n\n  _createClass(Timeline, [{\n    key: \"addChannel\",\n    value: function addChannel(props) {\n      var _props$delay = props.delay,\n          delay = _props$delay === void 0 ? 0 : _props$delay,\n          _props$duration = props.duration,\n          duration = _props$duration === void 0 ? Number.POSITIVE_INFINITY : _props$duration,\n          _props$rate = props.rate,\n          rate = _props$rate === void 0 ? 1 : _props$rate,\n          _props$repeat = props.repeat,\n          repeat = _props$repeat === void 0 ? 1 : _props$repeat;\n      var handle = channelHandles++;\n      var channel = {\n        time: 0,\n        delay: delay,\n        duration: duration,\n        rate: rate,\n        repeat: repeat\n      };\n\n      this._setChannelTime(channel, this.time);\n\n      this.channels.set(handle, channel);\n      return handle;\n    }\n  }, {\n    key: \"removeChannel\",\n    value: function removeChannel(handle) {\n      this.channels[\"delete\"](handle);\n\n      var _iterator = _createForOfIteratorHelper(this.animations),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _step$value = _slicedToArray(_step.value, 2),\n              animationHandle = _step$value[0],\n              animation = _step$value[1];\n\n          if (animation.channel === handle) {\n            this.detachAnimation(animationHandle);\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: \"isFinished\",\n    value: function isFinished(handle) {\n      var channel = this.channels.get(handle);\n\n      if (channel === undefined) {\n        return false;\n      }\n\n      return this.time >= channel.delay + channel.duration * channel.repeat;\n    }\n  }, {\n    key: \"getTime\",\n    value: function getTime(handle) {\n      if (handle === undefined) {\n        return this.time;\n      }\n\n      var channel = this.channels.get(handle);\n\n      if (channel === undefined) {\n        return -1;\n      }\n\n      return channel.time;\n    }\n  }, {\n    key: \"setTime\",\n    value: function setTime(time) {\n      this.time = Math.max(0, time);\n      var channels = this.channels.values();\n\n      var _iterator2 = _createForOfIteratorHelper(channels),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var channel = _step2.value;\n\n          this._setChannelTime(channel, this.time);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      var animations = this.animations.values();\n\n      var _iterator3 = _createForOfIteratorHelper(animations),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var animationData = _step3.value;\n          var animation = animationData.animation,\n              _channel = animationData.channel;\n          animation.setTime(this.getTime(_channel));\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      this.playing = true;\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      this.playing = false;\n      this.lastEngineTime = -1;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.setTime(0);\n    }\n  }, {\n    key: \"attachAnimation\",\n    value: function attachAnimation(animation, channelHandle) {\n      var animationHandle = animationHandles++;\n      this.animations.set(animationHandle, {\n        animation: animation,\n        channel: channelHandle\n      });\n      animation.setTime(this.getTime(channelHandle));\n      return animationHandle;\n    }\n  }, {\n    key: \"detachAnimation\",\n    value: function detachAnimation(handle) {\n      this.animations[\"delete\"](handle);\n    }\n  }, {\n    key: \"update\",\n    value: function update(engineTime) {\n      if (this.playing) {\n        if (this.lastEngineTime === -1) {\n          this.lastEngineTime = engineTime;\n        }\n\n        this.setTime(this.time + (engineTime - this.lastEngineTime));\n        this.lastEngineTime = engineTime;\n      }\n    }\n  }, {\n    key: \"_setChannelTime\",\n    value: function _setChannelTime(channel, time) {\n      var offsetTime = time - channel.delay;\n      var totalDuration = channel.duration * channel.repeat;\n\n      if (offsetTime >= totalDuration) {\n        channel.time = channel.duration * channel.rate;\n      } else {\n        channel.time = Math.max(0, offsetTime) % channel.duration;\n        channel.time *= channel.rate;\n      }\n    }\n  }]);\n\n  return Timeline;\n}();\n//# sourceMappingURL=timeline.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { load } from '@loaders.gl/core';\n\nvar Resource = function () {\n  function Resource(id, data, context) {\n    _classCallCheck(this, Resource);\n\n    this.id = id;\n    this.context = context;\n    this._loadCount = 0;\n    this._subscribers = new Set();\n    this.setData(data);\n  }\n\n  _createClass(Resource, [{\n    key: \"subscribe\",\n    value: function subscribe(consumer) {\n      this._subscribers.add(consumer);\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe(consumer) {\n      this._subscribers[\"delete\"](consumer);\n    }\n  }, {\n    key: \"inUse\",\n    value: function inUse() {\n      return this._subscribers.size > 0;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {}\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      var _this = this;\n\n      return this.isLoaded ? this._error ? Promise.reject(this._error) : this._content : this._loader.then(function () {\n        return _this.getData();\n      });\n    }\n  }, {\n    key: \"setData\",\n    value: function setData(data, forceUpdate) {\n      var _this2 = this;\n\n      if (data === this._data && !forceUpdate) {\n        return;\n      }\n\n      this._data = data;\n      var loadCount = ++this._loadCount;\n      var loader = data;\n\n      if (typeof data === 'string') {\n        loader = load(data);\n      }\n\n      if (loader instanceof Promise) {\n        this.isLoaded = false;\n        this._loader = loader.then(function (result) {\n          if (_this2._loadCount === loadCount) {\n            _this2.isLoaded = true;\n            _this2._error = null;\n            _this2._content = result;\n          }\n        })[\"catch\"](function (error) {\n          if (_this2._loadCount === loadCount) {\n            _this2.isLoaded = true;\n            _this2._error = error || true;\n          }\n        });\n      } else {\n        this.isLoaded = true;\n        this._error = null;\n        this._content = data;\n      }\n\n      var _iterator = _createForOfIteratorHelper(this._subscribers),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var subscriber = _step.value;\n          subscriber.onChange(this.getData());\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }]);\n\n  return Resource;\n}();\n\nexport { Resource as default };\n//# sourceMappingURL=resource.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport Resource from './resource';\n\nvar ResourceManager = function () {\n  function ResourceManager(_ref) {\n    var gl = _ref.gl,\n        protocol = _ref.protocol;\n\n    _classCallCheck(this, ResourceManager);\n\n    this.protocol = protocol || 'resource://';\n    this._context = {\n      gl: gl,\n      resourceManager: this\n    };\n    this._resources = {};\n    this._consumers = {};\n    this._pruneRequest = null;\n  }\n\n  _createClass(ResourceManager, [{\n    key: \"contains\",\n    value: function contains(resourceId) {\n      if (resourceId.startsWith(this.protocol)) {\n        return true;\n      }\n\n      return resourceId in this._resources;\n    }\n  }, {\n    key: \"add\",\n    value: function add(_ref2) {\n      var resourceId = _ref2.resourceId,\n          data = _ref2.data,\n          _ref2$forceUpdate = _ref2.forceUpdate,\n          forceUpdate = _ref2$forceUpdate === void 0 ? false : _ref2$forceUpdate,\n          _ref2$persistent = _ref2.persistent,\n          persistent = _ref2$persistent === void 0 ? true : _ref2$persistent;\n      var res = this._resources[resourceId];\n\n      if (res) {\n        res.setData(data, forceUpdate);\n      } else {\n        res = new Resource(resourceId, data, this._context);\n        this._resources[resourceId] = res;\n      }\n\n      res.persistent = persistent;\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(resourceId) {\n      var res = this._resources[resourceId];\n\n      if (res) {\n        res[\"delete\"]();\n        delete this._resources[resourceId];\n      }\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe(_ref3) {\n      var consumerId = _ref3.consumerId;\n      var consumer = this._consumers[consumerId];\n\n      if (consumer) {\n        for (var requestId in consumer) {\n          var request = consumer[requestId];\n\n          if (request.resource) {\n            request.resource.unsubscribe(request);\n          }\n        }\n\n        delete this._consumers[consumerId];\n        this.prune();\n      }\n    }\n  }, {\n    key: \"subscribe\",\n    value: function subscribe(_ref4) {\n      var resourceId = _ref4.resourceId,\n          onChange = _ref4.onChange,\n          consumerId = _ref4.consumerId,\n          _ref4$requestId = _ref4.requestId,\n          requestId = _ref4$requestId === void 0 ? 'default' : _ref4$requestId;\n      var resources = this._resources,\n          protocol = this.protocol;\n\n      if (resourceId.startsWith(protocol)) {\n        resourceId = resourceId.replace(protocol, '');\n\n        if (!resources[resourceId]) {\n          this.add({\n            resourceId: resourceId,\n            data: null,\n            persistent: false\n          });\n        }\n      }\n\n      var res = resources[resourceId];\n\n      this._track(consumerId, requestId, res, onChange);\n\n      if (res) {\n        return res.getData();\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"prune\",\n    value: function prune() {\n      var _this = this;\n\n      if (!this._pruneRequest) {\n        this._pruneRequest = setTimeout(function () {\n          return _this._prune();\n        }, 0);\n      }\n    }\n  }, {\n    key: \"finalize\",\n    value: function finalize() {\n      for (var key in this._resources) {\n        this._resources[key][\"delete\"]();\n      }\n    }\n  }, {\n    key: \"_track\",\n    value: function _track(consumerId, requestId, resource, onChange) {\n      var consumers = this._consumers;\n      var consumer = consumers[consumerId] = consumers[consumerId] || {};\n      var request = consumer[requestId] || {};\n\n      if (request.resource) {\n        request.resource.unsubscribe(request);\n        request.resource = null;\n        this.prune();\n      }\n\n      if (resource) {\n        consumer[requestId] = request;\n        request.onChange = onChange;\n        request.resource = resource;\n        resource.subscribe(request);\n      }\n    }\n  }, {\n    key: \"_prune\",\n    value: function _prune() {\n      this._pruneRequest = null;\n\n      for (var _i = 0, _Object$keys = Object.keys(this._resources); _i < _Object$keys.length; _i++) {\n        var key = _Object$keys[_i];\n        var res = this._resources[key];\n\n        if (!res.persistent && !res.inUse()) {\n          res[\"delete\"]();\n          delete this._resources[key];\n        }\n      }\n    }\n  }]);\n\n  return ResourceManager;\n}();\n\nexport { ResourceManager as default };\n//# sourceMappingURL=resource-manager.js.map","function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { ProgramManager } from '@luma.gl/core';\nimport { gouraudLighting, phongLighting } from '@luma.gl/core';\nimport geometry from './misc/geometry';\nimport project from './project/project';\nimport project32 from './project32/project32';\nimport shadow from './shadow/shadow';\nimport picking from './picking/picking';\nvar DEFAULT_MODULES = [geometry, project];\nvar SHADER_HOOKS = ['vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)', 'vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)', 'vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)', 'fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)'];\nexport function createProgramManager(gl) {\n  var programManager = ProgramManager.getDefaultProgramManager(gl);\n\n  var _iterator = _createForOfIteratorHelper(DEFAULT_MODULES),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var shaderModule = _step.value;\n      programManager.addDefaultModule(shaderModule);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  var _iterator2 = _createForOfIteratorHelper(SHADER_HOOKS),\n      _step2;\n\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var shaderHook = _step2.value;\n      programManager.addShaderHook(shaderHook);\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n\n  return programManager;\n}\nexport { picking, project, project32, gouraudLighting, phongLighting, shadow };\n//# sourceMappingURL=index.js.map","var vs = \"\\nstruct VertexGeometry {\\n  vec4 position;\\n  vec3 worldPosition;\\n  vec3 worldPositionAlt;\\n  vec3 normal;\\n  vec2 uv;\\n  vec3 pickingColor;\\n} geometry;\\n\";\nvar fs = \"\\n#define SMOOTH_EDGE_RADIUS 0.5\\n\\nstruct FragmentGeometry {\\n  vec2 uv;\\n} geometry;\\n\\nfloat smoothedge(float edge, float x) {\\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\\n}\\n\";\nexport default {\n  name: 'geometry',\n  vs: vs,\n  fs: fs\n};\n//# sourceMappingURL=geometry.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { Timeline } from '@luma.gl/core';\nimport Layer from './layer';\nimport { LIFECYCLE } from '../lifecycle/constants';\nimport log from '../utils/log';\nimport debug from '../debug';\nimport { flatten } from '../utils/flatten';\nimport { Stats } from 'probe.gl';\nimport ResourceManager from './resource/resource-manager';\nimport Viewport from '../viewports/viewport';\nimport { createProgramManager } from '../shaderlib';\nvar TRACE_SET_LAYERS = 'layerManager.setLayers';\nvar TRACE_ACTIVATE_VIEWPORT = 'layerManager.activateViewport';\nvar INITIAL_CONTEXT = Object.seal({\n  layerManager: null,\n  resourceManager: null,\n  deck: null,\n  gl: null,\n  stats: null,\n  shaderCache: null,\n  pickingFBO: null,\n  mousePosition: null,\n  userData: {}\n});\n\nvar layerName = function layerName(layer) {\n  return layer instanceof Layer ? \"\".concat(layer) : !layer ? 'null' : 'invalid';\n};\n\nvar LayerManager = function () {\n  function LayerManager(gl) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        deck = _ref.deck,\n        stats = _ref.stats,\n        viewport = _ref.viewport,\n        timeline = _ref.timeline;\n\n    _classCallCheck(this, LayerManager);\n\n    this.lastRenderedLayers = [];\n    this.layers = [];\n    this.resourceManager = new ResourceManager({\n      gl: gl,\n      protocol: 'deck://'\n    });\n    this.context = Object.assign({}, INITIAL_CONTEXT, {\n      layerManager: this,\n      gl: gl,\n      deck: deck,\n      programManager: gl && createProgramManager(gl),\n      stats: stats || new Stats({\n        id: 'deck.gl'\n      }),\n      viewport: viewport || new Viewport({\n        id: 'DEFAULT-INITIAL-VIEWPORT'\n      }),\n      timeline: timeline || new Timeline(),\n      resourceManager: this.resourceManager\n    });\n    this._needsRedraw = 'Initial render';\n    this._needsUpdate = false;\n    this._debug = false;\n    this._onError = null;\n    this.activateViewport = this.activateViewport.bind(this);\n    Object.seal(this);\n  }\n\n  _createClass(LayerManager, [{\n    key: \"finalize\",\n    value: function finalize() {\n      this.resourceManager.finalize();\n\n      var _iterator = _createForOfIteratorHelper(this.layers),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var layer = _step.value;\n\n          this._finalizeLayer(layer);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: \"needsRedraw\",\n    value: function needsRedraw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        clearRedrawFlags: false\n      };\n      var redraw = this._needsRedraw;\n\n      if (opts.clearRedrawFlags) {\n        this._needsRedraw = false;\n      }\n\n      var _iterator2 = _createForOfIteratorHelper(this.layers),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var layer = _step2.value;\n          var layerNeedsRedraw = layer.getNeedsRedraw(opts);\n          redraw = redraw || layerNeedsRedraw;\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      return redraw;\n    }\n  }, {\n    key: \"needsUpdate\",\n    value: function needsUpdate() {\n      return this._needsUpdate;\n    }\n  }, {\n    key: \"setNeedsRedraw\",\n    value: function setNeedsRedraw(reason) {\n      this._needsRedraw = this._needsRedraw || reason;\n    }\n  }, {\n    key: \"setNeedsUpdate\",\n    value: function setNeedsUpdate(reason) {\n      this._needsUpdate = this._needsUpdate || reason;\n    }\n  }, {\n    key: \"getLayers\",\n    value: function getLayers() {\n      var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref2$layerIds = _ref2.layerIds,\n          layerIds = _ref2$layerIds === void 0 ? null : _ref2$layerIds;\n\n      return layerIds ? this.layers.filter(function (layer) {\n        return layerIds.find(function (layerId) {\n          return layer.id.indexOf(layerId) === 0;\n        });\n      }) : this.layers;\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('debug' in props) {\n        this._debug = props.debug;\n      }\n\n      if ('userData' in props) {\n        this.context.userData = props.userData;\n      }\n\n      if ('layers' in props) {\n        this.setLayers(props.layers);\n      }\n\n      if ('onError' in props) {\n        this._onError = props.onError;\n      }\n    }\n  }, {\n    key: \"setLayers\",\n    value: function setLayers(newLayers) {\n      var forceUpdate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var shouldUpdate = forceUpdate || newLayers !== this.lastRenderedLayers;\n      debug(TRACE_SET_LAYERS, this, shouldUpdate, newLayers);\n\n      if (!shouldUpdate) {\n        return this;\n      }\n\n      this.lastRenderedLayers = newLayers;\n      newLayers = flatten(newLayers, Boolean);\n\n      var _iterator3 = _createForOfIteratorHelper(newLayers),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var layer = _step3.value;\n          layer.context = this.context;\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n\n      this._updateLayers(this.layers, newLayers);\n\n      return this;\n    }\n  }, {\n    key: \"updateLayers\",\n    value: function updateLayers() {\n      var reason = this.needsUpdate();\n\n      if (reason) {\n        this.setNeedsRedraw(\"updating layers: \".concat(reason));\n        var forceUpdate = true;\n        this.setLayers(this.lastRenderedLayers, forceUpdate);\n      }\n    }\n  }, {\n    key: \"activateViewport\",\n    value: function activateViewport(viewport) {\n      debug(TRACE_ACTIVATE_VIEWPORT, this, viewport);\n\n      if (viewport) {\n        this.context.viewport = viewport;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"_handleError\",\n    value: function _handleError(stage, error, layer) {\n      if (this._onError) {\n        this._onError(error, layer);\n      } else {\n        log.error(\"error during \".concat(stage, \" of \").concat(layerName(layer)), error)();\n      }\n    }\n  }, {\n    key: \"_updateLayers\",\n    value: function _updateLayers(oldLayers, newLayers) {\n      var oldLayerMap = {};\n\n      var _iterator4 = _createForOfIteratorHelper(oldLayers),\n          _step4;\n\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var oldLayer = _step4.value;\n\n          if (oldLayerMap[oldLayer.id]) {\n            log.warn(\"Multiple old layers with same id \".concat(layerName(oldLayer)))();\n          } else {\n            oldLayerMap[oldLayer.id] = oldLayer;\n          }\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n\n      var generatedLayers = [];\n\n      this._updateSublayersRecursively(newLayers, oldLayerMap, generatedLayers);\n\n      this._finalizeOldLayers(oldLayerMap);\n\n      var needsUpdate = false;\n\n      for (var _i = 0, _generatedLayers = generatedLayers; _i < _generatedLayers.length; _i++) {\n        var layer = _generatedLayers[_i];\n\n        if (layer.hasUniformTransition()) {\n          needsUpdate = true;\n          break;\n        }\n      }\n\n      this._needsUpdate = needsUpdate;\n      this.layers = generatedLayers;\n    }\n  }, {\n    key: \"_updateSublayersRecursively\",\n    value: function _updateSublayersRecursively(newLayers, oldLayerMap, generatedLayers) {\n      var _iterator5 = _createForOfIteratorHelper(newLayers),\n          _step5;\n\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var newLayer = _step5.value;\n          newLayer.context = this.context;\n          var oldLayer = oldLayerMap[newLayer.id];\n\n          if (oldLayer === null) {\n            log.warn(\"Multiple new layers with same id \".concat(layerName(newLayer)))();\n          }\n\n          oldLayerMap[newLayer.id] = null;\n          var sublayers = null;\n\n          try {\n            if (this._debug && oldLayer !== newLayer) {\n              newLayer.validateProps();\n            }\n\n            if (!oldLayer) {\n              this._initializeLayer(newLayer);\n            } else {\n              this._transferLayerState(oldLayer, newLayer);\n\n              this._updateLayer(newLayer);\n            }\n\n            generatedLayers.push(newLayer);\n            sublayers = newLayer.isComposite && newLayer.getSubLayers();\n          } catch (err) {\n            this._handleError('matching', err, newLayer);\n          }\n\n          if (sublayers) {\n            this._updateSublayersRecursively(sublayers, oldLayerMap, generatedLayers);\n          }\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n    }\n  }, {\n    key: \"_finalizeOldLayers\",\n    value: function _finalizeOldLayers(oldLayerMap) {\n      for (var layerId in oldLayerMap) {\n        var layer = oldLayerMap[layerId];\n\n        if (layer) {\n          this._finalizeLayer(layer);\n        }\n      }\n    }\n  }, {\n    key: \"_initializeLayer\",\n    value: function _initializeLayer(layer) {\n      try {\n        layer._initialize();\n\n        layer.lifecycle = LIFECYCLE.INITIALIZED;\n      } catch (err) {\n        this._handleError('initialization', err, layer);\n      }\n    }\n  }, {\n    key: \"_transferLayerState\",\n    value: function _transferLayerState(oldLayer, newLayer) {\n      newLayer._transferState(oldLayer);\n\n      newLayer.lifecycle = LIFECYCLE.MATCHED;\n\n      if (newLayer !== oldLayer) {\n        oldLayer.lifecycle = LIFECYCLE.AWAITING_GC;\n      }\n    }\n  }, {\n    key: \"_updateLayer\",\n    value: function _updateLayer(layer) {\n      try {\n        layer._update();\n      } catch (err) {\n        this._handleError('update', err, layer);\n      }\n    }\n  }, {\n    key: \"_finalizeLayer\",\n    value: function _finalizeLayer(layer) {\n      this._needsRedraw = this._needsRedraw || \"finalized \".concat(layerName(layer));\n      layer.lifecycle = LIFECYCLE.AWAITING_FINALIZATION;\n\n      try {\n        layer._finalize();\n\n        layer.lifecycle = LIFECYCLE.FINALIZED;\n      } catch (err) {\n        this._handleError('finalization', err, layer);\n      }\n    }\n  }]);\n\n  return LayerManager;\n}();\n\nexport { LayerManager as default };\n//# sourceMappingURL=layer-manager.js.map","export function deepEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (!a || !b) {\n    return false;\n  }\n\n  for (var key in a) {\n    var aValue = a[key];\n    var bValue = b[key];\n    var equals = aValue === bValue || Array.isArray(aValue) && Array.isArray(bValue) && deepEqual(aValue, bValue);\n\n    if (!equals) {\n      return false;\n    }\n  }\n\n  return true;\n}\n//# sourceMappingURL=deep-equal.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport assert from '../utils/assert';\nimport { deepEqual } from '../utils/deep-equal';\nimport log from '../utils/log';\nimport { flatten } from '../utils/flatten';\n\nvar ViewManager = function () {\n  function ViewManager() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, ViewManager);\n\n    this.views = [];\n    this.width = 100;\n    this.height = 100;\n    this.viewState = {};\n    this.controllers = {};\n    this.timeline = props.timeline;\n    this._viewports = [];\n    this._viewportMap = {};\n    this._isUpdating = false;\n    this._needsRedraw = 'Initial render';\n    this._needsUpdate = true;\n    this._eventManager = props.eventManager;\n    this._eventCallbacks = {\n      onViewStateChange: props.onViewStateChange,\n      onInteractionStateChange: props.onInteractionStateChange\n    };\n    Object.seal(this);\n    this.setProps(props);\n  }\n\n  _createClass(ViewManager, [{\n    key: \"finalize\",\n    value: function finalize() {\n      for (var key in this.controllers) {\n        if (this.controllers[key]) {\n          this.controllers[key].finalize();\n        }\n      }\n\n      this.controllers = {};\n    }\n  }, {\n    key: \"needsRedraw\",\n    value: function needsRedraw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        clearRedrawFlags: false\n      };\n      var redraw = this._needsRedraw;\n\n      if (opts.clearRedrawFlags) {\n        this._needsRedraw = false;\n      }\n\n      return redraw;\n    }\n  }, {\n    key: \"setNeedsUpdate\",\n    value: function setNeedsUpdate(reason) {\n      this._needsUpdate = this._needsUpdate || reason;\n      this._needsRedraw = this._needsRedraw || reason;\n    }\n  }, {\n    key: \"updateViewStates\",\n    value: function updateViewStates() {\n      for (var viewId in this.controllers) {\n        var controller = this.controllers[viewId];\n\n        if (controller) {\n          controller.updateTransition();\n        }\n      }\n    }\n  }, {\n    key: \"getViewports\",\n    value: function getViewports(rect) {\n      if (rect) {\n        return this._viewports.filter(function (viewport) {\n          return viewport.containsPixel(rect);\n        });\n      }\n\n      return this._viewports;\n    }\n  }, {\n    key: \"getViews\",\n    value: function getViews() {\n      var viewMap = {};\n      this.views.forEach(function (view) {\n        viewMap[view.id] = view;\n      });\n      return viewMap;\n    }\n  }, {\n    key: \"getView\",\n    value: function getView(viewOrViewId) {\n      return typeof viewOrViewId === 'string' ? this.views.find(function (view) {\n        return view.id === viewOrViewId;\n      }) : viewOrViewId;\n    }\n  }, {\n    key: \"getViewState\",\n    value: function getViewState(viewId) {\n      var view = this.getView(viewId);\n      var viewState = view && this.viewState[view.getViewStateId()] || this.viewState;\n      return view ? view.filterViewState(viewState) : viewState;\n    }\n  }, {\n    key: \"getViewport\",\n    value: function getViewport(viewId) {\n      return this._viewportMap[viewId];\n    }\n  }, {\n    key: \"unproject\",\n    value: function unproject(xyz, opts) {\n      var viewports = this.getViewports();\n      var pixel = {\n        x: xyz[0],\n        y: xyz[1]\n      };\n\n      for (var i = viewports.length - 1; i >= 0; --i) {\n        var viewport = viewports[i];\n\n        if (viewport.containsPixel(pixel)) {\n          var p = xyz.slice();\n          p[0] -= viewport.x;\n          p[1] -= viewport.y;\n          return viewport.unproject(p, opts);\n        }\n      }\n\n      return null;\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('views' in props) {\n        this._setViews(props.views);\n      }\n\n      if ('viewState' in props) {\n        this._setViewState(props.viewState);\n      }\n\n      if ('width' in props || 'height' in props) {\n        this._setSize(props.width, props.height);\n      }\n\n      if (!this._isUpdating) {\n        this._update();\n      }\n    }\n  }, {\n    key: \"_update\",\n    value: function _update() {\n      this._isUpdating = true;\n\n      if (this._needsUpdate) {\n        this._needsUpdate = false;\n\n        this._rebuildViewports();\n      }\n\n      if (this._needsUpdate) {\n        this._needsUpdate = false;\n\n        this._rebuildViewports();\n      }\n\n      this._isUpdating = false;\n    }\n  }, {\n    key: \"_setSize\",\n    value: function _setSize(width, height) {\n      assert(Number.isFinite(width) && Number.isFinite(height));\n\n      if (width !== this.width || height !== this.height) {\n        this.width = width;\n        this.height = height;\n        this.setNeedsUpdate('Size changed');\n      }\n    }\n  }, {\n    key: \"_setViews\",\n    value: function _setViews(views) {\n      views = flatten(views, Boolean);\n\n      var viewsChanged = this._diffViews(views, this.views);\n\n      if (viewsChanged) {\n        this.setNeedsUpdate('views changed');\n      }\n\n      this.views = views;\n    }\n  }, {\n    key: \"_setViewState\",\n    value: function _setViewState(viewState) {\n      if (viewState) {\n        var viewStateChanged = !deepEqual(viewState, this.viewState);\n\n        if (viewStateChanged) {\n          this.setNeedsUpdate('viewState changed');\n        }\n\n        this.viewState = viewState;\n      } else {\n        log.warn('missing `viewState` or `initialViewState`')();\n      }\n    }\n  }, {\n    key: \"_onViewStateChange\",\n    value: function _onViewStateChange(viewId, event) {\n      event.viewId = viewId;\n\n      this._eventCallbacks.onViewStateChange(event);\n    }\n  }, {\n    key: \"_createController\",\n    value: function _createController(view, props) {\n      var Controller = props.type;\n      var controller = new Controller(_objectSpread({\n        timeline: this.timeline,\n        eventManager: this._eventManager,\n        onViewStateChange: this._onViewStateChange.bind(this, props.id),\n        onStateChange: this._eventCallbacks.onInteractionStateChange,\n        makeViewport: function makeViewport(viewState) {\n          return view._getViewport(viewState, {\n            width: viewState.width,\n            height: viewState.height\n          });\n        }\n      }, props));\n      return controller;\n    }\n  }, {\n    key: \"_updateController\",\n    value: function _updateController(view, viewState, viewport, controller) {\n      var controllerProps = view.controller;\n\n      if (controllerProps) {\n        controllerProps = _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, viewState), view.props), controllerProps), {}, {\n          id: view.id,\n          x: viewport.x,\n          y: viewport.y,\n          width: viewport.width,\n          height: viewport.height\n        });\n\n        if (controller) {\n          controller.setProps(controllerProps);\n        } else {\n          controller = this._createController(view, controllerProps);\n        }\n\n        return controller;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"_rebuildViewports\",\n    value: function _rebuildViewports() {\n      var width = this.width,\n          height = this.height,\n          views = this.views;\n      var oldControllers = this.controllers;\n      this._viewports = [];\n      this.controllers = {};\n\n      for (var i = views.length; i--;) {\n        var view = views[i];\n        var viewState = this.getViewState(view);\n        var viewport = view.makeViewport({\n          width: width,\n          height: height,\n          viewState: viewState\n        });\n        this.controllers[view.id] = this._updateController(view, viewState, viewport, oldControllers[view.id]);\n\n        this._viewports.unshift(viewport);\n      }\n\n      for (var id in oldControllers) {\n        if (oldControllers[id] && !this.controllers[id]) {\n          oldControllers[id].finalize();\n        }\n      }\n\n      this._buildViewportMap();\n    }\n  }, {\n    key: \"_buildViewportMap\",\n    value: function _buildViewportMap() {\n      var _this = this;\n\n      this._viewportMap = {};\n\n      this._viewports.forEach(function (viewport) {\n        if (viewport.id) {\n          _this._viewportMap[viewport.id] = _this._viewportMap[viewport.id] || viewport;\n        }\n      });\n    }\n  }, {\n    key: \"_diffViews\",\n    value: function _diffViews(newViews, oldViews) {\n      if (newViews.length !== oldViews.length) {\n        return true;\n      }\n\n      return newViews.some(function (_, i) {\n        return !newViews[i].equals(oldViews[i]);\n      });\n    }\n  }]);\n\n  return ViewManager;\n}();\n\nexport { ViewManager as default };\n//# sourceMappingURL=view-manager.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar PERCENT_OR_PIXELS_REGEX = /([0-9]+\\.?[0-9]*)(%|px)/;\nexport function parsePosition(value) {\n  switch (_typeof(value)) {\n    case 'number':\n      return {\n        position: value,\n        relative: false\n      };\n\n    case 'string':\n      var match = value.match(PERCENT_OR_PIXELS_REGEX);\n\n      if (match && match.length >= 3) {\n        var relative = match[2] === '%';\n        var position = parseFloat(match[1]);\n        return {\n          position: relative ? position / 100 : position,\n          relative: relative\n        };\n      }\n\n    default:\n      throw new Error(\"Could not parse position string \".concat(value));\n  }\n}\nexport function getPosition(position, extent) {\n  return position.relative ? Math.round(position.position * extent) : position.position;\n}\n//# sourceMappingURL=positions.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport Viewport from '../viewports/viewport';\nimport { parsePosition, getPosition } from '../utils/positions';\nimport { deepEqual } from '../utils/deep-equal';\nimport assert from '../utils/assert';\n\nvar View = function () {\n  function View() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, View);\n\n    var _props$id = props.id,\n        id = _props$id === void 0 ? null : _props$id,\n        _props$x = props.x,\n        x = _props$x === void 0 ? 0 : _props$x,\n        _props$y = props.y,\n        y = _props$y === void 0 ? 0 : _props$y,\n        _props$width = props.width,\n        width = _props$width === void 0 ? '100%' : _props$width,\n        _props$height = props.height,\n        height = _props$height === void 0 ? '100%' : _props$height,\n        _props$projectionMatr = props.projectionMatrix,\n        projectionMatrix = _props$projectionMatr === void 0 ? null : _props$projectionMatr,\n        _props$fovy = props.fovy,\n        fovy = _props$fovy === void 0 ? 50 : _props$fovy,\n        _props$near = props.near,\n        near = _props$near === void 0 ? 0.1 : _props$near,\n        _props$far = props.far,\n        far = _props$far === void 0 ? 1000 : _props$far,\n        _props$modelMatrix = props.modelMatrix,\n        modelMatrix = _props$modelMatrix === void 0 ? null : _props$modelMatrix,\n        _props$viewportInstan = props.viewportInstance,\n        viewportInstance = _props$viewportInstan === void 0 ? null : _props$viewportInstan,\n        _props$type = props.type,\n        type = _props$type === void 0 ? Viewport : _props$type;\n    assert(!viewportInstance || viewportInstance instanceof Viewport);\n    this.viewportInstance = viewportInstance;\n    this.id = id || this.constructor.displayName || 'view';\n    this.type = type;\n    this.props = Object.assign({}, props, {\n      id: this.id,\n      projectionMatrix: projectionMatrix,\n      fovy: fovy,\n      near: near,\n      far: far,\n      modelMatrix: modelMatrix\n    });\n\n    this._parseDimensions({\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    });\n\n    this.equals = this.equals.bind(this);\n    Object.seal(this);\n  }\n\n  _createClass(View, [{\n    key: \"equals\",\n    value: function equals(view) {\n      if (this === view) {\n        return true;\n      }\n\n      if (this.viewportInstance) {\n        return view.viewportInstance && this.viewportInstance.equals(view.viewportInstance);\n      }\n\n      var viewChanged = deepEqual(this.props, view.props);\n      return viewChanged;\n    }\n  }, {\n    key: \"makeViewport\",\n    value: function makeViewport(_ref) {\n      var width = _ref.width,\n          height = _ref.height,\n          viewState = _ref.viewState;\n\n      if (this.viewportInstance) {\n        return this.viewportInstance;\n      }\n\n      viewState = this.filterViewState(viewState);\n      var viewportDimensions = this.getDimensions({\n        width: width,\n        height: height\n      });\n      return this._getViewport(viewState, viewportDimensions);\n    }\n  }, {\n    key: \"getViewStateId\",\n    value: function getViewStateId() {\n      switch (_typeof(this.props.viewState)) {\n        case 'string':\n          return this.props.viewState;\n\n        case 'object':\n          return this.props.viewState && this.props.viewState.id;\n\n        default:\n          return this.id;\n      }\n    }\n  }, {\n    key: \"filterViewState\",\n    value: function filterViewState(viewState) {\n      if (this.props.viewState && _typeof(this.props.viewState) === 'object') {\n        if (!this.props.viewState.id) {\n          return this.props.viewState;\n        }\n\n        var newViewState = Object.assign({}, viewState);\n\n        for (var key in this.props.viewState) {\n          if (key !== 'id') {\n            newViewState[key] = this.props.viewState[key];\n          }\n        }\n\n        return newViewState;\n      }\n\n      return viewState;\n    }\n  }, {\n    key: \"getDimensions\",\n    value: function getDimensions(_ref2) {\n      var width = _ref2.width,\n          height = _ref2.height;\n      return {\n        x: getPosition(this._x, width),\n        y: getPosition(this._y, height),\n        width: getPosition(this._width, width),\n        height: getPosition(this._height, height)\n      };\n    }\n  }, {\n    key: \"_getControllerProps\",\n    value: function _getControllerProps(defaultOpts) {\n      var opts = this.props.controller;\n\n      if (!opts) {\n        return null;\n      }\n\n      if (opts === true) {\n        return defaultOpts;\n      }\n\n      if (typeof opts === 'function') {\n        opts = {\n          type: opts\n        };\n      }\n\n      return Object.assign({}, defaultOpts, opts);\n    }\n  }, {\n    key: \"_getViewport\",\n    value: function _getViewport(viewState, viewportDimensions) {\n      var ViewportType = this.type;\n      return new ViewportType(_objectSpread(_objectSpread(_objectSpread({}, viewState), this.props), viewportDimensions));\n    }\n  }, {\n    key: \"_parseDimensions\",\n    value: function _parseDimensions(_ref3) {\n      var x = _ref3.x,\n          y = _ref3.y,\n          width = _ref3.width,\n          height = _ref3.height;\n      this._x = parsePosition(x);\n      this._y = parsePosition(y);\n      this._width = parsePosition(width);\n      this._height = parsePosition(height);\n    }\n  }]);\n\n  return View;\n}();\n\nexport { View as default };\n//# sourceMappingURL=view.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport Transition from '../transitions/transition';\n\nvar noop = function noop() {};\n\nexport var TRANSITION_EVENTS = {\n  BREAK: 1,\n  SNAP_TO_END: 2,\n  IGNORE: 3\n};\nvar DEFAULT_PROPS = {\n  transitionEasing: function transitionEasing(t) {\n    return t;\n  },\n  transitionInterruption: TRANSITION_EVENTS.BREAK,\n  onTransitionStart: noop,\n  onTransitionInterrupt: noop,\n  onTransitionEnd: noop\n};\n\nvar TransitionManager = function () {\n  function TransitionManager(ControllerState) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, TransitionManager);\n\n    this.ControllerState = ControllerState;\n    this.props = Object.assign({}, DEFAULT_PROPS, props);\n    this.propsInTransition = null;\n    this.transition = new Transition(props.timeline);\n    this.onViewStateChange = props.onViewStateChange || noop;\n    this.onStateChange = props.onStateChange || noop;\n    this._onTransitionUpdate = this._onTransitionUpdate.bind(this);\n  }\n\n  _createClass(TransitionManager, [{\n    key: \"finalize\",\n    value: function finalize() {\n      this.transition.cancel();\n    }\n  }, {\n    key: \"getViewportInTransition\",\n    value: function getViewportInTransition() {\n      return this.propsInTransition;\n    }\n  }, {\n    key: \"processViewStateChange\",\n    value: function processViewStateChange(nextProps) {\n      var transitionTriggered = false;\n      var currentProps = this.props;\n      nextProps = Object.assign({}, DEFAULT_PROPS, nextProps);\n      this.props = nextProps;\n\n      if (this._shouldIgnoreViewportChange(currentProps, nextProps)) {\n        return transitionTriggered;\n      }\n\n      if (this._isTransitionEnabled(nextProps)) {\n        var _this$transition$sett = this.transition.settings,\n            interruption = _this$transition$sett.interruption,\n            endProps = _this$transition$sett.endProps;\n        var startProps = Object.assign({}, currentProps, interruption === TRANSITION_EVENTS.SNAP_TO_END ? endProps : this.propsInTransition || currentProps);\n\n        this._triggerTransition(startProps, nextProps);\n\n        transitionTriggered = true;\n      } else {\n        this.transition.cancel();\n      }\n\n      return transitionTriggered;\n    }\n  }, {\n    key: \"updateTransition\",\n    value: function updateTransition() {\n      this.transition.update();\n    }\n  }, {\n    key: \"_isTransitionEnabled\",\n    value: function _isTransitionEnabled(props) {\n      var transitionDuration = props.transitionDuration,\n          transitionInterpolator = props.transitionInterpolator;\n      return (transitionDuration > 0 || transitionDuration === 'auto') && Boolean(transitionInterpolator);\n    }\n  }, {\n    key: \"_isUpdateDueToCurrentTransition\",\n    value: function _isUpdateDueToCurrentTransition(props) {\n      if (this.transition.inProgress) {\n        return this.transition.settings.interpolator.arePropsEqual(props, this.propsInTransition);\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_shouldIgnoreViewportChange\",\n    value: function _shouldIgnoreViewportChange(currentProps, nextProps) {\n      if (this.transition.inProgress) {\n        return this.transition.settings.interruption === TRANSITION_EVENTS.IGNORE || this._isUpdateDueToCurrentTransition(nextProps);\n      } else if (this._isTransitionEnabled(nextProps)) {\n        return nextProps.transitionInterpolator.arePropsEqual(currentProps, nextProps);\n      }\n\n      return true;\n    }\n  }, {\n    key: \"_triggerTransition\",\n    value: function _triggerTransition(startProps, endProps) {\n      var startViewstate = new this.ControllerState(startProps);\n      var endViewStateProps = new this.ControllerState(endProps).shortestPathFrom(startViewstate);\n      var transitionInterpolator = endProps.transitionInterpolator;\n      var duration = transitionInterpolator.getDuration ? transitionInterpolator.getDuration(startProps, endProps) : endProps.transitionDuration;\n\n      if (duration === 0) {\n        return;\n      }\n\n      var initialProps = endProps.transitionInterpolator.initializeProps(startProps, endViewStateProps);\n      this.propsInTransition = {};\n      this.duration = duration;\n      this.transition.start({\n        duration: duration,\n        easing: endProps.transitionEasing,\n        interpolator: endProps.transitionInterpolator,\n        interruption: endProps.transitionInterruption,\n        startProps: initialProps.start,\n        endProps: initialProps.end,\n        onStart: endProps.onTransitionStart,\n        onUpdate: this._onTransitionUpdate,\n        onInterrupt: this._onTransitionEnd(endProps.onTransitionInterrupt),\n        onEnd: this._onTransitionEnd(endProps.onTransitionEnd)\n      });\n      this.onStateChange({\n        inTransition: true\n      });\n      this.updateTransition();\n    }\n  }, {\n    key: \"_onTransitionEnd\",\n    value: function _onTransitionEnd(callback) {\n      var _this = this;\n\n      return function (transition) {\n        _this.propsInTransition = null;\n\n        _this.onStateChange({\n          inTransition: false,\n          isZooming: false,\n          isPanning: false,\n          isRotating: false\n        });\n\n        callback(transition);\n      };\n    }\n  }, {\n    key: \"_onTransitionUpdate\",\n    value: function _onTransitionUpdate(transition) {\n      var time = transition.time,\n          _transition$settings = transition.settings,\n          interpolator = _transition$settings.interpolator,\n          startProps = _transition$settings.startProps,\n          endProps = _transition$settings.endProps,\n          duration = _transition$settings.duration,\n          easing = _transition$settings.easing;\n      var t = easing(time / duration);\n      var viewport = interpolator.interpolateProps(startProps, endProps, t);\n      this.propsInTransition = new this.ControllerState(Object.assign({}, this.props, viewport)).getViewportProps();\n      this.onViewStateChange({\n        viewState: this.propsInTransition,\n        oldViewState: this.props\n      });\n    }\n  }]);\n\n  return TransitionManager;\n}();\n\nexport { TransitionManager as default };\n//# sourceMappingURL=transition-manager.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport TransitionManager from './transition-manager';\nimport assert from '../utils/assert';\nvar NO_TRANSITION_PROPS = {\n  transitionDuration: 0\n};\nvar DEFAULT_INERTIA = 300;\n\nvar INERTIA_EASING = function INERTIA_EASING(t) {\n  return 1 - (1 - t) * (1 - t);\n};\n\nvar EVENT_TYPES = {\n  WHEEL: ['wheel'],\n  PAN: ['panstart', 'panmove', 'panend'],\n  PINCH: ['pinchstart', 'pinchmove', 'pinchend'],\n  TRIPLE_PAN: ['tripanstart', 'tripanmove', 'tripanend'],\n  DOUBLE_TAP: ['doubletap'],\n  KEYBOARD: ['keydown']\n};\n\nvar Controller = function () {\n  function Controller(ControllerState) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Controller);\n\n    assert(ControllerState);\n    this.ControllerState = ControllerState;\n    this.controllerState = null;\n    this.controllerStateProps = null;\n    this.eventManager = null;\n    this.transitionManager = new TransitionManager(ControllerState, _objectSpread(_objectSpread({}, options), {}, {\n      onViewStateChange: this._onTransition.bind(this),\n      onStateChange: this._setInteractionState.bind(this)\n    }));\n    this._events = null;\n    this._interactionState = {\n      isDragging: false\n    };\n    this._customEvents = [];\n    this.onViewStateChange = null;\n    this.onStateChange = null;\n    this.handleEvent = this.handleEvent.bind(this);\n    this.setProps(options);\n  }\n\n  _createClass(Controller, [{\n    key: \"finalize\",\n    value: function finalize() {\n      for (var eventName in this._events) {\n        if (this._events[eventName]) {\n          this.eventManager.off(eventName, this.handleEvent);\n        }\n      }\n\n      this.transitionManager.finalize();\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(event) {\n      var ControllerState = this.ControllerState;\n      this.controllerState = new ControllerState(_objectSpread(_objectSpread({\n        makeViewport: this.makeViewport\n      }, this.controllerStateProps), this._state));\n      var eventStartBlocked = this._eventStartBlocked;\n\n      switch (event.type) {\n        case 'panstart':\n          return eventStartBlocked ? false : this._onPanStart(event);\n\n        case 'panmove':\n          return this._onPan(event);\n\n        case 'panend':\n          return this._onPanEnd(event);\n\n        case 'pinchstart':\n          return eventStartBlocked ? false : this._onPinchStart(event);\n\n        case 'pinchmove':\n          return this._onPinch(event);\n\n        case 'pinchend':\n          return this._onPinchEnd(event);\n\n        case 'tripanstart':\n          return eventStartBlocked ? false : this._onTriplePanStart(event);\n\n        case 'tripanmove':\n          return this._onTriplePan(event);\n\n        case 'tripanend':\n          return this._onTriplePanEnd(event);\n\n        case 'doubletap':\n          return this._onDoubleTap(event);\n\n        case 'wheel':\n          return this._onWheel(event);\n\n        case 'keydown':\n          return this._onKeyDown(event);\n\n        default:\n          return false;\n      }\n    }\n  }, {\n    key: \"getCenter\",\n    value: function getCenter(event) {\n      var _this$controllerState = this.controllerStateProps,\n          x = _this$controllerState.x,\n          y = _this$controllerState.y;\n      var offsetCenter = event.offsetCenter;\n      return [offsetCenter.x - x, offsetCenter.y - y];\n    }\n  }, {\n    key: \"isPointInBounds\",\n    value: function isPointInBounds(pos, event) {\n      var _this$controllerState2 = this.controllerStateProps,\n          width = _this$controllerState2.width,\n          height = _this$controllerState2.height;\n\n      if (event && event.handled) {\n        return false;\n      }\n\n      var inside = pos[0] >= 0 && pos[0] <= width && pos[1] >= 0 && pos[1] <= height;\n\n      if (inside && event) {\n        event.stopPropagation();\n      }\n\n      return inside;\n    }\n  }, {\n    key: \"isFunctionKeyPressed\",\n    value: function isFunctionKeyPressed(event) {\n      var srcEvent = event.srcEvent;\n      return Boolean(srcEvent.metaKey || srcEvent.altKey || srcEvent.ctrlKey || srcEvent.shiftKey);\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging() {\n      return this._interactionState.isDragging;\n    }\n  }, {\n    key: \"blockEvents\",\n    value: function blockEvents(timeout) {\n      var _this = this;\n\n      var timer = setTimeout(function () {\n        if (_this._eventStartBlocked === timer) {\n          _this._eventStartBlocked = null;\n        }\n      }, timeout);\n      this._eventStartBlocked = timer;\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('onViewStateChange' in props) {\n        this.onViewStateChange = props.onViewStateChange;\n      }\n\n      if ('onStateChange' in props) {\n        this.onStateChange = props.onStateChange;\n      }\n\n      if ('makeViewport' in props) {\n        this.makeViewport = props.makeViewport;\n      }\n\n      if ('dragMode' in props) {\n        this.dragMode = props.dragMode;\n      }\n\n      this.controllerStateProps = props;\n\n      if ('eventManager' in props && this.eventManager !== props.eventManager) {\n        this.eventManager = props.eventManager;\n        this._events = {};\n        this.toggleEvents(this._customEvents, true);\n      }\n\n      if (!('transitionInterpolator' in props)) {\n        props.transitionInterpolator = this._getTransitionProps().transitionInterpolator;\n      }\n\n      this.transitionManager.processViewStateChange(props);\n      var inertia = props.inertia;\n\n      if (inertia === true) {\n        inertia = DEFAULT_INERTIA;\n      }\n\n      this.inertia = inertia;\n      var _props$scrollZoom = props.scrollZoom,\n          scrollZoom = _props$scrollZoom === void 0 ? true : _props$scrollZoom,\n          _props$dragPan = props.dragPan,\n          dragPan = _props$dragPan === void 0 ? true : _props$dragPan,\n          _props$dragRotate = props.dragRotate,\n          dragRotate = _props$dragRotate === void 0 ? true : _props$dragRotate,\n          _props$doubleClickZoo = props.doubleClickZoom,\n          doubleClickZoom = _props$doubleClickZoo === void 0 ? true : _props$doubleClickZoo,\n          _props$touchZoom = props.touchZoom,\n          touchZoom = _props$touchZoom === void 0 ? true : _props$touchZoom,\n          _props$touchRotate = props.touchRotate,\n          touchRotate = _props$touchRotate === void 0 ? false : _props$touchRotate,\n          _props$keyboard = props.keyboard,\n          keyboard = _props$keyboard === void 0 ? true : _props$keyboard;\n      var isInteractive = Boolean(this.onViewStateChange);\n      this.toggleEvents(EVENT_TYPES.WHEEL, isInteractive && scrollZoom);\n      this.toggleEvents(EVENT_TYPES.PAN, isInteractive && (dragPan || dragRotate));\n      this.toggleEvents(EVENT_TYPES.PINCH, isInteractive && (touchZoom || touchRotate));\n      this.toggleEvents(EVENT_TYPES.TRIPLE_PAN, isInteractive && touchRotate);\n      this.toggleEvents(EVENT_TYPES.DOUBLE_TAP, isInteractive && doubleClickZoom);\n      this.toggleEvents(EVENT_TYPES.KEYBOARD, isInteractive && keyboard);\n      this.scrollZoom = scrollZoom;\n      this.dragPan = dragPan;\n      this.dragRotate = dragRotate;\n      this.doubleClickZoom = doubleClickZoom;\n      this.touchZoom = touchZoom;\n      this.touchRotate = touchRotate;\n      this.keyboard = keyboard;\n    }\n  }, {\n    key: \"updateTransition\",\n    value: function updateTransition() {\n      this.transitionManager.updateTransition();\n    }\n  }, {\n    key: \"toggleEvents\",\n    value: function toggleEvents(eventNames, enabled) {\n      var _this2 = this;\n\n      if (this.eventManager) {\n        eventNames.forEach(function (eventName) {\n          if (_this2._events[eventName] !== enabled) {\n            _this2._events[eventName] = enabled;\n\n            if (enabled) {\n              _this2.eventManager.on(eventName, _this2.handleEvent);\n            } else {\n              _this2.eventManager.off(eventName, _this2.handleEvent);\n            }\n          }\n        });\n      }\n    }\n  }, {\n    key: \"updateViewport\",\n    value: function updateViewport(newControllerState) {\n      var extraProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var interactionState = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var viewState = Object.assign({}, newControllerState.getViewportProps(), extraProps);\n      var changed = this.controllerState !== newControllerState;\n      this._state = newControllerState.getState();\n\n      this._setInteractionState(interactionState);\n\n      if (changed) {\n        var oldViewState = this.controllerState ? this.controllerState.getViewportProps() : null;\n\n        if (this.onViewStateChange) {\n          this.onViewStateChange({\n            viewState: viewState,\n            interactionState: this._interactionState,\n            oldViewState: oldViewState\n          });\n        }\n      }\n    }\n  }, {\n    key: \"_onTransition\",\n    value: function _onTransition(params) {\n      if (this.onViewStateChange) {\n        params.interactionState = this._interactionState;\n        this.onViewStateChange(params);\n      }\n    }\n  }, {\n    key: \"_setInteractionState\",\n    value: function _setInteractionState(newStates) {\n      Object.assign(this._interactionState, newStates);\n\n      if (this.onStateChange) {\n        this.onStateChange(this._interactionState);\n      }\n    }\n  }, {\n    key: \"_onPanStart\",\n    value: function _onPanStart(event) {\n      var pos = this.getCenter(event);\n\n      if (!this.isPointInBounds(pos, event)) {\n        return false;\n      }\n\n      var alternateMode = this.isFunctionKeyPressed(event) || event.rightButton;\n\n      if (this.invertPan || this.dragMode === 'pan') {\n        alternateMode = !alternateMode;\n      }\n\n      var newControllerState = this.controllerState[alternateMode ? 'panStart' : 'rotateStart']({\n        pos: pos\n      });\n      this._panMove = alternateMode;\n      this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n        isDragging: true\n      });\n      return true;\n    }\n  }, {\n    key: \"_onPan\",\n    value: function _onPan(event) {\n      if (!this.isDragging()) {\n        return false;\n      }\n\n      return this._panMove ? this._onPanMove(event) : this._onPanRotate(event);\n    }\n  }, {\n    key: \"_onPanEnd\",\n    value: function _onPanEnd(event) {\n      if (!this.isDragging()) {\n        return false;\n      }\n\n      return this._panMove ? this._onPanMoveEnd(event) : this._onPanRotateEnd(event);\n    }\n  }, {\n    key: \"_onPanMove\",\n    value: function _onPanMove(event) {\n      if (!this.dragPan) {\n        return false;\n      }\n\n      var pos = this.getCenter(event);\n      var newControllerState = this.controllerState.pan({\n        pos: pos\n      });\n      this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n        isDragging: true,\n        isPanning: true\n      });\n      return true;\n    }\n  }, {\n    key: \"_onPanMoveEnd\",\n    value: function _onPanMoveEnd(event) {\n      var inertia = this.inertia;\n\n      if (this.dragPan && inertia && event.velocity) {\n        var pos = this.getCenter(event);\n        var endPos = [pos[0] + event.velocityX * inertia / 2, pos[1] + event.velocityY * inertia / 2];\n        var newControllerState = this.controllerState.pan({\n          pos: endPos\n        }).panEnd();\n        this.updateViewport(newControllerState, _objectSpread(_objectSpread({}, this._getTransitionProps()), {}, {\n          transitionDuration: inertia,\n          transitionEasing: INERTIA_EASING\n        }), {\n          isDragging: false,\n          isPanning: true\n        });\n      } else {\n        var _newControllerState = this.controllerState.panEnd();\n\n        this.updateViewport(_newControllerState, null, {\n          isDragging: false,\n          isPanning: false\n        });\n      }\n\n      return true;\n    }\n  }, {\n    key: \"_onPanRotate\",\n    value: function _onPanRotate(event) {\n      if (!this.dragRotate) {\n        return false;\n      }\n\n      var pos = this.getCenter(event);\n      var newControllerState = this.controllerState.rotate({\n        pos: pos\n      });\n      this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n        isDragging: true,\n        isRotating: true\n      });\n      return true;\n    }\n  }, {\n    key: \"_onPanRotateEnd\",\n    value: function _onPanRotateEnd(event) {\n      var inertia = this.inertia;\n\n      if (this.dragRotate && inertia && event.velocity) {\n        var pos = this.getCenter(event);\n        var endPos = [pos[0] + event.velocityX * inertia / 2, pos[1] + event.velocityY * inertia / 2];\n        var newControllerState = this.controllerState.rotate({\n          pos: endPos\n        }).rotateEnd();\n        this.updateViewport(newControllerState, _objectSpread(_objectSpread({}, this._getTransitionProps()), {}, {\n          transitionDuration: inertia,\n          transitionEasing: INERTIA_EASING\n        }), {\n          isDragging: false,\n          isRotating: true\n        });\n      } else {\n        var _newControllerState2 = this.controllerState.rotateEnd();\n\n        this.updateViewport(_newControllerState2, null, {\n          isDragging: false,\n          isRotating: false\n        });\n      }\n\n      return true;\n    }\n  }, {\n    key: \"_onWheel\",\n    value: function _onWheel(event) {\n      if (!this.scrollZoom) {\n        return false;\n      }\n\n      event.preventDefault();\n      var pos = this.getCenter(event);\n\n      if (!this.isPointInBounds(pos, event)) {\n        return false;\n      }\n\n      var _this$scrollZoom = this.scrollZoom,\n          _this$scrollZoom$spee = _this$scrollZoom.speed,\n          speed = _this$scrollZoom$spee === void 0 ? 0.01 : _this$scrollZoom$spee,\n          _this$scrollZoom$smoo = _this$scrollZoom.smooth,\n          smooth = _this$scrollZoom$smoo === void 0 ? false : _this$scrollZoom$smoo;\n      var delta = event.delta;\n      var scale = 2 / (1 + Math.exp(-Math.abs(delta * speed)));\n\n      if (delta < 0 && scale !== 0) {\n        scale = 1 / scale;\n      }\n\n      var newControllerState = this.controllerState.zoom({\n        pos: pos,\n        scale: scale\n      });\n      this.updateViewport(newControllerState, _objectSpread(_objectSpread({}, this._getTransitionProps({\n        around: pos\n      })), {}, {\n        transitionDuration: smooth ? 250 : 1\n      }), {\n        isZooming: true,\n        isPanning: true\n      });\n      return true;\n    }\n  }, {\n    key: \"_onTriplePanStart\",\n    value: function _onTriplePanStart(event) {\n      var pos = this.getCenter(event);\n\n      if (!this.isPointInBounds(pos, event)) {\n        return false;\n      }\n\n      var newControllerState = this.controllerState.rotateStart({\n        pos: pos\n      });\n      this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n        isDragging: true\n      });\n      return true;\n    }\n  }, {\n    key: \"_onTriplePan\",\n    value: function _onTriplePan(event) {\n      if (!this.touchRotate) {\n        return false;\n      }\n\n      if (!this.isDragging()) {\n        return false;\n      }\n\n      var pos = this.getCenter(event);\n      pos[0] -= event.deltaX;\n      var newControllerState = this.controllerState.rotate({\n        pos: pos\n      });\n      this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n        isDragging: true,\n        isRotating: true\n      });\n      return true;\n    }\n  }, {\n    key: \"_onTriplePanEnd\",\n    value: function _onTriplePanEnd(event) {\n      if (!this.isDragging()) {\n        return false;\n      }\n\n      var inertia = this.inertia;\n\n      if (this.touchRotate && inertia && event.velocityY) {\n        var pos = this.getCenter(event);\n        var endPos = [pos[0], pos[1] += event.velocityY * inertia / 2];\n        var newControllerState = this.controllerState.rotate({\n          pos: endPos\n        });\n        this.updateViewport(newControllerState, _objectSpread(_objectSpread({}, this._getTransitionProps()), {}, {\n          transitionDuration: inertia,\n          transitionEasing: INERTIA_EASING\n        }), {\n          isDragging: false,\n          isRotating: true\n        });\n        this.blockEvents(inertia);\n      } else {\n        var _newControllerState3 = this.controllerState.rotateEnd();\n\n        this.updateViewport(_newControllerState3, null, {\n          isDragging: false,\n          isRotating: false\n        });\n      }\n\n      return true;\n    }\n  }, {\n    key: \"_onPinchStart\",\n    value: function _onPinchStart(event) {\n      var pos = this.getCenter(event);\n\n      if (!this.isPointInBounds(pos, event)) {\n        return false;\n      }\n\n      var newControllerState = this.controllerState.zoomStart({\n        pos: pos\n      }).rotateStart({\n        pos: pos\n      });\n      this._startPinchRotation = event.rotation;\n      this._lastPinchEvent = event;\n      this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n        isDragging: true\n      });\n      return true;\n    }\n  }, {\n    key: \"_onPinch\",\n    value: function _onPinch(event) {\n      if (!this.touchZoom && !this.touchRotate) {\n        return false;\n      }\n\n      if (!this.isDragging()) {\n        return false;\n      }\n\n      var newControllerState = this.controllerState;\n\n      if (this.touchZoom) {\n        var scale = event.scale;\n        var pos = this.getCenter(event);\n        newControllerState = newControllerState.zoom({\n          pos: pos,\n          scale: scale\n        });\n      }\n\n      if (this.touchRotate) {\n        var rotation = event.rotation;\n        newControllerState = newControllerState.rotate({\n          deltaAngleX: this._startPinchRotation - rotation\n        });\n      }\n\n      this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n        isDragging: true,\n        isPanning: this.touchZoom,\n        isZooming: this.touchZoom,\n        isRotating: this.touchRotate\n      });\n      this._lastPinchEvent = event;\n      return true;\n    }\n  }, {\n    key: \"_onPinchEnd\",\n    value: function _onPinchEnd(event) {\n      if (!this.isDragging()) {\n        return false;\n      }\n\n      var inertia = this.inertia,\n          _lastPinchEvent = this._lastPinchEvent;\n\n      if (this.touchZoom && inertia && _lastPinchEvent && event.scale !== _lastPinchEvent.scale) {\n        var pos = this.getCenter(event);\n        var newControllerState = this.controllerState.rotateEnd();\n        var z = Math.log2(event.scale);\n\n        var velocityZ = (z - Math.log2(_lastPinchEvent.scale)) / (event.deltaTime - _lastPinchEvent.deltaTime);\n\n        var endScale = Math.pow(2, z + velocityZ * inertia / 2);\n        newControllerState = newControllerState.zoom({\n          pos: pos,\n          scale: endScale\n        }).zoomEnd();\n        this.updateViewport(newControllerState, _objectSpread(_objectSpread({}, this._getTransitionProps({\n          around: pos\n        })), {}, {\n          transitionDuration: inertia,\n          transitionEasing: INERTIA_EASING\n        }), {\n          isDragging: false,\n          isPanning: this.touchZoom,\n          isZooming: this.touchZoom,\n          isRotating: false\n        });\n        this.blockEvents(inertia);\n      } else {\n        var _newControllerState4 = this.controllerState.zoomEnd().rotateEnd();\n\n        this.updateViewport(_newControllerState4, null, {\n          isDragging: false,\n          isPanning: false,\n          isZooming: false,\n          isRotating: false\n        });\n      }\n\n      this._startPinchRotation = null;\n      this._lastPinchEvent = null;\n      return true;\n    }\n  }, {\n    key: \"_onDoubleTap\",\n    value: function _onDoubleTap(event) {\n      if (!this.doubleClickZoom) {\n        return false;\n      }\n\n      var pos = this.getCenter(event);\n\n      if (!this.isPointInBounds(pos, event)) {\n        return false;\n      }\n\n      var isZoomOut = this.isFunctionKeyPressed(event);\n      var newControllerState = this.controllerState.zoom({\n        pos: pos,\n        scale: isZoomOut ? 0.5 : 2\n      });\n      this.updateViewport(newControllerState, this._getTransitionProps({\n        around: pos\n      }), {\n        isZooming: true,\n        isPanning: true\n      });\n      this.blockEvents(100);\n      return true;\n    }\n  }, {\n    key: \"_onKeyDown\",\n    value: function _onKeyDown(event) {\n      if (!this.keyboard) {\n        return false;\n      }\n\n      var funcKey = this.isFunctionKeyPressed(event);\n      var _this$keyboard = this.keyboard,\n          zoomSpeed = _this$keyboard.zoomSpeed,\n          moveSpeed = _this$keyboard.moveSpeed,\n          rotateSpeedX = _this$keyboard.rotateSpeedX,\n          rotateSpeedY = _this$keyboard.rotateSpeedY;\n      var controllerState = this.controllerState;\n      var newControllerState;\n      var interactionState = {};\n\n      switch (event.srcEvent.code) {\n        case 'Minus':\n          newControllerState = funcKey ? controllerState.zoomOut(zoomSpeed).zoomOut(zoomSpeed) : controllerState.zoomOut(zoomSpeed);\n          interactionState.isZooming = true;\n          break;\n\n        case 'Equal':\n          newControllerState = funcKey ? controllerState.zoomIn(zoomSpeed).zoomIn(zoomSpeed) : controllerState.zoomIn(zoomSpeed);\n          interactionState.isZooming = true;\n          break;\n\n        case 'ArrowLeft':\n          if (funcKey) {\n            newControllerState = controllerState.rotateLeft(rotateSpeedX);\n            interactionState.isRotating = true;\n          } else {\n            newControllerState = controllerState.moveLeft(moveSpeed);\n            interactionState.isPanning = true;\n          }\n\n          break;\n\n        case 'ArrowRight':\n          if (funcKey) {\n            newControllerState = controllerState.rotateRight(rotateSpeedX);\n            interactionState.isRotating = true;\n          } else {\n            newControllerState = controllerState.moveRight(moveSpeed);\n            interactionState.isPanning = true;\n          }\n\n          break;\n\n        case 'ArrowUp':\n          if (funcKey) {\n            newControllerState = controllerState.rotateUp(rotateSpeedY);\n            interactionState.isRotating = true;\n          } else {\n            newControllerState = controllerState.moveUp(moveSpeed);\n            interactionState.isPanning = true;\n          }\n\n          break;\n\n        case 'ArrowDown':\n          if (funcKey) {\n            newControllerState = controllerState.rotateDown(rotateSpeedY);\n            interactionState.isRotating = true;\n          } else {\n            newControllerState = controllerState.moveDown(moveSpeed);\n            interactionState.isPanning = true;\n          }\n\n          break;\n\n        default:\n          return false;\n      }\n\n      this.updateViewport(newControllerState, this._getTransitionProps(), interactionState);\n      return true;\n    }\n  }, {\n    key: \"_getTransitionProps\",\n    value: function _getTransitionProps() {\n      return NO_TRANSITION_PROPS;\n    }\n  }, {\n    key: \"events\",\n    set: function set(customEvents) {\n      this.toggleEvents(this._customEvents, false);\n      this.toggleEvents(customEvents, true);\n      this._customEvents = customEvents;\n      this.setProps(this.controllerStateProps);\n    }\n  }]);\n\n  return Controller;\n}();\n\nexport { Controller as default };\n//# sourceMappingURL=controller.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport assert from '../utils/assert';\n\nvar ViewState = function () {\n  function ViewState(opts) {\n    _classCallCheck(this, ViewState);\n\n    assert(Number.isFinite(opts.width), '`width` must be supplied');\n    assert(Number.isFinite(opts.height), '`height` must be supplied');\n    this._viewportProps = this._applyConstraints(opts);\n  }\n\n  _createClass(ViewState, [{\n    key: \"getViewportProps\",\n    value: function getViewportProps() {\n      return this._viewportProps;\n    }\n  }, {\n    key: \"getState\",\n    value: function getState() {\n      return this._state;\n    }\n  }, {\n    key: \"shortestPathFrom\",\n    value: function shortestPathFrom(viewState) {\n      return this._viewportProps;\n    }\n  }, {\n    key: \"_applyConstraints\",\n    value: function _applyConstraints(props) {\n      return props;\n    }\n  }]);\n\n  return ViewState;\n}();\n\nexport { ViewState as default };\n//# sourceMappingURL=view-state.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { equals } from 'math.gl';\nimport assert from '../utils/assert';\n\nvar TransitionInterpolator = function () {\n  function TransitionInterpolator() {\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, TransitionInterpolator);\n\n    if (Array.isArray(opts)) {\n      opts = {\n        compare: opts,\n        extract: opts,\n        required: opts\n      };\n    }\n\n    var _opts = opts,\n        compare = _opts.compare,\n        extract = _opts.extract,\n        required = _opts.required;\n    this._propsToCompare = compare;\n    this._propsToExtract = extract;\n    this._requiredProps = required;\n  }\n\n  _createClass(TransitionInterpolator, [{\n    key: \"arePropsEqual\",\n    value: function arePropsEqual(currentProps, nextProps) {\n      var _iterator = _createForOfIteratorHelper(this._propsToCompare || Object.keys(nextProps)),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var key = _step.value;\n\n          if (!(key in currentProps) || !(key in nextProps) || !equals(currentProps[key], nextProps[key])) {\n            return false;\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return true;\n    }\n  }, {\n    key: \"initializeProps\",\n    value: function initializeProps(startProps, endProps) {\n      var result;\n\n      if (this._propsToExtract) {\n        var startViewStateProps = {};\n        var endViewStateProps = {};\n\n        var _iterator2 = _createForOfIteratorHelper(this._propsToExtract),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var key = _step2.value;\n            startViewStateProps[key] = startProps[key];\n            endViewStateProps[key] = endProps[key];\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n\n        result = {\n          start: startViewStateProps,\n          end: endViewStateProps\n        };\n      } else {\n        result = {\n          start: startProps,\n          end: endProps\n        };\n      }\n\n      this._checkRequiredProps(result.start);\n\n      this._checkRequiredProps(result.end);\n\n      return result;\n    }\n  }, {\n    key: \"interpolateProps\",\n    value: function interpolateProps(startProps, endProps, t) {\n      return endProps;\n    }\n  }, {\n    key: \"getDuration\",\n    value: function getDuration(startProps, endProps) {\n      return endProps.transitionDuration;\n    }\n  }, {\n    key: \"_checkRequiredProps\",\n    value: function _checkRequiredProps(props) {\n      if (!this._requiredProps) {\n        return;\n      }\n\n      this._requiredProps.forEach(function (propName) {\n        var value = props[propName];\n        assert(Number.isFinite(value) || Array.isArray(value), \"\".concat(propName, \" is required for transition\"));\n      });\n    }\n  }]);\n\n  return TransitionInterpolator;\n}();\n\nexport { TransitionInterpolator as default };\n//# sourceMappingURL=transition-interpolator.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport TransitionInterpolator from './transition-interpolator';\nimport { lerp } from 'math.gl';\nvar DEFAULT_PROPS = ['longitude', 'latitude', 'zoom', 'bearing', 'pitch'];\nvar DEFAULT_REQUIRED_PROPS = ['longitude', 'latitude', 'zoom'];\n\nvar LinearInterpolator = function (_TransitionInterpolat) {\n  _inherits(LinearInterpolator, _TransitionInterpolat);\n\n  var _super = _createSuper(LinearInterpolator);\n\n  function LinearInterpolator() {\n    var _this;\n\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, LinearInterpolator);\n\n    var transitionProps = Array.isArray(opts) ? opts : opts.transitionProps;\n    _this = _super.call(this, transitionProps || {\n      compare: DEFAULT_PROPS,\n      extract: DEFAULT_PROPS,\n      required: DEFAULT_REQUIRED_PROPS\n    });\n    _this.opts = opts;\n    return _this;\n  }\n\n  _createClass(LinearInterpolator, [{\n    key: \"initializeProps\",\n    value: function initializeProps(startProps, endProps) {\n      var result = _get(_getPrototypeOf(LinearInterpolator.prototype), \"initializeProps\", this).call(this, startProps, endProps);\n\n      var _this$opts = this.opts,\n          makeViewport = _this$opts.makeViewport,\n          around = _this$opts.around;\n\n      if (makeViewport && around) {\n        var startViewport = makeViewport(startProps);\n        var endViewport = makeViewport(endProps);\n        var aroundLngLat = startViewport.unproject(around);\n        result.start.around = around;\n        Object.assign(result.end, {\n          around: endViewport.project(aroundLngLat),\n          aroundLngLat: aroundLngLat,\n          width: endProps.width,\n          height: endProps.height\n        });\n      }\n\n      return result;\n    }\n  }, {\n    key: \"interpolateProps\",\n    value: function interpolateProps(startProps, endProps, t) {\n      var propsInTransition = {};\n\n      var _iterator = _createForOfIteratorHelper(this._propsToExtract),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var key = _step.value;\n          propsInTransition[key] = lerp(startProps[key] || 0, endProps[key] || 0, t);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      if (endProps.aroundLngLat) {\n        var viewport = this.opts.makeViewport(_objectSpread(_objectSpread({}, endProps), propsInTransition));\n\n        var _viewport$getMapCente = viewport.getMapCenterByLngLatPosition({\n          lngLat: endProps.aroundLngLat,\n          pos: lerp(startProps.around, endProps.around, t)\n        }),\n            _viewport$getMapCente2 = _slicedToArray(_viewport$getMapCente, 2),\n            longitude = _viewport$getMapCente2[0],\n            latitude = _viewport$getMapCente2[1];\n\n        propsInTransition.longitude = longitude;\n        propsInTransition.latitude = latitude;\n      }\n\n      return propsInTransition;\n    }\n  }]);\n\n  return LinearInterpolator;\n}(TransitionInterpolator);\n\nexport { LinearInterpolator as default };\n//# sourceMappingURL=linear-interpolator.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { clamp } from 'math.gl';\nimport Controller from './controller';\nimport ViewState from './view-state';\nimport { normalizeViewportProps } from '@math.gl/web-mercator';\nimport assert from '../utils/assert';\nimport LinearInterpolator from '../transitions/linear-interpolator';\nimport { TRANSITION_EVENTS } from './transition-manager';\nvar PITCH_MOUSE_THRESHOLD = 5;\nvar PITCH_ACCEL = 1.2;\nvar LINEAR_TRANSITION_PROPS = {\n  transitionDuration: 300,\n  transitionEasing: function transitionEasing(t) {\n    return t;\n  },\n  transitionInterpolator: new LinearInterpolator(),\n  transitionInterruption: TRANSITION_EVENTS.BREAK\n};\nvar DEFAULT_STATE = {\n  pitch: 0,\n  bearing: 0,\n  altitude: 1.5,\n  minZoom: 0,\n  maxZoom: 20,\n  minPitch: 0,\n  maxPitch: 60\n};\nexport var MapState = function (_ViewState) {\n  _inherits(MapState, _ViewState);\n\n  var _super = _createSuper(MapState);\n\n  function MapState() {\n    var _this;\n\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        makeViewport = _ref.makeViewport,\n        width = _ref.width,\n        height = _ref.height,\n        latitude = _ref.latitude,\n        longitude = _ref.longitude,\n        zoom = _ref.zoom,\n        _ref$bearing = _ref.bearing,\n        bearing = _ref$bearing === void 0 ? DEFAULT_STATE.bearing : _ref$bearing,\n        _ref$pitch = _ref.pitch,\n        pitch = _ref$pitch === void 0 ? DEFAULT_STATE.pitch : _ref$pitch,\n        _ref$altitude = _ref.altitude,\n        altitude = _ref$altitude === void 0 ? DEFAULT_STATE.altitude : _ref$altitude,\n        _ref$maxZoom = _ref.maxZoom,\n        maxZoom = _ref$maxZoom === void 0 ? DEFAULT_STATE.maxZoom : _ref$maxZoom,\n        _ref$minZoom = _ref.minZoom,\n        minZoom = _ref$minZoom === void 0 ? DEFAULT_STATE.minZoom : _ref$minZoom,\n        _ref$maxPitch = _ref.maxPitch,\n        maxPitch = _ref$maxPitch === void 0 ? DEFAULT_STATE.maxPitch : _ref$maxPitch,\n        _ref$minPitch = _ref.minPitch,\n        minPitch = _ref$minPitch === void 0 ? DEFAULT_STATE.minPitch : _ref$minPitch,\n        startPanLngLat = _ref.startPanLngLat,\n        startZoomLngLat = _ref.startZoomLngLat,\n        startRotatePos = _ref.startRotatePos,\n        startBearing = _ref.startBearing,\n        startPitch = _ref.startPitch,\n        startZoom = _ref.startZoom;\n\n    _classCallCheck(this, MapState);\n\n    assert(Number.isFinite(longitude), '`longitude` must be supplied');\n    assert(Number.isFinite(latitude), '`latitude` must be supplied');\n    assert(Number.isFinite(zoom), '`zoom` must be supplied');\n    _this = _super.call(this, {\n      width: width,\n      height: height,\n      latitude: latitude,\n      longitude: longitude,\n      zoom: zoom,\n      bearing: bearing,\n      pitch: pitch,\n      altitude: altitude,\n      maxZoom: maxZoom,\n      minZoom: minZoom,\n      maxPitch: maxPitch,\n      minPitch: minPitch\n    });\n    _this._state = {\n      startPanLngLat: startPanLngLat,\n      startZoomLngLat: startZoomLngLat,\n      startRotatePos: startRotatePos,\n      startBearing: startBearing,\n      startPitch: startPitch,\n      startZoom: startZoom\n    };\n    _this.makeViewport = makeViewport;\n    return _this;\n  }\n\n  _createClass(MapState, [{\n    key: \"panStart\",\n    value: function panStart(_ref2) {\n      var pos = _ref2.pos;\n      return this._getUpdatedState({\n        startPanLngLat: this._unproject(pos)\n      });\n    }\n  }, {\n    key: \"pan\",\n    value: function pan(_ref3) {\n      var pos = _ref3.pos,\n          startPos = _ref3.startPos;\n\n      var startPanLngLat = this._state.startPanLngLat || this._unproject(startPos);\n\n      if (!startPanLngLat) {\n        return this;\n      }\n\n      var _this$_calculateNewLn = this._calculateNewLngLat({\n        startPanLngLat: startPanLngLat,\n        pos: pos\n      }),\n          _this$_calculateNewLn2 = _slicedToArray(_this$_calculateNewLn, 2),\n          longitude = _this$_calculateNewLn2[0],\n          latitude = _this$_calculateNewLn2[1];\n\n      return this._getUpdatedState({\n        longitude: longitude,\n        latitude: latitude\n      });\n    }\n  }, {\n    key: \"panEnd\",\n    value: function panEnd() {\n      return this._getUpdatedState({\n        startPanLngLat: null\n      });\n    }\n  }, {\n    key: \"rotateStart\",\n    value: function rotateStart(_ref4) {\n      var pos = _ref4.pos;\n      return this._getUpdatedState({\n        startRotatePos: pos,\n        startBearing: this._viewportProps.bearing,\n        startPitch: this._viewportProps.pitch\n      });\n    }\n  }, {\n    key: \"rotate\",\n    value: function rotate(_ref5) {\n      var pos = _ref5.pos,\n          _ref5$deltaAngleX = _ref5.deltaAngleX,\n          deltaAngleX = _ref5$deltaAngleX === void 0 ? 0 : _ref5$deltaAngleX,\n          _ref5$deltaAngleY = _ref5.deltaAngleY,\n          deltaAngleY = _ref5$deltaAngleY === void 0 ? 0 : _ref5$deltaAngleY;\n      var _this$_state = this._state,\n          startRotatePos = _this$_state.startRotatePos,\n          startBearing = _this$_state.startBearing,\n          startPitch = _this$_state.startPitch;\n\n      if (!startRotatePos || !Number.isFinite(startBearing) || !Number.isFinite(startPitch)) {\n        return this;\n      }\n\n      var newRotation;\n\n      if (pos) {\n        newRotation = this._calculateNewPitchAndBearing(_objectSpread(_objectSpread({}, this._getRotationParams(pos, startRotatePos)), {}, {\n          startBearing: startBearing,\n          startPitch: startPitch\n        }));\n      } else {\n        newRotation = {\n          bearing: startBearing + deltaAngleX,\n          pitch: startPitch + deltaAngleY\n        };\n      }\n\n      return this._getUpdatedState(newRotation);\n    }\n  }, {\n    key: \"rotateEnd\",\n    value: function rotateEnd() {\n      return this._getUpdatedState({\n        startBearing: null,\n        startPitch: null\n      });\n    }\n  }, {\n    key: \"zoomStart\",\n    value: function zoomStart(_ref6) {\n      var pos = _ref6.pos;\n      return this._getUpdatedState({\n        startZoomLngLat: this._unproject(pos),\n        startZoom: this._viewportProps.zoom\n      });\n    }\n  }, {\n    key: \"zoom\",\n    value: function zoom(_ref7) {\n      var pos = _ref7.pos,\n          startPos = _ref7.startPos,\n          scale = _ref7.scale;\n      var _this$_state2 = this._state,\n          startZoom = _this$_state2.startZoom,\n          startZoomLngLat = _this$_state2.startZoomLngLat;\n\n      if (!Number.isFinite(startZoom)) {\n        startZoom = this._viewportProps.zoom;\n        startZoomLngLat = this._unproject(startPos) || this._unproject(pos);\n      }\n\n      var zoom = this._calculateNewZoom({\n        scale: scale,\n        startZoom: startZoom\n      });\n\n      var zoomedViewport = this.makeViewport(_objectSpread(_objectSpread({}, this._viewportProps), {}, {\n        zoom: zoom\n      }));\n\n      var _zoomedViewport$getMa = zoomedViewport.getMapCenterByLngLatPosition({\n        lngLat: startZoomLngLat,\n        pos: pos\n      }),\n          _zoomedViewport$getMa2 = _slicedToArray(_zoomedViewport$getMa, 2),\n          longitude = _zoomedViewport$getMa2[0],\n          latitude = _zoomedViewport$getMa2[1];\n\n      return this._getUpdatedState({\n        zoom: zoom,\n        longitude: longitude,\n        latitude: latitude\n      });\n    }\n  }, {\n    key: \"zoomEnd\",\n    value: function zoomEnd() {\n      return this._getUpdatedState({\n        startZoomLngLat: null,\n        startZoom: null\n      });\n    }\n  }, {\n    key: \"zoomIn\",\n    value: function zoomIn() {\n      var speed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 2;\n      return this._zoomFromCenter(speed);\n    }\n  }, {\n    key: \"zoomOut\",\n    value: function zoomOut() {\n      var speed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 2;\n      return this._zoomFromCenter(1 / speed);\n    }\n  }, {\n    key: \"moveLeft\",\n    value: function moveLeft() {\n      var speed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 100;\n      return this._panFromCenter([speed, 0]);\n    }\n  }, {\n    key: \"moveRight\",\n    value: function moveRight() {\n      var speed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 100;\n      return this._panFromCenter([-speed, 0]);\n    }\n  }, {\n    key: \"moveUp\",\n    value: function moveUp() {\n      var speed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 100;\n      return this._panFromCenter([0, speed]);\n    }\n  }, {\n    key: \"moveDown\",\n    value: function moveDown() {\n      var speed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 100;\n      return this._panFromCenter([0, -speed]);\n    }\n  }, {\n    key: \"rotateLeft\",\n    value: function rotateLeft() {\n      var speed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 15;\n      return this._getUpdatedState({\n        bearing: this._viewportProps.bearing - speed\n      });\n    }\n  }, {\n    key: \"rotateRight\",\n    value: function rotateRight() {\n      var speed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 15;\n      return this._getUpdatedState({\n        bearing: this._viewportProps.bearing + speed\n      });\n    }\n  }, {\n    key: \"rotateUp\",\n    value: function rotateUp() {\n      var speed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 10;\n      return this._getUpdatedState({\n        pitch: this._viewportProps.pitch + speed\n      });\n    }\n  }, {\n    key: \"rotateDown\",\n    value: function rotateDown() {\n      var speed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 10;\n      return this._getUpdatedState({\n        pitch: this._viewportProps.pitch - speed\n      });\n    }\n  }, {\n    key: \"shortestPathFrom\",\n    value: function shortestPathFrom(viewState) {\n      var fromProps = viewState.getViewportProps();\n      var props = Object.assign({}, this._viewportProps);\n      var bearing = props.bearing,\n          longitude = props.longitude;\n\n      if (Math.abs(bearing - fromProps.bearing) > 180) {\n        props.bearing = bearing < 0 ? bearing + 360 : bearing - 360;\n      }\n\n      if (Math.abs(longitude - fromProps.longitude) > 180) {\n        props.longitude = longitude < 0 ? longitude + 360 : longitude - 360;\n      }\n\n      return props;\n    }\n  }, {\n    key: \"_zoomFromCenter\",\n    value: function _zoomFromCenter(scale) {\n      var _this$_viewportProps = this._viewportProps,\n          width = _this$_viewportProps.width,\n          height = _this$_viewportProps.height;\n      return this.zoom({\n        pos: [width / 2, height / 2],\n        scale: scale\n      });\n    }\n  }, {\n    key: \"_panFromCenter\",\n    value: function _panFromCenter(offset) {\n      var _this$_viewportProps2 = this._viewportProps,\n          width = _this$_viewportProps2.width,\n          height = _this$_viewportProps2.height;\n      return this.pan({\n        startPos: [width / 2, height / 2],\n        pos: [width / 2 + offset[0], height / 2 + offset[1]]\n      });\n    }\n  }, {\n    key: \"_getUpdatedState\",\n    value: function _getUpdatedState(newProps) {\n      return new this.constructor(_objectSpread(_objectSpread(_objectSpread({\n        makeViewport: this.makeViewport\n      }, this._viewportProps), this._state), newProps));\n    }\n  }, {\n    key: \"_applyConstraints\",\n    value: function _applyConstraints(props) {\n      var maxZoom = props.maxZoom,\n          minZoom = props.minZoom,\n          zoom = props.zoom;\n      props.zoom = clamp(zoom, minZoom, maxZoom);\n      var maxPitch = props.maxPitch,\n          minPitch = props.minPitch,\n          pitch = props.pitch;\n      props.pitch = clamp(pitch, minPitch, maxPitch);\n      Object.assign(props, normalizeViewportProps(props));\n      return props;\n    }\n  }, {\n    key: \"_unproject\",\n    value: function _unproject(pos) {\n      var viewport = this.makeViewport(this._viewportProps);\n      return pos && viewport.unproject(pos);\n    }\n  }, {\n    key: \"_calculateNewLngLat\",\n    value: function _calculateNewLngLat(_ref8) {\n      var startPanLngLat = _ref8.startPanLngLat,\n          pos = _ref8.pos;\n      var viewport = this.makeViewport(this._viewportProps);\n      return viewport.getMapCenterByLngLatPosition({\n        lngLat: startPanLngLat,\n        pos: pos\n      });\n    }\n  }, {\n    key: \"_calculateNewZoom\",\n    value: function _calculateNewZoom(_ref9) {\n      var scale = _ref9.scale,\n          startZoom = _ref9.startZoom;\n      var _this$_viewportProps3 = this._viewportProps,\n          maxZoom = _this$_viewportProps3.maxZoom,\n          minZoom = _this$_viewportProps3.minZoom;\n      var zoom = startZoom + Math.log2(scale);\n      return clamp(zoom, minZoom, maxZoom);\n    }\n  }, {\n    key: \"_calculateNewPitchAndBearing\",\n    value: function _calculateNewPitchAndBearing(_ref10) {\n      var deltaScaleX = _ref10.deltaScaleX,\n          deltaScaleY = _ref10.deltaScaleY,\n          startBearing = _ref10.startBearing,\n          startPitch = _ref10.startPitch;\n      deltaScaleY = clamp(deltaScaleY, -1, 1);\n      var _this$_viewportProps4 = this._viewportProps,\n          minPitch = _this$_viewportProps4.minPitch,\n          maxPitch = _this$_viewportProps4.maxPitch;\n      var bearing = startBearing + 180 * deltaScaleX;\n      var pitch = startPitch;\n\n      if (deltaScaleY > 0) {\n        pitch = startPitch + deltaScaleY * (maxPitch - startPitch);\n      } else if (deltaScaleY < 0) {\n        pitch = startPitch - deltaScaleY * (minPitch - startPitch);\n      }\n\n      return {\n        pitch: pitch,\n        bearing: bearing\n      };\n    }\n  }, {\n    key: \"_getRotationParams\",\n    value: function _getRotationParams(pos, startPos) {\n      var deltaX = pos[0] - startPos[0];\n      var deltaY = pos[1] - startPos[1];\n      var centerY = pos[1];\n      var startY = startPos[1];\n      var _this$_viewportProps5 = this._viewportProps,\n          width = _this$_viewportProps5.width,\n          height = _this$_viewportProps5.height;\n      var deltaScaleX = deltaX / width;\n      var deltaScaleY = 0;\n\n      if (deltaY > 0) {\n        if (Math.abs(height - startY) > PITCH_MOUSE_THRESHOLD) {\n          deltaScaleY = deltaY / (startY - height) * PITCH_ACCEL;\n        }\n      } else if (deltaY < 0) {\n        if (startY > PITCH_MOUSE_THRESHOLD) {\n          deltaScaleY = 1 - centerY / startY;\n        }\n      }\n\n      deltaScaleY = Math.min(1, Math.max(-1, deltaScaleY));\n      return {\n        deltaScaleX: deltaScaleX,\n        deltaScaleY: deltaScaleY\n      };\n    }\n  }]);\n\n  return MapState;\n}(ViewState);\n\nvar MapController = function (_Controller) {\n  _inherits(MapController, _Controller);\n\n  var _super2 = _createSuper(MapController);\n\n  function MapController(props) {\n    _classCallCheck(this, MapController);\n\n    props.dragMode = props.dragMode || 'pan';\n    return _super2.call(this, MapState, props);\n  }\n\n  _createClass(MapController, [{\n    key: \"_getTransitionProps\",\n    value: function _getTransitionProps(opts) {\n      return opts ? _objectSpread(_objectSpread({}, LINEAR_TRANSITION_PROPS), {}, {\n        transitionInterpolator: new LinearInterpolator(_objectSpread(_objectSpread({}, opts), {}, {\n          makeViewport: this.controllerState.makeViewport\n        }))\n      }) : LINEAR_TRANSITION_PROPS;\n    }\n  }]);\n\n  return MapController;\n}(Controller);\n\nexport { MapController as default };\n//# sourceMappingURL=map-controller.js.map","import WebMercatorViewport from './web-mercator-viewport';\nimport { mod } from './math-utils';\nvar MAX_LATITUDE = 85.05113;\nvar MIN_LATITUDE = -85.05113;\nexport default function normalizeViewportProps(_ref) {\n  var width = _ref.width,\n      height = _ref.height,\n      longitude = _ref.longitude,\n      latitude = _ref.latitude,\n      zoom = _ref.zoom,\n      _ref$pitch = _ref.pitch,\n      pitch = _ref$pitch === void 0 ? 0 : _ref$pitch,\n      _ref$bearing = _ref.bearing,\n      bearing = _ref$bearing === void 0 ? 0 : _ref$bearing;\n\n  if (longitude < -180 || longitude > 180) {\n    longitude = mod(longitude + 180, 360) - 180;\n  }\n\n  if (bearing < -180 || bearing > 180) {\n    bearing = mod(bearing + 180, 360) - 180;\n  }\n\n  var flatViewport = new WebMercatorViewport({\n    width: width,\n    height: height,\n    longitude: longitude,\n    latitude: latitude,\n    zoom: zoom\n  });\n  var topY = flatViewport.project([longitude, MAX_LATITUDE])[1];\n  var bottomY = flatViewport.project([longitude, MIN_LATITUDE])[1];\n  var shiftY = 0;\n\n  if (bottomY - topY < height) {\n    zoom += Math.log2(height / (bottomY - topY));\n    flatViewport = new WebMercatorViewport({\n      width: width,\n      height: height,\n      longitude: longitude,\n      latitude: latitude,\n      zoom: zoom\n    });\n    topY = flatViewport.project([longitude, MAX_LATITUDE])[1];\n    bottomY = flatViewport.project([longitude, MIN_LATITUDE])[1];\n  }\n\n  if (topY > 0) {\n    shiftY = topY;\n  } else if (bottomY < height) {\n    shiftY = bottomY - height;\n  }\n\n  if (shiftY) {\n    latitude = flatViewport.unproject([width / 2, height / 2 + shiftY])[1];\n  }\n\n  return {\n    width: width,\n    height: height,\n    longitude: longitude,\n    latitude: latitude,\n    zoom: zoom,\n    pitch: pitch,\n    bearing: bearing\n  };\n}\n//# sourceMappingURL=normalize-viewport-props.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport View from './view';\nimport WebMercatorViewport from '../viewports/web-mercator-viewport';\nimport MapController from '../controllers/map-controller';\n\nvar MapView = function (_View) {\n  _inherits(MapView, _View);\n\n  var _super = _createSuper(MapView);\n\n  function MapView(props) {\n    _classCallCheck(this, MapView);\n\n    return _super.call(this, Object.assign({}, props, {\n      type: WebMercatorViewport\n    }));\n  }\n\n  _createClass(MapView, [{\n    key: \"controller\",\n    get: function get() {\n      return this._getControllerProps({\n        type: MapController\n      });\n    }\n  }]);\n\n  return MapView;\n}(View);\n\nexport { MapView as default };\nMapView.displayName = 'MapView';\n//# sourceMappingURL=map-view.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nvar DEFAULT_LIGHT_COLOR = [255, 255, 255];\nvar DEFAULT_LIGHT_INTENSITY = 1.0;\nvar idCount = 0;\nexport var AmbientLight = function AmbientLight() {\n  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  _classCallCheck(this, AmbientLight);\n\n  var _props$color = props.color,\n      color = _props$color === void 0 ? DEFAULT_LIGHT_COLOR : _props$color;\n  var _props$intensity = props.intensity,\n      intensity = _props$intensity === void 0 ? DEFAULT_LIGHT_INTENSITY : _props$intensity;\n  this.id = props.id || \"ambient-\".concat(idCount++);\n  this.color = color;\n  this.intensity = intensity;\n  this.type = 'ambient';\n};\n//# sourceMappingURL=ambient-light.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { Vector3 } from 'math.gl';\nvar DEFAULT_LIGHT_COLOR = [255, 255, 255];\nvar DEFAULT_LIGHT_INTENSITY = 1.0;\nvar DEFAULT_LIGHT_DIRECTION = [0.0, 0.0, -1.0];\nvar idCount = 0;\nexport var DirectionalLight = function () {\n  function DirectionalLight() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, DirectionalLight);\n\n    var _props$color = props.color,\n        color = _props$color === void 0 ? DEFAULT_LIGHT_COLOR : _props$color;\n    var _props$intensity = props.intensity,\n        intensity = _props$intensity === void 0 ? DEFAULT_LIGHT_INTENSITY : _props$intensity;\n    var _props$direction = props.direction,\n        direction = _props$direction === void 0 ? DEFAULT_LIGHT_DIRECTION : _props$direction;\n\n    var _props$_shadow = props._shadow,\n        _shadow = _props$_shadow === void 0 ? false : _props$_shadow;\n\n    this.id = props.id || \"directional-\".concat(idCount++);\n    this.color = color;\n    this.intensity = intensity;\n    this.type = 'directional';\n    this.direction = new Vector3(direction).normalize().toArray();\n    this.shadow = _shadow;\n  }\n\n  _createClass(DirectionalLight, [{\n    key: \"getProjectedLight\",\n    value: function getProjectedLight() {\n      return this;\n    }\n  }]);\n\n  return DirectionalLight;\n}();\n//# sourceMappingURL=directional-light.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nvar Effect = function () {\n  function Effect() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Effect);\n\n    var _props$id = props.id,\n        id = _props$id === void 0 ? 'effect' : _props$id;\n    this.id = id;\n    this.props = {};\n    Object.assign(this.props, props);\n  }\n\n  _createClass(Effect, [{\n    key: \"preRender\",\n    value: function preRender() {}\n  }, {\n    key: \"getModuleParameters\",\n    value: function getModuleParameters() {}\n  }, {\n    key: \"cleanup\",\n    value: function cleanup() {}\n  }]);\n\n  return Effect;\n}();\n\nexport { Effect as default };\n//# sourceMappingURL=effect.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport Pass from './pass';\nimport { clear, setParameters, withParameters, cssToDeviceRatio } from '@luma.gl/core';\nimport log from '../utils/log';\n\nvar LayersPass = function (_Pass) {\n  _inherits(LayersPass, _Pass);\n\n  var _super = _createSuper(LayersPass);\n\n  function LayersPass() {\n    _classCallCheck(this, LayersPass);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(LayersPass, [{\n    key: \"render\",\n    value: function render(props) {\n      var gl = this.gl;\n      setParameters(gl, {\n        framebuffer: props.target\n      });\n      return this._drawLayers(props);\n    }\n  }, {\n    key: \"_drawLayers\",\n    value: function _drawLayers(props) {\n      var viewports = props.viewports,\n          views = props.views,\n          onViewportActive = props.onViewportActive,\n          _props$clearCanvas = props.clearCanvas,\n          clearCanvas = _props$clearCanvas === void 0 ? true : _props$clearCanvas;\n      var gl = this.gl;\n\n      if (clearCanvas) {\n        clearGLCanvas(gl);\n      }\n\n      var renderStats = [];\n\n      var _iterator = _createForOfIteratorHelper(viewports),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var viewportOrDescriptor = _step.value;\n          var viewport = viewportOrDescriptor.viewport || viewportOrDescriptor;\n          var view = views && views[viewport.id];\n          onViewportActive(viewport);\n\n          var drawLayerParams = this._getDrawLayerParams(viewport, props);\n\n          props.view = view;\n          var subViewports = viewport.subViewports || [viewport];\n\n          var _iterator2 = _createForOfIteratorHelper(subViewports),\n              _step2;\n\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var subViewport = _step2.value;\n              props.viewport = subViewport;\n\n              var stats = this._drawLayersInViewport(gl, props, drawLayerParams);\n\n              renderStats.push(stats);\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return renderStats;\n    }\n  }, {\n    key: \"_getDrawLayerParams\",\n    value: function _getDrawLayerParams(viewport, _ref) {\n      var layers = _ref.layers,\n          _ref$pass = _ref.pass,\n          pass = _ref$pass === void 0 ? 'unknown' : _ref$pass,\n          layerFilter = _ref.layerFilter,\n          effects = _ref.effects,\n          moduleParameters = _ref.moduleParameters;\n      var drawLayerParams = [];\n      var indexResolver = layerIndexResolver();\n\n      for (var layerIndex = 0; layerIndex < layers.length; layerIndex++) {\n        var layer = layers[layerIndex];\n\n        var shouldDrawLayer = this._shouldDrawLayer(layer, viewport, pass, layerFilter);\n\n        var layerRenderIndex = indexResolver(layer, shouldDrawLayer);\n        var layerParam = {\n          shouldDrawLayer: shouldDrawLayer,\n          layerRenderIndex: layerRenderIndex\n        };\n\n        if (shouldDrawLayer) {\n          layerParam.moduleParameters = this._getModuleParameters(layer, effects, pass, moduleParameters);\n          layerParam.layerParameters = this.getLayerParameters(layer, layerIndex);\n        }\n\n        drawLayerParams[layerIndex] = layerParam;\n      }\n\n      return drawLayerParams;\n    }\n  }, {\n    key: \"_drawLayersInViewport\",\n    value: function _drawLayersInViewport(gl, _ref2, drawLayerParams) {\n      var layers = _ref2.layers,\n          onError = _ref2.onError,\n          viewport = _ref2.viewport,\n          view = _ref2.view;\n      var glViewport = getGLViewport(gl, {\n        viewport: viewport\n      });\n\n      if (view && view.props.clear) {\n        var clearOpts = view.props.clear === true ? {\n          color: true,\n          depth: true\n        } : view.props.clear;\n        withParameters(gl, {\n          scissorTest: true,\n          scissor: glViewport\n        }, function () {\n          return clear(gl, clearOpts);\n        });\n      }\n\n      var renderStatus = {\n        totalCount: layers.length,\n        visibleCount: 0,\n        compositeCount: 0,\n        pickableCount: 0\n      };\n      setParameters(gl, {\n        viewport: glViewport\n      });\n\n      for (var layerIndex = 0; layerIndex < layers.length; layerIndex++) {\n        var layer = layers[layerIndex];\n        var _drawLayerParams$laye = drawLayerParams[layerIndex],\n            shouldDrawLayer = _drawLayerParams$laye.shouldDrawLayer,\n            layerRenderIndex = _drawLayerParams$laye.layerRenderIndex,\n            moduleParameters = _drawLayerParams$laye.moduleParameters,\n            layerParameters = _drawLayerParams$laye.layerParameters;\n\n        if (shouldDrawLayer && layer.props.pickable) {\n          renderStatus.pickableCount++;\n        }\n\n        if (layer.isComposite) {\n          renderStatus.compositeCount++;\n        } else if (shouldDrawLayer) {\n          renderStatus.visibleCount++;\n          moduleParameters.viewport = viewport;\n\n          try {\n            layer.drawLayer({\n              moduleParameters: moduleParameters,\n              uniforms: {\n                layerIndex: layerRenderIndex\n              },\n              parameters: layerParameters\n            });\n          } catch (err) {\n            if (onError) {\n              onError(err, layer);\n            } else {\n              log.error(\"error during drawing of \".concat(layer), err)();\n            }\n          }\n        }\n      }\n\n      return renderStatus;\n    }\n  }, {\n    key: \"shouldDrawLayer\",\n    value: function shouldDrawLayer(layer) {\n      return true;\n    }\n  }, {\n    key: \"getModuleParameters\",\n    value: function getModuleParameters(layer, effects) {\n      return null;\n    }\n  }, {\n    key: \"getLayerParameters\",\n    value: function getLayerParameters(layer, layerIndex) {\n      return layer.props.parameters;\n    }\n  }, {\n    key: \"_shouldDrawLayer\",\n    value: function _shouldDrawLayer(layer, viewport, pass, layerFilter) {\n      var shouldDrawLayer = this.shouldDrawLayer(layer) && layer.props.visible;\n\n      if (shouldDrawLayer && layerFilter) {\n        shouldDrawLayer = layerFilter({\n          layer: layer,\n          viewport: viewport,\n          isPicking: pass.startsWith('picking'),\n          renderPass: pass\n        });\n      }\n\n      if (shouldDrawLayer) {\n        layer.activateViewport(viewport);\n      }\n\n      return shouldDrawLayer;\n    }\n  }, {\n    key: \"_getModuleParameters\",\n    value: function _getModuleParameters(layer, effects, pass, overrides) {\n      var moduleParameters = Object.assign(Object.create(layer.props), {\n        autoWrapLongitude: layer.wrapLongitude,\n        viewport: layer.context.viewport,\n        mousePosition: layer.context.mousePosition,\n        pickingActive: 0,\n        devicePixelRatio: cssToDeviceRatio(this.gl)\n      });\n\n      if (effects) {\n        var _iterator3 = _createForOfIteratorHelper(effects),\n            _step3;\n\n        try {\n          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n            var effect = _step3.value;\n            Object.assign(moduleParameters, effect.getModuleParameters(layer));\n          }\n        } catch (err) {\n          _iterator3.e(err);\n        } finally {\n          _iterator3.f();\n        }\n      }\n\n      return Object.assign(moduleParameters, this.getModuleParameters(layer, effects), overrides);\n    }\n  }]);\n\n  return LayersPass;\n}(Pass);\n\nexport { LayersPass as default };\nexport function layerIndexResolver() {\n  var startIndex = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var layerIndices = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var resolvers = {};\n\n  var resolveLayerIndex = function resolveLayerIndex(layer, isDrawn) {\n    var indexOverride = layer.props._offset;\n    var layerId = layer.id;\n    var parentId = layer.parent && layer.parent.id;\n    var index;\n\n    if (parentId && !(parentId in layerIndices)) {\n      resolveLayerIndex(layer.parent, false);\n    }\n\n    if (parentId in resolvers) {\n      var resolver = resolvers[parentId] = resolvers[parentId] || layerIndexResolver(layerIndices[parentId], layerIndices);\n      index = resolver(layer, isDrawn);\n      resolvers[layerId] = resolver;\n    } else if (Number.isFinite(indexOverride)) {\n      index = indexOverride + (layerIndices[parentId] || 0);\n      resolvers[layerId] = null;\n    } else {\n      index = startIndex;\n    }\n\n    if (isDrawn && index >= startIndex) {\n      startIndex = index + 1;\n    }\n\n    layerIndices[layerId] = index;\n    return index;\n  };\n\n  return resolveLayerIndex;\n}\n\nfunction getGLViewport(gl, _ref3) {\n  var viewport = _ref3.viewport;\n  var height = gl.canvas ? gl.canvas.clientHeight || gl.canvas.height : 100;\n  var dimensions = viewport;\n  var pixelRatio = cssToDeviceRatio(gl);\n  return [dimensions.x * pixelRatio, (height - dimensions.y - dimensions.height) * pixelRatio, dimensions.width * pixelRatio, dimensions.height * pixelRatio];\n}\n\nfunction clearGLCanvas(gl) {\n  var width = gl.drawingBufferWidth;\n  var height = gl.drawingBufferHeight;\n  setParameters(gl, {\n    viewport: [0, 0, width, height]\n  });\n  gl.clear(16384 | 256);\n}\n//# sourceMappingURL=layers-pass.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nvar Pass = function () {\n  function Pass(gl) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Pass);\n\n    var _props$id = props.id,\n        id = _props$id === void 0 ? 'pass' : _props$id;\n    this.id = id;\n    this.gl = gl;\n    this.props = {};\n    Object.assign(this.props, props);\n  }\n\n  _createClass(Pass, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      Object.assign(this.props, props);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {}\n  }, {\n    key: \"cleanup\",\n    value: function cleanup() {}\n  }]);\n\n  return Pass;\n}();\n\nexport { Pass as default };\n//# sourceMappingURL=pass.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { default as LayersPass } from './layers-pass';\nimport { Framebuffer, Texture2D, Renderbuffer, withParameters, cssToDeviceRatio } from '@luma.gl/core';\n\nvar ShadowPass = function (_LayersPass) {\n  _inherits(ShadowPass, _LayersPass);\n\n  var _super = _createSuper(ShadowPass);\n\n  function ShadowPass(gl, props) {\n    var _parameters, _attachments;\n\n    var _this;\n\n    _classCallCheck(this, ShadowPass);\n\n    _this = _super.call(this, gl, props);\n    _this.shadowMap = new Texture2D(gl, {\n      width: 1,\n      height: 1,\n      parameters: (_parameters = {}, _defineProperty(_parameters, 10241, 9729), _defineProperty(_parameters, 10240, 9729), _defineProperty(_parameters, 10242, 33071), _defineProperty(_parameters, 10243, 33071), _parameters)\n    });\n    _this.depthBuffer = new Renderbuffer(gl, {\n      format: 33189,\n      width: 1,\n      height: 1\n    });\n    _this.fbo = new Framebuffer(gl, {\n      id: 'shadowmap',\n      width: 1,\n      height: 1,\n      attachments: (_attachments = {}, _defineProperty(_attachments, 36064, _this.shadowMap), _defineProperty(_attachments, 36096, _this.depthBuffer), _attachments)\n    });\n    return _this;\n  }\n\n  _createClass(ShadowPass, [{\n    key: \"render\",\n    value: function render(params) {\n      var _this2 = this;\n\n      var target = this.fbo;\n      withParameters(this.gl, {\n        depthRange: [0, 1],\n        depthTest: true,\n        blend: false,\n        clearColor: [1, 1, 1, 1]\n      }, function () {\n        var viewport = params.viewports[0];\n        var pixelRatio = cssToDeviceRatio(_this2.gl);\n        var width = viewport.width * pixelRatio;\n        var height = viewport.height * pixelRatio;\n\n        if (width !== target.width || height !== target.height) {\n          target.resize({\n            width: width,\n            height: height\n          });\n        }\n\n        _get(_getPrototypeOf(ShadowPass.prototype), \"render\", _this2).call(_this2, _objectSpread(_objectSpread({}, params), {}, {\n          target: target,\n          pass: 'shadow'\n        }));\n      });\n    }\n  }, {\n    key: \"shouldDrawLayer\",\n    value: function shouldDrawLayer(layer) {\n      return layer.props.shadowEnabled !== false;\n    }\n  }, {\n    key: \"getModuleParameters\",\n    value: function getModuleParameters() {\n      return {\n        drawToShadowMap: true\n      };\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      if (this.fbo) {\n        this.fbo[\"delete\"]();\n        this.fbo = null;\n      }\n\n      if (this.shadowMap) {\n        this.shadowMap[\"delete\"]();\n        this.shadowMap = null;\n      }\n\n      if (this.depthBuffer) {\n        this.depthBuffer[\"delete\"]();\n        this.depthBuffer = null;\n      }\n    }\n  }]);\n\n  return ShadowPass;\n}(LayersPass);\n\nexport { ShadowPass as default };\n//# sourceMappingURL=shadow-pass.js.map","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { COORDINATE_SYSTEM, PROJECTION_MODE } from '../../lib/constants';\nimport project from '../project/project';\nimport { Vector3, Matrix4 } from 'math.gl';\nimport memoize from '../../utils/memoize';\nimport { pixelsToWorld } from '@math.gl/web-mercator';\nvar vs = \"\\nconst int max_lights = 2;\\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\\nuniform vec4 shadow_uProjectCenters[max_lights];\\nuniform bool shadow_uDrawShadowMap;\\nuniform bool shadow_uUseShadowMap;\\nuniform int shadow_uLightId;\\nuniform float shadow_uLightCount;\\n\\nvarying vec3 shadow_vPosition[max_lights];\\n\\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\\n  if (shadow_uDrawShadowMap) {\\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\\n  }\\n  if (shadow_uUseShadowMap) {\\n    for (int i = 0; i < max_lights; i++) {\\n      if(i < int(shadow_uLightCount)) {\\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\\n      }\\n    }\\n  }\\n  return gl_Position;\\n}\\n\";\nvar fs = \"\\nconst int max_lights = 2;\\nuniform bool shadow_uDrawShadowMap;\\nuniform bool shadow_uUseShadowMap;\\nuniform sampler2D shadow_uShadowMap0;\\nuniform sampler2D shadow_uShadowMap1;\\nuniform vec4 shadow_uColor;\\nuniform float shadow_uLightCount;\\n\\nvarying vec3 shadow_vPosition[max_lights];\\n\\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\\n\\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\\n\\n  float z = dot(rgbaDepth, bitUnpackShift);\\n  return smoothstep(0.001, 0.01, position.z - z);\\n}\\n\\nvec4 shadow_filterShadowColor(vec4 color) {\\n  if (shadow_uDrawShadowMap) {\\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\\n    return rgbaDepth;\\n  }\\n  if (shadow_uUseShadowMap) {\\n    float shadowAlpha = 0.0;\\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\\n    if(shadow_uLightCount > 1.0) {\\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\\n    }\\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\\n\\n    return vec4(\\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\\n      blendedAlpha\\n    );\\n  }\\n  return color;\\n}\\n\";\nvar getMemoizedViewportCenterPosition = memoize(getViewportCenterPosition);\nvar getMemoizedViewProjectionMatrices = memoize(getViewProjectionMatrices);\nvar DEFAULT_SHADOW_COLOR = [0, 0, 0, 1.0];\nvar VECTOR_TO_POINT_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0];\n\nfunction screenToCommonSpace(xyz, pixelUnprojectionMatrix) {\n  var _xyz = _slicedToArray(xyz, 3),\n      x = _xyz[0],\n      y = _xyz[1],\n      z = _xyz[2];\n\n  var coord = pixelsToWorld([x, y, z], pixelUnprojectionMatrix);\n\n  if (Number.isFinite(z)) {\n    return coord;\n  }\n\n  return [coord[0], coord[1], 0];\n}\n\nfunction getViewportCenterPosition(_ref) {\n  var viewport = _ref.viewport,\n      center = _ref.center;\n  return new Matrix4(viewport.viewProjectionMatrix).invert().transform(center);\n}\n\nfunction getViewProjectionMatrices(_ref2) {\n  var viewport = _ref2.viewport,\n      shadowMatrices = _ref2.shadowMatrices;\n  var projectionMatrices = [];\n  var pixelUnprojectionMatrix = viewport.pixelUnprojectionMatrix;\n  var farZ = viewport.isGeospatial ? undefined : 1;\n  var corners = [[0, 0, farZ], [viewport.width, 0, farZ], [0, viewport.height, farZ], [viewport.width, viewport.height, farZ], [0, 0, -1], [viewport.width, 0, -1], [0, viewport.height, -1], [viewport.width, viewport.height, -1]].map(function (pixel) {\n    return screenToCommonSpace(pixel, pixelUnprojectionMatrix);\n  });\n\n  var _iterator = _createForOfIteratorHelper(shadowMatrices),\n      _step;\n\n  try {\n    var _loop = function _loop() {\n      var shadowMatrix = _step.value;\n      var viewMatrix = shadowMatrix.clone().translate(new Vector3(viewport.center).negate());\n      var positions = corners.map(function (corner) {\n        return viewMatrix.transform(corner);\n      });\n      var projectionMatrix = new Matrix4().ortho({\n        left: Math.min.apply(Math, _toConsumableArray(positions.map(function (position) {\n          return position[0];\n        }))),\n        right: Math.max.apply(Math, _toConsumableArray(positions.map(function (position) {\n          return position[0];\n        }))),\n        bottom: Math.min.apply(Math, _toConsumableArray(positions.map(function (position) {\n          return position[1];\n        }))),\n        top: Math.max.apply(Math, _toConsumableArray(positions.map(function (position) {\n          return position[1];\n        }))),\n        near: Math.min.apply(Math, _toConsumableArray(positions.map(function (position) {\n          return -position[2];\n        }))),\n        far: Math.max.apply(Math, _toConsumableArray(positions.map(function (position) {\n          return -position[2];\n        })))\n      });\n      projectionMatrices.push(projectionMatrix.multiplyRight(shadowMatrix));\n    };\n\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      _loop();\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return projectionMatrices;\n}\n\nfunction createShadowUniforms() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var uniforms = {\n    shadow_uDrawShadowMap: Boolean(opts.drawToShadowMap),\n    shadow_uUseShadowMap: opts.shadowMaps ? opts.shadowMaps.length > 0 : false,\n    shadow_uColor: opts.shadowColor || DEFAULT_SHADOW_COLOR,\n    shadow_uLightId: opts.shadowLightId || 0,\n    shadow_uLightCount: opts.shadowMatrices.length\n  };\n  var center = getMemoizedViewportCenterPosition({\n    viewport: opts.viewport,\n    center: context.project_uCenter\n  });\n  var projectCenters = [];\n  var viewProjectionMatrices = getMemoizedViewProjectionMatrices({\n    shadowMatrices: opts.shadowMatrices,\n    viewport: opts.viewport\n  }).slice();\n\n  for (var i = 0; i < opts.shadowMatrices.length; i++) {\n    var viewProjectionMatrix = viewProjectionMatrices[i];\n    var viewProjectionMatrixCentered = viewProjectionMatrix.clone().translate(new Vector3(opts.viewport.center).negate());\n\n    if (context.project_uCoordinateSystem === COORDINATE_SYSTEM.LNGLAT && context.project_uProjectionMode === PROJECTION_MODE.WEB_MERCATOR) {\n      viewProjectionMatrices[i] = viewProjectionMatrixCentered;\n      projectCenters[i] = center;\n    } else {\n      viewProjectionMatrices[i] = viewProjectionMatrix.clone().multiplyRight(VECTOR_TO_POINT_MATRIX);\n      projectCenters[i] = viewProjectionMatrixCentered.transform(center);\n    }\n  }\n\n  for (var _i = 0; _i < viewProjectionMatrices.length; _i++) {\n    uniforms[\"shadow_uViewProjectionMatrices[\".concat(_i, \"]\")] = viewProjectionMatrices[_i];\n    uniforms[\"shadow_uProjectCenters[\".concat(_i, \"]\")] = projectCenters[_i];\n\n    if (opts.shadowMaps && opts.shadowMaps.length > 0) {\n      uniforms[\"shadow_uShadowMap\".concat(_i)] = opts.shadowMaps[_i];\n    } else {\n      uniforms[\"shadow_uShadowMap\".concat(_i)] = opts.dummyShadowMap;\n    }\n  }\n\n  return uniforms;\n}\n\nexport default {\n  name: 'shadow',\n  dependencies: [project],\n  vs: vs,\n  fs: fs,\n  inject: {\n    'vs:DECKGL_FILTER_GL_POSITION': \"\\n    position = shadow_setVertexPosition(geometry.position);\\n    \",\n    'fs:DECKGL_FILTER_COLOR': \"\\n    color = shadow_filterShadowColor(color);\\n    \"\n  },\n  getUniforms: function getUniforms() {\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    if (opts.drawToShadowMap || opts.shadowMaps && opts.shadowMaps.length > 0) {\n      var shadowUniforms = {};\n      var _opts$shadowEnabled = opts.shadowEnabled,\n          shadowEnabled = _opts$shadowEnabled === void 0 ? true : _opts$shadowEnabled;\n\n      if (shadowEnabled && opts.shadowMatrices && opts.shadowMatrices.length > 0) {\n        Object.assign(shadowUniforms, createShadowUniforms(opts, context));\n      } else {\n        Object.assign(shadowUniforms, {\n          shadow_uDrawShadowMap: false,\n          shadow_uUseShadowMap: false\n        });\n      }\n\n      return shadowUniforms;\n    }\n\n    return {};\n  }\n};\n//# sourceMappingURL=shadow.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { Texture2D, ProgramManager } from '@luma.gl/core';\nimport { AmbientLight } from './ambient-light';\nimport { DirectionalLight } from './directional-light';\nimport Effect from '../../lib/effect';\nimport { Matrix4, Vector3 } from 'math.gl';\nimport ShadowPass from '../../passes/shadow-pass';\nimport { default as shadow } from '../../shaderlib/shadow/shadow';\nvar DEFAULT_AMBIENT_LIGHT_PROPS = {\n  color: [255, 255, 255],\n  intensity: 1.0\n};\nvar DEFAULT_DIRECTIONAL_LIGHT_PROPS = [{\n  color: [255, 255, 255],\n  intensity: 1.0,\n  direction: [-1, 3, -1]\n}, {\n  color: [255, 255, 255],\n  intensity: 0.9,\n  direction: [1, -8, -2.5]\n}];\nvar DEFAULT_SHADOW_COLOR = [0, 0, 0, 200 / 255];\n\nvar LightingEffect = function (_Effect) {\n  _inherits(LightingEffect, _Effect);\n\n  var _super = _createSuper(LightingEffect);\n\n  function LightingEffect(props) {\n    var _this;\n\n    _classCallCheck(this, LightingEffect);\n\n    _this = _super.call(this, props);\n    _this.ambientLight = null;\n    _this.directionalLights = [];\n    _this.pointLights = [];\n    _this.shadowColor = DEFAULT_SHADOW_COLOR;\n    _this.shadowPasses = [];\n    _this.shadowMaps = [];\n    _this.dummyShadowMap = null;\n    _this.shadow = false;\n    _this.programManager = null;\n\n    for (var key in props) {\n      var lightSource = props[key];\n\n      switch (lightSource.type) {\n        case 'ambient':\n          _this.ambientLight = lightSource;\n          break;\n\n        case 'directional':\n          _this.directionalLights.push(lightSource);\n\n          break;\n\n        case 'point':\n          _this.pointLights.push(lightSource);\n\n          break;\n\n        default:\n      }\n    }\n\n    _this._applyDefaultLights();\n\n    _this.shadow = _this.directionalLights.some(function (light) {\n      return light.shadow;\n    });\n    return _this;\n  }\n\n  _createClass(LightingEffect, [{\n    key: \"preRender\",\n    value: function preRender(gl, _ref) {\n      var layers = _ref.layers,\n          layerFilter = _ref.layerFilter,\n          viewports = _ref.viewports,\n          onViewportActive = _ref.onViewportActive,\n          views = _ref.views;\n      if (!this.shadow) return;\n      this.shadowMatrices = this._createLightMatrix();\n\n      if (this.shadowPasses.length === 0) {\n        this._createShadowPasses(gl);\n      }\n\n      if (!this.programManager) {\n        this.programManager = ProgramManager.getDefaultProgramManager(gl);\n\n        if (shadow) {\n          this.programManager.addDefaultModule(shadow);\n        }\n      }\n\n      if (!this.dummyShadowMap) {\n        this.dummyShadowMap = new Texture2D(gl, {\n          width: 1,\n          height: 1\n        });\n      }\n\n      for (var i = 0; i < this.shadowPasses.length; i++) {\n        var shadowPass = this.shadowPasses[i];\n        shadowPass.render({\n          layers: layers,\n          layerFilter: layerFilter,\n          viewports: viewports,\n          onViewportActive: onViewportActive,\n          views: views,\n          moduleParameters: {\n            shadowLightId: i,\n            dummyShadowMap: this.dummyShadowMap,\n            shadowMatrices: this.shadowMatrices\n          }\n        });\n      }\n    }\n  }, {\n    key: \"getModuleParameters\",\n    value: function getModuleParameters(layer) {\n      var parameters = this.shadow ? {\n        shadowMaps: this.shadowMaps,\n        dummyShadowMap: this.dummyShadowMap,\n        shadowColor: this.shadowColor,\n        shadowMatrices: this.shadowMatrices\n      } : {};\n      parameters.lightSources = {\n        ambientLight: this.ambientLight,\n        directionalLights: this.directionalLights.map(function (directionalLight) {\n          return directionalLight.getProjectedLight({\n            layer: layer\n          });\n        }),\n        pointLights: this.pointLights.map(function (pointLight) {\n          return pointLight.getProjectedLight({\n            layer: layer\n          });\n        })\n      };\n      return parameters;\n    }\n  }, {\n    key: \"cleanup\",\n    value: function cleanup() {\n      var _iterator = _createForOfIteratorHelper(this.shadowPasses),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var shadowPass = _step.value;\n          shadowPass[\"delete\"]();\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      this.shadowPasses.length = 0;\n      this.shadowMaps.length = 0;\n\n      if (this.dummyShadowMap) {\n        this.dummyShadowMap[\"delete\"]();\n        this.dummyShadowMap = null;\n      }\n\n      if (this.shadow && this.programManager) {\n        this.programManager.removeDefaultModule(shadow);\n        this.programManager = null;\n      }\n    }\n  }, {\n    key: \"_createLightMatrix\",\n    value: function _createLightMatrix() {\n      var lightMatrices = [];\n\n      var _iterator2 = _createForOfIteratorHelper(this.directionalLights),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var light = _step2.value;\n          var viewMatrix = new Matrix4().lookAt({\n            eye: new Vector3(light.direction).negate()\n          });\n          lightMatrices.push(viewMatrix);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      return lightMatrices;\n    }\n  }, {\n    key: \"_createShadowPasses\",\n    value: function _createShadowPasses(gl) {\n      for (var i = 0; i < this.directionalLights.length; i++) {\n        var shadowPass = new ShadowPass(gl);\n        this.shadowPasses[i] = shadowPass;\n        this.shadowMaps[i] = shadowPass.shadowMap;\n      }\n    }\n  }, {\n    key: \"_applyDefaultLights\",\n    value: function _applyDefaultLights() {\n      var ambientLight = this.ambientLight,\n          pointLights = this.pointLights,\n          directionalLights = this.directionalLights;\n\n      if (!ambientLight && pointLights.length === 0 && directionalLights.length === 0) {\n        this.ambientLight = new AmbientLight(DEFAULT_AMBIENT_LIGHT_PROPS);\n        this.directionalLights.push(new DirectionalLight(DEFAULT_DIRECTIONAL_LIGHT_PROPS[0]), new DirectionalLight(DEFAULT_DIRECTIONAL_LIGHT_PROPS[1]));\n      }\n    }\n  }]);\n\n  return LightingEffect;\n}(Effect);\n\nexport { LightingEffect as default };\n//# sourceMappingURL=lighting-effect.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { deepEqual } from '../utils/deep-equal';\nimport { default as LightingEffect } from '../effects/lighting/lighting-effect';\nvar DEFAULT_LIGHTING_EFFECT = new LightingEffect();\n\nvar EffectManager = function () {\n  function EffectManager() {\n    _classCallCheck(this, EffectManager);\n\n    this.effects = [];\n    this._internalEffects = [];\n    this._needsRedraw = 'Initial render';\n    this.setEffects();\n  }\n\n  _createClass(EffectManager, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('effects' in props) {\n        if (props.effects.length !== this.effects.length || !deepEqual(props.effects, this.effects)) {\n          this.setEffects(props.effects);\n          this._needsRedraw = 'effects changed';\n        }\n      }\n    }\n  }, {\n    key: \"needsRedraw\",\n    value: function needsRedraw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        clearRedrawFlags: false\n      };\n      var redraw = this._needsRedraw;\n\n      if (opts.clearRedrawFlags) {\n        this._needsRedraw = false;\n      }\n\n      return redraw;\n    }\n  }, {\n    key: \"getEffects\",\n    value: function getEffects() {\n      return this._internalEffects;\n    }\n  }, {\n    key: \"finalize\",\n    value: function finalize() {\n      this.cleanup();\n    }\n  }, {\n    key: \"setEffects\",\n    value: function setEffects() {\n      var effects = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      this.cleanup();\n      this.effects = effects;\n\n      this._createInternalEffects();\n    }\n  }, {\n    key: \"cleanup\",\n    value: function cleanup() {\n      var _iterator = _createForOfIteratorHelper(this.effects),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var effect = _step.value;\n          effect.cleanup();\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      var _iterator2 = _createForOfIteratorHelper(this._internalEffects),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var _effect = _step2.value;\n\n          _effect.cleanup();\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      this.effects.length = 0;\n      this._internalEffects.length = 0;\n    }\n  }, {\n    key: \"_createInternalEffects\",\n    value: function _createInternalEffects() {\n      this._internalEffects = this.effects.slice();\n\n      if (!this.effects.some(function (effect) {\n        return effect instanceof LightingEffect;\n      })) {\n        this._internalEffects.push(DEFAULT_LIGHTING_EFFECT);\n      }\n    }\n  }]);\n\n  return EffectManager;\n}();\n\nexport { EffectManager as default };\n//# sourceMappingURL=effect-manager.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport LayersPass from './layers-pass';\n\nvar DrawLayersPass = function (_LayersPass) {\n  _inherits(DrawLayersPass, _LayersPass);\n\n  var _super = _createSuper(DrawLayersPass);\n\n  function DrawLayersPass() {\n    _classCallCheck(this, DrawLayersPass);\n\n    return _super.apply(this, arguments);\n  }\n\n  return DrawLayersPass;\n}(LayersPass);\n\nexport { DrawLayersPass as default };\n//# sourceMappingURL=draw-layers-pass.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport LayersPass from './layers-pass';\nimport { withParameters } from '@luma.gl/core';\nvar PICKING_PARAMETERS = {\n  blendFunc: [1, 0, 32771, 0],\n  blendEquation: 32774\n};\n\nvar PickLayersPass = function (_LayersPass) {\n  _inherits(PickLayersPass, _LayersPass);\n\n  var _super = _createSuper(PickLayersPass);\n\n  function PickLayersPass() {\n    _classCallCheck(this, PickLayersPass);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(PickLayersPass, [{\n    key: \"render\",\n    value: function render(props) {\n      if (props.pickingFBO) {\n        this.useAlpha = true;\n\n        this._drawPickingBuffer(props);\n      } else {\n        this.useAlpha = false;\n\n        _get(_getPrototypeOf(PickLayersPass.prototype), \"render\", this).call(this, props);\n      }\n    }\n  }, {\n    key: \"_drawPickingBuffer\",\n    value: function _drawPickingBuffer(_ref) {\n      var _this = this;\n\n      var layers = _ref.layers,\n          layerFilter = _ref.layerFilter,\n          views = _ref.views,\n          viewports = _ref.viewports,\n          onViewportActive = _ref.onViewportActive,\n          pickingFBO = _ref.pickingFBO,\n          _ref$deviceRect = _ref.deviceRect,\n          x = _ref$deviceRect.x,\n          y = _ref$deviceRect.y,\n          width = _ref$deviceRect.width,\n          height = _ref$deviceRect.height,\n          _ref$pass = _ref.pass,\n          pass = _ref$pass === void 0 ? 'picking' : _ref$pass,\n          redrawReason = _ref.redrawReason,\n          pickZ = _ref.pickZ;\n      var gl = this.gl;\n      this.pickZ = pickZ;\n      return withParameters(gl, _objectSpread(_objectSpread({\n        scissorTest: true,\n        scissor: [x, y, width, height],\n        clearColor: [0, 0, 0, 0],\n        depthMask: true,\n        depthTest: true,\n        depthRange: [0, 1],\n        colorMask: [true, true, true, true]\n      }, PICKING_PARAMETERS), {}, {\n        blend: !pickZ\n      }), function () {\n        _get(_getPrototypeOf(PickLayersPass.prototype), \"render\", _this).call(_this, {\n          target: pickingFBO,\n          layers: layers,\n          layerFilter: layerFilter,\n          views: views,\n          viewports: viewports,\n          onViewportActive: onViewportActive,\n          pass: pass,\n          redrawReason: redrawReason\n        });\n      });\n    }\n  }, {\n    key: \"shouldDrawLayer\",\n    value: function shouldDrawLayer(layer) {\n      return layer.props.pickable;\n    }\n  }, {\n    key: \"getModuleParameters\",\n    value: function getModuleParameters() {\n      return {\n        pickingActive: 1,\n        pickingAttribute: this.pickZ,\n        lightSources: {}\n      };\n    }\n  }, {\n    key: \"getLayerParameters\",\n    value: function getLayerParameters(layer, layerIndex) {\n      var pickParameters = this.pickZ ? {\n        blend: false\n      } : _objectSpread(_objectSpread({}, PICKING_PARAMETERS), {}, {\n        blend: true,\n        blendColor: [0, 0, 0, this.useAlpha ? (layerIndex + 1) / 255 : 1]\n      });\n      return Object.assign({}, layer.props.parameters, pickParameters);\n    }\n  }]);\n\n  return PickLayersPass;\n}(LayersPass);\n\nexport { PickLayersPass as default };\n//# sourceMappingURL=pick-layers-pass.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport debug from '../debug';\nimport DrawLayersPass from '../passes/draw-layers-pass';\nimport PickLayersPass from '../passes/pick-layers-pass';\nimport { Framebuffer } from '@luma.gl/core';\nvar TRACE_RENDER_LAYERS = 'deckRenderer.renderLayers';\n\nvar DeckRenderer = function () {\n  function DeckRenderer(gl) {\n    _classCallCheck(this, DeckRenderer);\n\n    this.gl = gl;\n    this.layerFilter = null;\n    this.drawPickingColors = false;\n    this.drawLayersPass = new DrawLayersPass(gl);\n    this.pickLayersPass = new PickLayersPass(gl);\n    this.renderCount = 0;\n    this._needsRedraw = 'Initial render';\n    this.renderBuffers = [];\n    this.lastPostProcessEffect = null;\n    this._onError = null;\n  }\n\n  _createClass(DeckRenderer, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('layerFilter' in props && this.layerFilter !== props.layerFilter) {\n        this.layerFilter = props.layerFilter;\n        this._needsRedraw = 'layerFilter changed';\n      }\n\n      if ('drawPickingColors' in props && this.drawPickingColors !== props.drawPickingColors) {\n        this.drawPickingColors = props.drawPickingColors;\n        this._needsRedraw = 'drawPickingColors changed';\n      }\n\n      if ('onError' in props) {\n        this._onError = props.onError;\n      }\n    }\n  }, {\n    key: \"renderLayers\",\n    value: function renderLayers(opts) {\n      var layerPass = this.drawPickingColors ? this.pickLayersPass : this.drawLayersPass;\n      opts.layerFilter = this.layerFilter;\n      opts.onError = this._onError;\n      opts.effects = opts.effects || [];\n      opts.target = opts.target || Framebuffer.getDefaultFramebuffer(this.gl);\n\n      this._preRender(opts.effects, opts);\n\n      var outputBuffer = this.lastPostProcessEffect ? this.renderBuffers[0] : opts.target;\n      var renderStats = layerPass.render(_objectSpread(_objectSpread({}, opts), {}, {\n        target: outputBuffer\n      }));\n\n      this._postRender(opts.effects, opts);\n\n      this.renderCount++;\n      debug(TRACE_RENDER_LAYERS, this, renderStats, opts);\n    }\n  }, {\n    key: \"needsRedraw\",\n    value: function needsRedraw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        clearRedrawFlags: false\n      };\n      var redraw = this._needsRedraw;\n\n      if (opts.clearRedrawFlags) {\n        this._needsRedraw = false;\n      }\n\n      return redraw;\n    }\n  }, {\n    key: \"finalize\",\n    value: function finalize() {\n      var renderBuffers = this.renderBuffers;\n\n      var _iterator = _createForOfIteratorHelper(renderBuffers),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var buffer = _step.value;\n          buffer[\"delete\"]();\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      renderBuffers.length = 0;\n    }\n  }, {\n    key: \"_preRender\",\n    value: function _preRender(effects, opts) {\n      var lastPostProcessEffect = null;\n\n      var _iterator2 = _createForOfIteratorHelper(effects),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var effect = _step2.value;\n          effect.preRender(this.gl, opts);\n\n          if (effect.postRender) {\n            lastPostProcessEffect = effect;\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      if (lastPostProcessEffect) {\n        this._resizeRenderBuffers();\n      }\n\n      this.lastPostProcessEffect = lastPostProcessEffect;\n    }\n  }, {\n    key: \"_resizeRenderBuffers\",\n    value: function _resizeRenderBuffers() {\n      var renderBuffers = this.renderBuffers;\n\n      if (renderBuffers.length === 0) {\n        renderBuffers.push(new Framebuffer(this.gl), new Framebuffer(this.gl));\n      }\n\n      var _iterator3 = _createForOfIteratorHelper(renderBuffers),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var buffer = _step3.value;\n          buffer.resize();\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  }, {\n    key: \"_postRender\",\n    value: function _postRender(effects, opts) {\n      var renderBuffers = this.renderBuffers;\n      var params = {\n        inputBuffer: renderBuffers[0],\n        swapBuffer: renderBuffers[1],\n        target: null\n      };\n\n      var _iterator4 = _createForOfIteratorHelper(effects),\n          _step4;\n\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var effect = _step4.value;\n\n          if (effect.postRender) {\n            if (effect === this.lastPostProcessEffect) {\n              params.target = opts.target;\n              effect.postRender(this.gl, params);\n              break;\n            }\n\n            var buffer = effect.postRender(this.gl, params);\n            params.inputBuffer = buffer;\n            params.swapBuffer = buffer === renderBuffers[0] ? renderBuffers[1] : renderBuffers[0];\n          }\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n    }\n  }]);\n\n  return DeckRenderer;\n}();\n\nexport { DeckRenderer as default };\n//# sourceMappingURL=deck-renderer.js.map","import log from '../../utils/log';\nvar NO_PICKED_OBJECT = {\n  pickedColor: null,\n  pickedLayer: null,\n  pickedObjectIndex: -1\n};\nexport function getClosestObject(_ref) {\n  var pickedColors = _ref.pickedColors,\n      layers = _ref.layers,\n      deviceX = _ref.deviceX,\n      deviceY = _ref.deviceY,\n      deviceRadius = _ref.deviceRadius,\n      deviceRect = _ref.deviceRect;\n\n  if (pickedColors) {\n    var x = deviceRect.x,\n        y = deviceRect.y,\n        width = deviceRect.width,\n        height = deviceRect.height;\n    var minSquareDistanceToCenter = deviceRadius * deviceRadius;\n    var closestPixelIndex = -1;\n    var i = 0;\n\n    for (var row = 0; row < height; row++) {\n      var dy = row + y - deviceY;\n      var dy2 = dy * dy;\n\n      if (dy2 > minSquareDistanceToCenter) {\n        i += 4 * width;\n      } else {\n        for (var col = 0; col < width; col++) {\n          var pickedLayerIndex = pickedColors[i + 3] - 1;\n\n          if (pickedLayerIndex >= 0) {\n            var dx = col + x - deviceX;\n            var d2 = dx * dx + dy2;\n\n            if (d2 <= minSquareDistanceToCenter) {\n              minSquareDistanceToCenter = d2;\n              closestPixelIndex = i;\n            }\n          }\n\n          i += 4;\n        }\n      }\n    }\n\n    if (closestPixelIndex >= 0) {\n      var _pickedLayerIndex = pickedColors[closestPixelIndex + 3] - 1;\n\n      var pickedColor = pickedColors.slice(closestPixelIndex, closestPixelIndex + 4);\n      var pickedLayer = layers[_pickedLayerIndex];\n\n      if (pickedLayer) {\n        var pickedObjectIndex = pickedLayer.decodePickingColor(pickedColor);\n\n        var _dy = Math.floor(closestPixelIndex / 4 / width);\n\n        var _dx = closestPixelIndex / 4 - _dy * width;\n\n        return {\n          pickedColor: pickedColor,\n          pickedLayer: pickedLayer,\n          pickedObjectIndex: pickedObjectIndex,\n          pickedX: x + _dx,\n          pickedY: y + _dy\n        };\n      }\n\n      log.error('Picked non-existent layer. Is picking buffer corrupt?')();\n    }\n  }\n\n  return NO_PICKED_OBJECT;\n}\nexport function getUniqueObjects(_ref2) {\n  var pickedColors = _ref2.pickedColors,\n      layers = _ref2.layers;\n  var uniqueColors = new Map();\n\n  if (pickedColors) {\n    for (var i = 0; i < pickedColors.length; i += 4) {\n      var pickedLayerIndex = pickedColors[i + 3] - 1;\n\n      if (pickedLayerIndex >= 0) {\n        var pickedColor = pickedColors.slice(i, i + 4);\n        var colorKey = pickedColor.join(',');\n\n        if (!uniqueColors.has(colorKey)) {\n          var pickedLayer = layers[pickedLayerIndex];\n\n          if (pickedLayer) {\n            uniqueColors.set(colorKey, {\n              pickedColor: pickedColor,\n              pickedLayer: pickedLayer,\n              pickedObjectIndex: pickedLayer.decodePickingColor(pickedColor)\n            });\n          } else {\n            log.error('Picked non-existent layer. Is picking buffer corrupt?')();\n          }\n        }\n      }\n    }\n  }\n\n  return Array.from(uniqueColors.values());\n}\n//# sourceMappingURL=query-object.js.map","export function getEmptyPickingInfo(_ref) {\n  var pickInfo = _ref.pickInfo,\n      mode = _ref.mode,\n      viewports = _ref.viewports,\n      layerFilter = _ref.layerFilter,\n      pixelRatio = _ref.pixelRatio,\n      x = _ref.x,\n      y = _ref.y,\n      z = _ref.z;\n  var layer = pickInfo && pickInfo.pickedLayer;\n\n  var viewportFilter = layerFilter && layer && function (v) {\n    return layerFilter({\n      layer: layer,\n      viewport: v,\n      isPicking: true,\n      renderPass: \"picking:\".concat(mode)\n    });\n  };\n\n  var viewport = getViewportFromCoordinates(viewports, {\n    x: x,\n    y: y\n  }, viewportFilter);\n  var coordinate = viewport && viewport.unproject([x - viewport.x, y - viewport.y], {\n    targetZ: z\n  });\n  return {\n    color: null,\n    layer: null,\n    viewport: viewport,\n    index: -1,\n    picked: false,\n    x: x,\n    y: y,\n    pixel: [x, y],\n    coordinate: coordinate,\n    devicePixel: pickInfo && [pickInfo.pickedX, pickInfo.pickedY],\n    pixelRatio: pixelRatio\n  };\n}\nexport function processPickInfo(opts) {\n  var pickInfo = opts.pickInfo,\n      lastPickedInfo = opts.lastPickedInfo,\n      mode = opts.mode,\n      layers = opts.layers;\n  var pickedColor = pickInfo.pickedColor,\n      pickedLayer = pickInfo.pickedLayer,\n      pickedObjectIndex = pickInfo.pickedObjectIndex;\n  var affectedLayers = pickedLayer ? [pickedLayer] : [];\n\n  if (mode === 'hover') {\n    var lastPickedObjectIndex = lastPickedInfo.index;\n    var lastPickedLayerId = lastPickedInfo.layerId;\n    var pickedLayerId = pickedLayer && pickedLayer.props.id;\n\n    if (pickedLayerId !== lastPickedLayerId || pickedObjectIndex !== lastPickedObjectIndex) {\n      if (pickedLayerId !== lastPickedLayerId) {\n        var lastPickedLayer = layers.find(function (layer) {\n          return layer.props.id === lastPickedLayerId;\n        });\n\n        if (lastPickedLayer) {\n          affectedLayers.unshift(lastPickedLayer);\n        }\n      }\n\n      lastPickedInfo.layerId = pickedLayerId;\n      lastPickedInfo.index = pickedObjectIndex;\n      lastPickedInfo.info = null;\n    }\n  }\n\n  var baseInfo = getEmptyPickingInfo(opts);\n  var infos = new Map();\n  infos.set(null, baseInfo);\n  affectedLayers.forEach(function (layer) {\n    var info = Object.assign({}, baseInfo);\n\n    if (layer === pickedLayer) {\n      info.color = pickedColor;\n      info.index = pickedObjectIndex;\n      info.picked = true;\n    }\n\n    info = getLayerPickingInfo({\n      layer: layer,\n      info: info,\n      mode: mode\n    });\n\n    if (layer === pickedLayer && mode === 'hover') {\n      lastPickedInfo.info = info;\n    }\n\n    if (info) {\n      infos.set(info.layer.id, info);\n    }\n\n    if (mode === 'hover' && layer.props.autoHighlight) {\n      var pickingModuleParameters = {\n        pickingSelectedColor: pickedLayer === layer ? pickedColor : null\n      };\n      var highlightColor = layer.props.highlightColor;\n\n      if (pickedLayer === layer && typeof highlightColor === 'function') {\n        pickingModuleParameters.pickingHighlightColor = highlightColor(info);\n      }\n\n      layer.setModuleParameters(pickingModuleParameters);\n      layer.setNeedsRedraw();\n    }\n  });\n  return infos;\n}\nexport function getLayerPickingInfo(_ref2) {\n  var layer = _ref2.layer,\n      info = _ref2.info,\n      mode = _ref2.mode;\n\n  while (layer && info) {\n    var sourceLayer = info.layer || layer;\n    info.layer = layer;\n    info = layer.getPickingInfo({\n      info: info,\n      mode: mode,\n      sourceLayer: sourceLayer\n    });\n    layer = layer.parent;\n  }\n\n  return info;\n}\n\nfunction getViewportFromCoordinates(viewports, pixel, filter) {\n  for (var i = viewports.length - 1; i >= 0; i--) {\n    var viewport = viewports[i];\n\n    if (viewport.containsPixel(pixel) && (!filter || filter(viewport))) {\n      return viewport;\n    }\n  }\n\n  return viewports[0];\n}\n//# sourceMappingURL=pick-info.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { Framebuffer, Texture2D, isWebGL2, readPixelsToArray, cssToDeviceRatio, cssToDevicePixels } from '@luma.gl/core';\nimport assert from '../utils/assert';\nimport log from '../utils/log';\nimport PickLayersPass from '../passes/pick-layers-pass';\nimport { getClosestObject, getUniqueObjects } from './picking/query-object';\nimport { processPickInfo, getLayerPickingInfo, getEmptyPickingInfo } from './picking/pick-info';\n\nvar DeckPicker = function () {\n  function DeckPicker(gl) {\n    _classCallCheck(this, DeckPicker);\n\n    this.gl = gl;\n    this.pickingFBO = null;\n    this.pickLayersPass = new PickLayersPass(gl);\n    this.layerFilter = null;\n    this.lastPickedInfo = {\n      index: -1,\n      layerId: null,\n      info: null\n    };\n    this._onError = null;\n  }\n\n  _createClass(DeckPicker, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('layerFilter' in props) {\n        this.layerFilter = props.layerFilter;\n      }\n\n      if ('onError' in props) {\n        this._onError = props.onError;\n      }\n\n      if ('_pickable' in props) {\n        this._pickable = props._pickable;\n      }\n    }\n  }, {\n    key: \"finalize\",\n    value: function finalize() {\n      if (this.pickingFBO) {\n        this.pickingFBO[\"delete\"]();\n      }\n\n      if (this.depthFBO) {\n        this.depthFBO.color[\"delete\"]();\n        this.depthFBO[\"delete\"]();\n      }\n    }\n  }, {\n    key: \"pickObject\",\n    value: function pickObject(opts) {\n      return this._pickClosestObject(opts);\n    }\n  }, {\n    key: \"pickObjects\",\n    value: function pickObjects(opts) {\n      return this._pickVisibleObjects(opts);\n    }\n  }, {\n    key: \"getLastPickedObject\",\n    value: function getLastPickedObject(_ref) {\n      var x = _ref.x,\n          y = _ref.y,\n          layers = _ref.layers,\n          viewports = _ref.viewports;\n      var lastPickedInfo = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.lastPickedInfo.info;\n      var lastPickedLayerId = lastPickedInfo && lastPickedInfo.layer && lastPickedInfo.layer.id;\n      var lastPickedViewportId = lastPickedInfo && lastPickedInfo.viewport && lastPickedInfo.viewport.id;\n      var layer = lastPickedLayerId ? layers.find(function (l) {\n        return l.id === lastPickedLayerId;\n      }) : null;\n      var viewport = lastPickedViewportId && viewports.find(function (v) {\n        return v.id === lastPickedViewportId;\n      }) || viewports[0];\n      var coordinate = viewport && viewport.unproject([x - viewport.x, y - viewport.y]);\n      var info = {\n        x: x,\n        y: y,\n        viewport: viewport,\n        coordinate: coordinate,\n        layer: layer\n      };\n\n      if (layer) {\n        return Object.assign({}, lastPickedInfo, info);\n      }\n\n      return Object.assign(info, {\n        color: null,\n        object: null,\n        index: -1\n      });\n    }\n  }, {\n    key: \"_resizeBuffer\",\n    value: function _resizeBuffer() {\n      var gl = this.gl;\n\n      if (!this.pickingFBO) {\n        this.pickingFBO = new Framebuffer(gl);\n\n        if (Framebuffer.isSupported(gl, {\n          colorBufferFloat: true\n        })) {\n          this.depthFBO = new Framebuffer(gl);\n          this.depthFBO.attach(_defineProperty({}, 36064, new Texture2D(gl, {\n            format: isWebGL2(gl) ? 34836 : 6408,\n            type: 5126\n          })));\n        }\n      }\n\n      this.pickingFBO.resize({\n        width: gl.canvas.width,\n        height: gl.canvas.height\n      });\n\n      if (this.depthFBO) {\n        this.depthFBO.resize({\n          width: gl.canvas.width,\n          height: gl.canvas.height\n        });\n      }\n\n      return this.pickingFBO;\n    }\n  }, {\n    key: \"_getPickable\",\n    value: function _getPickable(layers) {\n      if (this._pickable === false) {\n        return null;\n      }\n\n      var pickableLayers = layers.filter(function (layer) {\n        return layer.isPickable() && !layer.isComposite;\n      });\n\n      if (pickableLayers.length > 255) {\n        log.warn('Too many pickable layers, only picking the first 255')();\n        return pickableLayers.slice(0, 255);\n      }\n\n      return pickableLayers.length ? pickableLayers : null;\n    }\n  }, {\n    key: \"_pickClosestObject\",\n    value: function _pickClosestObject(_ref2) {\n      var layers = _ref2.layers,\n          views = _ref2.views,\n          viewports = _ref2.viewports,\n          x = _ref2.x,\n          y = _ref2.y,\n          _ref2$radius = _ref2.radius,\n          radius = _ref2$radius === void 0 ? 0 : _ref2$radius,\n          _ref2$depth = _ref2.depth,\n          depth = _ref2$depth === void 0 ? 1 : _ref2$depth,\n          _ref2$mode = _ref2.mode,\n          mode = _ref2$mode === void 0 ? 'query' : _ref2$mode,\n          unproject3D = _ref2.unproject3D,\n          onViewportActive = _ref2.onViewportActive;\n      layers = this._getPickable(layers);\n\n      if (!layers) {\n        return {\n          result: [],\n          emptyInfo: getEmptyPickingInfo({\n            viewports: viewports,\n            x: x,\n            y: y\n          })\n        };\n      }\n\n      this._resizeBuffer();\n\n      var pixelRatio = cssToDeviceRatio(this.gl);\n      var devicePixelRange = cssToDevicePixels(this.gl, [x, y], true);\n      var devicePixel = [devicePixelRange.x + Math.floor(devicePixelRange.width / 2), devicePixelRange.y + Math.floor(devicePixelRange.height / 2)];\n      var deviceRadius = Math.round(radius * pixelRatio);\n      var _this$pickingFBO = this.pickingFBO,\n          width = _this$pickingFBO.width,\n          height = _this$pickingFBO.height;\n\n      var deviceRect = this._getPickingRect({\n        deviceX: devicePixel[0],\n        deviceY: devicePixel[1],\n        deviceRadius: deviceRadius,\n        deviceWidth: width,\n        deviceHeight: height\n      });\n\n      var infos;\n      var result = [];\n      var affectedLayers = {};\n\n      for (var i = 0; i < depth; i++) {\n        var pickedColors = deviceRect && this._drawAndSample({\n          layers: layers,\n          views: views,\n          viewports: viewports,\n          onViewportActive: onViewportActive,\n          deviceRect: deviceRect,\n          pass: \"picking:\".concat(mode),\n          redrawReason: mode\n        });\n\n        var pickInfo = getClosestObject({\n          pickedColors: pickedColors,\n          layers: layers,\n          deviceX: devicePixel[0],\n          deviceY: devicePixel[1],\n          deviceRadius: deviceRadius,\n          deviceRect: deviceRect\n        });\n        var z = void 0;\n\n        if (pickInfo.pickedLayer && unproject3D && this.depthFBO) {\n          var zValues = this._drawAndSample({\n            layers: [pickInfo.pickedLayer],\n            views: views,\n            viewports: viewports,\n            onViewportActive: onViewportActive,\n            deviceRect: {\n              x: pickInfo.pickedX,\n              y: pickInfo.pickedY,\n              width: 1,\n              height: 1\n            },\n            pass: \"picking:\".concat(mode),\n            redrawReason: 'pick-z',\n            pickZ: true\n          });\n\n          z = zValues[0] * viewports[0].distanceScales.metersPerUnit[2] + viewports[0].position[2];\n        }\n\n        if (pickInfo.pickedColor && i + 1 < depth) {\n          var layerId = pickInfo.pickedColor[3] - 1;\n          affectedLayers[layerId] = true;\n          layers[layerId].disablePickingIndex(pickInfo.pickedObjectIndex);\n        }\n\n        infos = processPickInfo({\n          pickInfo: pickInfo,\n          lastPickedInfo: this.lastPickedInfo,\n          mode: mode,\n          layers: layers,\n          layerFilter: this.layerFilter,\n          viewports: viewports,\n          x: x,\n          y: y,\n          z: z,\n          pixelRatio: pixelRatio\n        });\n\n        var _iterator = _createForOfIteratorHelper(infos.values()),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var info = _step.value;\n\n            if (info.layer) {\n              result.push(info);\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n\n        if (!pickInfo.pickedColor) {\n          break;\n        }\n      }\n\n      for (var _layerId in affectedLayers) {\n        layers[_layerId].restorePickingColors();\n      }\n\n      return {\n        result: result,\n        emptyInfo: infos && infos.get(null)\n      };\n    }\n  }, {\n    key: \"_pickVisibleObjects\",\n    value: function _pickVisibleObjects(_ref3) {\n      var layers = _ref3.layers,\n          views = _ref3.views,\n          viewports = _ref3.viewports,\n          x = _ref3.x,\n          y = _ref3.y,\n          _ref3$width = _ref3.width,\n          width = _ref3$width === void 0 ? 1 : _ref3$width,\n          _ref3$height = _ref3.height,\n          height = _ref3$height === void 0 ? 1 : _ref3$height,\n          _ref3$mode = _ref3.mode,\n          mode = _ref3$mode === void 0 ? 'query' : _ref3$mode,\n          _ref3$maxObjects = _ref3.maxObjects,\n          maxObjects = _ref3$maxObjects === void 0 ? null : _ref3$maxObjects,\n          onViewportActive = _ref3.onViewportActive;\n      layers = this._getPickable(layers);\n\n      if (!layers) {\n        return [];\n      }\n\n      this._resizeBuffer();\n\n      var pixelRatio = cssToDeviceRatio(this.gl);\n      var leftTop = cssToDevicePixels(this.gl, [x, y], true);\n      var deviceLeft = leftTop.x;\n      var deviceTop = leftTop.y + leftTop.height;\n      var rightBottom = cssToDevicePixels(this.gl, [x + width, y + height], true);\n      var deviceRight = rightBottom.x + rightBottom.width;\n      var deviceBottom = rightBottom.y;\n      var deviceRect = {\n        x: deviceLeft,\n        y: deviceBottom,\n        width: deviceRight - deviceLeft,\n        height: deviceTop - deviceBottom\n      };\n\n      var pickedColors = this._drawAndSample({\n        layers: layers,\n        views: views,\n        viewports: viewports,\n        onViewportActive: onViewportActive,\n        deviceRect: deviceRect,\n        pass: \"picking:\".concat(mode),\n        redrawReason: mode\n      });\n\n      var pickInfos = getUniqueObjects({\n        pickedColors: pickedColors,\n        layers: layers\n      });\n      var uniqueInfos = new Map();\n      var isMaxObjects = Number.isFinite(maxObjects);\n\n      for (var i = 0; i < pickInfos.length; i++) {\n        if (isMaxObjects && uniqueInfos.size >= maxObjects) {\n          break;\n        }\n\n        var pickInfo = pickInfos[i];\n        var info = {\n          color: pickInfo.pickedColor,\n          layer: null,\n          index: pickInfo.pickedObjectIndex,\n          picked: true,\n          x: x,\n          y: y,\n          width: width,\n          height: height,\n          pixelRatio: pixelRatio\n        };\n        info = getLayerPickingInfo({\n          layer: pickInfo.pickedLayer,\n          info: info,\n          mode: mode\n        });\n\n        if (!uniqueInfos.has(info.object)) {\n          uniqueInfos.set(info.object, info);\n        }\n      }\n\n      return Array.from(uniqueInfos.values());\n    }\n  }, {\n    key: \"_drawAndSample\",\n    value: function _drawAndSample(_ref4) {\n      var layers = _ref4.layers,\n          views = _ref4.views,\n          viewports = _ref4.viewports,\n          onViewportActive = _ref4.onViewportActive,\n          deviceRect = _ref4.deviceRect,\n          pass = _ref4.pass,\n          redrawReason = _ref4.redrawReason,\n          pickZ = _ref4.pickZ;\n      assert(deviceRect.width > 0 && deviceRect.height > 0);\n\n      if (layers.length < 1) {\n        return null;\n      }\n\n      var pickingFBO = pickZ ? this.depthFBO : this.pickingFBO;\n      this.pickLayersPass.render({\n        layers: layers,\n        layerFilter: this.layerFilter,\n        onError: this._onError,\n        views: views,\n        viewports: viewports,\n        onViewportActive: onViewportActive,\n        pickingFBO: pickingFBO,\n        deviceRect: deviceRect,\n        pass: pass,\n        redrawReason: redrawReason,\n        pickZ: pickZ\n      });\n      var x = deviceRect.x,\n          y = deviceRect.y,\n          width = deviceRect.width,\n          height = deviceRect.height;\n      var pickedColors = new (pickZ ? Float32Array : Uint8Array)(width * height * 4);\n      readPixelsToArray(pickingFBO, {\n        sourceX: x,\n        sourceY: y,\n        sourceWidth: width,\n        sourceHeight: height,\n        target: pickedColors\n      });\n      return pickedColors;\n    }\n  }, {\n    key: \"_getPickingRect\",\n    value: function _getPickingRect(_ref5) {\n      var deviceX = _ref5.deviceX,\n          deviceY = _ref5.deviceY,\n          deviceRadius = _ref5.deviceRadius,\n          deviceWidth = _ref5.deviceWidth,\n          deviceHeight = _ref5.deviceHeight;\n      var x = Math.max(0, deviceX - deviceRadius);\n      var y = Math.max(0, deviceY - deviceRadius);\n      var width = Math.min(deviceWidth, deviceX + deviceRadius + 1) - x;\n      var height = Math.min(deviceHeight, deviceY + deviceRadius + 1) - y;\n\n      if (width <= 0 || height <= 0) {\n        return null;\n      }\n\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      };\n    }\n  }]);\n\n  return DeckPicker;\n}();\n\nexport { DeckPicker as default };\n//# sourceMappingURL=deck-picker.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nvar defaultStyle = {\n  zIndex: 1,\n  position: 'absolute',\n  pointerEvents: 'none',\n  color: '#a0a7b4',\n  backgroundColor: '#29323c',\n  padding: '10px',\n  top: 0,\n  left: 0,\n  display: 'none'\n};\n\nvar Tooltip = function () {\n  function Tooltip(canvas) {\n    _classCallCheck(this, Tooltip);\n\n    var canvasParent = canvas.parentElement;\n\n    if (canvasParent) {\n      this.el = document.createElement('div');\n      this.el.className = 'deck-tooltip';\n      Object.assign(this.el.style, defaultStyle);\n      canvasParent.appendChild(this.el);\n    }\n  }\n\n  _createClass(Tooltip, [{\n    key: \"setTooltip\",\n    value: function setTooltip(displayInfo, x, y) {\n      var el = this.el;\n\n      if (typeof displayInfo === 'string') {\n        el.innerText = displayInfo;\n      } else if (!displayInfo) {\n        el.style.display = 'none';\n        return;\n      } else {\n        if ('text' in displayInfo) {\n          el.innerText = displayInfo.text;\n        }\n\n        if ('html' in displayInfo) {\n          el.innerHTML = displayInfo.html;\n        }\n\n        if ('className' in displayInfo) {\n          el.className = displayInfo.className;\n        }\n\n        Object.assign(el.style, displayInfo.style);\n      }\n\n      el.style.display = 'block';\n      el.style.transform = \"translate(\".concat(x, \"px, \").concat(y, \"px)\");\n    }\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      if (this.el) {\n        this.el.remove();\n      }\n    }\n  }]);\n\n  return Tooltip;\n}();\n\nexport { Tooltip as default };\n//# sourceMappingURL=tooltip.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message);\n  }\n}\n//# sourceMappingURL=assert.js.map","import { global, isBrowser } from '../utils/globals';\nvar _parseImageNode = global._parseImageNode;\nvar IMAGE_SUPPORTED = typeof Image !== 'undefined';\nvar IMAGE_BITMAP_SUPPORTED = typeof ImageBitmap !== 'undefined';\nvar NODE_IMAGE_SUPPORTED = Boolean(_parseImageNode);\nvar DATA_SUPPORTED = isBrowser ? true : NODE_IMAGE_SUPPORTED;\nexport function isImageTypeSupported(type) {\n  switch (type) {\n    case 'auto':\n      return IMAGE_BITMAP_SUPPORTED || IMAGE_SUPPORTED || DATA_SUPPORTED;\n\n    case 'imagebitmap':\n      return IMAGE_BITMAP_SUPPORTED;\n\n    case 'image':\n      return IMAGE_SUPPORTED;\n\n    case 'data':\n      return DATA_SUPPORTED;\n\n    case 'html':\n      return IMAGE_SUPPORTED;\n\n    case 'ndarray':\n      return DATA_SUPPORTED;\n\n    default:\n      throw new Error(\"@loaders.gl/images: image \".concat(type, \" not supported in this environment\"));\n  }\n}\nexport function getDefaultImageType() {\n  if (IMAGE_BITMAP_SUPPORTED) {\n    return 'imagebitmap';\n  }\n\n  if (IMAGE_SUPPORTED) {\n    return 'image';\n  }\n\n  if (DATA_SUPPORTED) {\n    return 'data';\n  }\n\n  throw new Error(\"Install '@loaders.gl/polyfills' to parse images under Node.js\");\n}\n//# sourceMappingURL=image-type.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport assert from '../utils/assert';\nexport function isImage(image) {\n  return Boolean(getImageTypeOrNull(image));\n}\nexport function deleteImage(image) {\n  switch (getImageType(image)) {\n    case 'imagebitmap':\n      image.close();\n      break;\n\n    default:\n  }\n}\nexport function getImageType(image) {\n  var format = getImageTypeOrNull(image);\n\n  if (!format) {\n    throw new Error('Not an image');\n  }\n\n  return format;\n}\nexport function getImageData(image) {\n  switch (getImageType(image)) {\n    case 'data':\n      return image;\n\n    case 'image':\n    case 'imagebitmap':\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n\n      if (context) {\n        canvas.width = image.width;\n        canvas.height = image.height;\n        context.drawImage(image, 0, 0);\n        return context.getImageData(0, 0, image.width, image.height);\n      }\n\n    default:\n      return assert(false);\n  }\n}\nexport { getImageData as getImageSize };\n\nfunction getImageTypeOrNull(image) {\n  if (typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap) {\n    return 'imagebitmap';\n  }\n\n  if (typeof Image !== 'undefined' && image instanceof Image) {\n    return 'image';\n  }\n\n  if (image && _typeof(image) === 'object' && image.data && image.width && image.height) {\n    return 'data';\n  }\n\n  return null;\n}\n//# sourceMappingURL=parsed-image-api.js.map","var SVG_DATA_URL_PATTERN = /^data:image\\/svg\\+xml/;\nvar SVG_URL_PATTERN = /\\.svg((\\?|#).*)?$/;\nexport function isSVG(url) {\n  return url && (SVG_DATA_URL_PATTERN.test(url) || SVG_URL_PATTERN.test(url));\n}\nexport function getBlobOrSVGDataUrl(arrayBuffer, url) {\n  if (isSVG(url)) {\n    var textDecoder = new TextDecoder();\n    var xmlText = textDecoder.decode(arrayBuffer);\n    var src = \"data:image/svg+xml;base64,\".concat(btoa(xmlText));\n    return src;\n  }\n\n  return getBlob(arrayBuffer, url);\n}\nexport function getBlob(arrayBuffer, url) {\n  if (isSVG(url)) {\n    throw new Error('SVG cannot be parsed directly to imagebitmap');\n  }\n\n  return new Blob([new Uint8Array(arrayBuffer)]);\n}\n//# sourceMappingURL=svg-utils.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { getBlobOrSVGDataUrl } from './svg-utils';\nexport default function parseToImage(_x, _x2, _x3) {\n  return _parseToImage.apply(this, arguments);\n}\n\nfunction _parseToImage() {\n  _parseToImage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, options, url) {\n    var blobOrDataUrl, URL, objectUrl;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            blobOrDataUrl = getBlobOrSVGDataUrl(arrayBuffer, url);\n            URL = self.URL || self.webkitURL;\n            objectUrl = typeof blobOrDataUrl !== 'string' && URL.createObjectURL(blobOrDataUrl);\n            _context.prev = 3;\n            _context.next = 6;\n            return loadToImage(objectUrl || blobOrDataUrl, options);\n\n          case 6:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 7:\n            _context.prev = 7;\n\n            if (objectUrl) {\n              URL.revokeObjectURL(objectUrl);\n            }\n\n            return _context.finish(7);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[3,, 7, 10]]);\n  }));\n  return _parseToImage.apply(this, arguments);\n}\n\nexport function loadToImage(_x4, _x5) {\n  return _loadToImage.apply(this, arguments);\n}\n\nfunction _loadToImage() {\n  _loadToImage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(url, options) {\n    var image;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            image = new Image();\n            image.src = url;\n\n            if (!(options.image && options.image.decode && image.decode)) {\n              _context2.next = 6;\n              break;\n            }\n\n            _context2.next = 5;\n            return image.decode();\n\n          case 5:\n            return _context2.abrupt(\"return\", image);\n\n          case 6:\n            _context2.next = 8;\n            return new Promise(function (resolve, reject) {\n              try {\n                image.onload = function () {\n                  return resolve(image);\n                };\n\n                image.onerror = function (err) {\n                  return reject(new Error(\"Could not load image \".concat(url, \": \").concat(err)));\n                };\n              } catch (error) {\n                reject(error);\n              }\n            });\n\n          case 8:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _loadToImage.apply(this, arguments);\n}\n//# sourceMappingURL=parse-to-image.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { isSVG, getBlob } from './svg-utils';\nimport parseToImage from './parse-to-image';\nvar EMPTY_OBJECT = {};\nvar imagebitmapOptionsSupported = true;\nexport default function parseToImageBitmap(_x, _x2, _x3) {\n  return _parseToImageBitmap.apply(this, arguments);\n}\n\nfunction _parseToImageBitmap() {\n  _parseToImageBitmap = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, options, url) {\n    var blob, image, imagebitmapOptions;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!isSVG(url)) {\n              _context.next = 7;\n              break;\n            }\n\n            _context.next = 3;\n            return parseToImage(arrayBuffer, options, url);\n\n          case 3:\n            image = _context.sent;\n            blob = image;\n            _context.next = 8;\n            break;\n\n          case 7:\n            blob = getBlob(arrayBuffer, url);\n\n          case 8:\n            imagebitmapOptions = options && options.imagebitmap;\n            _context.next = 11;\n            return safeCreateImageBitmap(blob, imagebitmapOptions);\n\n          case 11:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parseToImageBitmap.apply(this, arguments);\n}\n\nfunction safeCreateImageBitmap(_x4) {\n  return _safeCreateImageBitmap.apply(this, arguments);\n}\n\nfunction _safeCreateImageBitmap() {\n  _safeCreateImageBitmap = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(blob) {\n    var imagebitmapOptions,\n        _args2 = arguments;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            imagebitmapOptions = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : null;\n\n            if (isEmptyObject(imagebitmapOptions) || !imagebitmapOptionsSupported) {\n              imagebitmapOptions = null;\n            }\n\n            if (!imagebitmapOptions) {\n              _context2.next = 13;\n              break;\n            }\n\n            _context2.prev = 3;\n            _context2.next = 6;\n            return createImageBitmap(blob, imagebitmapOptions);\n\n          case 6:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 9:\n            _context2.prev = 9;\n            _context2.t0 = _context2[\"catch\"](3);\n            console.warn(_context2.t0);\n            imagebitmapOptionsSupported = false;\n\n          case 13:\n            _context2.next = 15;\n            return createImageBitmap(blob);\n\n          case 15:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 16:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[3, 9]]);\n  }));\n  return _safeCreateImageBitmap.apply(this, arguments);\n}\n\nfunction isEmptyObject(object) {\n  for (var key in object || EMPTY_OBJECT) {\n    return false;\n  }\n\n  return true;\n}\n//# sourceMappingURL=parse-to-image-bitmap.js.map","var BIG_ENDIAN = false;\nvar LITTLE_ENDIAN = true;\nexport function getBinaryImageMetadata(binaryData) {\n  var dataView = toDataView(binaryData);\n  return getPngMetadata(dataView) || getJpegMetadata(dataView) || getGifMetadata(dataView) || getBmpMetadata(dataView);\n}\n\nfunction getPngMetadata(binaryData) {\n  var dataView = toDataView(binaryData);\n  var isPng = dataView.byteLength >= 24 && dataView.getUint32(0, BIG_ENDIAN) === 0x89504e47;\n\n  if (!isPng) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/png',\n    width: dataView.getUint32(16, BIG_ENDIAN),\n    height: dataView.getUint32(20, BIG_ENDIAN)\n  };\n}\n\nfunction getGifMetadata(binaryData) {\n  var dataView = toDataView(binaryData);\n  var isGif = dataView.byteLength >= 10 && dataView.getUint32(0, BIG_ENDIAN) === 0x47494638;\n\n  if (!isGif) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/gif',\n    width: dataView.getUint16(6, LITTLE_ENDIAN),\n    height: dataView.getUint16(8, LITTLE_ENDIAN)\n  };\n}\n\nexport function getBmpMetadata(binaryData) {\n  var dataView = toDataView(binaryData);\n  var isBmp = dataView.byteLength >= 14 && dataView.getUint16(0, BIG_ENDIAN) === 0x424d && dataView.getUint32(2, LITTLE_ENDIAN) === dataView.byteLength;\n\n  if (!isBmp) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/bmp',\n    width: dataView.getUint32(18, LITTLE_ENDIAN),\n    height: dataView.getUint32(22, LITTLE_ENDIAN)\n  };\n}\n\nfunction getJpegMetadata(binaryData) {\n  var dataView = toDataView(binaryData);\n  var isJpeg = dataView.byteLength >= 3 && dataView.getUint16(0, BIG_ENDIAN) === 0xffd8 && dataView.getUint8(2) === 0xff;\n\n  if (!isJpeg) {\n    return null;\n  }\n\n  var _getJpegMarkers = getJpegMarkers(),\n      tableMarkers = _getJpegMarkers.tableMarkers,\n      sofMarkers = _getJpegMarkers.sofMarkers;\n\n  var i = 2;\n\n  while (i + 9 < dataView.byteLength) {\n    var marker = dataView.getUint16(i, BIG_ENDIAN);\n\n    if (sofMarkers.has(marker)) {\n      return {\n        mimeType: 'image/jpeg',\n        height: dataView.getUint16(i + 5, BIG_ENDIAN),\n        width: dataView.getUint16(i + 7, BIG_ENDIAN)\n      };\n    }\n\n    if (!tableMarkers.has(marker)) {\n      return null;\n    }\n\n    i += 2;\n    i += dataView.getUint16(i, BIG_ENDIAN);\n  }\n\n  return null;\n}\n\nfunction getJpegMarkers() {\n  var tableMarkers = new Set([0xffdb, 0xffc4, 0xffcc, 0xffdd, 0xfffe]);\n\n  for (var i = 0xffe0; i < 0xfff0; ++i) {\n    tableMarkers.add(i);\n  }\n\n  var sofMarkers = new Set([0xffc0, 0xffc1, 0xffc2, 0xffc3, 0xffc5, 0xffc6, 0xffc7, 0xffc9, 0xffca, 0xffcb, 0xffcd, 0xffce, 0xffcf, 0xffde]);\n  return {\n    tableMarkers: tableMarkers,\n    sofMarkers: sofMarkers\n  };\n}\n\nfunction toDataView(data) {\n  if (data instanceof DataView) {\n    return data;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return new DataView(data.buffer);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return new DataView(data);\n  }\n\n  throw new Error('toDataView');\n}\n//# sourceMappingURL=binary-image-api.js.map","import { global } from '../utils/globals';\nimport assert from '../utils/assert';\nimport { getBinaryImageMetadata } from '../category-api/binary-image-api';\nexport default function parseToNodeImage(arrayBuffer, options) {\n  var _ref = getBinaryImageMetadata(arrayBuffer) || {},\n      mimeType = _ref.mimeType;\n\n  var _parseImageNode = global._parseImageNode;\n  assert(_parseImageNode);\n  return _parseImageNode(arrayBuffer, mimeType, options);\n}\n//# sourceMappingURL=parse-to-node-image.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport assert from '../utils/assert';\nimport { isImageTypeSupported, getDefaultImageType } from '../category-api/image-type';\nimport { getImageData } from '../category-api/parsed-image-api';\nimport parseToImage from './parse-to-image';\nimport parseToImageBitmap from './parse-to-image-bitmap';\nimport parseToNodeImage from './parse-to-node-image';\nexport default function parseImage(_x, _x2, _x3) {\n  return _parseImage.apply(this, arguments);\n}\n\nfunction _parseImage() {\n  _parseImage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, options, context) {\n    var imageOptions, imageType, _ref, url, loadType, image;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = options || {};\n            imageOptions = options.image || {};\n            imageType = imageOptions.type || 'auto';\n            _ref = context || {}, url = _ref.url;\n            loadType = getLoadableImageType(imageType);\n            _context.t0 = loadType;\n            _context.next = _context.t0 === 'imagebitmap' ? 8 : _context.t0 === 'image' ? 12 : _context.t0 === 'data' ? 16 : 20;\n            break;\n\n          case 8:\n            _context.next = 10;\n            return parseToImageBitmap(arrayBuffer, options, url);\n\n          case 10:\n            image = _context.sent;\n            return _context.abrupt(\"break\", 21);\n\n          case 12:\n            _context.next = 14;\n            return parseToImage(arrayBuffer, options, url);\n\n          case 14:\n            image = _context.sent;\n            return _context.abrupt(\"break\", 21);\n\n          case 16:\n            _context.next = 18;\n            return parseToNodeImage(arrayBuffer, options);\n\n          case 18:\n            image = _context.sent;\n            return _context.abrupt(\"break\", 21);\n\n          case 20:\n            assert(false);\n\n          case 21:\n            if (imageType === 'data') {\n              image = getImageData(image);\n            }\n\n            return _context.abrupt(\"return\", image);\n\n          case 23:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parseImage.apply(this, arguments);\n}\n\nfunction getLoadableImageType(type) {\n  switch (type) {\n    case 'auto':\n    case 'data':\n      return getDefaultImageType();\n\n    default:\n      isImageTypeSupported(type);\n      return type;\n  }\n}\n//# sourceMappingURL=parse-image.js.map","import parseImage from './lib/parsers/parse-image';\nimport { getBinaryImageMetadata } from './lib/category-api/binary-image-api';\nvar VERSION = typeof \"2.3.13\" !== 'undefined' ? \"2.3.13\" : 'latest';\nvar EXTENSIONS = ['png', 'jpg', 'jpeg', 'gif', 'webp', 'bmp', 'ico', 'svg'];\nvar MIME_TYPES = ['image/png', 'image/jpeg', 'image/gif', 'image/webp', 'image/bmp', 'image/vnd.microsoft.icon', 'image/svg+xml'];\nvar ImageLoader = {\n  id: 'image',\n  name: 'Images',\n  version: VERSION,\n  mimeTypes: MIME_TYPES,\n  extensions: EXTENSIONS,\n  parse: parseImage,\n  tests: [function (arrayBuffer) {\n    return Boolean(getBinaryImageMetadata(new DataView(arrayBuffer)));\n  }],\n  options: {\n    image: {\n      type: 'auto',\n      decode: true\n    }\n  }\n};\nexport default ImageLoader;\n//# sourceMappingURL=image-loader.js.map","function isJSON(text) {\n  var firstChar = text[0];\n  var lastChar = text[text.length - 1];\n  return firstChar === '{' && lastChar === '}' || firstChar === '[' && lastChar === ']';\n}\n\nexport default {\n  name: 'JSON',\n  extensions: ['json', 'geojson'],\n  mimeTypes: ['application/json', 'application/geo+json'],\n  testText: isJSON,\n  parseTextSync: JSON.parse\n};\n//# sourceMappingURL=json-loader.js.map","import { registerLoaders } from '@loaders.gl/core';\nimport { ImageLoader } from '@loaders.gl/images';\nimport { global } from 'probe.gl/env';\nimport log from '../utils/log';\nimport { register } from '../debug';\nimport jsonLoader from '../utils/json-loader';\nvar version = typeof \"8.4.10\" !== 'undefined' ? \"8.4.10\" : global.DECK_VERSION || 'untranspiled source';\nvar existingVersion = global.deck && global.deck.VERSION;\n\nif (existingVersion && existingVersion !== version) {\n  throw new Error(\"deck.gl - multiple versions detected: \".concat(existingVersion, \" vs \").concat(version));\n}\n\nif (!existingVersion) {\n  if (process.env.NODE_ENV !== 'production') {\n    log.log(0, \"deck.gl \".concat(version, \" - set deck.log.level=1 (or higher) to trace attribute updates\"))();\n  }\n\n  global.deck = Object.assign(global.deck || {}, {\n    VERSION: version,\n    version: version,\n    log: log,\n    _registerLoggers: register\n  });\n  registerLoaders([jsonLoader, [ImageLoader, {\n    imagebitmap: {\n      premultiplyAlpha: 'none'\n    }\n  }]]);\n}\n\nexport default global.deck;\n//# sourceMappingURL=init.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport Resource from './resource';\nimport { FEATURES, hasFeatures } from '../features';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { assert } from '../utils';\nvar GL_QUERY_RESULT = 0x8866;\nvar GL_QUERY_RESULT_AVAILABLE = 0x8867;\nvar GL_TIME_ELAPSED_EXT = 0x88bf;\nvar GL_GPU_DISJOINT_EXT = 0x8fbb;\nvar GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN = 0x8c88;\nvar GL_ANY_SAMPLES_PASSED = 0x8c2f;\nvar GL_ANY_SAMPLES_PASSED_CONSERVATIVE = 0x8d6a;\n\nvar Query = function (_Resource) {\n  _inherits(Query, _Resource);\n\n  var _super = _createSuper(Query);\n\n  _createClass(Query, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      var webgl2 = isWebGL2(gl);\n      var hasTimerQuery = hasFeatures(gl, FEATURES.TIMER_QUERY);\n      var supported = webgl2 || hasTimerQuery;\n\n      var _iterator = _createForOfIteratorHelper(opts),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var key = _step.value;\n\n          switch (key) {\n            case 'queries':\n              supported = supported && webgl2;\n              break;\n\n            case 'timers':\n              supported = supported && hasTimerQuery;\n              break;\n\n            default:\n              assert(false);\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return supported;\n    }\n  }]);\n\n  function Query(gl) {\n    var _this;\n\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Query);\n\n    _this = _super.call(this, gl, opts);\n    _this.target = null;\n    _this._queryPending = false;\n    _this._pollingPromise = null;\n    Object.seal(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Query, [{\n    key: \"beginTimeElapsedQuery\",\n    value: function beginTimeElapsedQuery() {\n      return this.begin(GL_TIME_ELAPSED_EXT);\n    }\n  }, {\n    key: \"beginOcclusionQuery\",\n    value: function beginOcclusionQuery() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref$conservative = _ref.conservative,\n          conservative = _ref$conservative === void 0 ? false : _ref$conservative;\n\n      return this.begin(conservative ? GL_ANY_SAMPLES_PASSED_CONSERVATIVE : GL_ANY_SAMPLES_PASSED);\n    }\n  }, {\n    key: \"beginTransformFeedbackQuery\",\n    value: function beginTransformFeedbackQuery() {\n      return this.begin(GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN);\n    }\n  }, {\n    key: \"begin\",\n    value: function begin(target) {\n      if (this._queryPending) {\n        return this;\n      }\n\n      this.target = target;\n      this.gl2.beginQuery(this.target, this.handle);\n      return this;\n    }\n  }, {\n    key: \"end\",\n    value: function end() {\n      if (this._queryPending) {\n        return this;\n      }\n\n      if (this.target) {\n        this.gl2.endQuery(this.target);\n        this.target = null;\n        this._queryPending = true;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"isResultAvailable\",\n    value: function isResultAvailable() {\n      if (!this._queryPending) {\n        return false;\n      }\n\n      var resultAvailable = this.gl2.getQueryParameter(this.handle, GL_QUERY_RESULT_AVAILABLE);\n\n      if (resultAvailable) {\n        this._queryPending = false;\n      }\n\n      return resultAvailable;\n    }\n  }, {\n    key: \"isTimerDisjoint\",\n    value: function isTimerDisjoint() {\n      return this.gl2.getParameter(GL_GPU_DISJOINT_EXT);\n    }\n  }, {\n    key: \"getResult\",\n    value: function getResult() {\n      return this.gl2.getQueryParameter(this.handle, GL_QUERY_RESULT);\n    }\n  }, {\n    key: \"getTimerMilliseconds\",\n    value: function getTimerMilliseconds() {\n      return this.getResult() / 1e6;\n    }\n  }, {\n    key: \"createPoll\",\n    value: function createPoll() {\n      var _this2 = this;\n\n      var limit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Number.POSITIVE_INFINITY;\n\n      if (this._pollingPromise) {\n        return this._pollingPromise;\n      }\n\n      var counter = 0;\n      this._pollingPromise = new Promise(function (resolve, reject) {\n        var poll = function poll() {\n          if (_this2.isResultAvailable()) {\n            resolve(_this2.getResult());\n            _this2._pollingPromise = null;\n          } else if (counter++ > limit) {\n            reject('Timed out');\n            _this2._pollingPromise = null;\n          } else {\n            requestAnimationFrame(poll);\n          }\n        };\n\n        requestAnimationFrame(poll);\n      });\n      return this._pollingPromise;\n    }\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return Query.isSupported(this.gl) ? this.gl2.createQuery() : null;\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl2.deleteQuery(this.handle);\n    }\n  }]);\n\n  return Query;\n}(Resource);\n\nexport { Query as default };\n//# sourceMappingURL=query.js.map","export function requestAnimationFrame(callback) {\n  return typeof window !== 'undefined' && window.requestAnimationFrame ? window.requestAnimationFrame(callback) : setTimeout(callback, 1000 / 60);\n}\nexport function cancelAnimationFrame(timerId) {\n  return typeof window !== 'undefined' && window.cancelAnimationFrame ? window.cancelAnimationFrame(timerId) : clearTimeout(timerId);\n}\n//# sourceMappingURL=request-animation-frame.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { isWebGL, createGLContext, instrumentGLContext, resizeGLContext, resetParameters } from '@luma.gl/gltools';\nimport { requestAnimationFrame, cancelAnimationFrame, Query, lumaStats, Framebuffer, log, assert } from '@luma.gl/webgl';\nimport { isBrowser } from 'probe.gl/env';\nvar isPage = isBrowser() && typeof document !== 'undefined';\nvar statIdCounter = 0;\n\nvar AnimationLoop = function () {\n  function AnimationLoop() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, AnimationLoop);\n\n    var _props$onCreateContex = props.onCreateContext,\n        onCreateContext = _props$onCreateContex === void 0 ? function (opts) {\n      return createGLContext(opts);\n    } : _props$onCreateContex,\n        _props$onAddHTML = props.onAddHTML,\n        onAddHTML = _props$onAddHTML === void 0 ? null : _props$onAddHTML,\n        _props$onInitialize = props.onInitialize,\n        onInitialize = _props$onInitialize === void 0 ? function () {} : _props$onInitialize,\n        _props$onRender = props.onRender,\n        onRender = _props$onRender === void 0 ? function () {} : _props$onRender,\n        _props$onFinalize = props.onFinalize,\n        onFinalize = _props$onFinalize === void 0 ? function () {} : _props$onFinalize,\n        onError = props.onError,\n        _props$gl = props.gl,\n        gl = _props$gl === void 0 ? null : _props$gl,\n        _props$glOptions = props.glOptions,\n        glOptions = _props$glOptions === void 0 ? {} : _props$glOptions,\n        _props$debug = props.debug,\n        debug = _props$debug === void 0 ? false : _props$debug,\n        _props$createFramebuf = props.createFramebuffer,\n        createFramebuffer = _props$createFramebuf === void 0 ? false : _props$createFramebuf,\n        _props$autoResizeView = props.autoResizeViewport,\n        autoResizeViewport = _props$autoResizeView === void 0 ? true : _props$autoResizeView,\n        _props$autoResizeDraw = props.autoResizeDrawingBuffer,\n        autoResizeDrawingBuffer = _props$autoResizeDraw === void 0 ? true : _props$autoResizeDraw,\n        _props$stats = props.stats,\n        stats = _props$stats === void 0 ? lumaStats.get(\"animation-loop-\".concat(statIdCounter++)) : _props$stats;\n    var _props$useDevicePixel = props.useDevicePixels,\n        useDevicePixels = _props$useDevicePixel === void 0 ? true : _props$useDevicePixel;\n\n    if ('useDevicePixelRatio' in props) {\n      log.deprecated('useDevicePixelRatio', 'useDevicePixels')();\n      useDevicePixels = props.useDevicePixelRatio;\n    }\n\n    this.props = {\n      onCreateContext: onCreateContext,\n      onAddHTML: onAddHTML,\n      onInitialize: onInitialize,\n      onRender: onRender,\n      onFinalize: onFinalize,\n      onError: onError,\n      gl: gl,\n      glOptions: glOptions,\n      debug: debug,\n      createFramebuffer: createFramebuffer\n    };\n    this.gl = gl;\n    this.needsRedraw = null;\n    this.timeline = null;\n    this.stats = stats;\n    this.cpuTime = this.stats.get('CPU Time');\n    this.gpuTime = this.stats.get('GPU Time');\n    this.frameRate = this.stats.get('Frame Rate');\n    this._initialized = false;\n    this._running = false;\n    this._animationFrameId = null;\n    this._nextFramePromise = null;\n    this._resolveNextFrame = null;\n    this._cpuStartTime = 0;\n    this.setProps({\n      autoResizeViewport: autoResizeViewport,\n      autoResizeDrawingBuffer: autoResizeDrawingBuffer,\n      useDevicePixels: useDevicePixels\n    });\n    this.start = this.start.bind(this);\n    this.stop = this.stop.bind(this);\n    this._pageLoadPromise = null;\n    this._onMousemove = this._onMousemove.bind(this);\n    this._onMouseleave = this._onMouseleave.bind(this);\n  }\n\n  _createClass(AnimationLoop, [{\n    key: \"delete\",\n    value: function _delete() {\n      this.stop();\n\n      this._setDisplay(null);\n    }\n  }, {\n    key: \"setNeedsRedraw\",\n    value: function setNeedsRedraw(reason) {\n      assert(typeof reason === 'string');\n      this.needsRedraw = this.needsRedraw || reason;\n      return this;\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('autoResizeViewport' in props) {\n        this.autoResizeViewport = props.autoResizeViewport;\n      }\n\n      if ('autoResizeDrawingBuffer' in props) {\n        this.autoResizeDrawingBuffer = props.autoResizeDrawingBuffer;\n      }\n\n      if ('useDevicePixels' in props) {\n        this.useDevicePixels = props.useDevicePixels;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this = this;\n\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (this._running) {\n        return this;\n      }\n\n      this._running = true;\n\n      var startPromise = this._getPageLoadPromise().then(function () {\n        if (!_this._running || _this._initialized) {\n          return null;\n        }\n\n        _this._createWebGLContext(opts);\n\n        _this._createFramebuffer();\n\n        _this._startEventHandling();\n\n        _this._initializeCallbackData();\n\n        _this._updateCallbackData();\n\n        _this._resizeCanvasDrawingBuffer();\n\n        _this._resizeViewport();\n\n        _this._gpuTimeQuery = Query.isSupported(_this.gl, ['timers']) ? new Query(_this.gl) : null;\n        _this._initialized = true;\n        return _this.onInitialize(_this.animationProps);\n      }).then(function (appContext) {\n        if (_this._running) {\n          _this._addCallbackData(appContext || {});\n\n          if (appContext !== false) {\n            _this._startLoop();\n          }\n        }\n      });\n\n      if (this.props.onError) {\n        startPromise[\"catch\"](this.props.onError);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"redraw\",\n    value: function redraw() {\n      if (this.isContextLost()) {\n        return this;\n      }\n\n      this._beginTimers();\n\n      this._setupFrame();\n\n      this._updateCallbackData();\n\n      this._renderFrame(this.animationProps);\n\n      this._clearNeedsRedraw();\n\n      if (this.offScreen && this.gl.commit) {\n        this.gl.commit();\n      }\n\n      if (this._resolveNextFrame) {\n        this._resolveNextFrame(this);\n\n        this._nextFramePromise = null;\n        this._resolveNextFrame = null;\n      }\n\n      this._endTimers();\n\n      return this;\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      if (this._running) {\n        this._finalizeCallbackData();\n\n        cancelAnimationFrame(this._animationFrameId);\n        this._nextFramePromise = null;\n        this._resolveNextFrame = null;\n        this._animationFrameId = null;\n        this._running = false;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"attachTimeline\",\n    value: function attachTimeline(timeline) {\n      this.timeline = timeline;\n      return this.timeline;\n    }\n  }, {\n    key: \"detachTimeline\",\n    value: function detachTimeline() {\n      this.timeline = null;\n    }\n  }, {\n    key: \"waitForRender\",\n    value: function waitForRender() {\n      var _this2 = this;\n\n      this.setNeedsRedraw('waitForRender');\n\n      if (!this._nextFramePromise) {\n        this._nextFramePromise = new Promise(function (resolve) {\n          _this2._resolveNextFrame = resolve;\n        });\n      }\n\n      return this._nextFramePromise;\n    }\n  }, {\n    key: \"toDataURL\",\n    value: function () {\n      var _toDataURL = _asyncToGenerator(_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.setNeedsRedraw('toDataURL');\n                _context.next = 3;\n                return this.waitForRender();\n\n              case 3:\n                return _context.abrupt(\"return\", this.gl.canvas.toDataURL());\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function toDataURL() {\n        return _toDataURL.apply(this, arguments);\n      }\n\n      return toDataURL;\n    }()\n  }, {\n    key: \"isContextLost\",\n    value: function isContextLost() {\n      return this.gl.isContextLost();\n    }\n  }, {\n    key: \"onCreateContext\",\n    value: function onCreateContext() {\n      var _this$props;\n\n      return (_this$props = this.props).onCreateContext.apply(_this$props, arguments);\n    }\n  }, {\n    key: \"onInitialize\",\n    value: function onInitialize() {\n      var _this$props2;\n\n      return (_this$props2 = this.props).onInitialize.apply(_this$props2, arguments);\n    }\n  }, {\n    key: \"onRender\",\n    value: function onRender() {\n      var _this$props3;\n\n      return (_this$props3 = this.props).onRender.apply(_this$props3, arguments);\n    }\n  }, {\n    key: \"onFinalize\",\n    value: function onFinalize() {\n      var _this$props4;\n\n      return (_this$props4 = this.props).onFinalize.apply(_this$props4, arguments);\n    }\n  }, {\n    key: \"getHTMLControlValue\",\n    value: function getHTMLControlValue(id) {\n      var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var element = document.getElementById(id);\n      return element ? Number(element.value) : defaultValue;\n    }\n  }, {\n    key: \"setViewParameters\",\n    value: function setViewParameters() {\n      log.removed('AnimationLoop.setViewParameters', 'AnimationLoop.setProps')();\n      return this;\n    }\n  }, {\n    key: \"_startLoop\",\n    value: function _startLoop() {\n      var _this3 = this;\n\n      var renderFrame = function renderFrame() {\n        if (!_this3._running) {\n          return;\n        }\n\n        _this3.redraw();\n\n        _this3._animationFrameId = _this3._requestAnimationFrame(renderFrame);\n      };\n\n      cancelAnimationFrame(this._animationFrameId);\n      this._animationFrameId = this._requestAnimationFrame(renderFrame);\n    }\n  }, {\n    key: \"_getPageLoadPromise\",\n    value: function _getPageLoadPromise() {\n      if (!this._pageLoadPromise) {\n        this._pageLoadPromise = isPage ? new Promise(function (resolve, reject) {\n          if (isPage && document.readyState === 'complete') {\n            resolve(document);\n            return;\n          }\n\n          window.addEventListener('load', function () {\n            resolve(document);\n          });\n        }) : Promise.resolve({});\n      }\n\n      return this._pageLoadPromise;\n    }\n  }, {\n    key: \"_setDisplay\",\n    value: function _setDisplay(display) {\n      if (this.display) {\n        this.display[\"delete\"]();\n        this.display.animationLoop = null;\n      }\n\n      if (display) {\n        display.animationLoop = this;\n      }\n\n      this.display = display;\n    }\n  }, {\n    key: \"_requestAnimationFrame\",\n    value: function _requestAnimationFrame(renderFrameCallback) {\n      if (this.display && this.display.requestAnimationFrame(renderFrameCallback)) {\n        return;\n      }\n\n      requestAnimationFrame(renderFrameCallback);\n    }\n  }, {\n    key: \"_renderFrame\",\n    value: function _renderFrame() {\n      if (this.display) {\n        var _this$display;\n\n        (_this$display = this.display)._renderFrame.apply(_this$display, arguments);\n\n        return;\n      }\n\n      this.onRender.apply(this, arguments);\n    }\n  }, {\n    key: \"_clearNeedsRedraw\",\n    value: function _clearNeedsRedraw() {\n      this.needsRedraw = null;\n    }\n  }, {\n    key: \"_setupFrame\",\n    value: function _setupFrame() {\n      this._resizeCanvasDrawingBuffer();\n\n      this._resizeViewport();\n\n      this._resizeFramebuffer();\n    }\n  }, {\n    key: \"_initializeCallbackData\",\n    value: function _initializeCallbackData() {\n      this.animationProps = {\n        gl: this.gl,\n        stop: this.stop,\n        canvas: this.gl.canvas,\n        framebuffer: this.framebuffer,\n        useDevicePixels: this.useDevicePixels,\n        needsRedraw: null,\n        startTime: Date.now(),\n        engineTime: 0,\n        tick: 0,\n        tock: 0,\n        time: 0,\n        _timeline: this.timeline,\n        _loop: this,\n        _animationLoop: this,\n        _mousePosition: null\n      };\n    }\n  }, {\n    key: \"_updateCallbackData\",\n    value: function _updateCallbackData() {\n      var _this$_getSizeAndAspe = this._getSizeAndAspect(),\n          width = _this$_getSizeAndAspe.width,\n          height = _this$_getSizeAndAspe.height,\n          aspect = _this$_getSizeAndAspe.aspect;\n\n      if (width !== this.animationProps.width || height !== this.animationProps.height) {\n        this.setNeedsRedraw('drawing buffer resized');\n      }\n\n      if (aspect !== this.animationProps.aspect) {\n        this.setNeedsRedraw('drawing buffer aspect changed');\n      }\n\n      this.animationProps.width = width;\n      this.animationProps.height = height;\n      this.animationProps.aspect = aspect;\n      this.animationProps.needsRedraw = this.needsRedraw;\n      this.animationProps.engineTime = Date.now() - this.animationProps.startTime;\n\n      if (this.timeline) {\n        this.timeline.update(this.animationProps.engineTime);\n      }\n\n      this.animationProps.tick = Math.floor(this.animationProps.time / 1000 * 60);\n      this.animationProps.tock++;\n      this.animationProps.time = this.timeline ? this.timeline.getTime() : this.animationProps.engineTime;\n      this.animationProps._offScreen = this.offScreen;\n    }\n  }, {\n    key: \"_finalizeCallbackData\",\n    value: function _finalizeCallbackData() {\n      this.onFinalize(this.animationProps);\n    }\n  }, {\n    key: \"_addCallbackData\",\n    value: function _addCallbackData(appContext) {\n      if (_typeof(appContext) === 'object' && appContext !== null) {\n        this.animationProps = Object.assign({}, this.animationProps, appContext);\n      }\n    }\n  }, {\n    key: \"_createWebGLContext\",\n    value: function _createWebGLContext(opts) {\n      this.offScreen = opts.canvas && typeof OffscreenCanvas !== 'undefined' && opts.canvas instanceof OffscreenCanvas;\n      opts = Object.assign({}, opts, this.props.glOptions);\n      this.gl = this.props.gl ? instrumentGLContext(this.props.gl, opts) : this.onCreateContext(opts);\n\n      if (!isWebGL(this.gl)) {\n        throw new Error('AnimationLoop.onCreateContext - illegal context returned');\n      }\n\n      resetParameters(this.gl);\n\n      this._createInfoDiv();\n    }\n  }, {\n    key: \"_createInfoDiv\",\n    value: function _createInfoDiv() {\n      if (this.gl.canvas && this.props.onAddHTML) {\n        var wrapperDiv = document.createElement('div');\n        document.body.appendChild(wrapperDiv);\n        wrapperDiv.style.position = 'relative';\n        var div = document.createElement('div');\n        div.style.position = 'absolute';\n        div.style.left = '10px';\n        div.style.bottom = '10px';\n        div.style.width = '300px';\n        div.style.background = 'white';\n        wrapperDiv.appendChild(this.gl.canvas);\n        wrapperDiv.appendChild(div);\n        var html = this.props.onAddHTML(div);\n\n        if (html) {\n          div.innerHTML = html;\n        }\n      }\n    }\n  }, {\n    key: \"_getSizeAndAspect\",\n    value: function _getSizeAndAspect() {\n      var width = this.gl.drawingBufferWidth;\n      var height = this.gl.drawingBufferHeight;\n      var aspect = 1;\n      var canvas = this.gl.canvas;\n\n      if (canvas && canvas.clientHeight) {\n        aspect = canvas.clientWidth / canvas.clientHeight;\n      } else if (width > 0 && height > 0) {\n        aspect = width / height;\n      }\n\n      return {\n        width: width,\n        height: height,\n        aspect: aspect\n      };\n    }\n  }, {\n    key: \"_resizeViewport\",\n    value: function _resizeViewport() {\n      if (this.autoResizeViewport) {\n        this.gl.viewport(0, 0, this.gl.drawingBufferWidth, this.gl.drawingBufferHeight);\n      }\n    }\n  }, {\n    key: \"_resizeCanvasDrawingBuffer\",\n    value: function _resizeCanvasDrawingBuffer() {\n      if (this.autoResizeDrawingBuffer) {\n        resizeGLContext(this.gl, {\n          useDevicePixels: this.useDevicePixels\n        });\n      }\n    }\n  }, {\n    key: \"_createFramebuffer\",\n    value: function _createFramebuffer() {\n      if (this.props.createFramebuffer) {\n        this.framebuffer = new Framebuffer(this.gl);\n      }\n    }\n  }, {\n    key: \"_resizeFramebuffer\",\n    value: function _resizeFramebuffer() {\n      if (this.framebuffer) {\n        this.framebuffer.resize({\n          width: this.gl.drawingBufferWidth,\n          height: this.gl.drawingBufferHeight\n        });\n      }\n    }\n  }, {\n    key: \"_beginTimers\",\n    value: function _beginTimers() {\n      this.frameRate.timeEnd();\n      this.frameRate.timeStart();\n\n      if (this._gpuTimeQuery && this._gpuTimeQuery.isResultAvailable() && !this._gpuTimeQuery.isTimerDisjoint()) {\n        this.stats.get('GPU Time').addTime(this._gpuTimeQuery.getTimerMilliseconds());\n      }\n\n      if (this._gpuTimeQuery) {\n        this._gpuTimeQuery.beginTimeElapsedQuery();\n      }\n\n      this.cpuTime.timeStart();\n    }\n  }, {\n    key: \"_endTimers\",\n    value: function _endTimers() {\n      this.cpuTime.timeEnd();\n\n      if (this._gpuTimeQuery) {\n        this._gpuTimeQuery.end();\n      }\n    }\n  }, {\n    key: \"_startEventHandling\",\n    value: function _startEventHandling() {\n      var canvas = this.gl.canvas;\n\n      if (canvas) {\n        canvas.addEventListener('mousemove', this._onMousemove);\n        canvas.addEventListener('mouseleave', this._onMouseleave);\n      }\n    }\n  }, {\n    key: \"_onMousemove\",\n    value: function _onMousemove(e) {\n      this.animationProps._mousePosition = [e.offsetX, e.offsetY];\n    }\n  }, {\n    key: \"_onMouseleave\",\n    value: function _onMouseleave(e) {\n      this.animationProps._mousePosition = null;\n    }\n  }]);\n\n  return AnimationLoop;\n}();\n\nexport { AnimationLoop as default };\n//# sourceMappingURL=animation-loop.js.map","var INPUT_START = 1;\nvar INPUT_MOVE = 2;\nvar INPUT_END = 4;\nvar MOUSE_INPUT_MAP = {\n  mousedown: INPUT_START,\n  mousemove: INPUT_MOVE,\n  mouseup: INPUT_END\n};\n\nfunction some(array, predict) {\n  for (var i = 0; i < array.length; i++) {\n    if (predict(array[i])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport function enhancePointerEventInput(PointerEventInput) {\n  var oldHandler = PointerEventInput.prototype.handler;\n\n  PointerEventInput.prototype.handler = function handler(ev) {\n    var store = this.store;\n\n    if (ev.button > 0) {\n      if (!some(store, function (e) {\n        return e.pointerId === ev.pointerId;\n      })) {\n        store.push(ev);\n      }\n    }\n\n    oldHandler.call(this, ev);\n  };\n}\nexport function enhanceMouseInput(MouseInput) {\n  MouseInput.prototype.handler = function handler(ev) {\n    var eventType = MOUSE_INPUT_MAP[ev.type];\n\n    if (eventType & INPUT_START && ev.button >= 0) {\n      this.pressed = true;\n    }\n\n    if (eventType & INPUT_MOVE && ev.which === 0) {\n      eventType = INPUT_END;\n    }\n\n    if (!this.pressed) {\n      return;\n    }\n\n    if (eventType & INPUT_END) {\n      this.pressed = false;\n    }\n\n    this.callback(this.manager, eventType, {\n      pointers: [ev],\n      changedPointers: [ev],\n      pointerType: 'mouse',\n      srcEvent: ev\n    });\n  };\n}\n//# sourceMappingURL=hammer-overrides.js.map","import hammerjs from 'hammerjs';\nimport { enhancePointerEventInput, enhanceMouseInput } from './hammer-overrides';\nenhancePointerEventInput(hammerjs.PointerEventInput);\nenhanceMouseInput(hammerjs.MouseInput);\nexport var Manager = hammerjs.Manager;\nexport default hammerjs;\n//# sourceMappingURL=hammer.browser.js.map","import Hammer from './utils/hammer';\nexport var RECOGNIZERS = Hammer ? [[Hammer.Pan, {\n  event: 'tripan',\n  pointers: 3,\n  threshold: 0,\n  enable: false\n}], [Hammer.Rotate, {\n  enable: false\n}], [Hammer.Pinch, {\n  enable: false\n}], [Hammer.Swipe, {\n  enable: false\n}], [Hammer.Pan, {\n  threshold: 0,\n  enable: false\n}], [Hammer.Press, {\n  enable: false\n}], [Hammer.Tap, {\n  event: 'doubletap',\n  taps: 2,\n  enable: false\n}], [Hammer.Tap, {\n  event: 'anytap',\n  enable: false\n}], [Hammer.Tap, {\n  enable: false\n}]] : null;\nexport var RECOGNIZER_COMPATIBLE_MAP = {\n  tripan: ['rotate', 'pinch', 'pan'],\n  rotate: ['pinch'],\n  pinch: ['pan'],\n  pan: ['press', 'doubletap', 'anytap', 'tap'],\n  doubletap: ['anytap'],\n  anytap: ['tap']\n};\nexport var RECOGNIZER_FALLBACK_MAP = {\n  doubletap: ['tap']\n};\nexport var BASIC_EVENT_ALIASES = {\n  pointerdown: 'pointerdown',\n  pointermove: 'pointermove',\n  pointerup: 'pointerup',\n  touchstart: 'pointerdown',\n  touchmove: 'pointermove',\n  touchend: 'pointerup',\n  mousedown: 'pointerdown',\n  mousemove: 'pointermove',\n  mouseup: 'pointerup'\n};\nexport var INPUT_EVENT_TYPES = {\n  KEY_EVENTS: ['keydown', 'keyup'],\n  MOUSE_EVENTS: ['mousedown', 'mousemove', 'mouseup', 'mouseover', 'mouseout', 'mouseleave'],\n  WHEEL_EVENTS: ['wheel', 'mousewheel', 'DOMMouseScroll']\n};\nexport var EVENT_RECOGNIZER_MAP = {\n  tap: 'tap',\n  anytap: 'anytap',\n  doubletap: 'doubletap',\n  press: 'press',\n  pinch: 'pinch',\n  pinchin: 'pinch',\n  pinchout: 'pinch',\n  pinchstart: 'pinch',\n  pinchmove: 'pinch',\n  pinchend: 'pinch',\n  pinchcancel: 'pinch',\n  rotate: 'rotate',\n  rotatestart: 'rotate',\n  rotatemove: 'rotate',\n  rotateend: 'rotate',\n  rotatecancel: 'rotate',\n  tripan: 'tripan',\n  tripanstart: 'tripan',\n  tripanmove: 'tripan',\n  tripanup: 'tripan',\n  tripandown: 'tripan',\n  tripanleft: 'tripan',\n  tripanright: 'tripan',\n  tripanend: 'tripan',\n  tripancancel: 'tripan',\n  pan: 'pan',\n  panstart: 'pan',\n  panmove: 'pan',\n  panup: 'pan',\n  pandown: 'pan',\n  panleft: 'pan',\n  panright: 'pan',\n  panend: 'pan',\n  pancancel: 'pan',\n  swipe: 'swipe',\n  swipeleft: 'swipe',\n  swiperight: 'swipe',\n  swipeup: 'swipe',\n  swipedown: 'swipe'\n};\nexport var GESTURE_EVENT_ALIASES = {\n  click: 'tap',\n  anyclick: 'anytap',\n  dblclick: 'doubletap',\n  mousedown: 'pointerdown',\n  mousemove: 'pointermove',\n  mouseup: 'pointerup',\n  mouseover: 'pointerover',\n  mouseout: 'pointerout',\n  mouseleave: 'pointerleave'\n};\n//# sourceMappingURL=constants.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { INPUT_EVENT_TYPES } from '../constants';\nimport { window, userAgent, passiveSupported } from '../utils/globals';\nvar firefox = userAgent.indexOf('firefox') !== -1;\nvar WHEEL_EVENTS = INPUT_EVENT_TYPES.WHEEL_EVENTS;\nvar EVENT_TYPE = 'wheel';\nvar WHEEL_DELTA_MAGIC_SCALER = 4.000244140625;\nvar WHEEL_DELTA_PER_LINE = 40;\nvar SHIFT_MULTIPLIER = 0.25;\n\nvar WheelInput = function () {\n  function WheelInput(element, callback) {\n    var _this = this;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, WheelInput);\n\n    this.element = element;\n    this.callback = callback;\n    this.options = Object.assign({\n      enable: true\n    }, options);\n    this.events = WHEEL_EVENTS.concat(options.events || []);\n    this.handleEvent = this.handleEvent.bind(this);\n    this.events.forEach(function (event) {\n      return element.addEventListener(event, _this.handleEvent, passiveSupported ? {\n        passive: false\n      } : false);\n    });\n  }\n\n  _createClass(WheelInput, [{\n    key: \"destroy\",\n    value: function destroy() {\n      var _this2 = this;\n\n      this.events.forEach(function (event) {\n        return _this2.element.removeEventListener(event, _this2.handleEvent);\n      });\n    }\n  }, {\n    key: \"enableEventType\",\n    value: function enableEventType(eventType, enabled) {\n      if (eventType === EVENT_TYPE) {\n        this.options.enable = enabled;\n      }\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(event) {\n      if (!this.options.enable) {\n        return;\n      }\n\n      var value = event.deltaY;\n\n      if (window.WheelEvent) {\n        if (firefox && event.deltaMode === window.WheelEvent.DOM_DELTA_PIXEL) {\n          value /= window.devicePixelRatio;\n        }\n\n        if (event.deltaMode === window.WheelEvent.DOM_DELTA_LINE) {\n          value *= WHEEL_DELTA_PER_LINE;\n        }\n      }\n\n      var wheelPosition = {\n        x: event.clientX,\n        y: event.clientY\n      };\n\n      if (value !== 0 && value % WHEEL_DELTA_MAGIC_SCALER === 0) {\n        value = Math.floor(value / WHEEL_DELTA_MAGIC_SCALER);\n      }\n\n      if (event.shiftKey && value) {\n        value = value * SHIFT_MULTIPLIER;\n      }\n\n      this._onWheel(event, -value, wheelPosition);\n    }\n  }, {\n    key: \"_onWheel\",\n    value: function _onWheel(srcEvent, delta, position) {\n      this.callback({\n        type: EVENT_TYPE,\n        center: position,\n        delta: delta,\n        srcEvent: srcEvent,\n        pointerType: 'mouse',\n        target: srcEvent.target\n      });\n    }\n  }]);\n\n  return WheelInput;\n}();\n\nexport { WheelInput as default };\n//# sourceMappingURL=wheel-input.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { INPUT_EVENT_TYPES } from '../constants';\nvar MOUSE_EVENTS = INPUT_EVENT_TYPES.MOUSE_EVENTS;\nvar MOVE_EVENT_TYPE = 'pointermove';\nvar OVER_EVENT_TYPE = 'pointerover';\nvar OUT_EVENT_TYPE = 'pointerout';\nvar LEAVE_EVENT_TYPE = 'pointerleave';\n\nvar MoveInput = function () {\n  function MoveInput(element, callback) {\n    var _this = this;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, MoveInput);\n\n    this.element = element;\n    this.callback = callback;\n    this.pressed = false;\n    this.options = Object.assign({\n      enable: true\n    }, options);\n    this.enableMoveEvent = this.options.enable;\n    this.enableLeaveEvent = this.options.enable;\n    this.enableOutEvent = this.options.enable;\n    this.enableOverEvent = this.options.enable;\n    this.events = MOUSE_EVENTS.concat(options.events || []);\n    this.handleEvent = this.handleEvent.bind(this);\n    this.events.forEach(function (event) {\n      return element.addEventListener(event, _this.handleEvent);\n    });\n  }\n\n  _createClass(MoveInput, [{\n    key: \"destroy\",\n    value: function destroy() {\n      var _this2 = this;\n\n      this.events.forEach(function (event) {\n        return _this2.element.removeEventListener(event, _this2.handleEvent);\n      });\n    }\n  }, {\n    key: \"enableEventType\",\n    value: function enableEventType(eventType, enabled) {\n      if (eventType === MOVE_EVENT_TYPE) {\n        this.enableMoveEvent = enabled;\n      }\n\n      if (eventType === OVER_EVENT_TYPE) {\n        this.enableOverEvent = enabled;\n      }\n\n      if (eventType === OUT_EVENT_TYPE) {\n        this.enableOutEvent = enabled;\n      }\n\n      if (eventType === LEAVE_EVENT_TYPE) {\n        this.enableLeaveEvent = enabled;\n      }\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(event) {\n      this.handleOverEvent(event);\n      this.handleOutEvent(event);\n      this.handleLeaveEvent(event);\n      this.handleMoveEvent(event);\n    }\n  }, {\n    key: \"handleOverEvent\",\n    value: function handleOverEvent(event) {\n      if (this.enableOverEvent) {\n        if (event.type === 'mouseover') {\n          this.callback({\n            type: OVER_EVENT_TYPE,\n            srcEvent: event,\n            pointerType: 'mouse',\n            target: event.target\n          });\n        }\n      }\n    }\n  }, {\n    key: \"handleOutEvent\",\n    value: function handleOutEvent(event) {\n      if (this.enableOutEvent) {\n        if (event.type === 'mouseout') {\n          this.callback({\n            type: OUT_EVENT_TYPE,\n            srcEvent: event,\n            pointerType: 'mouse',\n            target: event.target\n          });\n        }\n      }\n    }\n  }, {\n    key: \"handleLeaveEvent\",\n    value: function handleLeaveEvent(event) {\n      if (this.enableLeaveEvent) {\n        if (event.type === 'mouseleave') {\n          this.callback({\n            type: LEAVE_EVENT_TYPE,\n            srcEvent: event,\n            pointerType: 'mouse',\n            target: event.target\n          });\n        }\n      }\n    }\n  }, {\n    key: \"handleMoveEvent\",\n    value: function handleMoveEvent(event) {\n      if (this.enableMoveEvent) {\n        switch (event.type) {\n          case 'mousedown':\n            if (event.button >= 0) {\n              this.pressed = true;\n            }\n\n            break;\n\n          case 'mousemove':\n            if (event.which === 0) {\n              this.pressed = false;\n            }\n\n            if (!this.pressed) {\n              this.callback({\n                type: MOVE_EVENT_TYPE,\n                srcEvent: event,\n                pointerType: 'mouse',\n                target: event.target\n              });\n            }\n\n            break;\n\n          case 'mouseup':\n            this.pressed = false;\n            break;\n\n          default:\n        }\n      }\n    }\n  }]);\n\n  return MoveInput;\n}();\n\nexport { MoveInput as default };\n//# sourceMappingURL=move-input.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { INPUT_EVENT_TYPES } from '../constants';\nvar KEY_EVENTS = INPUT_EVENT_TYPES.KEY_EVENTS;\nvar DOWN_EVENT_TYPE = 'keydown';\nvar UP_EVENT_TYPE = 'keyup';\n\nvar KeyInput = function () {\n  function KeyInput(element, callback) {\n    var _this = this;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, KeyInput);\n\n    this.element = element;\n    this.callback = callback;\n    this.options = Object.assign({\n      enable: true\n    }, options);\n    this.enableDownEvent = this.options.enable;\n    this.enableUpEvent = this.options.enable;\n    this.events = KEY_EVENTS.concat(options.events || []);\n    this.handleEvent = this.handleEvent.bind(this);\n    element.tabIndex = options.tabIndex || 0;\n    element.style.outline = 'none';\n    this.events.forEach(function (event) {\n      return element.addEventListener(event, _this.handleEvent);\n    });\n  }\n\n  _createClass(KeyInput, [{\n    key: \"destroy\",\n    value: function destroy() {\n      var _this2 = this;\n\n      this.events.forEach(function (event) {\n        return _this2.element.removeEventListener(event, _this2.handleEvent);\n      });\n    }\n  }, {\n    key: \"enableEventType\",\n    value: function enableEventType(eventType, enabled) {\n      if (eventType === DOWN_EVENT_TYPE) {\n        this.enableDownEvent = enabled;\n      }\n\n      if (eventType === UP_EVENT_TYPE) {\n        this.enableUpEvent = enabled;\n      }\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(event) {\n      var targetElement = event.target || event.srcElement;\n\n      if (targetElement.tagName === 'INPUT' && targetElement.type === 'text' || targetElement.tagName === 'TEXTAREA') {\n        return;\n      }\n\n      if (this.enableDownEvent && event.type === 'keydown') {\n        this.callback({\n          type: DOWN_EVENT_TYPE,\n          srcEvent: event,\n          key: event.key,\n          target: event.target\n        });\n      }\n\n      if (this.enableUpEvent && event.type === 'keyup') {\n        this.callback({\n          type: UP_EVENT_TYPE,\n          srcEvent: event,\n          key: event.key,\n          target: event.target\n        });\n      }\n    }\n  }]);\n\n  return KeyInput;\n}();\n\nexport { KeyInput as default };\n//# sourceMappingURL=key-input.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nvar EVENT_TYPE = 'contextmenu';\n\nvar ContextmenuInput = function () {\n  function ContextmenuInput(element, callback) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, ContextmenuInput);\n\n    this.element = element;\n    this.callback = callback;\n    this.options = Object.assign({\n      enable: true\n    }, options);\n    this.handleEvent = this.handleEvent.bind(this);\n    element.addEventListener('contextmenu', this.handleEvent);\n  }\n\n  _createClass(ContextmenuInput, [{\n    key: \"destroy\",\n    value: function destroy() {\n      this.element.removeEventListener('contextmenu', this.handleEvent);\n    }\n  }, {\n    key: \"enableEventType\",\n    value: function enableEventType(eventType, enabled) {\n      if (eventType === EVENT_TYPE) {\n        this.options.enable = enabled;\n      }\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(event) {\n      if (!this.options.enable) {\n        return;\n      }\n\n      this.callback({\n        type: EVENT_TYPE,\n        center: {\n          x: event.clientX,\n          y: event.clientY\n        },\n        srcEvent: event,\n        pointerType: 'mouse',\n        target: event.target\n      });\n    }\n  }]);\n\n  return ContextmenuInput;\n}();\n\nexport { ContextmenuInput as default };\n//# sourceMappingURL=contextmenu-input.js.map","var DOWN_EVENT = 1;\nvar MOVE_EVENT = 2;\nvar UP_EVENT = 4;\nvar MOUSE_EVENTS = {\n  pointerdown: DOWN_EVENT,\n  pointermove: MOVE_EVENT,\n  pointerup: UP_EVENT,\n  mousedown: DOWN_EVENT,\n  mousemove: MOVE_EVENT,\n  mouseup: UP_EVENT\n};\nvar MOUSE_EVENT_WHICH_LEFT = 1;\nvar MOUSE_EVENT_WHICH_MIDDLE = 2;\nvar MOUSE_EVENT_WHICH_RIGHT = 3;\nvar MOUSE_EVENT_BUTTON_LEFT = 0;\nvar MOUSE_EVENT_BUTTON_MIDDLE = 1;\nvar MOUSE_EVENT_BUTTON_RIGHT = 2;\nvar MOUSE_EVENT_BUTTONS_LEFT_MASK = 1;\nvar MOUSE_EVENT_BUTTONS_RIGHT_MASK = 2;\nvar MOUSE_EVENT_BUTTONS_MIDDLE_MASK = 4;\nexport function whichButtons(event) {\n  var eventType = MOUSE_EVENTS[event.srcEvent.type];\n\n  if (!eventType) {\n    return null;\n  }\n\n  var _event$srcEvent = event.srcEvent,\n      buttons = _event$srcEvent.buttons,\n      button = _event$srcEvent.button,\n      which = _event$srcEvent.which;\n  var leftButton = false;\n  var middleButton = false;\n  var rightButton = false;\n\n  if (eventType === UP_EVENT || eventType === MOVE_EVENT && !Number.isFinite(buttons)) {\n    leftButton = which === MOUSE_EVENT_WHICH_LEFT;\n    middleButton = which === MOUSE_EVENT_WHICH_MIDDLE;\n    rightButton = which === MOUSE_EVENT_WHICH_RIGHT;\n  } else if (eventType === MOVE_EVENT) {\n    leftButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_LEFT_MASK);\n    middleButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_MIDDLE_MASK);\n    rightButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_RIGHT_MASK);\n  } else if (eventType === DOWN_EVENT) {\n    leftButton = button === MOUSE_EVENT_BUTTON_LEFT;\n    middleButton = button === MOUSE_EVENT_BUTTON_MIDDLE;\n    rightButton = button === MOUSE_EVENT_BUTTON_RIGHT;\n  }\n\n  return {\n    leftButton: leftButton,\n    middleButton: middleButton,\n    rightButton: rightButton\n  };\n}\nexport function getOffsetPosition(event, rootElement) {\n  var srcEvent = event.srcEvent;\n\n  if (!event.center && !Number.isFinite(srcEvent.clientX)) {\n    return null;\n  }\n\n  var center = event.center || {\n    x: srcEvent.clientX,\n    y: srcEvent.clientY\n  };\n  var rect = rootElement.getBoundingClientRect();\n  var scaleX = rect.width / rootElement.offsetWidth;\n  var scaleY = rect.height / rootElement.offsetHeight;\n  var offsetCenter = {\n    x: (center.x - rect.left - rootElement.clientLeft) / scaleX,\n    y: (center.y - rect.top - rootElement.clientTop) / scaleY\n  };\n  return {\n    center: center,\n    offsetCenter: offsetCenter\n  };\n}\n//# sourceMappingURL=event-utils.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { whichButtons, getOffsetPosition } from './event-utils';\nvar DEFAULT_OPTIONS = {\n  srcElement: 'root',\n  priority: 0\n};\n\nvar EventRegistrar = function () {\n  function EventRegistrar(eventManager) {\n    _classCallCheck(this, EventRegistrar);\n\n    this.eventManager = eventManager;\n    this.handlers = [];\n    this.handlersByElement = new Map();\n    this.handleEvent = this.handleEvent.bind(this);\n    this._active = false;\n  }\n\n  _createClass(EventRegistrar, [{\n    key: \"isEmpty\",\n    value: function isEmpty() {\n      return !this._active;\n    }\n  }, {\n    key: \"add\",\n    value: function add(type, handler, opts) {\n      var once = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var passive = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n      var handlers = this.handlers,\n          handlersByElement = this.handlersByElement;\n\n      if (opts && (_typeof(opts) !== 'object' || opts.addEventListener)) {\n        opts = {\n          srcElement: opts\n        };\n      }\n\n      opts = opts ? Object.assign({}, DEFAULT_OPTIONS, opts) : DEFAULT_OPTIONS;\n      var entries = handlersByElement.get(opts.srcElement);\n\n      if (!entries) {\n        entries = [];\n        handlersByElement.set(opts.srcElement, entries);\n      }\n\n      var entry = {\n        type: type,\n        handler: handler,\n        srcElement: opts.srcElement,\n        priority: opts.priority\n      };\n\n      if (once) {\n        entry.once = true;\n      }\n\n      if (passive) {\n        entry.passive = true;\n      }\n\n      handlers.push(entry);\n      this._active = this._active || !entry.passive;\n      var insertPosition = entries.length - 1;\n\n      while (insertPosition >= 0) {\n        if (entries[insertPosition].priority >= entry.priority) {\n          break;\n        }\n\n        insertPosition--;\n      }\n\n      entries.splice(insertPosition + 1, 0, entry);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(type, handler) {\n      var handlers = this.handlers,\n          handlersByElement = this.handlersByElement;\n\n      for (var i = handlers.length - 1; i >= 0; i--) {\n        var entry = handlers[i];\n\n        if (entry.type === type && entry.handler === handler) {\n          handlers.splice(i, 1);\n          var entries = handlersByElement.get(entry.srcElement);\n          entries.splice(entries.indexOf(entry), 1);\n\n          if (entries.length === 0) {\n            handlersByElement[\"delete\"](entry.srcElement);\n          }\n        }\n      }\n\n      this._active = handlers.some(function (entry) {\n        return !entry.passive;\n      });\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(event) {\n      if (this.isEmpty()) {\n        return;\n      }\n\n      var mjolnirEvent = this._normalizeEvent(event);\n\n      var target = event.srcEvent.target;\n\n      while (target && target !== mjolnirEvent.rootElement) {\n        this._emit(mjolnirEvent, target);\n\n        if (mjolnirEvent.handled) {\n          return;\n        }\n\n        target = target.parentNode;\n      }\n\n      this._emit(mjolnirEvent, 'root');\n    }\n  }, {\n    key: \"_emit\",\n    value: function _emit(event, srcElement) {\n      var entries = this.handlersByElement.get(srcElement);\n\n      if (entries) {\n        var immediatePropagationStopped = false;\n\n        var stopPropagation = function stopPropagation() {\n          event.handled = true;\n        };\n\n        var stopImmediatePropagation = function stopImmediatePropagation() {\n          event.handled = true;\n          immediatePropagationStopped = true;\n        };\n\n        var entriesToRemove = [];\n\n        for (var i = 0; i < entries.length; i++) {\n          var _entries$i = entries[i],\n              type = _entries$i.type,\n              handler = _entries$i.handler,\n              once = _entries$i.once;\n          handler(Object.assign({}, event, {\n            type: type,\n            stopPropagation: stopPropagation,\n            stopImmediatePropagation: stopImmediatePropagation\n          }));\n\n          if (once) {\n            entriesToRemove.push(entries[i]);\n          }\n\n          if (immediatePropagationStopped) {\n            break;\n          }\n        }\n\n        for (var _i = 0; _i < entriesToRemove.length; _i++) {\n          var _entriesToRemove$_i = entriesToRemove[_i],\n              _type = _entriesToRemove$_i.type,\n              _handler = _entriesToRemove$_i.handler;\n          this.remove(_type, _handler);\n        }\n      }\n    }\n  }, {\n    key: \"_normalizeEvent\",\n    value: function _normalizeEvent(event) {\n      var rootElement = this.eventManager.element;\n      return Object.assign({}, event, whichButtons(event), getOffsetPosition(event, rootElement), {\n        handled: false,\n        rootElement: rootElement\n      });\n    }\n  }]);\n\n  return EventRegistrar;\n}();\n\nexport { EventRegistrar as default };\n//# sourceMappingURL=event-registrar.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { Manager } from './utils/hammer';\nimport WheelInput from './inputs/wheel-input';\nimport MoveInput from './inputs/move-input';\nimport KeyInput from './inputs/key-input';\nimport ContextmenuInput from './inputs/contextmenu-input';\nimport EventRegistrar from './utils/event-registrar';\nimport { BASIC_EVENT_ALIASES, EVENT_RECOGNIZER_MAP, GESTURE_EVENT_ALIASES, RECOGNIZERS, RECOGNIZER_COMPATIBLE_MAP, RECOGNIZER_FALLBACK_MAP } from './constants';\nvar DEFAULT_OPTIONS = {\n  events: null,\n  recognizers: null,\n  recognizerOptions: {},\n  Manager: Manager,\n  touchAction: 'none',\n  tabIndex: 0\n};\n\nvar EventManager = function () {\n  function EventManager() {\n    var element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, EventManager);\n\n    this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n    this.events = new Map();\n    this._onBasicInput = this._onBasicInput.bind(this);\n    this._onOtherEvent = this._onOtherEvent.bind(this);\n    this.setElement(element);\n    var events = options.events;\n\n    if (events) {\n      this.on(events);\n    }\n  }\n\n  _createClass(EventManager, [{\n    key: \"setElement\",\n    value: function setElement(element) {\n      var _this = this;\n\n      if (this.element) {\n        this.destroy();\n      }\n\n      this.element = element;\n\n      if (!element) {\n        return;\n      }\n\n      var options = this.options;\n      var ManagerClass = options.Manager;\n      this.manager = new ManagerClass(element, {\n        touchAction: options.touchAction,\n        recognizers: options.recognizers || RECOGNIZERS\n      }).on('hammer.input', this._onBasicInput);\n\n      if (!options.recognizers) {\n        Object.keys(RECOGNIZER_COMPATIBLE_MAP).forEach(function (name) {\n          var recognizer = _this.manager.get(name);\n\n          if (recognizer) {\n            RECOGNIZER_COMPATIBLE_MAP[name].forEach(function (otherName) {\n              recognizer.recognizeWith(otherName);\n            });\n          }\n        });\n      }\n\n      for (var recognizerName in options.recognizerOptions) {\n        var recognizer = this.manager.get(recognizerName);\n\n        if (recognizer) {\n          var recognizerOption = options.recognizerOptions[recognizerName];\n          delete recognizerOption.enable;\n          recognizer.set(recognizerOption);\n        }\n      }\n\n      this.wheelInput = new WheelInput(element, this._onOtherEvent, {\n        enable: false\n      });\n      this.moveInput = new MoveInput(element, this._onOtherEvent, {\n        enable: false\n      });\n      this.keyInput = new KeyInput(element, this._onOtherEvent, {\n        enable: false,\n        tabIndex: options.tabIndex\n      });\n      this.contextmenuInput = new ContextmenuInput(element, this._onOtherEvent, {\n        enable: false\n      });\n\n      var _iterator = _createForOfIteratorHelper(this.events),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _step$value = _slicedToArray(_step.value, 2),\n              eventAlias = _step$value[0],\n              eventRegistrar = _step$value[1];\n\n          if (!eventRegistrar.isEmpty()) {\n            this._toggleRecognizer(eventRegistrar.recognizerName, true);\n\n            this.manager.on(eventAlias, eventRegistrar.handleEvent);\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (this.element) {\n        this.wheelInput.destroy();\n        this.moveInput.destroy();\n        this.keyInput.destroy();\n        this.contextmenuInput.destroy();\n        this.manager.destroy();\n        this.wheelInput = null;\n        this.moveInput = null;\n        this.keyInput = null;\n        this.contextmenuInput = null;\n        this.manager = null;\n        this.element = null;\n      }\n    }\n  }, {\n    key: \"on\",\n    value: function on(event, handler, opts) {\n      this._addEventHandler(event, handler, opts, false);\n    }\n  }, {\n    key: \"once\",\n    value: function once(event, handler, opts) {\n      this._addEventHandler(event, handler, opts, true);\n    }\n  }, {\n    key: \"watch\",\n    value: function watch(event, handler, opts) {\n      this._addEventHandler(event, handler, opts, false, true);\n    }\n  }, {\n    key: \"off\",\n    value: function off(event, handler) {\n      this._removeEventHandler(event, handler);\n    }\n  }, {\n    key: \"_toggleRecognizer\",\n    value: function _toggleRecognizer(name, enabled) {\n      var manager = this.manager;\n\n      if (!manager) {\n        return;\n      }\n\n      var recognizer = manager.get(name);\n\n      if (recognizer && recognizer.options.enable !== enabled) {\n        recognizer.set({\n          enable: enabled\n        });\n        var fallbackRecognizers = RECOGNIZER_FALLBACK_MAP[name];\n\n        if (fallbackRecognizers && !this.options.recognizers) {\n          fallbackRecognizers.forEach(function (otherName) {\n            var otherRecognizer = manager.get(otherName);\n\n            if (enabled) {\n              otherRecognizer.requireFailure(name);\n              recognizer.dropRequireFailure(otherName);\n            } else {\n              otherRecognizer.dropRequireFailure(name);\n            }\n          });\n        }\n      }\n\n      this.wheelInput.enableEventType(name, enabled);\n      this.moveInput.enableEventType(name, enabled);\n      this.keyInput.enableEventType(name, enabled);\n      this.contextmenuInput.enableEventType(name, enabled);\n    }\n  }, {\n    key: \"_addEventHandler\",\n    value: function _addEventHandler(event, handler, opts, once, passive) {\n      if (typeof event !== 'string') {\n        opts = handler;\n\n        for (var eventName in event) {\n          this._addEventHandler(eventName, event[eventName], opts, once, passive);\n        }\n\n        return;\n      }\n\n      var manager = this.manager,\n          events = this.events;\n      var eventAlias = GESTURE_EVENT_ALIASES[event] || event;\n      var eventRegistrar = events.get(eventAlias);\n\n      if (!eventRegistrar) {\n        eventRegistrar = new EventRegistrar(this);\n        events.set(eventAlias, eventRegistrar);\n        eventRegistrar.recognizerName = EVENT_RECOGNIZER_MAP[eventAlias] || eventAlias;\n\n        if (manager) {\n          manager.on(eventAlias, eventRegistrar.handleEvent);\n        }\n      }\n\n      eventRegistrar.add(event, handler, opts, once, passive);\n\n      if (!eventRegistrar.isEmpty()) {\n        this._toggleRecognizer(eventRegistrar.recognizerName, true);\n      }\n    }\n  }, {\n    key: \"_removeEventHandler\",\n    value: function _removeEventHandler(event, handler) {\n      if (typeof event !== 'string') {\n        for (var eventName in event) {\n          this._removeEventHandler(eventName, event[eventName]);\n        }\n\n        return;\n      }\n\n      var events = this.events;\n      var eventAlias = GESTURE_EVENT_ALIASES[event] || event;\n      var eventRegistrar = events.get(eventAlias);\n\n      if (!eventRegistrar) {\n        return;\n      }\n\n      eventRegistrar.remove(event, handler);\n\n      if (eventRegistrar.isEmpty()) {\n        var recognizerName = eventRegistrar.recognizerName;\n        var isRecognizerUsed = false;\n\n        var _iterator2 = _createForOfIteratorHelper(events.values()),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var eh = _step2.value;\n\n            if (eh.recognizerName === recognizerName && !eh.isEmpty()) {\n              isRecognizerUsed = true;\n              break;\n            }\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n\n        if (!isRecognizerUsed) {\n          this._toggleRecognizer(recognizerName, false);\n        }\n      }\n    }\n  }, {\n    key: \"_onBasicInput\",\n    value: function _onBasicInput(event) {\n      var srcEvent = event.srcEvent;\n      var alias = BASIC_EVENT_ALIASES[srcEvent.type];\n\n      if (alias) {\n        this.manager.emit(alias, event);\n      }\n    }\n  }, {\n    key: \"_onOtherEvent\",\n    value: function _onOtherEvent(event) {\n      this.manager.emit(event.type, event);\n    }\n  }]);\n\n  return EventManager;\n}();\n\nexport { EventManager as default };\n//# sourceMappingURL=event-manager.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport LayerManager from './layer-manager';\nimport ViewManager from './view-manager';\nimport MapView from '../views/map-view';\nimport EffectManager from './effect-manager';\nimport Effect from './effect';\nimport DeckRenderer from './deck-renderer';\nimport DeckPicker from './deck-picker';\nimport Tooltip from './tooltip';\nimport log from '../utils/log';\nimport { deepEqual } from '../utils/deep-equal';\nimport typedArrayManager from '../utils/typed-array-manager';\nimport deckGlobal from './init';\nimport { getBrowser } from 'probe.gl/env';\nimport { AnimationLoop, createGLContext, instrumentGLContext, setParameters, Timeline, lumaStats } from '@luma.gl/core';\nimport { Stats } from 'probe.gl';\nimport { EventManager } from 'mjolnir.js';\nimport assert from '../utils/assert';\nimport { EVENTS } from './constants';\n\nfunction noop() {}\n\nvar getCursor = function getCursor(_ref) {\n  var isDragging = _ref.isDragging;\n  return isDragging ? 'grabbing' : 'grab';\n};\n\nfunction getPropTypes(PropTypes) {\n  return {\n    id: PropTypes.string,\n    width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    height: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    layers: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n    layerFilter: PropTypes.func,\n    views: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n    viewState: PropTypes.object,\n    effects: PropTypes.arrayOf(PropTypes.instanceOf(Effect)),\n    controller: PropTypes.oneOfType([PropTypes.func, PropTypes.bool, PropTypes.object]),\n    gl: PropTypes.object,\n    glOptions: PropTypes.object,\n    parameters: PropTypes.object,\n    pickingRadius: PropTypes.number,\n    useDevicePixels: PropTypes.oneOfType([PropTypes.bool, PropTypes.number]),\n    touchAction: PropTypes.string,\n    eventRecognizerOptions: PropTypes.object,\n    onWebGLInitialized: PropTypes.func,\n    onResize: PropTypes.func,\n    onViewStateChange: PropTypes.func,\n    onInteractionStateChange: PropTypes.func,\n    onBeforeRender: PropTypes.func,\n    onAfterRender: PropTypes.func,\n    onLoad: PropTypes.func,\n    onError: PropTypes.func,\n    debug: PropTypes.bool,\n    drawPickingColors: PropTypes.bool,\n    _framebuffer: PropTypes.object,\n    _animate: PropTypes.bool,\n    _pickable: PropTypes.bool,\n    _typedArrayManagerProps: PropTypes.object\n  };\n}\n\nvar defaultProps = {\n  id: 'deckgl-overlay',\n  width: '100%',\n  height: '100%',\n  pickingRadius: 0,\n  layerFilter: null,\n  glOptions: {},\n  gl: null,\n  layers: [],\n  effects: [],\n  views: null,\n  controller: null,\n  useDevicePixels: true,\n  touchAction: 'none',\n  eventRecognizerOptions: {},\n  _framebuffer: null,\n  _animate: false,\n  _pickable: true,\n  _typedArrayManagerProps: {},\n  onWebGLInitialized: noop,\n  onResize: noop,\n  onViewStateChange: noop,\n  onInteractionStateChange: noop,\n  onBeforeRender: noop,\n  onAfterRender: noop,\n  onLoad: noop,\n  onError: null,\n  _onMetrics: null,\n  getCursor: getCursor,\n  debug: false,\n  drawPickingColors: false\n};\n\nvar Deck = function () {\n  function Deck(props) {\n    _classCallCheck(this, Deck);\n\n    props = Object.assign({}, defaultProps, props);\n    this.props = {};\n    this.width = 0;\n    this.height = 0;\n    this.viewManager = null;\n    this.layerManager = null;\n    this.effectManager = null;\n    this.deckRenderer = null;\n    this.deckPicker = null;\n    this._needsRedraw = true;\n    this._pickRequest = {};\n    this._lastPointerDownInfo = null;\n    this.viewState = null;\n    this.interactiveState = {\n      isHovering: false,\n      isDragging: false\n    };\n    this._onEvent = this._onEvent.bind(this);\n    this._onPointerDown = this._onPointerDown.bind(this);\n    this._onPointerMove = this._onPointerMove.bind(this);\n    this._pickAndCallback = this._pickAndCallback.bind(this);\n    this._onRendererInitialized = this._onRendererInitialized.bind(this);\n    this._onRenderFrame = this._onRenderFrame.bind(this);\n    this._onViewStateChange = this._onViewStateChange.bind(this);\n    this._onInteractionStateChange = this._onInteractionStateChange.bind(this);\n\n    if (props.viewState && props.initialViewState) {\n      log.warn('View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.')();\n    }\n\n    if (getBrowser() === 'IE') {\n      log.warn('IE 11 support will be deprecated in v8.0')();\n    }\n\n    if (!props.gl) {\n      if (typeof document !== 'undefined') {\n        this.canvas = this._createCanvas(props);\n      }\n    }\n\n    this.animationLoop = this._createAnimationLoop(props);\n    this.stats = new Stats({\n      id: 'deck.gl'\n    });\n    this.metrics = {\n      fps: 0,\n      setPropsTime: 0,\n      updateAttributesTime: 0,\n      framesRedrawn: 0,\n      pickTime: 0,\n      pickCount: 0,\n      gpuTime: 0,\n      gpuTimePerFrame: 0,\n      cpuTime: 0,\n      cpuTimePerFrame: 0,\n      bufferMemory: 0,\n      textureMemory: 0,\n      renderbufferMemory: 0,\n      gpuMemory: 0\n    };\n    this._metricsCounter = 0;\n    this.setProps(props);\n\n    if (props._typedArrayManagerProps) {\n      typedArrayManager.setProps(props._typedArrayManagerProps);\n    }\n\n    this.animationLoop.start();\n  }\n\n  _createClass(Deck, [{\n    key: \"finalize\",\n    value: function finalize() {\n      this.animationLoop.stop();\n      this.animationLoop = null;\n      this._lastPointerDownInfo = null;\n\n      if (this.layerManager) {\n        this.layerManager.finalize();\n        this.layerManager = null;\n        this.viewManager.finalize();\n        this.viewManager = null;\n        this.effectManager.finalize();\n        this.effectManager = null;\n        this.deckRenderer.finalize();\n        this.deckRenderer = null;\n        this.deckPicker.finalize();\n        this.deckPicker = null;\n        this.eventManager.destroy();\n        this.eventManager = null;\n        this.tooltip.remove();\n        this.tooltip = null;\n      }\n\n      if (!this.props.canvas && !this.props.gl && this.canvas) {\n        this.canvas.parentElement.removeChild(this.canvas);\n        this.canvas = null;\n      }\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      this.stats.get('setProps Time').timeStart();\n\n      if ('onLayerHover' in props) {\n        log.removed('onLayerHover', 'onHover')();\n      }\n\n      if ('onLayerClick' in props) {\n        log.removed('onLayerClick', 'onClick')();\n      }\n\n      if (props.initialViewState && !deepEqual(this.props.initialViewState, props.initialViewState)) {\n        this.viewState = props.initialViewState;\n      }\n\n      Object.assign(this.props, props);\n\n      this._setCanvasSize(this.props);\n\n      var resolvedProps = Object.create(this.props);\n      Object.assign(resolvedProps, {\n        views: this._getViews(),\n        width: this.width,\n        height: this.height,\n        viewState: this._getViewState()\n      });\n      this.animationLoop.setProps(resolvedProps);\n\n      if (this.layerManager) {\n        this.viewManager.setProps(resolvedProps);\n        this.layerManager.activateViewport(this.getViewports()[0]);\n        this.layerManager.setProps(resolvedProps);\n        this.effectManager.setProps(resolvedProps);\n        this.deckRenderer.setProps(resolvedProps);\n        this.deckPicker.setProps(resolvedProps);\n      }\n\n      this.stats.get('setProps Time').timeEnd();\n    }\n  }, {\n    key: \"needsRedraw\",\n    value: function needsRedraw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        clearRedrawFlags: false\n      };\n\n      if (this.props._animate) {\n        return 'Deck._animate';\n      }\n\n      var redraw = this._needsRedraw;\n\n      if (opts.clearRedrawFlags) {\n        this._needsRedraw = false;\n      }\n\n      var viewManagerNeedsRedraw = this.viewManager.needsRedraw(opts);\n      var layerManagerNeedsRedraw = this.layerManager.needsRedraw(opts);\n      var effectManagerNeedsRedraw = this.effectManager.needsRedraw(opts);\n      var deckRendererNeedsRedraw = this.deckRenderer.needsRedraw(opts);\n      redraw = redraw || viewManagerNeedsRedraw || layerManagerNeedsRedraw || effectManagerNeedsRedraw || deckRendererNeedsRedraw;\n      return redraw;\n    }\n  }, {\n    key: \"redraw\",\n    value: function redraw(force) {\n      if (!this.layerManager) {\n        return;\n      }\n\n      var redrawReason = force || this.needsRedraw({\n        clearRedrawFlags: true\n      });\n\n      if (!redrawReason) {\n        return;\n      }\n\n      this.stats.get('Redraw Count').incrementCount();\n\n      if (this.props._customRender) {\n        this.props._customRender(redrawReason);\n      } else {\n        this._drawLayers(redrawReason);\n      }\n    }\n  }, {\n    key: \"getViews\",\n    value: function getViews() {\n      return this.viewManager.views;\n    }\n  }, {\n    key: \"getViewports\",\n    value: function getViewports(rect) {\n      return this.viewManager.getViewports(rect);\n    }\n  }, {\n    key: \"pickObject\",\n    value: function pickObject(opts) {\n      var infos = this._pick('pickObject', 'pickObject Time', opts).result;\n\n      return infos.length ? infos[0] : null;\n    }\n  }, {\n    key: \"pickMultipleObjects\",\n    value: function pickMultipleObjects(opts) {\n      opts.depth = opts.depth || 10;\n      return this._pick('pickObject', 'pickMultipleObjects Time', opts).result;\n    }\n  }, {\n    key: \"pickObjects\",\n    value: function pickObjects(opts) {\n      return this._pick('pickObjects', 'pickObjects Time', opts);\n    }\n  }, {\n    key: \"_addResources\",\n    value: function _addResources(resources) {\n      var forceUpdate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      for (var id in resources) {\n        this.layerManager.resourceManager.add({\n          resourceId: id,\n          data: resources[id],\n          forceUpdate: forceUpdate\n        });\n      }\n    }\n  }, {\n    key: \"_removeResources\",\n    value: function _removeResources(resourceIds) {\n      var _iterator = _createForOfIteratorHelper(resourceIds),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var id = _step.value;\n          this.layerManager.resourceManager.remove(id);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: \"_pick\",\n    value: function _pick(method, statKey, opts) {\n      var stats = this.stats;\n      stats.get('Pick Count').incrementCount();\n      stats.get(statKey).timeStart();\n      var infos = this.deckPicker[method](Object.assign({\n        layers: this.layerManager.getLayers(opts),\n        views: this.viewManager.getViews(),\n        viewports: this.getViewports(opts),\n        onViewportActive: this.layerManager.activateViewport\n      }, opts));\n      stats.get(statKey).timeEnd();\n      return infos;\n    }\n  }, {\n    key: \"_createCanvas\",\n    value: function _createCanvas(props) {\n      var canvas = props.canvas;\n\n      if (typeof canvas === 'string') {\n        canvas = document.getElementById(canvas);\n        assert(canvas);\n      }\n\n      if (!canvas) {\n        canvas = document.createElement('canvas');\n        var parent = props.parent || document.body;\n        parent.appendChild(canvas);\n      }\n\n      var id = props.id,\n          style = props.style;\n      canvas.id = id;\n      Object.assign(canvas.style, style);\n      return canvas;\n    }\n  }, {\n    key: \"_setCanvasSize\",\n    value: function _setCanvasSize(props) {\n      if (!this.canvas) {\n        return;\n      }\n\n      var width = props.width,\n          height = props.height;\n\n      if (width || width === 0) {\n        width = Number.isFinite(width) ? \"\".concat(width, \"px\") : width;\n        this.canvas.style.width = width;\n      }\n\n      if (height || height === 0) {\n        height = Number.isFinite(height) ? \"\".concat(height, \"px\") : height;\n        this.canvas.style.position = 'absolute';\n        this.canvas.style.height = height;\n      }\n    }\n  }, {\n    key: \"_updateCanvasSize\",\n    value: function _updateCanvasSize() {\n      if (this._checkForCanvasSizeChange()) {\n        var width = this.width,\n            height = this.height;\n        this.viewManager.setProps({\n          width: width,\n          height: height\n        });\n        this.props.onResize({\n          width: this.width,\n          height: this.height\n        });\n      }\n    }\n  }, {\n    key: \"_checkForCanvasSizeChange\",\n    value: function _checkForCanvasSizeChange() {\n      var canvas = this.canvas;\n\n      if (!canvas) {\n        return false;\n      }\n\n      var newWidth = canvas.clientWidth || canvas.width;\n      var newHeight = canvas.clientHeight || canvas.height;\n\n      if (newWidth !== this.width || newHeight !== this.height) {\n        this.width = newWidth;\n        this.height = newHeight;\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_createAnimationLoop\",\n    value: function _createAnimationLoop(props) {\n      var _this = this;\n\n      var width = props.width,\n          height = props.height,\n          gl = props.gl,\n          glOptions = props.glOptions,\n          debug = props.debug,\n          useDevicePixels = props.useDevicePixels,\n          autoResizeDrawingBuffer = props.autoResizeDrawingBuffer;\n      return new AnimationLoop({\n        width: width,\n        height: height,\n        useDevicePixels: useDevicePixels,\n        autoResizeDrawingBuffer: autoResizeDrawingBuffer,\n        autoResizeViewport: false,\n        gl: gl,\n        onCreateContext: function onCreateContext(opts) {\n          return createGLContext(Object.assign({}, glOptions, opts, {\n            canvas: _this.canvas,\n            debug: debug\n          }));\n        },\n        onInitialize: this._onRendererInitialized,\n        onRender: this._onRenderFrame,\n        onBeforeRender: props.onBeforeRender,\n        onAfterRender: props.onAfterRender,\n        onError: props.onError\n      });\n    }\n  }, {\n    key: \"_getViewState\",\n    value: function _getViewState() {\n      return this.props.viewState || this.viewState;\n    }\n  }, {\n    key: \"_getViews\",\n    value: function _getViews() {\n      var views = this.props.views || [new MapView({\n        id: 'default-view'\n      })];\n      views = Array.isArray(views) ? views : [views];\n\n      if (views.length && this.props.controller) {\n        views[0].props.controller = this.props.controller;\n      }\n\n      return views;\n    }\n  }, {\n    key: \"_onPointerMove\",\n    value: function _onPointerMove(event) {\n      var _pickRequest = this._pickRequest;\n\n      if (event.type === 'pointerleave') {\n        _pickRequest.x = -1;\n        _pickRequest.y = -1;\n        _pickRequest.radius = 0;\n      } else if (event.leftButton || event.rightButton) {\n        return;\n      } else {\n        var pos = event.offsetCenter;\n\n        if (!pos) {\n          return;\n        }\n\n        _pickRequest.x = pos.x;\n        _pickRequest.y = pos.y;\n        _pickRequest.radius = this.props.pickingRadius;\n      }\n\n      if (this.layerManager) {\n        this.layerManager.context.mousePosition = {\n          x: _pickRequest.x,\n          y: _pickRequest.y\n        };\n      }\n\n      _pickRequest.event = event;\n      _pickRequest.mode = 'hover';\n    }\n  }, {\n    key: \"_pickAndCallback\",\n    value: function _pickAndCallback() {\n      var _pickRequest = this._pickRequest;\n\n      if (_pickRequest.event) {\n        var _this$_pick = this._pick('pickObject', 'pickObject Time', _pickRequest),\n            result = _this$_pick.result,\n            emptyInfo = _this$_pick.emptyInfo;\n\n        this.interactiveState.isHovering = result.length > 0;\n        var pickedInfo = emptyInfo;\n        var handled = false;\n\n        var _iterator2 = _createForOfIteratorHelper(result),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var info = _step2.value;\n            pickedInfo = info;\n            handled = info.layer.onHover(info, _pickRequest.event);\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n\n        if (!handled && this.props.onHover) {\n          this.props.onHover(pickedInfo, _pickRequest.event);\n        }\n\n        if (this.props.getTooltip) {\n          var displayInfo = this.props.getTooltip(pickedInfo);\n          this.tooltip.setTooltip(displayInfo, pickedInfo.x, pickedInfo.y);\n        }\n\n        _pickRequest.event = null;\n      }\n    }\n  }, {\n    key: \"_updateCursor\",\n    value: function _updateCursor() {\n      var container = this.props.parent || this.canvas;\n\n      if (container) {\n        container.style.cursor = this.props.getCursor(this.interactiveState);\n      }\n    }\n  }, {\n    key: \"_setGLContext\",\n    value: function _setGLContext(gl) {\n      if (this.layerManager) {\n        return;\n      }\n\n      if (!this.canvas) {\n        this.canvas = gl.canvas;\n        instrumentGLContext(gl, {\n          enable: true,\n          copyState: true\n        });\n      }\n\n      this.tooltip = new Tooltip(this.canvas);\n      setParameters(gl, {\n        blend: true,\n        blendFunc: [770, 771, 1, 771],\n        polygonOffsetFill: true,\n        depthTest: true,\n        depthFunc: 515\n      });\n      this.props.onWebGLInitialized(gl);\n      var timeline = new Timeline();\n      timeline.play();\n      this.animationLoop.attachTimeline(timeline);\n      this.eventManager = new EventManager(this.props.parent || gl.canvas, {\n        touchAction: this.props.touchAction,\n        recognizerOptions: this.props.eventRecognizerOptions,\n        events: {\n          pointerdown: this._onPointerDown,\n          pointermove: this._onPointerMove,\n          pointerleave: this._onPointerMove\n        }\n      });\n\n      for (var eventType in EVENTS) {\n        this.eventManager.on(eventType, this._onEvent);\n      }\n\n      this.viewManager = new ViewManager({\n        timeline: timeline,\n        eventManager: this.eventManager,\n        onViewStateChange: this._onViewStateChange,\n        onInteractionStateChange: this._onInteractionStateChange,\n        views: this._getViews(),\n        viewState: this._getViewState(),\n        width: this.width,\n        height: this.height\n      });\n      var viewport = this.viewManager.getViewports()[0];\n      this.layerManager = new LayerManager(gl, {\n        deck: this,\n        stats: this.stats,\n        viewport: viewport,\n        timeline: timeline\n      });\n      this.effectManager = new EffectManager();\n      this.deckRenderer = new DeckRenderer(gl);\n      this.deckPicker = new DeckPicker(gl);\n      this.setProps(this.props);\n\n      this._updateCanvasSize();\n\n      this.props.onLoad();\n    }\n  }, {\n    key: \"_drawLayers\",\n    value: function _drawLayers(redrawReason, renderOptions) {\n      var gl = this.layerManager.context.gl;\n      setParameters(gl, this.props.parameters);\n      this.props.onBeforeRender({\n        gl: gl\n      });\n      this.deckRenderer.renderLayers(Object.assign({\n        target: this.props._framebuffer,\n        layers: this.layerManager.getLayers(),\n        viewports: this.viewManager.getViewports(),\n        onViewportActive: this.layerManager.activateViewport,\n        views: this.viewManager.getViews(),\n        pass: 'screen',\n        redrawReason: redrawReason,\n        effects: this.effectManager.getEffects()\n      }, renderOptions));\n      this.props.onAfterRender({\n        gl: gl\n      });\n    }\n  }, {\n    key: \"_onRendererInitialized\",\n    value: function _onRendererInitialized(_ref2) {\n      var gl = _ref2.gl;\n\n      this._setGLContext(gl);\n    }\n  }, {\n    key: \"_onRenderFrame\",\n    value: function _onRenderFrame(animationProps) {\n      this._getFrameStats();\n\n      if (this._metricsCounter++ % 60 === 0) {\n        this._getMetrics();\n\n        this.stats.reset();\n        log.table(4, this.metrics)();\n\n        if (this.props._onMetrics) {\n          this.props._onMetrics(this.metrics);\n        }\n      }\n\n      this._updateCanvasSize();\n\n      this._updateCursor();\n\n      this.layerManager.updateLayers();\n\n      this._pickAndCallback();\n\n      this.redraw(false);\n\n      if (this.viewManager) {\n        this.viewManager.updateViewStates();\n      }\n    }\n  }, {\n    key: \"_onViewStateChange\",\n    value: function _onViewStateChange(params) {\n      var viewState = this.props.onViewStateChange(params) || params.viewState;\n\n      if (this.viewState) {\n        this.viewState = _objectSpread(_objectSpread({}, this.viewState), {}, _defineProperty({}, params.viewId, viewState));\n\n        if (!this.props.viewState) {\n          this.viewManager.setProps({\n            viewState: this.viewState\n          });\n        }\n      }\n    }\n  }, {\n    key: \"_onInteractionStateChange\",\n    value: function _onInteractionStateChange(interactionState) {\n      this.interactiveState.isDragging = interactionState.isDragging;\n      this.props.onInteractionStateChange(interactionState);\n    }\n  }, {\n    key: \"_onEvent\",\n    value: function _onEvent(event) {\n      var eventOptions = EVENTS[event.type];\n      var pos = event.offsetCenter;\n\n      if (!eventOptions || !pos) {\n        return;\n      }\n\n      var layers = this.layerManager.getLayers();\n      var info = this.deckPicker.getLastPickedObject({\n        x: pos.x,\n        y: pos.y,\n        layers: layers,\n        viewports: this.getViewports(pos)\n      }, this._lastPointerDownInfo);\n      var layer = info.layer;\n      var layerHandler = layer && (layer[eventOptions.handler] || layer.props[eventOptions.handler]);\n      var rootHandler = this.props[eventOptions.handler];\n      var handled = false;\n\n      if (layerHandler) {\n        handled = layerHandler.call(layer, info, event);\n      }\n\n      if (!handled && rootHandler) {\n        rootHandler(info, event);\n      }\n    }\n  }, {\n    key: \"_onPointerDown\",\n    value: function _onPointerDown(event) {\n      var pos = event.offsetCenter;\n      this._lastPointerDownInfo = this.pickObject({\n        x: pos.x,\n        y: pos.y,\n        radius: this.props.pickingRadius\n      });\n    }\n  }, {\n    key: \"_getFrameStats\",\n    value: function _getFrameStats() {\n      var stats = this.stats;\n      stats.get('frameRate').timeEnd();\n      stats.get('frameRate').timeStart();\n      var animationLoopStats = this.animationLoop.stats;\n      stats.get('GPU Time').addTime(animationLoopStats.get('GPU Time').lastTiming);\n      stats.get('CPU Time').addTime(animationLoopStats.get('CPU Time').lastTiming);\n    }\n  }, {\n    key: \"_getMetrics\",\n    value: function _getMetrics() {\n      var metrics = this.metrics,\n          stats = this.stats;\n      metrics.fps = stats.get('frameRate').getHz();\n      metrics.setPropsTime = stats.get('setProps Time').time;\n      metrics.updateAttributesTime = stats.get('Update Attributes').time;\n      metrics.framesRedrawn = stats.get('Redraw Count').count;\n      metrics.pickTime = stats.get('pickObject Time').time + stats.get('pickMultipleObjects Time').time + stats.get('pickObjects Time').time;\n      metrics.pickCount = stats.get('Pick Count').count;\n      metrics.gpuTime = stats.get('GPU Time').time;\n      metrics.cpuTime = stats.get('CPU Time').time;\n      metrics.gpuTimePerFrame = stats.get('GPU Time').getAverageTime();\n      metrics.cpuTimePerFrame = stats.get('CPU Time').getAverageTime();\n      var memoryStats = lumaStats.get('Memory Usage');\n      metrics.bufferMemory = memoryStats.get('Buffer Memory').count;\n      metrics.textureMemory = memoryStats.get('Texture Memory').count;\n      metrics.renderbufferMemory = memoryStats.get('Renderbuffer Memory').count;\n      metrics.gpuMemory = memoryStats.get('GPU Memory').count;\n    }\n  }]);\n\n  return Deck;\n}();\n\nexport { Deck as default };\nDeck.getPropTypes = getPropTypes;\nDeck.defaultProps = defaultProps;\nDeck.VERSION = deckGlobal.VERSION;\n//# sourceMappingURL=deck.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { Deck, WebMercatorViewport } from '@deck.gl/core';\nexport function getDeckInstance(_ref) {\n  var map = _ref.map,\n      gl = _ref.gl,\n      deck = _ref.deck;\n\n  if (map.__deck) {\n    return map.__deck;\n  }\n\n  var customRender = deck && deck.props._customRender;\n  var deckProps = {\n    useDevicePixels: true,\n    _customRender: function _customRender() {\n      map.triggerRepaint();\n\n      if (customRender) {\n        customRender();\n      }\n    },\n    parameters: {\n      depthMask: true,\n      depthTest: true,\n      blendFunc: [770, 771, 1, 771],\n      blendEquation: 32774\n    },\n    userData: {\n      isExternal: false,\n      mapboxLayers: new Set()\n    }\n  };\n\n  if (deck) {\n    deck.setProps(deckProps);\n    deck.props.userData.isExternal = true;\n  } else {\n    Object.assign(deckProps, {\n      gl: gl,\n      width: false,\n      height: false,\n      viewState: getViewState(map)\n    });\n    deck = new Deck(deckProps);\n    map.on('move', function () {\n      return onMapMove(deck, map);\n    });\n    map.on('remove', function () {\n      deck.finalize();\n      map.__deck = null;\n    });\n  }\n\n  deck.props.userData.mapboxVersion = getMapboxVersion(map);\n  map.__deck = deck;\n  map.on('render', function () {\n    if (deck.layerManager) afterRender(deck, map);\n  });\n  return deck;\n}\nexport function addLayer(deck, layer) {\n  deck.props.userData.mapboxLayers.add(layer);\n  updateLayers(deck);\n}\nexport function removeLayer(deck, layer) {\n  deck.props.userData.mapboxLayers[\"delete\"](layer);\n  updateLayers(deck);\n}\nexport function updateLayer(deck, layer) {\n  updateLayers(deck);\n}\nexport function drawLayer(deck, map, layer) {\n  var currentViewport = deck.props.userData.currentViewport;\n\n  if (!currentViewport) {\n    currentViewport = getViewport(deck, map, true);\n    deck.props.userData.currentViewport = currentViewport;\n  }\n\n  if (!deck.layerManager) {\n    return;\n  }\n\n  deck._drawLayers('mapbox-repaint', {\n    viewports: [currentViewport],\n    layers: getLayers(deck, function (deckLayer) {\n      return shouldDrawLayer(layer.id, deckLayer);\n    }),\n    clearCanvas: false\n  });\n}\n\nfunction getViewState(map) {\n  var _map$getCenter = map.getCenter(),\n      lng = _map$getCenter.lng,\n      lat = _map$getCenter.lat;\n\n  return {\n    longitude: lng,\n    latitude: lat,\n    zoom: map.getZoom(),\n    bearing: map.getBearing(),\n    pitch: map.getPitch()\n  };\n}\n\nfunction getMapboxVersion(map) {\n  var major = 0;\n  var minor = 0;\n\n  if (map.version) {\n    var _map$version$split$sl = map.version.split('.').slice(0, 2).map(Number);\n\n    var _map$version$split$sl2 = _slicedToArray(_map$version$split$sl, 2);\n\n    major = _map$version$split$sl2[0];\n    minor = _map$version$split$sl2[1];\n  }\n\n  return {\n    major: major,\n    minor: minor\n  };\n}\n\nfunction getViewport(deck, map) {\n  var useMapboxProjection = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var mapboxVersion = deck.props.userData.mapboxVersion;\n  return new WebMercatorViewport(Object.assign({\n    x: 0,\n    y: 0,\n    width: deck.width,\n    height: deck.height,\n    repeat: true\n  }, getViewState(map), useMapboxProjection ? {\n    nearZMultiplier: mapboxVersion.major === 1 && mapboxVersion.minor >= 3 || mapboxVersion.major >= 2 ? 0.02 : 1 / (deck.height || 1)\n  } : {\n    nearZMultiplier: 0.1\n  }));\n}\n\nfunction afterRender(deck, map) {\n  var _deck$props$userData = deck.props.userData,\n      mapboxLayers = _deck$props$userData.mapboxLayers,\n      isExternal = _deck$props$userData.isExternal;\n\n  if (isExternal) {\n    var mapboxLayerIds = Array.from(mapboxLayers, function (layer) {\n      return layer.id;\n    });\n    var layers = getLayers(deck, function (deckLayer) {\n      var _iterator = _createForOfIteratorHelper(mapboxLayerIds),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var id = _step.value;\n\n          if (shouldDrawLayer(id, deckLayer)) {\n            return false;\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return true;\n    });\n\n    if (layers.length > 0) {\n      deck._drawLayers('mapbox-repaint', {\n        viewports: [getViewport(deck, map, false)],\n        layers: layers,\n        clearCanvas: false\n      });\n    }\n  }\n\n  deck.props.userData.currentViewport = null;\n}\n\nfunction onMapMove(deck, map) {\n  deck.setProps({\n    viewState: getViewState(map)\n  });\n  deck.needsRedraw({\n    clearRedrawFlags: true\n  });\n}\n\nfunction getLayers(deck, layerFilter) {\n  var layers = deck.layerManager.getLayers();\n  return layers.filter(layerFilter);\n}\n\nfunction shouldDrawLayer(id, layer) {\n  var layerInstance = layer;\n\n  while (layerInstance) {\n    if (layerInstance.id === id) {\n      return true;\n    }\n\n    layerInstance = layerInstance.parent;\n  }\n\n  return false;\n}\n\nfunction updateLayers(deck) {\n  if (deck.props.userData.isExternal) {\n    return;\n  }\n\n  var layers = [];\n  deck.props.userData.mapboxLayers.forEach(function (deckLayer) {\n    var LayerType = deckLayer.props.type;\n    var layer = new LayerType(deckLayer.props);\n    layers.push(layer);\n  });\n  deck.setProps({\n    layers: layers\n  });\n}\n//# sourceMappingURL=deck-utils.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { getDeckInstance, addLayer, removeLayer, updateLayer, drawLayer } from './deck-utils';\n\nvar MapboxLayer = function () {\n  function MapboxLayer(props) {\n    _classCallCheck(this, MapboxLayer);\n\n    if (!props.id) {\n      throw new Error('Layer must have an unique id');\n    }\n\n    this.id = props.id;\n    this.type = 'custom';\n    this.renderingMode = props.renderingMode || '3d';\n    this.map = null;\n    this.deck = null;\n    this.props = props;\n  }\n\n  _createClass(MapboxLayer, [{\n    key: \"onAdd\",\n    value: function onAdd(map, gl) {\n      this.map = map;\n      this.deck = getDeckInstance({\n        map: map,\n        gl: gl,\n        deck: this.props.deck\n      });\n      addLayer(this.deck, this);\n    }\n  }, {\n    key: \"onRemove\",\n    value: function onRemove() {\n      removeLayer(this.deck, this);\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      Object.assign(this.props, props, {\n        id: this.id\n      });\n\n      if (this.deck) {\n        updateLayer(this.deck, this);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render(gl, matrix) {\n      drawLayer(this.deck, this.map, this);\n    }\n  }]);\n\n  return MapboxLayer;\n}();\n\nexport { MapboxLayer as default };\n//# sourceMappingURL=mapbox-layer.js.map","\nlet $player = null;\nlet $iframe = null;\n\nfunction playVideo(id) {\n\n    $player\n        .classed('is-visible', true)\n        .transition()\n        .duration(300)\n        .style('width', function(){\n            if(d3.select(\"body\").classed(\"is-mobile\")){\n                return \"100%\";\n            }\n            return \"300px\"\n        })\n        .style('height', `200px`)\n        .on('end', () => {\n            $iframe.attr('src', `https://www.youtube.com/embed/${id}`);\n        });\n}\n\nfunction init(){\n\n    $player = d3.select(\".player\")\n\n    $iframe = $player.append('iframe');\n\n    $player\n        .append('button')\n        .attr('class', 'close')\n        .attr(\"tabindex\",0)\n        .html(\"<svg viewBox='0 0 43.5 43.5' xmlns='http://www.w3.org/2000/svg'> <path fill='%23333333' d='M24.941,21.774l4.012-3.952c0.886-0.874,0.896-2.305,0.023-3.191c-0.423-0.429-0.988-0.668-1.592-0.673 c-0.005,0-0.011,0-0.017,0c-0.597,0-1.159,0.23-1.584,0.649l-4.01,3.952l-3.952-4.011c-0.423-0.429-0.988-0.668-1.592-0.673  c-0.005,0-0.011,0-0.017,0c-0.597,0-1.159,0.23-1.584,0.649c-0.886,0.874-0.896,2.305-0.022,3.191l3.951,4.011l-4.012,3.952  c-0.886,0.874-0.896,2.305-0.023,3.191c0.423,0.429,0.987,0.668,1.591,0.673c0.631,0.022,1.171-0.226,1.602-0.649l4.01-3.952  l3.952,4.011c0.423,0.429,0.988,0.668,1.591,0.673c0.006,0,0.012,0,0.018,0c0.598,0,1.159-0.23,1.582-0.648  c0.431-0.423,0.67-0.988,0.674-1.591c0.005-0.603-0.226-1.172-0.649-1.601L24.941,21.774z'/> </svg>\")\n        .on('click', onClose);\n}\n\nfunction onClose() {\n    $player.classed('is-visible', false);\n    $player.select('iframe').attr('src', '');\n}\n\nexport default { init, playVideo, onClose }\n","\n\nimport {HexagonLayer} from '@deck.gl/aggregation-layers';\nimport {MapboxLayer} from '@deck.gl/mapbox';\nimport player from './player.js'\n\n\nlet map = null;\nlet hexagonLayer = null;\nlet COLOR_RANGE = null;\n\nfunction showLayer(layer){\n  map.setLayoutProperty(layer, 'visibility', 'visible');\n}\n\nfunction hideLayer(layer){\n  map.setLayoutProperty(layer, 'visibility', 'none');\n}\n\nfunction removeFilters(colorPallete){\n  map.setFilter('dots', null);\n\n  map.setFilter('admin-0-fill', null);\n  map.setFilter('admin-0-lines', null);\n\n  map.setPaintProperty('dots', 'circle-color', {\"base\":\"rgb(29,27,27)\",\"stops\":colorPallete.circleColors,\"type\":\"categorical\",\"property\":\"track_link\",\"base\":1,\"default\":\"rgb(29,27,27)\"});\n  map.setPaintProperty('dots', 'circle-stroke-color', {\"base\":\"rgb(29,27,27)\",\"stops\":colorPallete.circleColors,\"type\":\"categorical\",\"property\":\"track_link\",\"base\":1,\"default\":\"rgb(29,27,27)\"});\n  map.setPaintProperty('dots', 'circle-stroke-color', {\"base\":\"rgb(29,27,27)\",\"stops\":colorPallete.circleColors,\"type\":\"categorical\",\"property\":\"track_link\",\"base\":1,\"default\":\"rgb(29,27,27)\"});\n\n  let textLayers = [\"song-country-label\",\"song-major-label\",\"song-medium-label\",\"song-minor-label\"];\n  map.setFilter(\"song-major-label\", [ \">\", [\"get\", \"views\"], 1000000 ]);\n  map.setFilter(\"song-medium-label\", [ \"all\", [ \"<=\", [\"get\", \"views\"], 1000000 ], [ \">=\", [\"get\", \"views\"], 50000 ] ]);\n  map.setFilter(\"song-minor-label\", [\"<\", [\"get\", \"views\"], 50000]);\n  map.setFilter(\"song-country-label\", null);\n\n\n\n  for (let layer in textLayers){\n    map.setLayoutProperty(textLayers[layer], 'text-field', [ \"to-string\", [\"get\", \"track_name\"] ]);\n\n\n    // map.setPaintProperty(textLayers[layer], 'text-color', [\"case\", // Begin case expression\n    //   [\"==\", [\"feature-state\", \"fillColor\"], null], // If state.cases == null,\n    //   \"yellow\", // ...then color the polygon grey.\n    //   [\"==\", [\"feature-state\", \"fillColor\"], 0], // If state.cases == 0,\n    //   \"red\",\"blue\"]) // ...then also color the polygon grey.);\n\n    map.setPaintProperty(textLayers[layer], 'text-color', {\"base\":\"rgb(29,27,27)\",\"stops\":colorPallete.labelColors,\"type\":\"categorical\",\"property\":\"track_link\",\"base\":1,\"default\":\"rgb(29,27,27)\"});\n    // map.setPaintProperty(textLayers[layer], 'text-halo-color', \"#FFFFFF\");\n    map.setLayoutProperty(textLayers[layer], 'visibility', 'visible');\n  }\n\n  let labelLayers = ['settlement-major-label','settlement-minor-label','settlement-subdivision-label']\n\n  for (let layer in labelLayers){\n    map.setLayoutProperty(labelLayers[layer], 'visibility', 'none');\n  }\n\n\n  map.setLayoutProperty('dots', 'visibility', 'visible');\n\n\n}\n\nfunction jumpTo(coors,zoom){\n  map.jumpTo({\n    center: coors,\n    zoom: zoom\n  })\n};\n\nfunction addHexLayer(){\n  console.log(\"adding hex layer\");\n  if(hexagonLayer){\n    map.addLayer(hexagonLayer,\"dots\");\n    map.setLayerZoomRange('heatmap', 0, 6);\n    map.resize()\n\n    if(d3.select(\"body\").classed(\"is-mobile\")){\n      map.dragPan.disable();\n      map.dragRotate.disable();\n      map.scrollZoom.disable();\n      map.boxZoom.disable();\n      map.doubleClickZoom.disable();\n      map.touchZoomRotate.disable();\n      map.touchPitch.disable();\n    }\n\n  }\n\n}\n\nfunction easeTo(coors,zoom,duration){\n  map.easeTo({\n    center: coors,\n    zoom: zoom,\n    duration:duration\n  })\n}\n\nfunction flyTo(coors,zoom,speed){\n  map.flyTo({\n    center: coors,\n    zoom: zoom,\n    bearing: 0,\n    speed: speed, // make the flying slow\n    curve: 1, // change the speed at which it zooms out\n    easing: function (t) {\n      return t;\n    },\n    essential: true\n  });\n}\n\n\nfunction filterForSpecific(filteredTrack,circleColor,labelColor){\n  map.setFilter('dots', [ \"all\", [ \"match\", [\"get\", \"track_name\"], [filteredTrack], true, false ] ]);\n  map.setPaintProperty('dots', 'circle-stroke-color',circleColor);\n  map.setPaintProperty('dots', 'circle-color',circleColor);\n  map.setLayoutProperty('dots', 'visibility', 'visible');\n  map.setFilter('admin-0-fill', [ \"all\", [ \"match\", [\"get\", \"track_name\"], [filteredTrack], true, false ] ]);\n  map.setFilter('admin-0-lines', [ \"all\", [ \"match\", [\"get\", \"track_name\"], [filteredTrack], true, false ] ]);\n\n\n\n\n\n  let textLayers = [\"song-country-label\",\"song-major-label\",\"song-medium-label\",\"song-minor-label\"];\n  for (let layer in textLayers){\n\n    map.setFilter(textLayers[layer], [ \"all\", [ \"match\", [\"get\", \"track_name\"], [filteredTrack], true, false ] ]);\n\n    // map.setLayoutProperty(textLayers[layer], 'text-field', [\n    //   'format',\n    //   ['get', 'track_name'],\n    //   { 'font-scale': 1 },\n    //   '\\n',\n    //   {},\n    //   ['get', 'geo_name'],\n    //   {\n    //     'font-scale': 0.75,\n    //     'text-font': ['literal', ['Roboto Mono Regular', 'Rubik Black']],\n    //   },\n    // ]);\n\n    map.setLayoutProperty(textLayers[layer], 'text-field', [ \"to-string\", [\"get\", \"track_name\"] ]);\n    map.setPaintProperty(textLayers[layer], 'text-color',labelColor);\n\n    // map.setPaintProperty(textLayers[layer], 'text-halo-color', \"#FFFFFF\");\n    map.setLayoutProperty(textLayers[layer], 'visibility', 'visible');\n  }\n\n  let labelLayers = ['settlement-major-label','settlement-minor-label','settlement-subdivision-label']\n\n  for (let layer in labelLayers){\n    map.setLayoutProperty(labelLayers[layer], 'visibility', 'visible');\n  }\n\n  map.setLayoutProperty('dots', 'visibility', 'visible');\n\n\n\n\n}\n\n\nfunction init(el,center,color,filteredTrack){\n\n\n  map = new mapboxgl.Map({\n      container: el,\n      center:center,\n      zoom: 5,\n      style: 'mapbox://styles/dock4242/ckmyaewuc1mpa17ps87tjovv5',\n      // pitch:50,\n      hash: false,\n      attributionControl:false\n  });\n\n  map.on('load', function () {\n    map.scrollZoom.disable();\n\n    map.setFilter('dots', [ \"all\", [ \"match\", [\"get\", \"track_name\"], [filteredTrack], true, false ] ]);\n    // map.setFilter('dot-labels', [ \"all\", [ \"match\", [\"get\", \"track_name\"], [filteredTrack], true, false ] ]);\n    //\n\n    map.setPaintProperty('dots', 'circle-stroke-color',color);\n    map.setPaintProperty('dots', 'circle-color',color);\n    // map.setPaintProperty('dot-labels', 'text-color',color);\n\n    map.setLayoutProperty('dots', 'visibility', 'visible');\n    // map.setLayoutProperty('dot-labels', 'visibility', 'visible');\n  })\n}\n\nfunction makeFullScreen(){\n  d3.select(\".fixed-map\").classed(\"full-screen\",true);\n  map.resize();\n  map.scrollZoom.enable();\n  map.dragPan.enable();\n  if(d3.select(\"body\").classed(\"is-mobile\")){\n    map.dragPan.enable();\n    map.dragRotate.enable();\n    map.scrollZoom.enable();\n    map.boxZoom.enable();\n    map.doubleClickZoom.enable();\n    map.touchZoomRotate.enable();\n    map.touchPitch.enable();\n  }\n}\n\nfunction removeFullScreen(){\n  d3.select(\".fixed-map\").classed(\"full-screen\",false);\n  map.scrollZoom.disable();\n  map.dragPan.disable();\n  if(d3.select(\"body\").classed(\"is-mobile\")){\n    map.dragPan.disable();\n    map.dragRotate.disable();\n    map.scrollZoom.disable();\n    map.boxZoom.disable();\n    map.doubleClickZoom.disable();\n    map.touchZoomRotate.disable();\n    map.touchPitch.disable();\n  }\n  map.resize();\n}\n\nfunction filterHex(data,color){\n  if(hexagonLayer){\n\n    console.log(\"changing props\");\n\n    hexagonLayer.setProps({\n      colorRange: [color],\n      data: data\n    });\n\n  }\n}\n\nfunction unfilterHex(data){\n  if(hexagonLayer){\n\n    hexagonLayer.setProps({\n      colorRange: COLOR_RANGE,\n      data: data\n    });\n\n  }\n}\n\n\nfunction fullMap(el,center,data,filteredTrack,colorPallete,filters,zoomLevel){\n\n  return new Promise((resolve, reject) => {\n\n    map = new mapboxgl.Map({\n        container: el,\n        center:center,\n        zoom: zoomLevel,\n        style: 'mapbox://styles/dock4242/ckmyaewuc1mpa17ps87tjovv5',\n        hash: false,\n        attributionControl:false\n    });\n\n    map.on('load', function () {\n\n      var OPTIONS = ['radius', 'coverage', 'upperPercentile'];\n\n      COLOR_RANGE = colorPallete.deckGlColors;\n      // COLOR_RANGE.unshift([255,255,255]);\n\n      console.log(\"creating hex layer\");\n\n      hexagonLayer = new MapboxLayer({\n        type: HexagonLayer,\n        id: 'heatmap',\n        data: data,\n        radius: 150*1000,\n        coverage: .8,\n        upperPercentile: 100,\n        colorRange: COLOR_RANGE,\n        extruded: false,\n        getPosition: d => [Number(d.longitude), Number(d.latitude)],\n        opacity: 1,\n        getColorValue: points => {\n\n          let topSong = d3.rollups(points, v => d3.sum(v, d => +d.views), d => d.track_link)\n\n          topSong = d3.greatest(topSong, d => d[1])[0];\n\n          let topSongIndex = colorPallete.topSongs.indexOf(topSong);\n\n          return topSongIndex  % colorPallete.deckGlColors.length;\n\n        }\n\n      });\n\n      map.scrollZoom.disable();\n      if(d3.select(\"body\").classed(\"is-mobile\")){\n        map.dragPan.disable();\n\n      }\n\n      map.addControl(new mapboxgl.NavigationControl());\n\n      // map.setPaintProperty('dots', 'circle-color', {\"base\":\"rgb(29,27,27)\",\"stops\":colorPallete.circleColors,\"type\":\"categorical\",\"property\":\"track_link\",\"base\":1,\"default\":\"rgb(29,27,27)\"});\n      // map.setPaintProperty('dots', 'circle-stroke-color', {\"base\":\"rgb(29,27,27)\",\"stops\":colorPallete.circleColors,\"type\":\"categorical\",\"property\":\"track_link\",\"base\":1,\"default\":\"rgb(29,27,27)\"});\n      // map.setPaintProperty('dots', 'circle-stroke-color', {\"base\":\"rgb(29,27,27)\",\"stops\":colorPallete.circleColors,\"type\":\"categorical\",\"property\":\"track_link\",\"base\":1,\"default\":\"rgb(29,27,27)\"});\n\n      // let textLayers = [\"song-country-label\",\"song-major-label\",\"song-medium-label\",\"song-minor-label\"];\n\n\n      // for (let layer in textLayers){\n      //   map.setLayoutProperty(textLayers[layer], 'text-field', [ \"to-string\", [\"get\", \"track_name\"] ]);\n\n      //   // map.setPaintProperty(textLayers[layer], 'text-color', [\"case\", // Begin case expression\n      //   //   [\"==\", [\"feature-state\", \"fillColor\"], null], // If state.cases == null,\n      //   //   \"yellow\", // ...then color the polygon grey.\n      //   //   [\"==\", [\"feature-state\", \"fillColor\"], 0], // If state.cases == 0,\n      //   //   \"red\",\"blue\"]) // ...then also color the polygon grey.);\n\n      //   map.setPaintProperty(textLayers[layer], 'text-color', {\"base\":\"rgb(29,27,27)\",\"stops\":colorPallete.labelColors,\"type\":\"categorical\",\"property\":\"track_link\",\"base\":1,\"default\":\"rgb(29,27,27)\"});\n      //   // map.setPaintProperty(textLayers[layer], 'text-halo-color', \"#FFFFFF\");\n      //   map.setLayoutProperty(textLayers[layer], 'visibility', 'visible');\n      // }\n\n      // map.setLayoutProperty('dots', 'visibility', 'visible');\n\n      map.addSource(\"admin-0\", {\n        type: \"vector\",\n        url: \"mapbox://mapbox.enterprise-boundaries-a0-v1\"\n      });\n      //\n      // map.addSource(\"admin-1\", {\n      //   type: \"vector\",\n      //   url: \"mapbox://mapbox.enterprise-boundaries-a1-v1\"\n      // });\n      //\n      // map.addSource(\"postal-1\", {\n      //   type: \"vector\",\n      //   url: \"mapbox://mapbox.enterprise-boundaries-p1-v1\"\n      // });\n      //\n      map.addLayer({\n        \"id\": \"admin-0-fill\",\n        \"type\": \"fill\",\n        \"source\": \"admin-0\",\n        \"maxzoom\": 6,\n        \"source-layer\": \"boundaries_admin_0\",\n        \"paint\": {\n            \"fill-outline-color\":\"rgba(0,0,0,0)\",\n            // \"default\":\"rgba(0,0,0,0)\",\n            \"fill-opacity\":.04,\n            \"fill-color\": {\n                \"default\":\"rgba(0,0,0,0)\",\n                \"property\": \"id\",\n                \"type\": \"categorical\",\n                \"stops\": colorPallete.countryStopsFill\n            }\n        }\n      }, 'mapbox-terrain-rgb');\n\n      // map.addLayer({\n      //   \"id\": \"admin-1-fill\",\n      //   \"type\": \"fill\",\n      //   \"filter\":filters.adminOne,\n      //   \"maxzoom\": 15,\n      //   \"source\": \"admin-1\",\n      //   \"source-layer\": \"boundaries_admin_1\",\n      //   \"paint\": {\n      //       \"fill-outline-color\":\"rgba(0,0,0,0)\",\n      //       \"fill-opacity\":1,\n      //       \"fill-color\": {\n      //           \"default\":\"rgba(0,0,0,0)\",\n      //           \"property\": \"id\",\n      //           \"type\": \"categorical\",\n      //           \"stops\": colorPallete.stopsAdminOneFill\n      //       }\n      //   }\n      // }, 'dots');\n      //\n      // map.addLayer({\n      //   \"id\": \"postal-1-fill\",\n      //   \"maxzoom\": 15,\n      //   \"type\": \"fill\",\n      //   \"source\": \"postal-1\",\n      //   \"source-layer\": \"boundaries_postal_1\",\n      //   \"paint\": {\n      //       \"fill-outline-color\":\"rgba(0,0,0,0)\",\n      //       // \"default\":\"rgba(0,0,0,0)\",\n      //       \"fill-opacity\":1,\n      //       \"fill-color\": {\n      //           \"default\":\"rgba(0,0,0,0)\",\n      //           \"property\": \"id\",\n      //           \"type\": \"categorical\",\n      //           \"stops\": colorPallete.stopsPostalOneFill\n      //       }\n      //   }\n      // }, 'dots');\n      //\n      // map.addLayer({\n      //   \"id\": \"country-borders-bg\",\n      //   \"type\": \"line\",\n      //   \"source\": \"admin-0\",\n      //   \"source-layer\": \"boundaries_admin_0\",\n      //   \"paint\": {\n      //       \"line-width\": [\n      //         \"interpolate\", [\"linear\"], [\"zoom\"],\n      //         // zoom is 5 (or less) -> circle radius will be 1px\n      //         2, 1,\n      //         // zoom is 10 (or greater) -> circle radius will be 5px\n      //         6, 8\n      //       ],\n      //       \"line-opacity\":.2,\n      //       \"line-blur\":0,\n      //       \"line-color\": \"rgb(214,214,214)\"\n      //   }\n      // }, 'dots');\n      //\n      // map.addLayer({\n      //   \"id\": \"postal-1-lines\",\n      //   \"type\": \"line\",\n      //   \"source\": \"postal-1\",\n      //   \"source-layer\": \"boundaries_postal_1\",\n      //   \"paint\": {\n      //       \"line-opacity\":.1,\n      //       \"line-blur\":0,\n      //       \"line-width\":1,\n      //       \"line-color\": {\n      //         \"default\":\"rgba(0,0,0,0)\",\n      //           \"property\": \"id\",\n      //           \"type\": \"categorical\",\n      //           \"stops\": colorPallete.stopsPostalOneLine\n      //       }\n      //   }\n      // }, 'dots');\n      //\n      //\n\n      map.addLayer({\n          \"id\": \"admin-0-lines\",\n          \"type\": \"line\",\n          \"source\": \"admin-0\",\n          \"source-layer\": \"boundaries_admin_0\",\n          \"maxzoom\": 6,\n          \"paint\": {\n              \"line-opacity\":1,\n              \"line-blur\":0,\n              \"line-width\":1,\n              \"line-color\": {\n                \"default\":\"rgba(0,0,0,0)\",\n                  \"property\": \"id\",\n                  \"type\": \"categorical\",\n                  \"stops\": colorPallete.countryStopsLine\n              }\n          }\n        }, 'mapbox-terrain-rgb');\n      //\n          // map.addLayer({\n          //   \"id\": \"admin-0-lines-background\",\n          //   \"type\": \"line\",\n          //   \"source\": \"admin-0\",\n          //   \"filter\":[\"in\", \"id\", \"XX\"],\n          //   \"maxzoom\": 10,\n          //   \"source-layer\": \"boundaries_admin_0\",\n          //   \"paint\": {\n          //       \"line-width\": [\n          //         \"interpolate\", [\"linear\"], [\"zoom\"],\n          //         // zoom is 5 (or less) -> circle radius will be 1px\n          //         2, 1,\n          //         // zoom is 10 (or greater) -> circle radius will be 5px\n          //         8, 5\n          //       ],\n          //       \"line-opacity\":.5,\n          //       \"line-blur\":0,\n          //       \"line-color\": \"rgb(100,100,100)\"\n          //   }\n          // }, 'dots');\n      //\n      // map.addLayer({\n      //   \"id\": \"admin-1-lines\",\n      //   \"type\": \"line\",\n      //   \"source\": \"admin-1\",\n      //   \"source-layer\": \"boundaries_admin_1\",\n      //   \"paint\": {\n      //       \"line-blur\":0,\n      //       \"line-width\":1,\n      //       \"line-opacity\":.2,\n      //       \"line-color\": {\n      //         \"default\":\"rgba(0,0,0,0)\",\n      //           \"property\": \"id\",\n      //           \"type\": \"categorical\",\n      //           \"stops\": colorPallete.stopsAdminOneLine\n      //       }\n      //\n      //   }\n      // }, 'dots');\n      //\n\n      d3.select(\".full-screen-close\").on(\"click\",function(){\n        removeFullScreen();\n      })\n\n      map.on('click', function(e) {\n        let features = map.queryRenderedFeatures(e.point,{ layers: [\"song-country-label\",\"song-major-label\",\"song-medium-label\",\"song-minor-label\"] });\n\n        let playSong = false;\n\n\n        if(!d3.select(\"body\").classed(\"is-mobile\")){\n          playSong = true;\n          d3.select(\".text-container\").classed(\"map-engaged\",true);\n        }\n        else {\n          if(d3.select(\".fixed-map\").classed(\"full-screen\")){\n            playSong = true;\n          }\n          else {\n            makeFullScreen();\n          }\n        }\n        if(features.length > 0 && playSong){\n\n          let trackData = features[0].properties;\n\n          console.log(trackData);\n          let trackLink = trackData.track_link;\n\n          let songSelected = trackData.track_name;\n\n          let artistSelected = trackData.artist_name;\n\n          // map.flyTo({center: [trackData[\"longitude\"],trackData[\"latitude\"]]});\n          // flying = true;\n\n          // map.once(\"moveend\",function(d){\n          //   if(!mobile){\n          //     playerElementWrapper.classed(\"player-fixed-moved\",true).style(\"top\",marker[\"_pos\"].y+\"px\").style(\"left\",marker[\"_pos\"].x+\"px\");\n          //   }\n\n          //   flying = false;\n          // })\n          player.playVideo(trackLink)\n          // }\n        }\n      })\n\n      return resolve(map)\n\n    })\n  })\n}\n\nexport default { makeFullScreen, init, fullMap, filterForSpecific, removeFilters, flyTo, jumpTo, easeTo, showLayer, hideLayer, addHexLayer, filterHex, unfilterHex };\n","\n\n\n\nfunction init(data){\n\n  let geo_info = data[3];\n  let track_data = data[2];\n  let country_data = data[1];\n  let city_data = data[0];\n\n  let colorPallete = {};\n  let filters = {};\n\n  var colorsManual = [\n\n    // \"#213E9A\",\n    // \"#461FA9\",\n    // \"#9B1BBA\",\n    // \"#CA168E\",\n    // \"#DA102C\",\n    // \"#E95E08\",\n    // \"#F9E200\"\n    // //\n    //\n    \"#7994b5\",\n    \"#6c6d94\",\n    \"#93b778\",\n    \"#d17c3f\",\n    // \"#711518\",\n    \"#7a4b3a\",\n    \"#b63e36\",\n    \"#be7249\",\n    \"#864735\",\n    \"#433635\",\n    \"#33431e\",\n\n    // \"#bfbac0\",\n    // \"#281f3f\",\n    // \"#584c77\",\n    // \"#513e32\",\n    // \"#dfa837\",\n    // \"#b8bfaf\",\n    // \"#ab924b\",\n    // \"#252024\",\n    // \"#bebeb3\",\n    // \"#cd6d57\",\n    // \"#61ac86\",\n    // \"#5c6b8f\",\n    // \"#766051\",\n\n    // \"#5d6161\",\n    // \"#39334a\",\n\n    // \"#77747f\",\n    // \"#7a4848\",\n    // \"#979c84\",\n    // \"#a75536\",\n    // \"#383867\",\n\n    // \"#555152\",\n    // \"#657abb\",\n    // \"#b2b599\",\n\n\n    // \"#3f3033\",\n    // \"#423937\",\n\n    // \"#553d3a\",\n    // \"#533552\",\n    // \"#454445\",\n    // \"#ab9649\",\n    // \"#b7757c\",\n    // \"#b5493a\",\n\n    // \"#e9c49d\",\n    // \"#ce536b\",\n\n    // \"#4d3635\",\n    // \"#4f638d\",\n    // \"#a36629\",\n    // \"#1c1949\",\n    // \"#a77d35\",\n    // \"#6e3b31\",\n    // \"#67765b\",\n    // \"#453b32\",\n    // \"#612741\",\n    // \"#9c9d9a\",\n    // \"#adba98\",\n    // \"#4a475c\",\n    // \"#92462f\",\n    // \"#413f44\",\n    // \"#8590ae\",\n    // \"#3a2f52\",\n    // \"#946943\",\n    // \"#463759\",\n    // \"#613936\",\n    // \"#5b5c61\",\n    // \"#719ba2\",\n    // \"#b74a70\",\n    // \"#7d8c55\",\n    // \"#a4b6a7\",\n    // \"#c76b4a\",\n    // \"#6f88af\",\n    // \"#6fb5a8\",\n    // \"#8aa1a6\",\n    // \"#bfbbb0\",\n    // \"#8a8d84\",\n    // \"#8e9849\",\n    // \"#bb603c\"\n\n\n    \"#12939A\",\n\"#DDB27C\",\n\"#88572C\",\n\"#FF991F\",\n\"#F15C17\",\n\"#223F9A\",\n\"#DA70BF\",\n\"#125C77\",\n\"#4DC19C\",\n\"#776E57\",\n\"#17B8BE\",\n\"#B7885E\",\n\"#F89570\",\n\"#829AE3\",\n\"#E79FD5\",\n\"#1E96BE\",\n\"#89DAC1\",\n\"#B3AD9E\"\n\n    // \"rgb(1, 126, 35)\",\n    // \"rgb(127, 1, 1)\",\n    // \"#020c55\",\n    // '#380255',\n    // '#550241',\n    // '#024f55',\n    // '#475502',\n    // '#552b02',\n    // \"#ff7f0e\",\n    // \"#9467bd\",\n    // \"#98df8a\",\n    // \"#1f77b4\",\n    // \"#9edae5\",\n    // \"#f7b6d2\",\n    // \"#c5b0d5\",\n    // \"#d62728\",\n    // \"#bcbd22\",\n    // \"#ff9896\",\n    // \"#dbdb8d\",\n    // \"#ffbb78\",\n    // \"#2ca02c\",\n    // \"#e377c2\",\n    // \"#c49c94\",\n    // \"#17becf\",\n    // \"#8c564b\",\n    // \"#aec7e8\"\n  ];\n\n  colorsManual = colorsManual.map(function(d){\n    return {label:d,fill:d};\n  });\n\n\n//\n  let topSongs = d3.rollups(data[0], v => {\n    return d3.sum(v, d => +d.views);\n  }, d => d.track_link)\n  .sort(([, a], [, b]) => d3.descending(a, b))\n\n  topSongs = topSongs.map(([key]) => key)\n\n\n\n  colorPallete.topSongs = topSongs;\n\n  colorPallete.deckGlColors = colorsManual.map(function(d){\n    let color = d3.color(d.label);\n    return [color.r,color.g,color.b];\n  })\n\n  colorPallete.mapboxColors = colorsManual.map(function(d){\n    return d.label;\n  })\n\n  colorPallete.circleColors = topSongs.map(function(d,i){\n    return [d,d3.color(colorPallete.mapboxColors[i % colorPallete.mapboxColors.length]).toString()];\n  })\n\n  colorPallete.labelColors = topSongs.map(function(d,i){\n\n    let color = colorPallete.mapboxColors[i % colorPallete.mapboxColors.length];\n    if(d3.hsl(color).l > .4){\n      color = d3.color(color).darker();\n      if(d3.hsl(color).l > .4){\n        color = d3.color(color).darker();\n        if(d3.hsl(color).l > .4){\n          color = d3.color(color).darker();\n        }\n      }\n\n      // color = d3.hsl(color)\n      // color.l = .5;\n      // color = color.rgb();\n    }\n    else {\n      color = d3.color(color);\n    }\n\n    return [d,color.toString()];\n  })\n\n  colorPallete.circleColorsMap = new Map(colorPallete.circleColors);\n  colorPallete.labelColorsMap = new Map(colorPallete.labelColors);\n\n\n  // colorPallete.circleColors = colorsManual.map(function(d,i){\n  //   return [topSongs[i],d3.color(d.fill).toString()]\n  // })\n  //\n  // colorPallete.labelColors = colorsManual.map(function(d,i){\n  //   // return [topSongs[i],d3.color(d.fill).toString()]\n  //   return [topSongs[i],d3.color(d.fill).darker(.1).toString()]\n  // })\n\n  var colorSliceAmount = colorPallete.labelColors.length;\n\n  var otherScale = d3.scaleLinear().domain([colorSliceAmount,topSongs.length-1]).range([\"#929292\",\"#f6f6f4\"]);\n//\n  var colorEasingFill = .5\n  var colorEasingLine = .5\n  var colorEasingFillScale = d3.scaleLinear().domain([0,1]).range([.85,.99]);\n\n  var matchExpression = ['match', ['get', 'iso_3166_1']];\n\n  colorPallete.countryStopsFill = country_data.map(function(d){\n\n    var color;\n\n    let topSongIndex = topSongs.indexOf(d.track_link)\n    if(topSongIndex == -1){\n      return [d.iso,\"#333333\"];\n    }\n\n    return [d.iso,colorPallete.mapboxColors[topSongIndex % colorPallete.mapboxColors.length]];\n\n    // var color;\n    // if (topSongs.slice(0,colorSliceAmount).indexOf(d.track_link) > -1){\n    //   color = colorsManual[topSongs.slice(0,colorSliceAmount).indexOf(d.track_link)][\"fill\"];\n    // }\n    // else{\n    //   color = otherScale(topSongs.indexOf(d.track_link));\n    // }\n    // color = d3.hsl(color);\n    // color.l = colorEasingFillScale(color.l);\n    // color = color.toString()\n\n    // matchExpression.push(d.iso,color);\n    // let blending = d3.interpolateRgb(\"#f7dbb6\",color);\n    // color = blending(.2);\n\n    // return [d.iso,color]\n  });\n  //\n\n  colorPallete.countryStopsLine = country_data.map(function(d){\n    var color;\n\n    let topSongIndex = topSongs.indexOf(d.track_link)\n    if(topSongIndex == -1){\n      return [d.iso,\"#333333\"];\n    }\n\n    return [d.iso,colorPallete.mapboxColors[topSongIndex % colorPallete.mapboxColors.length]];\n\n\n    // if (topSongs.slice(0,colorSliceAmount).indexOf(d.track_link) > -1){\n    //   color = colorsManual[topSongs.slice(0,colorSliceAmount).indexOf(d.track_link)][\"label\"];\n    // }\n    // else{\n    //   color = otherScale(topSongs.indexOf(d.track_link));\n    // }\n    //\n\n\n    return [d.iso,color]\n  });\n\n//   let topByAdminOne = d3.rollups(city_data, v => d3.sum(v, d => +d.views), d => d.boundaries_admin_1, d => d.track_link)\n//     .map(function(d){\n//       return {key:d[0],value:d[1].sort((a,b) => d3.descending(a[1], b[1]))[0]}\n//     })\n//     ;\n//\n//   filters.adminOne = [\"in\",\"id\"].concat(topByAdminOne.map(function(d){return d.key;}));\n//\n//   let topByPostalOne = d3.rollups(city_data, v => d3.sum(v, d => +d.views), d => d.boundaries_postal_1, d => d.track_link)\n//     .map(function(d){\n//       return {key:d[0],value:d[1].sort((a,b) => d3.descending(a[1], b[1]))[0]}\n//     })\n//     ;\n//\n//   colorPallete.stopsAdminOneLine = topByAdminOne.map(function(d){\n//     var color;\n//     if (topSongs.slice(0,colorSliceAmount).indexOf(d.value[0]) > -1){\n//       color = colorsManual[topSongs.slice(0,colorSliceAmount).indexOf(d.value[0])][\"label\"];\n//     }\n//     else{\n//       color = otherScale(topSongs.indexOf(d.value[0]));\n//     }\n//     return [d.key,color]\n//   });\n//\n//   colorPallete.stopsAdminOneFill = topByAdminOne.map(function(d){\n//     var color;\n//     if (topSongs.slice(0,colorSliceAmount).indexOf(d.value[0]) > -1){\n//       color = colorsManual[topSongs.slice(0,colorSliceAmount).indexOf(d.value[0])][\"fill\"];\n//     }\n//     else{\n//       color = otherScale(topSongs.indexOf(d.value[0]));\n//     }\n//     // color = d3.color(color).brighter();\n//     let blending = d3.interpolateRgb(\"#f7dbb6\",color);\n//     // color.l = colorEasingFillScale(color.l);\n//     color = blending(.2);\n//     // color = d3.hsl(color);\n//     // color.l = colorEasingFillScale(color.l);\n//     color = color.toString()\n//     return [d.key,color]\n//   });\n//\n//   colorPallete.stopsAdminOneLine = topByAdminOne.map(function(d){\n//     var color;\n//     if (topSongs.slice(0,colorSliceAmount).indexOf(d.value[0]) > -1){\n//       color = colorsManual[topSongs.slice(0,colorSliceAmount).indexOf(d.value[0])][\"fill\"];\n//     }\n//     else{\n//       color = otherScale(topSongs.indexOf(d.value[0]));\n//     }\n//     // color = d3.color(color).brighter();\n//     // color = d3.hsl(color);\n//     // color.l = colorEasingFillScale(color.l);\n//     let blending = d3.interpolateRgb(\"#f7dbb6\",color);\n//     // color.l = colorEasingFillScale(color.l);\n//     color = blending(.2);\n//\n//     color = color.toString()\n//     return [d.key,color]\n//   });\n//\n//\n//   colorPallete.stopsPostalOneFill = topByPostalOne.map(function(d){\n//     var color;\n//     if (topSongs.slice(0,colorSliceAmount).indexOf(d.value[0]) > -1){\n//       color = colorsManual[topSongs.slice(0,colorSliceAmount).indexOf(d.value[0])][\"fill\"];\n//       // color.l = colorEasingFill;\n//       // color = color.toString()\n//     }\n//     else{\n//       color = otherScale(topSongs.indexOf(d.value[0]));\n//     }\n//     color = d3.hsl(color);\n//\n//     //let blending = d3.scaleLinear().domain([0,1]).range([\"#f7dbb6\",color]);\n//     let blending = d3.interpolateRgb(\"#f7dbb6\",color);\n//     // color.l = colorEasingFillScale(color.l);\n//     color = blending(.2);\n//     color = color.toString()\n//     return [d.key,color]\n//   });\n// //\n//   colorPallete.stopsPostalOneLine = topByPostalOne.map(function(d){\n//     var color;\n//     if (topSongs.slice(0,colorSliceAmount).indexOf(d.value[0]) > -1){\n//       color = colorsManual[topSongs.slice(0,colorSliceAmount).indexOf(d.value[0])][\"fill\"];\n//     }\n//     else{\n//       color = otherScale(topSongs.indexOf(d.value[0]));\n//     }\n//     return [d.key,color]\n//   });\n\n  return {colorPallete:colorPallete,filters:filters};\n\n}\n\nexport default { init };\n","\nfunction init(cities){\n    let mono = false;\n\n    console.log(cities);\n\n    let songGroup = d3.groups(cities, d => d[0].track_name);\n    return songGroup;\n}\n\nfunction diverseCity(cities){\n\n}\n\nexport default { init, diverseCity };","import {HexagonLayer} from '@deck.gl/aggregation-layers';\nimport {Deck} from '@deck.gl/core';\n\n\nfunction returnAvgCoors(data){\n\n  return data.map(function(d){\n    let long = d3.mean(d[0], v => v.longitude);\n    let lat = d3.mean(d[0], v => v.latitude);\n\n    return [long,lat,d];\n  })\n}\n\nfunction generateHex(data,colorPallete,countryCode,songsToRemove){\n\n    console.log(songsToRemove);\n\n    return new Promise((resolve, reject) => {\n  \n      let permiscuousBin = null;\n      var OPTIONS = ['radius', 'coverage', 'upperPercentile'];\n      let COLOR_RANGE = colorPallete.deckGlColors;\n  \n      const deckgl = new Deck({})\n  \n      let hexValues = [];\n  \n      let hexagonLayer = new HexagonLayer({\n        id: 'heatmapTwo',\n        data: data,\n        radius: 100*1000,\n        coverage: .95,\n        upperPercentile: 100,\n        colorRange: COLOR_RANGE,\n        extruded: false,\n        getPosition: d => [Number(d.longitude), Number(d.latitude)],\n        opacity: 1,\n        getColorValue: points => {\n  \n          let topSong = d3.rollups(points, v => d3.sum(v, d => +d.views), d => d.track_link)\n  \n          if(topSong.length > 2){\n            hexValues.push([points,topSong.length]);\n          }\n          \n  \n  \n          topSong = d3.greatest(topSong, d => d[1])[0];\n  \n          let topSongIndex = colorPallete.topSongs.indexOf(topSong);\n  \n          return topSongIndex  % colorPallete.deckGlColors.length;\n          // if(topSongIndex > COLOR_RANGE.length - 1){\n          //   return 0;\n          // }\n          //return topSongIndex+1;\n        },\n        onSetColorDomain: event => {\n          \n          console.log(hexValues.length);\n\n          let inCountry = hexValues.sort(function(a,b){ return b[1] - a[1] })\n            .filter(function(d){\n              return d[0].map(function(d,i){return d.country_code}).indexOf(countryCode) > -1;\n            })\n\n          console.log(hexValues.length);\n\n          let outCountry = hexValues.sort(function(a,b){ return b[1] - a[1] })\n            .filter(function(d){\n              return d[0].map(function(d,i){return d.country_code}).indexOf(countryCode) == -1;\n            })\n\n          console.log(hexValues.length);\n\n          let bubbleExCountry = hexValues.sort(function(a,b){ return b[1] - a[1] })\n            .filter(function(d){\n              return d[0].map(function(d,i){return d.country_code}).indexOf(countryCode) == -1;\n            })\n            .filter(function(d){\n              let match = true;\n              for (let song in d[0]){\n                if(songsToRemove.indexOf(d[0][song].track_link) > -1){\n                  match = false;\n                }\n              }\n              return match;\n            })\n  \n          resolve([inCountry,outCountry,bubbleExCountry].map(d => returnAvgCoors(d)))\n  \n        }\n      });\n  \n      deckgl.setProps({\n        layers: [hexagonLayer]\n      });\n  \n    })\n  \n}\n\nexport default { generateHex };","/* global d3 */\nimport debounce from 'lodash.debounce';\nimport isMobile from './utils/is-mobile';\nimport linkFix from './utils/link-fix';\nimport modalSetup from './utils/modal-a11y';\nimport graphic from './graphic';\nimport footer from './footer';\nimport locate from './utils/locate';\nimport closest from './utils/closest'\nimport loadData from './load-data'\nimport generateMap from './generateMap.js'\nimport choro from './choro.js'\nimport monoCulture from './monoCulture'\nimport generateHex from './generateHex.js'\nimport \"intersection-observer\";\nimport scrollama from \"scrollama\";\nimport player from './player.js';\nimport testData from './utils/locate-test';\n\nlet scroller = null;\n\nconst $body = d3.select('body');\nlet previousWidth = 0;\nlet flyToTimeout = null;\nlet hexLayerAdded = false;\nlet formatComma = d3.format(\",\");\nlet coors = null;\n\nfunction resize() {\n  // only do resize on width changes, not height\n  // (remove the conditional if you want to trigger on height change)\n  const width = $body.node().offsetWidth;\n  if (previousWidth !== width) {\n    previousWidth = width;\n    graphic.resize();\n  }\n  if(scroller){\n    scroller.resize;\n  }\n\n}\n\n// function setupStickyHeader() {\n//   const $header = $body.select('header');\n//   if ($header.classed('is-sticky')) {\n//     const $menu = $body.select('#slide__menu');\n//     const $toggle = $body.select('.header__toggle');\n//\n//     modalSetup($toggle, $toggle, $header, $menu, 'a, button, .logo', true);\n//   }\n// }\n\nasync function geoCode(){\n  return new Promise((resolve, reject) => {\n\n    var geocoder = new MapboxGeocoder({\n      accessToken: mapboxgl.accessToken,\n      types: 'place,postcode,locality,neighborhood'\n    });\n\n    d3.select(\".text-container\").classed(\"geolocating\",true);\n\n    geocoder.addTo('#geocoder');\n\n    geocoder.on('result', function (e) {\n      d3.select(\".text-container\").classed(\"geolocating\",false);\n      resolve(e.result)\n    });\n  })\n}\n\nasync function init() {\n\n  player.init();\n\n  mapboxgl.accessToken = 'pk.eyJ1IjoiZG9jazQyNDIiLCJhIjoiY2trOXV2MW9zMDExbTJvczFydTkxOTJvMiJ9.7qeHgJkUfxOaWEYtBGNU9w';\n  mapboxgl.setRTLTextPlugin(\n    'https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js',\n    null,\n    true // Lazy load the plugin\n  );\n\n\n  scroller = scrollama();\n\n  let chartTitle = d3.select(\".chart-title\")\n  let fixedMap = d3.select(\".fixed-map\")\n\n\n\n\n\n\n    // setup resize event\n\n  // adds rel=\"noopener\" to all target=\"_blank\" links\n  linkFix();\n  // add mobile class to body tag\n  $body.classed('is-mobile', isMobile.any());\n  // setup resize event\n  window.addEventListener('resize', debounce(resize, 150));\n  // setup sticky header menu\n  // setupStickyHeader();\n  // kick off graphic code\n\n\n\n  let location = await locate.init().then(data => {\n      return data;\n    }).catch(err => {\n\n      return false;\n\n      // var geocoder = new MapboxGeocoder({\n      //   accessToken: mapboxgl.accessToken,\n      //   types: 'country,region,place,postcode,locality,neighborhood'\n      // });\n\n\n      return testData;// doesn't\n    });\n\n\n  if(!location){\n    let geocodedResult = await geoCode();\n    coors = [geocodedResult.center[1],geocodedResult.center[0]]\n  }\n  else {\n    coors = location.loc.split(\",\");\n  }\n\n\n  let data = await loadData(['202103/city_data_2.csv', '202103/country_data_2.csv','202103/track_info.csv','geo_info.csv','a0.csv','countries-110m.json']).then(result => {\n    return result;\n  }).catch(console.error);\n\n  //convert iso code to country name\n  let countryCodeToString = new Map(data[4].map(d => [d.id,d.name]));\n  let countryCodeToBounding = new Map(data[4].map(d => [d.id,d.bounding]));\n\n  data[1].forEach(function(d){\n    d.country_code = d.iso;\n    d.views = d.max_views;\n  })\n\n  let uniqueSongs = d3.groups(data[0].concat(data[1]),d => d.track_link)\n  let uniqueSongsMap = d3.group(data[0].concat(data[1]),d => d.track_link)\n  let uniqueSongsCityOnlyMap = d3.group(data[0],d => d.track_link)\n\n\n  let dedupedData = d3.rollups(data[0], v => d3.sum(v, d => +d.views), d => d.country_code, d => d.track_link)\n    .map(function(d){\n      return {key:d[0],value:d[1].sort((a,b) => d3.descending(a[1], b[1]))[0]}\n    });\n\n  let dedupedCountryData = data[1].filter(function(d){\n    return dedupedData.map(d => d.key).indexOf(d.country_code) == -1;\n  })\n\n  dedupedData = dedupedData.concat(dedupedCountryData.map(d => {\n    return {key: d.country_code, value: [d.track_link, +d.max_views]}\n  })).map(d => {\n    return {key:d.key, track_link:d.value[0], views: d.value[1]};\n  });\n\n  let countryRollups = d3.groups(data[0], d => d.country_code).map(d => {\n      return [d[0],d3.sum(d[1],d => d.views),d[1]]\n    })\n    .map(d => {\n      let total = d[1];\n      let rollup = d3.rollups(d[2], v => d3.sum(v, d => d.views)/total, d => d.track_link);\n      return [d[0], d[1], rollup];\n    })\n\n\n  // let countryHitsUnfiltered = d3.rollups(countryCities, v => [v.length,v.length/countryCities.length,v], d => d.track_link)\n\n\n  //#1 near you\n\n  let closestLocation = closest.NearestCity(coors[0],coors[1],data[0].map(function(d,i){return [d,d.latitude,d.longitude]; }));\n\n  //#1 that's different but same country and closest to you\n\n  let closestDifferent = closest.NearestCity(closestLocation.latitude,closestLocation.longitude,data[0].filter(function(d){ return d.track_link != closestLocation.track_link; }).map(function(d,i){return [d,d.latitude,d.longitude]; }));\n\n  d3.selectAll(\".your-geo\").text(closestLocation.geo_name);\n  d3.selectAll(\".your-geo-country\").text(countryCodeToString.get(closestLocation.country_code));\n\n\n  d3.selectAll(\".top-song-in-your-geo\").attr(\"data-link\", `${closestLocation.track_link}`).html(function(d){\n    let svg = \"\";\n    if(d3.select(this).classed(\"song-highlight\")){\n      svg = `<svg width=\"\" height=\"\" version=\"1.1\" viewBox=\"20 10 40 26\"><path d=\"M 45,24 27,14 27,34\" fill=\"#f3dbba\"></path></svg>`\n    }\n    return `${closestLocation.track_name} by ${closestLocation.artist_name}${svg}`\n  });\n  d3.selectAll(\".top-song-in-your-geo-track\").text(`${closestLocation.track_name}`);\n  d3.selectAll(\".nearby-geo\").text(`${closestDifferent.geo_name}`);\n  d3.selectAll(\".top-song-in-nearby-geo\").attr(\"data-link\", `${closestDifferent.track_link}`).html(`${closestDifferent.track_name} by ${closestDifferent.artist_name} <svg width=\"\" height=\"\" version=\"1.1\" viewBox=\"20 10 40 26\"><path d=\"M 45,24 27,14 27,34\" fill=\"#f3dbba\"></path></svg>`);\n\n  // generateMap.init(d3.select(\".map-one\").node(),[closestLocation.longitude,closestLocation.latitude],\"#7f0101\",closestLocation.track_name);\n  // generateMap.init(d3.select(\".map-two\").node(),[closestLocation.longitude,closestLocation.latitude],\"#017e23\",closestDifferent.track_name);\n\n  d3.selectAll(\".chart-title\").select(\".chart-hed\").select(\"span\").style(\"color\",\"#7f0101\").html(`Where &ldquo;${closestLocation.track_name}&rdquo; by ${closestLocation.artist_name} is the most popular song`)\n  d3.selectAll(\".chart-title\").select(\".chart-dek\").select(\"span\").html(`YouTube Views Feb 15 - Mar 15, 2021`)\n\n\n\n\n  // are you in a monoculture?\n\n  //get 50 closest cities from nearest\n  let closestFifty = closest.withinDistance(coors[0],coors[1],data[0].filter(d => { return d.country_code == closestLocation.country_code; }).map(function(d,i){return [d,d.latitude,d.longitude]; }));\n\n  let mono = monoCulture.init(closestFifty);\n\n  let monoText = \"is a pop music mono culture, with the same top song within a 45 minute drive of the city.\"\n\n  if (mono.length < 3){\n    console.log(\"mono culture\");\n  }\n  else {\n    monoText = `is a pop music melting pot, with a different #1 song depending on where you are. Each circle below represents the top song in a city.`\n    d3.select(\".non-mono-text\").html(`This musical diversity is similarly found in`)\n  }\n\n  d3.selectAll(\".mono-culture-text\").html(monoText);\n\n  let choroOutput = choro.init(data);\n\n  //#1s in your country (if 4 or more)\n\n  let countryCities = data[0].filter(d => { return closestLocation.country_code == d.country_code; });\n  let countryHitsUnfiltered = d3.rollups(countryCities, v => [v.length,v.length/countryCities.length,v], d => d.track_link)\n\n  let countryHits = countryHitsUnfiltered.filter(d => {\n    return d[1][0] > 4 && d[1][1] > .04;\n  })\n\n  //mini multiple?\n  if(countryHits.length < 2){\n\n    countryHits = countryHitsUnfiltered.filter(d => {\n      return d[1][0] > 1 && d[1][1] > .02;\n    })\n\n  }\n\n  if(countryHits.length > 1){\n\n    d3.selectAll(\".mini-multiple-count\").html(countryHits.length);\n\n    let countryBoundingBox = countryCodeToBounding.get(closestLocation.country_code)\n\n    let imageDiv = d3.select(\".mini-multiple\").selectAll(\"div\")\n      .data(countryHits)\n      .enter()\n      .append(\"div\")\n      .attr(\"class\",\"mini-multiple-image\")\n\n    imageDiv.append(\"p\")\n      .attr(\"class\",\"title\")\n      .html(function(d){\n        let backgroundColor = choroOutput.colorPallete.circleColorsMap.get(d[0]);\n        let color = d3.color(backgroundColor);\n        let colorRgba = \"rgba(\"+color.r+\",\"+color.g+\",\"+color.b+\",.5)\";\n        return `Where <span style=\"background-color:${colorRgba};\" data-link=\"${d[1][2][0].track_link}\" class=\"song-highlight\">${d[1][2][0].track_name} by ${d[1][2][0].artist_name} <svg width=\"\" height=\"\" version=\"1.1\" viewBox=\"20 10 40 26\"><path d=\"M 45,24 27,14 27,34\" fill=\"#f3dbba\"></path></svg></span> is most popular`;\n      })\n\n    imageDiv\n      .append(\"img\")\n      .attr(\"src\",function(d){\n        let circleColor = choroOutput.colorPallete.circleColorsMap.get(d[0]);\n        let trackLink = d[0];\n        let minZoom = 3;\n        let minSizeOne = 5;\n        let maxSizeOne = 8;\n        let defaultSizeOne = 5;\n        return `https://api.mapbox.com/styles/v1/dock4242/ckmyaewuc1mpa17ps87tjovv5/static/[${countryBoundingBox}]/900x500?access_token=pk.eyJ1IjoiZG9jazQyNDIiLCJhIjoiY2trOXV2MW9zMDExbTJvczFydTkxOTJvMiJ9.7qeHgJkUfxOaWEYtBGNU9w&addlayer={%22id%22:%22dot-overlay%22,%22type%22:%22circle%22,%22source%22:{%22type%22:%22vector%22,%22url%22:%22mapbox://dock4242.5yzufzos%22},%22source-layer%22:%22city_data_202103-6tvhr5%22,%22paint%22:{%22circle-color%22:%22${circleColor}%22,%22circle-radius%22:[%20%22interpolate%22,%20[%22linear%22],%20[%22zoom%22],%20${minZoom},%20[%20%22case%22,%20[%20%22==%22,%20[%20%22typeof%22,%20[%22get%22,%20%22views%22]%20],%20%22number%22%20],%20[%20%22interpolate%22,%20[%22linear%22],%20[%20%22number%22,%20[%22get%22,%20%22views%22]%20],%2050000,%20${minSizeOne},%201000000,%20${maxSizeOne}%20],%20${defaultSizeOne}%20],%208,%20[%20%22case%22,%20[%20%22==%22,%20[%20%22typeof%22,%20[%22get%22,%20%22views%22]%20],%20%22number%22%20],%20[%20%22interpolate%22,%20[%22linear%22],%20[%20%22number%22,%20[%22get%22,%20%22views%22]%20],%2050000,%2010,%201000000,%2020%20],%205%20]%20]},\"filter\":[\"all\",[\"match\",[\"get\",\"track_link\"],[${JSON.stringify(trackLink)}],true,false]]}`\n      })\n      .attr(\"alt\",function(d,i){\n        return `Map of ${countryCodeToString.get(closestLocation.country_code)} showing where ${d[1][2][0].track_name} by ${d[1][2][0].artist_name} is most popular`;\n      })\n      .style(\"max-width\",\"450px\")\n      .style(\"height\",\"auto\")\n\n  }\n\n  else {\n    d3.select(\".mini-mulitiple-text\").style(\"display\",\"none\")\n  }\n\n\n\n\n  //closest country\n\n  let closestCountry = closest.NearestCity(closestLocation.latitude,closestLocation.longitude,data[0]\n      .filter(function(d){\n        return d.country_code != closestLocation.country_code && [closestLocation.track_link,closestDifferent.track_link].indexOf(d.track_link) == -1 && countryHits.map(d => d[0]).indexOf(d.track_link) == -1;\n      })\n      .map(function(d,i){return [d,d.latitude,d.longitude]; }));\n\n\n  let mapCreated = await generateMap.fullMap(d3.selectAll(\".map-container\").node(),[closestLocation.longitude,closestLocation.latitude],data[0],closestCountry.track_name,choroOutput.colorPallete,choroOutput.filters,8);\n\n  mapCreated.once(\"mousedown\",function(d){\n    if(!d3.select(\"body\").classed(\"is-mobile\")){\n      d3.select(\".text-container\").classed(\"map-engaged\",true);\n    }\n  })\n\n\n  generateMap.filterForSpecific(closestLocation.track_name,\"#7f0101\")\n\n  d3.selectAll(\".diff-country-geo\").html(`${closestCountry.geo_name}, ${countryCodeToString.get(closestCountry.country_code)}`);\n  d3.selectAll(\".diff-country-song\").html(`&ldquo;${closestCountry.track_name}&rdquo; by ${closestCountry.artist_name}`);\n  d3.selectAll(\".diff-country-dist\").html(`${Math.round(closest.getDistanceFromLatLonInKm(closestCountry.latitude, closestCountry.longitude, closestLocation.latitude, closestLocation.longitude))}`);\n\n\n\n  //non monoculture\n\n  let songsToRemove = [closestLocation.track_link,closestDifferent.track_link, closestCountry.track_link].concat(countryHitsUnfiltered.filter(d => d[1][1] > .04).map(d => d[0]))\n\n  let nonMono = await generateHex.generateHex(data[0],choroOutput.colorPallete,closestLocation.country_code,songsToRemove);\n  let nonMonoInCountry = nonMono[0];\n  let nonMonoOutCountry = nonMono[1];\n  let bubbleDiffHex = nonMono[2];\n\n\n\n  //ensure it's far enough away from your location\n  nonMonoInCountry = nonMonoInCountry.filter(function(d){\n    let dist = closest.getDistanceFromLatLonInKm(closestLocation.latitude,closestLocation.longitude,d[1],d[0]);\n    return dist > 100;\n  })\n\n  let nonMonoSelected = null;\n  let nonMonoCenter = null;\n\n  if(nonMonoInCountry.length > 1){\n    nonMonoSelected = nonMonoInCountry[Math.floor(Math.random()*(nonMonoInCountry.length-1))];\n    nonMonoCenter = nonMonoSelected[2][0].sort(function(a,b){ return +b.views - +a.views})[0];\n  }\n  else {\n    nonMonoOutCountry = nonMonoOutCountry.filter(function(d){\n      d.dist = closest.getDistanceFromLatLonInKm(closestLocation.latitude,closestLocation.longitude,d[1],d[0]);\n      return d.dist > 50;\n    }).sort(function(a,b){\n      return a.dist - b.dist;\n    })\n\n    nonMonoSelected = nonMonoOutCountry[0];\n    nonMonoCenter = nonMonoSelected[2][0].sort(function(a,b){ return +b.views - +a.views})[0];\n  }\n\n\n\n\n\n  let bubbleDiffHexSelected = bubbleDiffHex[Math.floor(Math.random()*(bubbleDiffHex.length-1))];\n  let bubbleDiffHexCenter = bubbleDiffHexSelected[2][0].sort(function(a,b){ return +b.views - +a.views})[0];\n\n  console.log(nonMonoSelected);\n\n  d3.selectAll(\".non-mono-geo\").text(`${nonMonoCenter.geo_name}`);\n  d3.selectAll(\".non-mono-count\").text(`${nonMonoSelected[2][1]}`);\n\n\n\n\n  d3.selectAll(\".bubble-diff-hex-geo\").text(`${bubbleDiffHexCenter.geo_name}, ${countryCodeToString.get(bubbleDiffHexCenter.country_code).replace(\"the \",\"\")}`);\n\n\n  //sister cities\n\n  // let sisterCities = uniqueSongsMap.get(closestLocation.track_link)\n  //   .filter(function(d){\n  //     return d.country_code != closestLocation.country_code\n  //   })\n\n  // sisterCities.sort()\n  let sisterGeo = null;\n\n  let sisterCountries = data[1].filter(d => d.country_code != closestLocation.country_code && d.track_link == closestLocation.track_link )\n    .sort(function(a,b){\n      return +b.max_views - +a.max_views\n    }).filter(function(d){\n      let match = false;\n      let trackLink = d.track_link;\n      let countryCode = d.country_code;\n      let citiesInCountry = uniqueSongsCityOnlyMap.get(trackLink)\n        .filter(function(d){\n          return d.country_code == countryCode;\n        })\n      if(citiesInCountry.length > 0){\n        return d;\n      }\n    });\n\n  if(sisterCountries.length > 0){\n    sisterGeo = sisterCountries[0];\n    sisterGeo[\"geography\"] = \"country\";\n  }\n\n  else {\n    let sisterCities = data[0]\n      .filter(d => d.country_code != closestLocation.country_code && d.track_link == closestLocation.track_link )\n      .sort(function(a,b){ return +b.views - +a.views});\n\n\n    if(sisterCities.length > 0){\n      sisterGeo = sisterCities[0];\n      sisterGeo[\"geography\"] = \"city\";\n    }\n\n  }\n\n  console.log(sisterGeo);\n\n  if(sisterGeo){\n    let sisterDist = formatComma(Math.floor(closest.getDistanceFromLatLonInKm(closestLocation.latitude, closestLocation.longitude, sisterGeo.latitude, sisterGeo.longitude)));\n\n    d3.select(\".sister-distance\").text(`${sisterDist}`);\n    d3.select(\".sister-geo\").text(`${countryCodeToString.get(sisterGeo.country_code)}`)\n  }\n  else {\n    d3.select(\".sister-cities-text-wrapper\").style(\"display\",\"none\")\n    d3.select(\".sister-cities-step\").style(\"height\",\"1px\").style(\"display\",\"none\");\n  }\n\n\n  //opposite cities\n  //most popular song in the world not mentioned + count of cities\n\n  let bubbleHit = d3.rollups(dedupedData.filter(d => {\n    return songsToRemove.indexOf(d.track_link) == -1;\n  }), v => v.length, d => d.track_link).sort((a,b) => b[1] - a[1])[0][0];\n\n  let bubbleCountry = countryCodeToString.get(uniqueSongsMap.get(bubbleHit).sort(function(a,b){return +b.views - +a.views })[0].country_code);\n\n\n\n\n\n  let bubbleHitTrackInfo = uniqueSongsMap.get(bubbleHit)[0];\n  let bubbleHitName = `${bubbleHitTrackInfo.track_name} by ${bubbleHitTrackInfo.artist_name}`;\n\n  d3.select(\".bubble-hit-song\").attr(\"data-link\", `${bubbleHitTrackInfo.track_link}`).html(`${bubbleHitName}  <svg width=\"\" height=\"\" version=\"1.1\" viewBox=\"20 10 40 26\"><path d=\"M 45,24 27,14 27,34\" fill=\"#f3dbba\"></path></svg>`)\n  d3.select(\".bubble-hit-geo\").html(`${bubbleCountry}`);\n\n\n  //hexagons with different songs from what's been mentioned\n\n  // or countries with songs different than anywhere else in the world\n  // hexaongs with songs different than anywhere else in the world\n\n  let bubbleDiffCountry = countryRollups.filter(d => {\n    let match = true;\n    for (let song in d[2]){\n\n      if(songsToRemove.indexOf(d[2][song][0]) > -1){\n        match = false;\n      }\n    }\n    return match;\n  })\n\n  let bubbleDiffCountrySelected = bubbleDiffCountry[Math.floor(Math.random()*(bubbleDiffCountry.length-1))];\n  let bubbleDiffCountryBbox = countryCodeToBounding.get(bubbleDiffCountrySelected[0])\n  d3.selectAll(\".bubble-diff-country-geo\").html(countryCodeToString.get(bubbleDiffCountrySelected[0]));\n\n  d3.selectAll(\".song-highlight\")\n    .attr(\"tabindex\",0)\n    .on(\"click\", function(d){\n      player.playVideo(d3.select(this).attr(\"data-link\"));\n    })\n\n\n  let labelCrosswalk = {\n    \"location-closest\": {\n      text: `Where &ldquo;${closestLocation.track_name}&rdquo; by ${closestLocation.artist_name} is the most popular song`,\n      labelColor: choroOutput.colorPallete.labelColorsMap.get(closestLocation.track_link),\n      circleColor: choroOutput.colorPallete.circleColorsMap.get(closestLocation.track_link),\n      coors: [closestLocation.longitude,closestLocation.latitude],\n      track_name: closestLocation.track_name\n    },\n    \"location-diff\":{\n      text: `Where &ldquo;${closestDifferent.track_name}&rdquo; by ${closestDifferent.artist_name} is the most popular song`,\n      labelColor: choroOutput.colorPallete.labelColorsMap.get(closestDifferent.track_link),\n      circleColor: choroOutput.colorPallete.circleColorsMap.get(closestDifferent.track_link),\n      coors: [closestDifferent.longitude,closestDifferent.latitude],\n      track_name: closestDifferent.track_name\n    },\n    'all-dots': {\n      text: `The most popular song, by city`,\n      labelColor: null,\n      circleColor: null,\n      coors: [closestLocation.longitude,closestLocation.latitude],\n      track_name: null\n    },\n    'non-mono': {\n      text: `The most popular song, by city`,\n      labelColor: null,\n      circleColor: null,\n      coors: [+nonMonoCenter.longitude,+nonMonoCenter.latitude],\n      track_name: null,\n      zoom_level: 7\n    },\n    'international-border': {\n      text: `The most popular song, by city`,\n      labelColor: null,\n      circleColor: null,\n      coors: [+closestCountry.longitude,+closestCountry.latitude],\n      track_name: null,\n      zoom_level: 8\n    },\n    'international-hex': {\n      text: `The ${uniqueSongs.length} different #1 songs in the world, by location`,\n      labelColor: null,\n      circleColor: null,\n      coors: null,\n      track_name: null\n    },\n    \"sister-cities\": {\n      text: `The ${uniqueSongs.length} different #1 songs in the world, by location`,\n      labelColor: null,\n      circleColor: null,\n      coors: null,\n      track_name: null,\n      zoom_level: 8\n    },\n    \"bubble-hit\": {\n      text: `The ${uniqueSongs.length} different #1 songs in the world, by location`,\n      labelColor: choroOutput.colorPallete.labelColorsMap.get(bubbleHit),\n      circleColor: choroOutput.colorPallete.circleColorsMap.get(bubbleHit),\n      coors: null,\n      track_name: bubbleHitTrackInfo.track_name\n    },\n    \"bubble-diff-hex\": {\n      text: `The ${uniqueSongs.length} different #1 songs in the world, by location`,\n      labelColor: null,\n      circleColor: null,\n      coors: [+bubbleDiffHexCenter.longitude,+bubbleDiffHexCenter.latitude],\n      track_name: null,\n      zoom_level: 7\n    },\n    \"bubble-diff-country\": {\n      text: `The ${uniqueSongs.length} different #1 songs in the world, by location`,\n      labelColor: null,\n      circleColor: null,\n      coors: null,\n      track_name: null\n    }\n  }\n\n  if(sisterGeo){\n    labelCrosswalk[\"sister-cities\"] = {\n      text: `The ${uniqueSongs.length} different #1 songs in the world, by location`,\n      labelColor: null,\n      circleColor: null,\n      coors: [sisterGeo.longitude,sisterGeo.latitude],\n      track_name: null,\n      zoom_level: 8\n    }\n  }\n\n  let adjust = d3.scaleLinear().domain([0,1]).range([0,50]);\n  // let height = fixedMap.node().offsetHeight\n\n  let offsetValue = 1;\n  if(d3.select(\"body\").classed(\"is-mobile\")){\n    offsetValue = Math.floor(window.innerHeight) + \"px\";\n  }\n\n // setup the instance, pass callback functions\n  scroller\n    .setup({\n      step: \".step\",\n      progress: true,\n      offset: offsetValue,\n      order: false\n    })\n    .onStepProgress((response) => {\n      // let offset = -height/2 + -(Math.round(adjust(response.progress)))\n      chartTitle.style(\"transform\",`translate3d(0,${-(Math.round(adjust(response.progress)))}px,0)`);\n      // fixedMap.style(\"transform\",`translate3d(0,${offset}px,0)`);\n\n      //fixedMap.style(\"transform\",`translate3d(0,calc(-50% + ${-(Math.round(adjust(response.progress)))}px),0)`);\n    })\n    .onStepEnter((response) => {\n\n\n      player.onClose();\n\n      let geo = d3.select(response.element).attr(\"data-geo\");\n      console.log(\"entering\",geo);\n\n      if(flyToTimeout){\n        clearTimeout(flyToTimeout);\n      }\n\n      if([\"location-closest\",\"location-diff\"].indexOf(geo) > -1){\n\n        d3.selectAll(\".chart-title\").select(\".chart-hed\").select(\"span\").style(\"color\",labelCrosswalk[geo].labelColor).html(labelCrosswalk[geo].text)\n        generateMap.easeTo(labelCrosswalk[geo].coors,7,2000)\n\n        generateMap.filterForSpecific(labelCrosswalk[geo].track_name,labelCrosswalk[geo].circleColor,labelCrosswalk[geo].labelColor)\n\n      }\n      else if (geo == 'all-dots'){\n        generateMap.removeFilters(choroOutput.colorPallete);\n        d3.selectAll(\".chart-title\").select(\".chart-hed\").select(\"span\").style(\"color\",\"#333\").html(labelCrosswalk[geo].text)\n        generateMap.easeTo(labelCrosswalk[geo].coors,7,2000)\n      }\n\n      else if ([\"non-mono\",\"international-border\",\"bubble-diff-hex\"].indexOf(geo) > -1){\n        generateMap.removeFilters(choroOutput.colorPallete);\n        d3.selectAll(\".chart-title\").select(\".chart-hed\").select(\"span\").style(\"color\",\"#333\").html(labelCrosswalk[geo].text)\n\n\n        generateMap.showLayer('country-line')\n\n        if(response.direction == \"down\"){\n          generateMap.easeTo(labelCrosswalk[geo].coors,2,1000)\n\n          mapCreated.once(\"moveend\",function(d){\n            generateMap.easeTo(labelCrosswalk[geo].coors,labelCrosswalk[geo].zoom_level,4000)\n          })\n        }\n        else {\n          generateMap.jumpTo(labelCrosswalk[geo].coors,8)\n        }\n      }\n\n      else if (geo == \"international-hex\"){\n        // generateMap.hideLayer('dots')\n        mapCreated.fitBounds([\n          [-129.550781,-38.548165],\n          [151.347656,51.508742]\n        ], { duration: 3000 });\n        // generateMap.jumpTo([closestLocation.longitude,closestLocation.latitude],2)\n        if(!hexLayerAdded){\n          generateMap.addHexLayer();\n          hexLayerAdded = true;\n        }\n        else {\n          generateMap.showLayer('heatmap')\n        }\n      }\n\n      else if (geo == 'sister-cities'){\n        if(sisterGeo){\n\n          generateMap.removeFilters(choroOutput.colorPallete);\n          generateMap.unfilterHex(data[0])\n\n          console.log(sisterGeo);\n\n\n          if(sisterGeo[\"geography\"] == \"country\"){\n\n            let bbox = countryCodeToBounding.get(sisterGeo.country_code).split(\",\").map(d => +d.trim());\n\n            mapCreated.fitBounds([[bbox[0],bbox[1]],[bbox[2],bbox[3]]]);\n          }\n          else {\n\n\n            generateMap.easeTo(labelCrosswalk[geo].coors,2,1000)\n\n            mapCreated.once(\"moveend\",function(d){\n              generateMap.easeTo(labelCrosswalk[geo].coors,labelCrosswalk[geo].zoom_level,4000)\n            })\n\n          }\n        }\n      }\n\n      else if (geo == 'bubble-hit'){\n\n        mapCreated.fitBounds([\n          [-129.550781,-38.548165],\n          [151.347656,51.508742]\n        ], {\n          duration: 0\n        });\n\n        let filteredData = data[0].filter(d => d.track_link == bubbleHit);\n\n        let hexColor = d3.color(labelCrosswalk[geo].circleColor);\n\n        if(hexLayerAdded){\n          generateMap.showLayer('heatmap')\n          generateMap.filterHex(filteredData,[hexColor.r,hexColor.g,hexColor.b]);\n        }\n        else {\n          generateMap.addHexLayer();\n          hexLayerAdded = true;\n\n          generateMap.filterHex(filteredData, [hexColor.r,hexColor.g,hexColor.b]);\n        }\n\n        generateMap.filterForSpecific(labelCrosswalk[geo].track_name,labelCrosswalk[geo].circleColor,labelCrosswalk[geo].labelColor)\n\n      }\n      else if (geo == 'bubble-diff-country'){\n\n        generateMap.removeFilters(choroOutput.colorPallete);\n        generateMap.unfilterHex(data[0])\n\n        let bbox = bubbleDiffCountryBbox.split(\",\").map(d => +d.trim());\n\n        mapCreated.fitBounds([[bbox[0],bbox[1]],[bbox[2],bbox[3]]], {\n          padding: {top: 25, bottom:25, left: 25, right: 25},\n          maxZoom: 8\n        });\n\n      }\n\n\n      if(geo != 'international-border'){\n        generateMap.hideLayer('country-line')\n      }\n\n      if(['international-hex','bubble-hit'].indexOf(geo) == -1){\n        if(hexLayerAdded){\n          generateMap.hideLayer('heatmap')\n        }\n      }\n\n      if(d3.select(\"body\").classed(\"is-mobile\")){\n        mapCreated.dragPan.disable();\n        mapCreated.scrollZoom.disable()\n      }\n\n\n    })\n    .onStepExit((response) => {\n      player.onClose();\n    });\n\n\n    if(d3.select(\"body\").classed(\"is-mobile\")){\n      // d3.selectAll(\".step\").on(\"dblclick\",function(){\n      //   generateMap.makeFullScreen();\n      // })\n      d3.selectAll(\".step\").on(\"click\",function(){\n        generateMap.makeFullScreen();\n      })\n    }\n\n    footer.init();\n    window.addEventListener(\"resize\", scroller.resize);\n\n\n}\n\ninit();\n","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nvar self_ = globals.self || globals.window || globals.global;\nvar window_ = globals.window || globals.self || globals.global;\nvar global_ = globals.global || globals.self || globals.window;\nvar document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport var isBrowser = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) !== 'object' || String(process) !== '[object process]' || process.browser;\nexport var isWorker = typeof importScripts === 'function';\nvar matches = typeof process !== 'undefined' && process.version && process.version.match(/v([0-9]*)/);\nexport var nodeVersion = matches && parseFloat(matches[1]) || 0;\n//# sourceMappingURL=globals.js.map"],"sourceRoot":""}